{"ast":null,"code":"/* eslint-disable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n/**\n * MaskedTextBox base module\n */\nimport { EventHandler, isNullOrUndefined, merge, attributes, addClass, removeClass, Browser, extend } from '@syncfusion/ej2-base';\nimport { Input } from '../../input/input';\nvar ERROR = 'e-error';\nvar INPUTGROUP = 'e-input-group';\nvar FLOATINPUT = 'e-float-input';\nvar UTILMASK = 'e-utility-mask';\nvar TOPLABEL = 'e-label-top';\nvar BOTTOMLABEL = 'e-label-bottom';\n/**\n * @hidden\n * Built-in masking elements collection.\n */\nexport var regularExpressions = {\n  '0': '[0-9]',\n  '9': '[0-9 ]',\n  '#': '[0-9 +-]',\n  'L': '[A-Za-z]',\n  '?': '[A-Za-z ]',\n  '&': '[^\\x7f ]+',\n  'C': '[^\\x7f]+',\n  'A': '[A-Za-z0-9]',\n  'a': '[A-Za-z0-9 ]'\n};\n/**\n * Generate required masking elements to the MaskedTextBox from user mask input.\n *\n * @hidden\n */\nexport function createMask() {\n  attributes(this.element, {\n    'role': 'textbox',\n    'autocomplete': 'off',\n    'autocapitalize': 'off',\n    'spellcheck': 'false',\n    'aria-live': 'assertive'\n  });\n  if (this.mask) {\n    var splitMask = this.mask.split(']');\n    for (var i = 0; i < splitMask.length; i++) {\n      if (splitMask[i][splitMask[i].length - 1] === '\\\\') {\n        splitMask[i] = splitMask[i] + ']';\n        var splitInnerMask = splitMask[i].split('[');\n        for (var j = 0; j < splitInnerMask.length; j++) {\n          if (splitInnerMask[j][splitInnerMask[j].length - 1] === '\\\\') {\n            splitInnerMask[j] = splitInnerMask[j] + '[';\n          }\n          pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n        }\n      } else {\n        var splitInnerMask = splitMask[i].split('[');\n        if (splitInnerMask.length > 1) {\n          var chkSpace = false;\n          for (var j = 0; j < splitInnerMask.length; j++) {\n            if (splitInnerMask[j] === '\\\\') {\n              this.customRegExpCollec.push('[');\n              this.hiddenMask += splitInnerMask[j] + '[';\n            } else if (splitInnerMask[j] === '') {\n              chkSpace = true;\n            } else if (splitInnerMask[j] !== '' && chkSpace || j === splitInnerMask.length - 1) {\n              this.customRegExpCollec.push('[' + splitInnerMask[j] + ']');\n              this.hiddenMask += this.promptChar;\n              chkSpace = false;\n            } else {\n              pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n            }\n          }\n        } else {\n          pushIntoRegExpCollec.call(this, splitInnerMask[0]);\n        }\n      }\n    }\n    this.escapeMaskValue = this.hiddenMask;\n    this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar);\n    if (!isNullOrUndefined(this.customCharacters)) {\n      for (var i = 0; i < this.promptMask.length; i++) {\n        if (!isNullOrUndefined(this.customCharacters[this.promptMask[i]])) {\n          /* eslint-disable-next-line security/detect-non-literal-regexp */\n          this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[i], 'g'), this.promptChar);\n        }\n      }\n    }\n    var escapeNumber = 0;\n    if (this.hiddenMask.match(new RegExp(/\\\\/))) {\n      for (var i = 0; i < this.hiddenMask.length; i++) {\n        var j = 0;\n        if (i >= 1) {\n          j = i;\n        }\n        escapeNumber = this.hiddenMask.length - this.promptMask.length;\n        j = j - escapeNumber;\n        if (i > 0 && this.hiddenMask[i - 1] !== '\\\\' && (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|')) {\n          this.promptMask = this.promptMask.substring(0, j) + this.promptMask.substring(i + 1 - escapeNumber, this.promptMask.length);\n          this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue.substring(i + 1 - escapeNumber, this.escapeMaskValue.length);\n        }\n        if (this.hiddenMask[i] === '\\\\') {\n          this.promptMask = this.promptMask.substring(0, j) + this.hiddenMask[i + 1] + this.promptMask.substring(i + 2 - escapeNumber, this.promptMask.length);\n          this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue[i + 1] + this.escapeMaskValue.substring(i + 2 - escapeNumber, this.escapeMaskValue.length);\n        }\n      }\n    } else {\n      this.promptMask = this.promptMask.replace(/[>|<]/g, '');\n      this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, '');\n    }\n    attributes(this.element, {\n      'aria-invalid': 'false'\n    });\n  }\n}\n/**\n * Apply mask ability with masking elements to the MaskedTextBox.\n *\n * @hidden\n */\nexport function applyMask() {\n  setElementValue.call(this, this.promptMask);\n  setMaskValue.call(this, this.value);\n}\n/**\n * To wire required events to the MaskedTextBox.\n *\n * @hidden\n */\nexport function wireEvents() {\n  EventHandler.add(this.element, 'keydown', maskInputKeyDownHandler, this);\n  EventHandler.add(this.element, 'keypress', maskInputKeyPressHandler, this);\n  EventHandler.add(this.element, 'keyup', maskInputKeyUpHandler, this);\n  EventHandler.add(this.element, 'input', maskInputHandler, this);\n  EventHandler.add(this.element, 'focus', maskInputFocusHandler, this);\n  EventHandler.add(this.element, 'blur', maskInputBlurHandler, this);\n  EventHandler.add(this.element, 'paste', maskInputPasteHandler, this);\n  EventHandler.add(this.element, 'cut', maskInputCutHandler, this);\n  EventHandler.add(this.element, 'drop', maskInputDropHandler, this);\n  EventHandler.add(this.element, 'mousedown', maskInputMouseDownHandler, this);\n  EventHandler.add(this.element, 'mouseup', maskInputMouseUpHandler, this);\n  if (this.enabled) {\n    bindClearEvent.call(this);\n    if (this.formElement) {\n      EventHandler.add(this.formElement, 'reset', resetFormHandler, this);\n    }\n  }\n}\n/**\n * To unwire events attached to the MaskedTextBox.\n *\n * @hidden\n */\nexport function unwireEvents() {\n  EventHandler.remove(this.element, 'keydown', maskInputKeyDownHandler);\n  EventHandler.remove(this.element, 'keypress', maskInputKeyPressHandler);\n  EventHandler.remove(this.element, 'keyup', maskInputKeyUpHandler);\n  EventHandler.remove(this.element, 'input', maskInputHandler);\n  EventHandler.remove(this.element, 'focus', maskInputFocusHandler);\n  EventHandler.remove(this.element, 'blur', maskInputBlurHandler);\n  EventHandler.remove(this.element, 'paste', maskInputPasteHandler);\n  EventHandler.remove(this.element, 'cut', maskInputCutHandler);\n  EventHandler.remove(this.element, 'drop', maskInputDropHandler);\n  EventHandler.remove(this.element, 'mousedown', maskInputMouseDownHandler);\n  EventHandler.remove(this.element, 'mouseup', maskInputMouseUpHandler);\n  if (this.formElement) {\n    EventHandler.remove(this.formElement, 'reset', resetFormHandler);\n  }\n}\n/**\n * To bind required events to the MaskedTextBox clearButton.\n *\n * @hidden\n */\nexport function bindClearEvent() {\n  if (this.showClearButton) {\n    EventHandler.add(this.inputObj.clearButton, 'mousedown touchstart', resetHandler, this);\n  }\n}\nfunction resetHandler(e) {\n  e.preventDefault();\n  if (!this.inputObj.clearButton.classList.contains('e-clear-icon-hide') || this.inputObj.container.classList.contains('e-static-clear')) {\n    clear.call(this, e);\n    this.value = '';\n  }\n}\nfunction clear(event) {\n  var value = this.element.value;\n  setElementValue.call(this, this.promptMask);\n  this.redoCollec.unshift({\n    value: this.promptMask,\n    startIndex: this.element.selectionStart,\n    endIndex: this.element.selectionEnd\n  });\n  triggerMaskChangeEvent.call(this, event, value);\n  this.element.setSelectionRange(0, 0);\n}\nfunction resetFormHandler() {\n  if (this.element.tagName === 'EJS-MASKEDTEXTBOX') {\n    setElementValue.call(this, this.promptMask);\n  } else {\n    this.value = this.initInputValue;\n  }\n}\n/**\n * To get masked value from the MaskedTextBox.\n *\n * @hidden\n */\nexport function unstrippedValue(element) {\n  return element.value;\n}\n/**\n * To extract raw value from the MaskedTextBox.\n *\n * @hidden\n */\nexport function strippedValue(element, maskValues) {\n  var value = '';\n  var k = 0;\n  var checkMask = false;\n  var maskValue = !isNullOrUndefined(maskValues) ? maskValues : !isNullOrUndefined(element) && !isNullOrUndefined(this) ? element.value : maskValues;\n  if (maskValue !== this.promptMask) {\n    for (var i = 0; i < this.customRegExpCollec.length; i++) {\n      if (checkMask) {\n        checkMask = false;\n      }\n      if (this.customRegExpCollec[k] === '>' || this.customRegExpCollec[k] === '<' || this.customRegExpCollec[k] === '|' || this.customRegExpCollec[k] === '\\\\') {\n        --i;\n        checkMask = true;\n      }\n      if (!checkMask) {\n        if (maskValue[i] !== this.promptChar && !isNullOrUndefined(this.customRegExpCollec[k]) && (this._callPasteHandler || !isNullOrUndefined(this.regExpCollec[this.customRegExpCollec[k]]) && !this.maskedRegExp.includes(this.customRegExpCollec[k]) || this.customRegExpCollec[k].length > 2 && this.customRegExpCollec[k][0] === '[' && this.customRegExpCollec[k][this.customRegExpCollec[k].length - 1] === ']' || !isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[this.customRegExpCollec[k]])) && maskValue !== '') {\n          value += maskValue[i];\n        }\n      }\n      ++k;\n    }\n  }\n  if (this.mask === null || this.mask === '' && this.value !== undefined) {\n    value = maskValue;\n  }\n  return value;\n}\nfunction pushIntoRegExpCollec(value) {\n  for (var k = 0; k < value.length; k++) {\n    this.hiddenMask += value[k];\n    if (value[k] !== '\\\\') {\n      this.customRegExpCollec.push(value[k]);\n    } else if (value[k] === '\\\\' && !isNullOrUndefined(this.regExpCollec[value[k + 1]])) {\n      this.maskedRegExp.push(value[k + 1]);\n    }\n  }\n}\nexport function maskInputMouseDownHandler() {\n  this.isClicked = true;\n}\nexport function maskInputMouseUpHandler() {\n  this.isClicked = false;\n}\nexport function maskInputFocusHandler(event) {\n  var _this = this;\n  var inputElement = this.element;\n  var startIndex = 0;\n  var modelValue = strippedValue.call(this, inputElement);\n  var toAllowForward = false;\n  var toAllowBackward = false;\n  var eventArgs = {\n    selectionStart: inputElement.selectionStart,\n    event: event,\n    value: this.value,\n    maskedValue: inputElement.value,\n    container: !isNullOrUndefined(this.inputObj) ? this.inputObj.container : this.inputObj,\n    selectionEnd: inputElement.selectionEnd\n  };\n  if (!this.isClicked) {\n    triggerFocus.call(this, eventArgs, inputElement);\n  }\n  if (this.mask) {\n    if (!(!(modelValue === null || modelValue === '') || this.floatLabelType === 'Always' || this.placeholder === null || this.placeholder === '')) {\n      inputElement.value = this.promptMask;\n    }\n    setTimeout(function () {\n      if (inputElement.selectionStart === _this.promptMask.length || inputElement.value[inputElement.selectionStart] === _this.promptChar) {\n        toAllowForward = true;\n      } else {\n        for (var i = inputElement.selectionStart; i < _this.promptMask.length; i++) {\n          if (inputElement.value[i] !== _this.promptChar) {\n            if (inputElement.value[i] !== _this.promptMask[i]) {\n              toAllowForward = false;\n              break;\n            }\n          } else {\n            toAllowForward = true;\n            break;\n          }\n        }\n      }\n    });\n    setTimeout(function () {\n      var backSelectionStart = inputElement.selectionStart - 1;\n      if (backSelectionStart === _this.promptMask.length - 1 || inputElement.value[backSelectionStart] === _this.promptChar) {\n        toAllowBackward = true;\n      } else {\n        for (var i = backSelectionStart; i >= 0; i--) {\n          if (inputElement.value[i] !== _this.promptChar) {\n            if (inputElement.value[i] !== _this.promptMask[i]) {\n              toAllowBackward = false;\n              break;\n            }\n          } else {\n            toAllowBackward = true;\n            break;\n          }\n        }\n      }\n    });\n    if (this.isClicked || this.floatLabelType !== 'Always' && (modelValue === null || modelValue === '') && this.placeholder !== null && this.placeholder !== '') {\n      for (startIndex = 0; startIndex < this.promptMask.length; startIndex++) {\n        if (inputElement.value[startIndex] === this.promptChar) {\n          setTimeout(function () {\n            if (toAllowForward || toAllowBackward) {\n              inputElement.selectionEnd = startIndex;\n              inputElement.selectionStart = startIndex;\n            }\n            eventArgs = {\n              selectionStart: inputElement.selectionStart,\n              event: event,\n              value: _this.value,\n              maskedValue: inputElement.value,\n              container: !isNullOrUndefined(_this.inputObj) ? _this.inputObj.container : _this.inputObj,\n              selectionEnd: inputElement.selectionEnd\n            };\n            triggerFocus.call(_this, eventArgs, inputElement);\n          }, 110);\n          break;\n        }\n      }\n      if (isNullOrUndefined(inputElement.value.match(escapeRegExp(this.promptChar)))) {\n        eventArgs = {\n          selectionStart: inputElement.selectionStart,\n          event: event,\n          value: this.value,\n          maskedValue: inputElement.value,\n          container: !isNullOrUndefined(this.inputObj) ? this.inputObj.container : this.inputObj,\n          selectionEnd: inputElement.selectionEnd\n        };\n        triggerFocus.call(this, eventArgs, inputElement);\n      }\n      this.isClicked = false;\n    }\n  }\n}\nexport function triggerFocus(eventArgs, inputElement) {\n  this.trigger('focus', eventArgs, function (eventArgs) {\n    inputElement.selectionStart = eventArgs.selectionStart;\n    inputElement.selectionEnd = eventArgs.selectionEnd;\n  });\n}\nexport function escapeRegExp(text) {\n  return !isNullOrUndefined(text) ? text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&') : text;\n}\nexport function maskInputBlurHandler(event) {\n  this.blurEventArgs = {\n    event: event,\n    value: this.value,\n    maskedValue: this.element.value,\n    container: !isNullOrUndefined(this.inputObj) ? this.inputObj.container : this.inputObj\n  };\n  this.trigger('blur', this.blurEventArgs);\n  if (this.mask) {\n    this.isFocus = false;\n    if (this.placeholder && this.element.value === this.promptMask && this.floatLabelType !== 'Always') {\n      setElementValue.call(this, '');\n      var labelElement = this.element.parentNode.querySelector('.e-float-text');\n      if (this.floatLabelType === 'Auto' && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL)) {\n        removeClass([labelElement], TOPLABEL);\n      }\n    }\n  }\n}\nfunction maskInputPasteHandler(event) {\n  var _this = this;\n  if (this.mask && !this.readonly) {\n    var sIndex_1 = this.element.selectionStart;\n    var eIndex_1 = this.element.selectionEnd;\n    var oldValue_1 = this.element.value;\n    setElementValue.call(this, '');\n    this._callPasteHandler = true;\n    setTimeout(function () {\n      var value = _this.element.value.replace(/ /g, '');\n      if (_this.redoCollec.length > 0 && _this.redoCollec[0].value === _this.element.value) {\n        value = strippedValue.call(_this, _this.element);\n      }\n      setElementValue.call(_this, oldValue_1);\n      _this.element.selectionStart = sIndex_1;\n      _this.element.selectionEnd = eIndex_1;\n      var i = 0;\n      _this.maskKeyPress = true;\n      do {\n        validateValue.call(_this, value[i], false, null);\n        ++i;\n      } while (i < value.length);\n      _this.maskKeyPress = false;\n      _this._callPasteHandler = false;\n      if (_this.element.value === oldValue_1) {\n        var i_1 = 0;\n        _this.maskKeyPress = true;\n        do {\n          validateValue.call(_this, value[i_1], false, null);\n          ++i_1;\n        } while (i_1 < value.length);\n        _this.maskKeyPress = false;\n      } else {\n        triggerMaskChangeEvent.call(_this, event, oldValue_1);\n      }\n    }, 1);\n  }\n}\nfunction maskInputCutHandler(event) {\n  var _this = this;\n  if (this.mask && !this.readonly) {\n    var preValue_1 = this.element.value;\n    var sIndex_2 = this.element.selectionStart;\n    var eIndex = this.element.selectionEnd;\n    this.undoCollec.push({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: this.element.selectionEnd\n    });\n    var value_1 = this.element.value.substring(0, sIndex_2) + this.promptMask.substring(sIndex_2, eIndex) + this.element.value.substring(eIndex);\n    setTimeout(function () {\n      setElementValue.call(_this, value_1);\n      _this.element.selectionStart = _this.element.selectionEnd = sIndex_2;\n      if (_this.element.value !== preValue_1) {\n        triggerMaskChangeEvent.call(_this, event, null);\n      }\n    }, 0);\n  }\n}\nexport function maskInputDropHandler(event) {\n  event.preventDefault();\n}\nfunction maskInputHandler(event) {\n  if (Browser.isIE === true && this.element.value === '' && this.floatLabelType === 'Never') {\n    return;\n  }\n  var eventArgs = {\n    ctrlKey: false,\n    keyCode: 229\n  };\n  extend(event, eventArgs);\n  if (this.mask) {\n    if (this.element.value === '') {\n      this.redoCollec.unshift({\n        value: this.promptMask,\n        startIndex: this.element.selectionStart,\n        endIndex: this.element.selectionEnd\n      });\n    }\n    if (this.element.value.length === 1) {\n      this.element.value = this.element.value + this.promptMask;\n      this.element.setSelectionRange(1, 1);\n    }\n    if (!this._callPasteHandler) {\n      removeMaskInputValues.call(this, event);\n    }\n    if (this.element.value.length > this.promptMask.length) {\n      var startIndex = this.element.selectionStart;\n      var addedValues = this.element.value.length - this.promptMask.length;\n      var value = this.element.value.substring(startIndex - addedValues, startIndex);\n      this.maskKeyPress = false;\n      var i = 0;\n      do {\n        validateValue.call(this, value[i], event.ctrlKey, event);\n        ++i;\n      } while (i < value.length);\n      if (this.element.value !== this.preEleVal) {\n        triggerMaskChangeEvent.call(this, event, null);\n      }\n    }\n    var val = strippedValue.call(this, this.element);\n    this.prevValue = val;\n    this.value = val;\n    if (val === '') {\n      setElementValue.call(this, this.promptMask);\n      this.element.setSelectionRange(0, 0);\n    }\n  }\n}\nfunction maskInputKeyDownHandler(event) {\n  if (this.mask && !this.readonly) {\n    if (event.keyCode !== 229) {\n      if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n        event.preventDefault();\n      }\n      removeMaskInputValues.call(this, event);\n    }\n    var startValue = this.element.value;\n    if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n      var collec = void 0;\n      if (event.keyCode === 90 && this.undoCollec.length > 0 && startValue !== this.undoCollec[this.undoCollec.length - 1].value) {\n        collec = this.undoCollec[this.undoCollec.length - 1];\n        this.redoCollec.unshift({\n          value: this.element.value,\n          startIndex: this.element.selectionStart,\n          endIndex: this.element.selectionEnd\n        });\n        setElementValue.call(this, collec.value);\n        this.element.selectionStart = collec.startIndex;\n        this.element.selectionEnd = collec.endIndex;\n        this.undoCollec.splice(this.undoCollec.length - 1, 1);\n      } else if (event.keyCode === 89 && this.redoCollec.length > 0 && startValue !== this.redoCollec[0].value) {\n        collec = this.redoCollec[0];\n        this.undoCollec.push({\n          value: this.element.value,\n          startIndex: this.element.selectionStart,\n          endIndex: this.element.selectionEnd\n        });\n        setElementValue.call(this, collec.value);\n        this.element.selectionStart = collec.startIndex;\n        this.element.selectionEnd = collec.endIndex;\n        this.redoCollec.splice(0, 1);\n      }\n    }\n  }\n}\nexport function mobileRemoveFunction() {\n  var collec;\n  var sIndex = this.element.selectionStart;\n  var eIndex = this.element.selectionEnd;\n  if (this.redoCollec.length > 0) {\n    collec = this.redoCollec[0];\n    setElementValue.call(this, collec.value);\n    if (collec.startIndex - sIndex === 1) {\n      this.element.selectionStart = collec.startIndex;\n      this.element.selectionEnd = collec.endIndex;\n    } else {\n      this.element.selectionStart = sIndex + 1;\n      this.element.selectionEnd = eIndex + 1;\n    }\n  } else {\n    setElementValue.call(this, this.promptMask);\n    this.element.selectionStart = this.element.selectionEnd = sIndex;\n  }\n}\nfunction autoFillMaskInputValues(isRemove, oldEventVal, event) {\n  if (event.type === 'input') {\n    isRemove = false;\n    oldEventVal = this.element.value;\n    setElementValue.call(this, this.promptMask);\n    setMaskValue.call(this, oldEventVal);\n  }\n  return isRemove;\n}\nfunction removeMaskInputValues(event) {\n  var isRemove = false;\n  var oldEventVal;\n  var isDeleted = false;\n  if (this.element.value.length < this.promptMask.length) {\n    isRemove = true;\n    oldEventVal = this.element.value;\n    isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n    mobileRemoveFunction.call(this);\n  }\n  if (this.element.value.length >= this.promptMask.length && event.type === 'input') {\n    isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n  }\n  var initStartIndex = this.element.selectionStart;\n  var initEndIndex = this.element.selectionEnd;\n  var startIndex = this.element.selectionStart;\n  var endIndex = this.element.selectionEnd;\n  var maskValue = this.hiddenMask.replace(/[>|\\\\<]/g, '');\n  var curMask = maskValue[startIndex - 1];\n  var deleteEndIndex = this.element.selectionEnd;\n  if (isRemove || event.keyCode === 8 || event.keyCode === 46) {\n    this.undoCollec.push({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: endIndex\n    });\n    var multipleDel = false;\n    var preValue = this.element.value;\n    if (startIndex > 0 || (event.keyCode === 8 || event.keyCode === 46) && startIndex < this.element.value.length && this.element.selectionEnd - startIndex !== this.element.value.length) {\n      var index = startIndex;\n      if (startIndex !== endIndex) {\n        startIndex = endIndex;\n        if (event.keyCode === 46) {\n          multipleDel = true;\n        }\n      } else if (event.keyCode === 46) {\n        ++index;\n      } else {\n        --index;\n      }\n      for (var k = startIndex; event.keyCode === 8 || isRemove || multipleDel ? k > index : k < index; event.keyCode === 8 || isRemove || multipleDel ? k-- : k++) {\n        for (var i = startIndex; event.keyCode === 8 || isRemove || multipleDel ? i > 0 : i < this.element.value.length; event.keyCode === 8 || isRemove || multipleDel ? i-- : i++) {\n          var sIndex = void 0;\n          if ((event.keyCode === 8 || multipleDel) && (initStartIndex !== initEndIndex && initStartIndex !== startIndex || initStartIndex === initEndIndex) || isRemove) {\n            curMask = maskValue[i - 1];\n            sIndex = startIndex - 1;\n          } else {\n            curMask = maskValue[i];\n            sIndex = startIndex;\n            ++startIndex;\n          }\n          var oldValue = this.element.value[sIndex];\n          if (isNullOrUndefined(this.regExpCollec[\"\" + curMask]) && !isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[\"\" + curMask]) && this.hiddenMask[sIndex] !== this.promptChar && this.customRegExpCollec[sIndex][0] !== '[' && this.customRegExpCollec[sIndex][this.customRegExpCollec[sIndex].length - 1] !== ']' || this.promptMask[sIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters)) {\n            this.element.selectionStart = this.element.selectionEnd = sIndex;\n            event.preventDefault();\n            if (event.keyCode === 46 && !multipleDel) {\n              ++this.element.selectionStart;\n            }\n          } else {\n            var value = this.element.value;\n            var prompt_1 = this.promptChar;\n            var elementValue = value.substring(0, sIndex) + prompt_1 + value.substring(startIndex, value.length);\n            setElementValue.call(this, elementValue);\n            event.preventDefault();\n            if (event.keyCode === 46 && !multipleDel) {\n              sIndex++;\n            }\n            this.element.selectionStart = this.element.selectionEnd = sIndex;\n            isDeleted = true;\n          }\n          startIndex = this.element.selectionStart;\n          if (!isDeleted && event.keyCode === 8 || multipleDel || !isDeleted && !(event.keyCode === 46)) {\n            sIndex = startIndex - 1;\n          } else {\n            sIndex = startIndex;\n            isDeleted = false;\n          }\n          oldValue = this.element.value[sIndex];\n          if (initStartIndex !== initEndIndex && this.element.selectionStart === initStartIndex || this.promptMask[sIndex] === this.promptChar || oldValue !== this.promptMask[sIndex] && this.promptMask[sIndex] !== this.promptChar && !isNullOrUndefined(this.customCharacters)) {\n            break;\n          }\n        }\n      }\n    }\n    if (event.keyCode === 46 && multipleDel && isDeleted) {\n      this.element.selectionStart = this.element.selectionEnd = deleteEndIndex;\n    }\n    if (this.element.selectionStart === 0 && this.element.selectionEnd === this.element.value.length) {\n      setElementValue.call(this, this.promptMask);\n      event.preventDefault();\n      this.element.selectionStart = this.element.selectionEnd = startIndex;\n    }\n    this.redoCollec.unshift({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: this.element.selectionEnd\n    });\n    if (this.element.value !== preValue) {\n      triggerMaskChangeEvent.call(this, event, oldEventVal);\n    }\n  }\n}\nfunction maskInputKeyPressHandler(event) {\n  if (this.mask && !this.readonly) {\n    var oldValue = this.element.value;\n    if (!(event.ctrlKey || event.metaKey) || (event.ctrlKey || event.metaKey) && event.code !== 'KeyA' && event.code !== 'KeyY' && event.code !== 'KeyZ' && event.code !== 'KeyX' && event.code !== 'KeyC' && event.code !== 'KeyV') {\n      this.maskKeyPress = true;\n      var key = event.key;\n      if (key === 'Spacebar') {\n        key = String.fromCharCode(event.keyCode);\n      }\n      if (!key) {\n        this.isIosInvalid = true;\n        validateValue.call(this, String.fromCharCode(event.keyCode), event.ctrlKey, event);\n        event.preventDefault();\n        this.isIosInvalid = false;\n      } else if (key && key.length === 1) {\n        validateValue.call(this, key, event.ctrlKey, event);\n        event.preventDefault();\n      }\n      if (event.keyCode === 32 && key === ' ' && this.promptChar === ' ') {\n        this.element.selectionStart = this.element.selectionEnd = this.element.selectionStart - key.length;\n      }\n    }\n    if (this.element.value !== oldValue) {\n      triggerMaskChangeEvent.call(this, event, oldValue);\n    }\n  }\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction triggerMaskChangeEvent(event, oldValue) {\n  var prevOnChange = this.isProtectedOnChange;\n  if (!isNullOrUndefined(this.changeEventArgs) && !this.isInitial) {\n    var eventArgs = {};\n    this.changeEventArgs = {\n      value: this.element.value,\n      maskedValue: this.element.value,\n      isInteraction: false,\n      isInteracted: false\n    };\n    if (this.mask) {\n      this.changeEventArgs.value = strippedValue.call(this, this.element);\n    }\n    if (!isNullOrUndefined(event)) {\n      this.changeEventArgs.isInteracted = true;\n      this.changeEventArgs.isInteraction = true;\n      this.changeEventArgs.event = event;\n    }\n    this.isProtectedOnChange = true;\n    this.value = this.changeEventArgs.value;\n    this.isProtectedOnChange = prevOnChange;\n    merge(eventArgs, this.changeEventArgs);\n    /* istanbul ignore next */\n    if (this.isAngular && this.preventChange) {\n      this.preventChange = false;\n    } else {\n      this.trigger('change', eventArgs);\n    }\n  }\n  this.preEleVal = this.element.value;\n  this.prevValue = strippedValue.call(this, this.element);\n}\nfunction maskInputKeyUpHandler(event) {\n  if (this.mask && !this.readonly) {\n    var collec = void 0;\n    if (!this.maskKeyPress && event.keyCode === 229) {\n      var oldEventVal = void 0;\n      if (this.element.value.length === 1) {\n        this.element.value = this.element.value + this.promptMask;\n        this.element.setSelectionRange(1, 1);\n      }\n      if (this.element.value.length > this.promptMask.length) {\n        var startIndex = this.element.selectionStart;\n        var addedValues = this.element.value.length - this.promptMask.length;\n        var val_1 = this.element.value.substring(startIndex - addedValues, startIndex);\n        if (this.undoCollec.length > 0) {\n          collec = this.undoCollec[this.undoCollec.length - 1];\n          var startIndex_1 = this.element.selectionStart;\n          oldEventVal = collec.value;\n          var oldVal = collec.value.substring(startIndex_1 - addedValues, startIndex_1);\n          collec = this.redoCollec[0];\n          val_1 = val_1.trim();\n          var isSpace = Browser.isAndroid && val_1 === '';\n          if (!isSpace && oldVal !== val_1 && collec.value.substring(startIndex_1 - addedValues, startIndex_1) !== val_1) {\n            validateValue.call(this, val_1, event.ctrlKey, event);\n          } else if (isSpace) {\n            preventUnsupportedValues.call(this, event, startIndex_1 - 1, this.element.selectionEnd - 1, val_1, event.ctrlKey, false);\n          }\n        } else {\n          oldEventVal = this.promptMask;\n          validateValue.call(this, val_1, event.ctrlKey, event);\n        }\n        this.maskKeyPress = false;\n        triggerMaskChangeEvent.call(this, event, oldEventVal);\n      }\n    } else {\n      removeMaskError.call(this);\n    }\n    var val = strippedValue.call(this, this.element);\n    if (!(this.element.selectionStart === 0 && this.promptMask === this.element.value && val === '') || val === '' && this.value !== val) {\n      this.prevValue = val;\n      this.value = val;\n    }\n  } else {\n    triggerMaskChangeEvent.call(this, event);\n  }\n  if (this.element.selectionStart === 0 && this.element.selectionEnd === 0) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var temp_1 = this.element;\n    setTimeout(function () {\n      temp_1.setSelectionRange(0, 0);\n    }, 0);\n  }\n}\nfunction mobileSwipeCheck(key) {\n  if (key.length > 1 && this.promptMask.length + key.length < this.element.value.length) {\n    var elementValue = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + key + this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length);\n    setElementValue.call(this, elementValue);\n    this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + key.length;\n  }\n  this.element.selectionStart = this.element.selectionStart - key.length;\n  this.element.selectionEnd = this.element.selectionEnd - key.length;\n}\nfunction mobileValidation(key) {\n  if (!this.maskKeyPress) {\n    mobileSwipeCheck.call(this, key);\n  }\n}\nfunction validateValue(key, isCtrlKey, event) {\n  mobileValidation.call(this, key);\n  if (isNullOrUndefined(this) || isNullOrUndefined(key)) {\n    return;\n  }\n  var startIndex = this.element.selectionStart;\n  var initStartIndex = startIndex;\n  var curMask;\n  var allowText = false;\n  var value = this.element.value;\n  var eventOldVal;\n  var prevSupport = false;\n  var isEqualVal = false;\n  for (var k = 0; k < key.length; k++) {\n    var keyValue = key[k];\n    startIndex = this.element.selectionStart;\n    if (!this.maskKeyPress && initStartIndex === startIndex) {\n      startIndex = startIndex + k;\n    }\n    if (!this.maskKeyPress || startIndex < this.promptMask.length) {\n      for (var i = startIndex; i < this.promptMask.length; i++) {\n        var maskValue = this.escapeMaskValue;\n        curMask = maskValue[startIndex];\n        if (this.hiddenMask[startIndex] === '\\\\' && this.hiddenMask[startIndex + 1] === key) {\n          isEqualVal = true;\n        }\n        if (isNullOrUndefined(this.regExpCollec[\"\" + curMask]) && (isNullOrUndefined(this.customCharacters) || !isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[\"\" + curMask])) && this.hiddenMask[startIndex] !== this.promptChar && this.customRegExpCollec[startIndex][0] !== '[' && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] !== ']' || this.promptMask[startIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters) || this.promptChar === curMask && this.escapeMaskValue === this.mask) {\n          this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n          startIndex = this.element.selectionStart;\n          curMask = this.hiddenMask[startIndex];\n        }\n      }\n      if (!isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[\"\" + curMask])) {\n        var customValStr = this.customCharacters[\"\" + curMask];\n        var customValArr = customValStr.split(',');\n        for (var i = 0; i < customValArr.length; i++) {\n          /* eslint-disable-next-line security/detect-non-literal-regexp */\n          if (keyValue.match(new RegExp('[' + customValArr[i] + ']'))) {\n            allowText = true;\n            break;\n          }\n        }\n        /* eslint-disable-next-line security/detect-non-literal-regexp */\n      } else if (!isNullOrUndefined(this.regExpCollec[\"\" + curMask]) && keyValue.match(new RegExp(this.regExpCollec[\"\" + curMask])) && this.promptMask[startIndex] === this.promptChar) {\n        allowText = true;\n      } else if (this.promptMask[startIndex] === this.promptChar && this.customRegExpCollec[startIndex][0] === '[' && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] === ']'\n      /* eslint-disable-next-line security/detect-non-literal-regexp */ && keyValue.match(new RegExp(this.customRegExpCollec[startIndex]))) {\n        allowText = true;\n      }\n      if ((!this.maskKeyPress || startIndex < this.hiddenMask.length) && allowText) {\n        if (k === 0) {\n          if (this.maskKeyPress) {\n            this.undoCollec.push({\n              value: value,\n              startIndex: startIndex,\n              endIndex: startIndex\n            });\n          } else {\n            var sIndex = this.element.selectionStart;\n            var eIndex = this.element.selectionEnd;\n            if (this.redoCollec.length > 0) {\n              eventOldVal = this.redoCollec[0].value;\n              setElementValue.call(this, eventOldVal);\n              this.undoCollec.push(this.redoCollec[0]);\n            } else {\n              this.undoCollec.push({\n                value: this.promptMask,\n                startIndex: startIndex,\n                endIndex: startIndex\n              });\n              eventOldVal = this.promptMask;\n              setElementValue.call(this, eventOldVal);\n            }\n            this.element.selectionStart = sIndex;\n            this.element.selectionEnd = eIndex;\n          }\n        }\n        startIndex = this.element.selectionStart;\n        applySupportedValues.call(this, event, startIndex, keyValue, eventOldVal, isEqualVal);\n        prevSupport = true;\n        if (k === key.length - 1) {\n          this.redoCollec.unshift({\n            value: this.element.value,\n            startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n          });\n        }\n        allowText = false;\n      } else {\n        startIndex = this.element.selectionStart;\n        preventUnsupportedValues.call(this, event, startIndex, initStartIndex, key, isCtrlKey, prevSupport);\n      }\n      if (k === key.length - 1 && !allowText) {\n        if (!Browser.isAndroid || Browser.isAndroid && startIndex < this.promptMask.length) {\n          this.redoCollec.unshift({\n            value: this.element.value,\n            startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n          });\n        }\n      }\n    } else {\n      if (key.length === 1 && !isCtrlKey && !isNullOrUndefined(event)) {\n        addMaskErrorClass.call(this);\n      }\n    }\n  }\n}\nfunction applySupportedValues(event, startIndex, keyValue, eventOldVal, isEqualVal) {\n  if (this.hiddenMask.length > this.promptMask.length) {\n    keyValue = changeToLowerUpperCase.call(this, keyValue, this.element.value);\n  }\n  if (!isEqualVal) {\n    var value = this.element.value;\n    var elementValue = value.substring(0, startIndex) + keyValue + value.substring(startIndex + 1, value.length);\n    setElementValue.call(this, elementValue);\n    this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n  }\n}\nfunction preventUnsupportedValues(event, sIdx, idx, key, ctrl, chkSupport) {\n  if (!this.maskKeyPress) {\n    var value = this.element.value;\n    if (sIdx >= this.promptMask.length) {\n      setElementValue.call(this, value.substring(0, sIdx));\n    } else {\n      if (idx === sIdx) {\n        setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx + 1, value.length));\n      } else {\n        if (this.promptMask.length === this.element.value.length) {\n          setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx, value.length));\n        } else {\n          setElementValue.call(this, value.substring(0, idx) + value.substring(idx + 1, value.length));\n        }\n      }\n      this.element.selectionStart = this.element.selectionEnd = chkSupport || this.element.value[idx] !== this.promptChar ? sIdx : idx;\n    }\n    addMaskErrorClass.call(this);\n  }\n  if (key.length === 1 && !ctrl && !isNullOrUndefined(event)) {\n    addMaskErrorClass.call(this);\n  }\n}\nfunction addMaskErrorClass() {\n  var _this = this;\n  var parentElement = this.element.parentNode;\n  var timer = 200;\n  if (parentElement.classList.contains(INPUTGROUP) || parentElement.classList.contains(FLOATINPUT)) {\n    addClass([parentElement], ERROR);\n  } else {\n    addClass([this.element], ERROR);\n  }\n  if (this.isIosInvalid === true) {\n    timer = 400;\n  }\n  attributes(this.element, {\n    'aria-invalid': 'true'\n  });\n  setTimeout(function () {\n    if (!_this.maskKeyPress) {\n      removeMaskError.call(_this);\n    }\n  }, timer);\n}\nfunction removeMaskError() {\n  var parentElement = this.element.parentNode;\n  if (!isNullOrUndefined(parentElement)) {\n    removeClass([parentElement], ERROR);\n  }\n  removeClass([this.element], ERROR);\n  attributes(this.element, {\n    'aria-invalid': 'false'\n  });\n}\n/**\n * Validates user input using masking elements '<' , '>' and '|'.\n *\n * @hidden\n */\nfunction changeToLowerUpperCase(key, value) {\n  var promptMask;\n  var i;\n  var curVal = value;\n  var caseCount = 0;\n  for (i = 0; i < this.hiddenMask.length; i++) {\n    if (this.hiddenMask[i] === '\\\\') {\n      promptMask = curVal.substring(0, i) + '\\\\' + curVal.substring(i, curVal.length);\n    }\n    if (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|') {\n      if (this.hiddenMask[i] !== curVal[i]) {\n        promptMask = curVal.substring(0, i) + this.hiddenMask[i] + curVal.substring(i, curVal.length);\n      }\n      ++caseCount;\n    }\n    if (promptMask) {\n      if (promptMask[i] === this.promptChar && i > this.element.selectionStart || this.element.value.indexOf(this.promptChar) < 0 && this.element.selectionStart + caseCount === i) {\n        caseCount = 0;\n        break;\n      }\n      curVal = promptMask;\n    }\n  }\n  while (i >= 0 && promptMask) {\n    if (i === 0 || promptMask[i - 1] !== '\\\\') {\n      if (promptMask[i] === '>') {\n        key = key.toUpperCase();\n        break;\n      } else if (promptMask[i] === '<') {\n        key = key.toLowerCase();\n        break;\n      } else if (promptMask[i] === '|') {\n        break;\n      }\n    }\n    --i;\n  }\n  return key;\n}\n/**\n * To set updated values in the MaskedTextBox.\n *\n * @hidden\n */\nexport function setMaskValue(val) {\n  if (this.mask && val !== undefined && (this.prevValue === undefined || this.prevValue !== val)) {\n    this.maskKeyPress = true;\n    setElementValue.call(this, this.promptMask);\n    if (val !== '' && !(val === null && this.floatLabelType === 'Never' && this.placeholder)) {\n      this.element.selectionStart = 0;\n      this.element.selectionEnd = 0;\n    }\n    if (val !== null) {\n      for (var i = 0; i < val.length; i++) {\n        validateValue.call(this, val[i], false, null);\n      }\n    }\n    var newVal = strippedValue.call(this, this.element);\n    this.prevValue = newVal;\n    this.value = newVal;\n    triggerMaskChangeEvent.call(this, null, null);\n    this.maskKeyPress = false;\n    var labelElement = this.element.parentNode.querySelector('.e-float-text');\n    if (this.element.value === this.promptMask && this.floatLabelType === 'Auto' && this.placeholder && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL) && !this.isFocus) {\n      removeClass([labelElement], TOPLABEL);\n      addClass([labelElement], BOTTOMLABEL);\n      setElementValue.call(this, '');\n    }\n  }\n  if (this.mask === null || this.mask === '' && this.value !== undefined) {\n    setElementValue.call(this, this.value);\n  }\n}\n/**\n * To set updated values in the input element.\n *\n * @hidden\n */\nexport function setElementValue(val, element) {\n  if (!this.isFocus && this.floatLabelType === 'Auto' && this.placeholder && isNullOrUndefined(this.value)) {\n    val = '';\n  }\n  var value = strippedValue.call(this, element ? element : this.element, val);\n  if (value === null || value === '') {\n    Input.setValue(val, element ? element : this.element, this.floatLabelType, false);\n    if (this.showClearButton) {\n      this.inputObj.clearButton.classList.add('e-clear-icon-hide');\n    }\n  } else {\n    Input.setValue(val, element ? element : this.element, this.floatLabelType, this.showClearButton);\n  }\n}\n/**\n * Provide mask support to input textbox through utility method.\n *\n * @hidden\n */\nexport function maskInput(args) {\n  var inputEle = getMaskInput(args);\n  applyMask.call(inputEle);\n  var val = strippedValue.call(this, this.element);\n  this.prevValue = val;\n  this.value = val;\n  if (args.mask) {\n    unwireEvents.call(inputEle);\n    wireEvents.call(inputEle);\n  }\n}\nfunction getMaskInput(args) {\n  addClass([args.element], UTILMASK);\n  var inputEle = {\n    element: args.element,\n    mask: args.mask,\n    promptMask: '',\n    hiddenMask: '',\n    escapeMaskValue: '',\n    promptChar: args.promptChar ? args.promptChar.length > 1 ? args.promptChar = args.promptChar[0] : args.promptChar : '_',\n    value: args.value ? args.value : null,\n    regExpCollec: regularExpressions,\n    customRegExpCollec: [],\n    customCharacters: args.customCharacters,\n    undoCollec: [],\n    redoCollec: [],\n    maskKeyPress: false,\n    prevValue: ''\n  };\n  createMask.call(inputEle);\n  return inputEle;\n}\n/**\n * Gets raw value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\nexport function getVal(args) {\n  return strippedValue.call(getUtilMaskEle(args), args.element);\n}\n/**\n * Gets masked value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\nexport function getMaskedVal(args) {\n  return unstrippedValue.call(getUtilMaskEle(args), args.element);\n}\nfunction getUtilMaskEle(args) {\n  var inputEle;\n  if (!isNullOrUndefined(args) && args.element.classList.contains(UTILMASK)) {\n    inputEle = getMaskInput(args);\n  }\n  return inputEle;\n}\n/**\n * Arguments to perform undo and redo functionalities.\n *\n * @hidden\n */\nvar MaskUndo = /** @class */function () {\n  function MaskUndo() {}\n  return MaskUndo;\n}();\nexport { MaskUndo };\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar maskUndo = new MaskUndo();\n/* eslint-enable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */","map":{"version":3,"names":["EventHandler","isNullOrUndefined","merge","attributes","addClass","removeClass","Browser","extend","Input","ERROR","INPUTGROUP","FLOATINPUT","UTILMASK","TOPLABEL","BOTTOMLABEL","regularExpressions","createMask","element","mask","splitMask","split","i","length","splitInnerMask","j","pushIntoRegExpCollec","call","chkSpace","customRegExpCollec","push","hiddenMask","promptChar","escapeMaskValue","promptMask","replace","customCharacters","RegExp","escapeNumber","match","substring","applyMask","setElementValue","setMaskValue","value","wireEvents","add","maskInputKeyDownHandler","maskInputKeyPressHandler","maskInputKeyUpHandler","maskInputHandler","maskInputFocusHandler","maskInputBlurHandler","maskInputPasteHandler","maskInputCutHandler","maskInputDropHandler","maskInputMouseDownHandler","maskInputMouseUpHandler","enabled","bindClearEvent","formElement","resetFormHandler","unwireEvents","remove","showClearButton","inputObj","clearButton","resetHandler","e","preventDefault","classList","contains","container","clear","event","redoCollec","unshift","startIndex","selectionStart","endIndex","selectionEnd","triggerMaskChangeEvent","setSelectionRange","tagName","initInputValue","unstrippedValue","strippedValue","maskValues","k","checkMask","maskValue","_callPasteHandler","regExpCollec","maskedRegExp","includes","undefined","isClicked","_this","inputElement","modelValue","toAllowForward","toAllowBackward","eventArgs","maskedValue","triggerFocus","floatLabelType","placeholder","setTimeout","backSelectionStart","escapeRegExp","trigger","text","blurEventArgs","isFocus","labelElement","parentNode","querySelector","readonly","sIndex_1","eIndex_1","oldValue_1","maskKeyPress","validateValue","i_1","preValue_1","sIndex_2","eIndex","undoCollec","value_1","isIE","ctrlKey","keyCode","removeMaskInputValues","addedValues","preEleVal","val","prevValue","startValue","collec","splice","mobileRemoveFunction","sIndex","autoFillMaskInputValues","isRemove","oldEventVal","type","isDeleted","initStartIndex","initEndIndex","curMask","deleteEndIndex","multipleDel","preValue","index","oldValue","prompt_1","elementValue","metaKey","code","key","String","fromCharCode","isIosInvalid","prevOnChange","isProtectedOnChange","changeEventArgs","isInitial","isInteraction","isInteracted","isAngular","preventChange","val_1","startIndex_1","oldVal","trim","isSpace","isAndroid","preventUnsupportedValues","removeMaskError","temp_1","mobileSwipeCheck","mobileValidation","isCtrlKey","allowText","eventOldVal","prevSupport","isEqualVal","keyValue","customValStr","customValArr","applySupportedValues","addMaskErrorClass","changeToLowerUpperCase","sIdx","idx","ctrl","chkSupport","parentElement","timer","curVal","caseCount","indexOf","toUpperCase","toLowerCase","newVal","setValue","maskInput","args","inputEle","getMaskInput","getVal","getUtilMaskEle","getMaskedVal","MaskUndo","maskUndo"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-inputs/src/maskedtextbox/base/mask-base.js"],"sourcesContent":["/* eslint-disable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n/**\n * MaskedTextBox base module\n */\nimport { EventHandler, isNullOrUndefined, merge, attributes, addClass, removeClass, Browser, extend } from '@syncfusion/ej2-base';\nimport { Input } from '../../input/input';\nvar ERROR = 'e-error';\nvar INPUTGROUP = 'e-input-group';\nvar FLOATINPUT = 'e-float-input';\nvar UTILMASK = 'e-utility-mask';\nvar TOPLABEL = 'e-label-top';\nvar BOTTOMLABEL = 'e-label-bottom';\n/**\n * @hidden\n * Built-in masking elements collection.\n */\nexport var regularExpressions = {\n    '0': '[0-9]',\n    '9': '[0-9 ]',\n    '#': '[0-9 +-]',\n    'L': '[A-Za-z]',\n    '?': '[A-Za-z ]',\n    '&': '[^\\x7f ]+',\n    'C': '[^\\x7f]+',\n    'A': '[A-Za-z0-9]',\n    'a': '[A-Za-z0-9 ]'\n};\n/**\n * Generate required masking elements to the MaskedTextBox from user mask input.\n *\n * @hidden\n */\nexport function createMask() {\n    attributes(this.element, {\n        'role': 'textbox', 'autocomplete': 'off', 'autocapitalize': 'off',\n        'spellcheck': 'false', 'aria-live': 'assertive'\n    });\n    if (this.mask) {\n        var splitMask = this.mask.split(']');\n        for (var i = 0; i < splitMask.length; i++) {\n            if (splitMask[i][splitMask[i].length - 1] === '\\\\') {\n                splitMask[i] = splitMask[i] + ']';\n                var splitInnerMask = splitMask[i].split('[');\n                for (var j = 0; j < splitInnerMask.length; j++) {\n                    if (splitInnerMask[j][splitInnerMask[j].length - 1] === '\\\\') {\n                        splitInnerMask[j] = splitInnerMask[j] + '[';\n                    }\n                    pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n                }\n            }\n            else {\n                var splitInnerMask = splitMask[i].split('[');\n                if (splitInnerMask.length > 1) {\n                    var chkSpace = false;\n                    for (var j = 0; j < splitInnerMask.length; j++) {\n                        if (splitInnerMask[j] === '\\\\') {\n                            this.customRegExpCollec.push('[');\n                            this.hiddenMask += splitInnerMask[j] + '[';\n                        }\n                        else if (splitInnerMask[j] === '') {\n                            chkSpace = true;\n                        }\n                        else if ((splitInnerMask[j] !== '' && chkSpace) || j === splitInnerMask.length - 1) {\n                            this.customRegExpCollec.push('[' + splitInnerMask[j] + ']');\n                            this.hiddenMask += this.promptChar;\n                            chkSpace = false;\n                        }\n                        else {\n                            pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n                        }\n                    }\n                }\n                else {\n                    pushIntoRegExpCollec.call(this, splitInnerMask[0]);\n                }\n            }\n        }\n        this.escapeMaskValue = this.hiddenMask;\n        this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar);\n        if (!isNullOrUndefined(this.customCharacters)) {\n            for (var i = 0; i < this.promptMask.length; i++) {\n                if (!isNullOrUndefined(this.customCharacters[this.promptMask[i]])) {\n                    /* eslint-disable-next-line security/detect-non-literal-regexp */\n                    this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[i], 'g'), this.promptChar);\n                }\n            }\n        }\n        var escapeNumber = 0;\n        if (this.hiddenMask.match(new RegExp(/\\\\/))) {\n            for (var i = 0; i < this.hiddenMask.length; i++) {\n                var j = 0;\n                if (i >= 1) {\n                    j = i;\n                }\n                escapeNumber = this.hiddenMask.length - this.promptMask.length;\n                j = j - escapeNumber;\n                if ((i > 0 && this.hiddenMask[i - 1] !== '\\\\') && (this.hiddenMask[i] === '>' ||\n                    this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|')) {\n                    this.promptMask = this.promptMask.substring(0, j) +\n                        this.promptMask.substring((i + 1) - escapeNumber, this.promptMask.length);\n                    this.escapeMaskValue = this.escapeMaskValue.substring(0, j) +\n                        this.escapeMaskValue.substring((i + 1) - escapeNumber, this.escapeMaskValue.length);\n                }\n                if (this.hiddenMask[i] === '\\\\') {\n                    this.promptMask = this.promptMask.substring(0, j) + this.hiddenMask[i + 1] +\n                        this.promptMask.substring((i + 2) - escapeNumber, this.promptMask.length);\n                    this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue[i + 1] +\n                        this.escapeMaskValue.substring((i + 2) - escapeNumber, this.escapeMaskValue.length);\n                }\n            }\n        }\n        else {\n            this.promptMask = this.promptMask.replace(/[>|<]/g, '');\n            this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, '');\n        }\n        attributes(this.element, { 'aria-invalid': 'false' });\n    }\n}\n/**\n * Apply mask ability with masking elements to the MaskedTextBox.\n *\n * @hidden\n */\nexport function applyMask() {\n    setElementValue.call(this, this.promptMask);\n    setMaskValue.call(this, this.value);\n}\n/**\n * To wire required events to the MaskedTextBox.\n *\n * @hidden\n */\nexport function wireEvents() {\n    EventHandler.add(this.element, 'keydown', maskInputKeyDownHandler, this);\n    EventHandler.add(this.element, 'keypress', maskInputKeyPressHandler, this);\n    EventHandler.add(this.element, 'keyup', maskInputKeyUpHandler, this);\n    EventHandler.add(this.element, 'input', maskInputHandler, this);\n    EventHandler.add(this.element, 'focus', maskInputFocusHandler, this);\n    EventHandler.add(this.element, 'blur', maskInputBlurHandler, this);\n    EventHandler.add(this.element, 'paste', maskInputPasteHandler, this);\n    EventHandler.add(this.element, 'cut', maskInputCutHandler, this);\n    EventHandler.add(this.element, 'drop', maskInputDropHandler, this);\n    EventHandler.add(this.element, 'mousedown', maskInputMouseDownHandler, this);\n    EventHandler.add(this.element, 'mouseup', maskInputMouseUpHandler, this);\n    if (this.enabled) {\n        bindClearEvent.call(this);\n        if (this.formElement) {\n            EventHandler.add(this.formElement, 'reset', resetFormHandler, this);\n        }\n    }\n}\n/**\n * To unwire events attached to the MaskedTextBox.\n *\n * @hidden\n */\nexport function unwireEvents() {\n    EventHandler.remove(this.element, 'keydown', maskInputKeyDownHandler);\n    EventHandler.remove(this.element, 'keypress', maskInputKeyPressHandler);\n    EventHandler.remove(this.element, 'keyup', maskInputKeyUpHandler);\n    EventHandler.remove(this.element, 'input', maskInputHandler);\n    EventHandler.remove(this.element, 'focus', maskInputFocusHandler);\n    EventHandler.remove(this.element, 'blur', maskInputBlurHandler);\n    EventHandler.remove(this.element, 'paste', maskInputPasteHandler);\n    EventHandler.remove(this.element, 'cut', maskInputCutHandler);\n    EventHandler.remove(this.element, 'drop', maskInputDropHandler);\n    EventHandler.remove(this.element, 'mousedown', maskInputMouseDownHandler);\n    EventHandler.remove(this.element, 'mouseup', maskInputMouseUpHandler);\n    if (this.formElement) {\n        EventHandler.remove(this.formElement, 'reset', resetFormHandler);\n    }\n}\n/**\n * To bind required events to the MaskedTextBox clearButton.\n *\n * @hidden\n */\nexport function bindClearEvent() {\n    if (this.showClearButton) {\n        EventHandler.add(this.inputObj.clearButton, 'mousedown touchstart', resetHandler, this);\n    }\n}\nfunction resetHandler(e) {\n    e.preventDefault();\n    if (!this.inputObj.clearButton.classList.contains('e-clear-icon-hide') || (this.inputObj.container.classList.contains('e-static-clear'))) {\n        clear.call(this, e);\n        this.value = '';\n    }\n}\nfunction clear(event) {\n    var value = this.element.value;\n    setElementValue.call(this, this.promptMask);\n    this.redoCollec.unshift({\n        value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n    });\n    triggerMaskChangeEvent.call(this, event, value);\n    this.element.setSelectionRange(0, 0);\n}\nfunction resetFormHandler() {\n    if (this.element.tagName === 'EJS-MASKEDTEXTBOX') {\n        setElementValue.call(this, this.promptMask);\n    }\n    else {\n        this.value = this.initInputValue;\n    }\n}\n/**\n * To get masked value from the MaskedTextBox.\n *\n * @hidden\n */\nexport function unstrippedValue(element) {\n    return element.value;\n}\n/**\n * To extract raw value from the MaskedTextBox.\n *\n * @hidden\n */\nexport function strippedValue(element, maskValues) {\n    var value = '';\n    var k = 0;\n    var checkMask = false;\n    var maskValue = (!isNullOrUndefined(maskValues)) ? maskValues : (!isNullOrUndefined(element) &&\n        !isNullOrUndefined(this)) ? element.value : maskValues;\n    if (maskValue !== this.promptMask) {\n        for (var i = 0; i < this.customRegExpCollec.length; i++) {\n            if (checkMask) {\n                checkMask = false;\n            }\n            if (this.customRegExpCollec[k] === '>' || this.customRegExpCollec[k] === '<' ||\n                this.customRegExpCollec[k] === '|' || this.customRegExpCollec[k] === '\\\\') {\n                --i;\n                checkMask = true;\n            }\n            if (!checkMask) {\n                if ((maskValue[i] !== this.promptChar) && (!isNullOrUndefined(this.customRegExpCollec[k]) &&\n                    ((this._callPasteHandler || (!isNullOrUndefined(this.regExpCollec[this.customRegExpCollec[k]]) &&\n                        !this.maskedRegExp.includes(this.customRegExpCollec[k]))) ||\n                        (this.customRegExpCollec[k].length > 2 && this.customRegExpCollec[k][0] === '[' &&\n                            this.customRegExpCollec[k][this.customRegExpCollec[k].length - 1] === ']') ||\n                        (!isNullOrUndefined(this.customCharacters) &&\n                            (!isNullOrUndefined(this.customCharacters[this.customRegExpCollec[k]]))))) && (maskValue !== '')) {\n                    value += maskValue[i];\n                }\n            }\n            ++k;\n        }\n    }\n    if (this.mask === null || this.mask === '' && this.value !== undefined) {\n        value = maskValue;\n    }\n    return value;\n}\nfunction pushIntoRegExpCollec(value) {\n    for (var k = 0; k < value.length; k++) {\n        this.hiddenMask += value[k];\n        if (value[k] !== '\\\\') {\n            this.customRegExpCollec.push(value[k]);\n        }\n        else if (value[k] === '\\\\' && !isNullOrUndefined(this.regExpCollec[value[k + 1]])) {\n            this.maskedRegExp.push(value[k + 1]);\n        }\n    }\n}\nexport function maskInputMouseDownHandler() {\n    this.isClicked = true;\n}\nexport function maskInputMouseUpHandler() {\n    this.isClicked = false;\n}\nexport function maskInputFocusHandler(event) {\n    var _this = this;\n    var inputElement = this.element;\n    var startIndex = 0;\n    var modelValue = strippedValue.call(this, inputElement);\n    var toAllowForward = false;\n    var toAllowBackward = false;\n    var eventArgs = {\n        selectionStart: inputElement.selectionStart,\n        event: event,\n        value: this.value,\n        maskedValue: inputElement.value,\n        container: !isNullOrUndefined(this.inputObj) ? this.inputObj.container : this.inputObj,\n        selectionEnd: inputElement.selectionEnd\n    };\n    if (!this.isClicked) {\n        triggerFocus.call(this, eventArgs, inputElement);\n    }\n    if (this.mask) {\n        if (!(!(modelValue === null || modelValue === '') || this.floatLabelType === 'Always' ||\n            this.placeholder === null || this.placeholder === '')) {\n            inputElement.value = this.promptMask;\n        }\n        setTimeout(function () {\n            if (inputElement.selectionStart === _this.promptMask.length ||\n                inputElement.value[inputElement.selectionStart] === _this.promptChar) {\n                toAllowForward = true;\n            }\n            else {\n                for (var i = inputElement.selectionStart; i < _this.promptMask.length; i++) {\n                    if (inputElement.value[i] !== _this.promptChar) {\n                        if ((inputElement.value[i] !== _this.promptMask[i])) {\n                            toAllowForward = false;\n                            break;\n                        }\n                    }\n                    else {\n                        toAllowForward = true;\n                        break;\n                    }\n                }\n            }\n        });\n        setTimeout(function () {\n            var backSelectionStart = inputElement.selectionStart - 1;\n            if (backSelectionStart === _this.promptMask.length - 1 ||\n                inputElement.value[backSelectionStart] === _this.promptChar) {\n                toAllowBackward = true;\n            }\n            else {\n                for (var i = backSelectionStart; i >= 0; i--) {\n                    if (inputElement.value[i] !== _this.promptChar) {\n                        if ((inputElement.value[i] !== _this.promptMask[i])) {\n                            toAllowBackward = false;\n                            break;\n                        }\n                    }\n                    else {\n                        toAllowBackward = true;\n                        break;\n                    }\n                }\n            }\n        });\n        if ((this.isClicked || (this.floatLabelType !== 'Always' &&\n            ((modelValue === null || modelValue === '') &&\n                (this.placeholder !== null && this.placeholder !== ''))))) {\n            for (startIndex = 0; startIndex < this.promptMask.length; startIndex++) {\n                if (inputElement.value[startIndex] === this.promptChar) {\n                    setTimeout(function () {\n                        if (toAllowForward || toAllowBackward) {\n                            inputElement.selectionEnd = startIndex;\n                            inputElement.selectionStart = startIndex;\n                        }\n                        eventArgs = {\n                            selectionStart: inputElement.selectionStart,\n                            event: event,\n                            value: _this.value,\n                            maskedValue: inputElement.value,\n                            container: !isNullOrUndefined(_this.inputObj) ? _this.inputObj.container : _this.inputObj,\n                            selectionEnd: inputElement.selectionEnd\n                        };\n                        triggerFocus.call(_this, eventArgs, inputElement);\n                    }, 110);\n                    break;\n                }\n            }\n            if (isNullOrUndefined(inputElement.value.match(escapeRegExp(this.promptChar)))) {\n                eventArgs = {\n                    selectionStart: inputElement.selectionStart,\n                    event: event,\n                    value: this.value,\n                    maskedValue: inputElement.value,\n                    container: !isNullOrUndefined(this.inputObj) ? this.inputObj.container : this.inputObj,\n                    selectionEnd: inputElement.selectionEnd\n                };\n                triggerFocus.call(this, eventArgs, inputElement);\n            }\n            this.isClicked = false;\n        }\n    }\n}\nexport function triggerFocus(eventArgs, inputElement) {\n    this.trigger('focus', eventArgs, function (eventArgs) {\n        inputElement.selectionStart = eventArgs.selectionStart;\n        inputElement.selectionEnd = eventArgs.selectionEnd;\n    });\n}\nexport function escapeRegExp(text) {\n    return !isNullOrUndefined(text) ? text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&') : text;\n}\nexport function maskInputBlurHandler(event) {\n    this.blurEventArgs = {\n        event: event,\n        value: this.value,\n        maskedValue: this.element.value,\n        container: !isNullOrUndefined(this.inputObj) ? this.inputObj.container : this.inputObj\n    };\n    this.trigger('blur', this.blurEventArgs);\n    if (this.mask) {\n        this.isFocus = false;\n        if (this.placeholder && this.element.value === this.promptMask && this.floatLabelType !== 'Always') {\n            setElementValue.call(this, '');\n            var labelElement = this.element.parentNode.querySelector('.e-float-text');\n            if (this.floatLabelType === 'Auto' && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL)) {\n                removeClass([labelElement], TOPLABEL);\n            }\n        }\n    }\n}\nfunction maskInputPasteHandler(event) {\n    var _this = this;\n    if (this.mask && !this.readonly) {\n        var sIndex_1 = this.element.selectionStart;\n        var eIndex_1 = this.element.selectionEnd;\n        var oldValue_1 = this.element.value;\n        setElementValue.call(this, '');\n        this._callPasteHandler = true;\n        setTimeout(function () {\n            var value = _this.element.value.replace(/ /g, '');\n            if (_this.redoCollec.length > 0 && _this.redoCollec[0].value === _this.element.value) {\n                value = strippedValue.call(_this, _this.element);\n            }\n            setElementValue.call(_this, oldValue_1);\n            _this.element.selectionStart = sIndex_1;\n            _this.element.selectionEnd = eIndex_1;\n            var i = 0;\n            _this.maskKeyPress = true;\n            do {\n                validateValue.call(_this, value[i], false, null);\n                ++i;\n            } while (i < value.length);\n            _this.maskKeyPress = false;\n            _this._callPasteHandler = false;\n            if (_this.element.value === oldValue_1) {\n                var i_1 = 0;\n                _this.maskKeyPress = true;\n                do {\n                    validateValue.call(_this, value[i_1], false, null);\n                    ++i_1;\n                } while (i_1 < value.length);\n                _this.maskKeyPress = false;\n            }\n            else {\n                triggerMaskChangeEvent.call(_this, event, oldValue_1);\n            }\n        }, 1);\n    }\n}\nfunction maskInputCutHandler(event) {\n    var _this = this;\n    if (this.mask && !this.readonly) {\n        var preValue_1 = this.element.value;\n        var sIndex_2 = this.element.selectionStart;\n        var eIndex = this.element.selectionEnd;\n        this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd });\n        var value_1 = this.element.value.substring(0, sIndex_2) + this.promptMask.substring(sIndex_2, eIndex) +\n            this.element.value.substring(eIndex);\n        setTimeout(function () {\n            setElementValue.call(_this, value_1);\n            _this.element.selectionStart = _this.element.selectionEnd = sIndex_2;\n            if (_this.element.value !== preValue_1) {\n                triggerMaskChangeEvent.call(_this, event, null);\n            }\n        }, 0);\n    }\n}\nexport function maskInputDropHandler(event) {\n    event.preventDefault();\n}\nfunction maskInputHandler(event) {\n    if (Browser.isIE === true && this.element.value === '' && this.floatLabelType === 'Never') {\n        return;\n    }\n    var eventArgs = { ctrlKey: false, keyCode: 229 };\n    extend(event, eventArgs);\n    if (this.mask) {\n        if (this.element.value === '') {\n            this.redoCollec.unshift({\n                value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n            });\n        }\n        if (this.element.value.length === 1) {\n            this.element.value = this.element.value + this.promptMask;\n            this.element.setSelectionRange(1, 1);\n        }\n        if (!this._callPasteHandler) {\n            removeMaskInputValues.call(this, event);\n        }\n        if (this.element.value.length > this.promptMask.length) {\n            var startIndex = this.element.selectionStart;\n            var addedValues = this.element.value.length - this.promptMask.length;\n            var value = this.element.value.substring(startIndex - addedValues, startIndex);\n            this.maskKeyPress = false;\n            var i = 0;\n            do {\n                validateValue.call(this, value[i], event.ctrlKey, event);\n                ++i;\n            } while (i < value.length);\n            if (this.element.value !== this.preEleVal) {\n                triggerMaskChangeEvent.call(this, event, null);\n            }\n        }\n        var val = strippedValue.call(this, this.element);\n        this.prevValue = val;\n        this.value = val;\n        if (val === '') {\n            setElementValue.call(this, this.promptMask);\n            this.element.setSelectionRange(0, 0);\n        }\n    }\n}\nfunction maskInputKeyDownHandler(event) {\n    if (this.mask && !this.readonly) {\n        if (event.keyCode !== 229) {\n            if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n                event.preventDefault();\n            }\n            removeMaskInputValues.call(this, event);\n        }\n        var startValue = this.element.value;\n        if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n            var collec = void 0;\n            if (event.keyCode === 90 && this.undoCollec.length > 0 && startValue !== this.undoCollec[this.undoCollec.length - 1].value) {\n                collec = this.undoCollec[this.undoCollec.length - 1];\n                this.redoCollec.unshift({\n                    value: this.element.value, startIndex: this.element.selectionStart,\n                    endIndex: this.element.selectionEnd\n                });\n                setElementValue.call(this, collec.value);\n                this.element.selectionStart = collec.startIndex;\n                this.element.selectionEnd = collec.endIndex;\n                this.undoCollec.splice(this.undoCollec.length - 1, 1);\n            }\n            else if (event.keyCode === 89 && this.redoCollec.length > 0 && startValue !== this.redoCollec[0].value) {\n                collec = this.redoCollec[0];\n                this.undoCollec.push({\n                    value: this.element.value, startIndex: this.element.selectionStart,\n                    endIndex: this.element.selectionEnd\n                });\n                setElementValue.call(this, collec.value);\n                this.element.selectionStart = collec.startIndex;\n                this.element.selectionEnd = collec.endIndex;\n                this.redoCollec.splice(0, 1);\n            }\n        }\n    }\n}\nexport function mobileRemoveFunction() {\n    var collec;\n    var sIndex = this.element.selectionStart;\n    var eIndex = this.element.selectionEnd;\n    if (this.redoCollec.length > 0) {\n        collec = this.redoCollec[0];\n        setElementValue.call(this, collec.value);\n        if ((collec.startIndex - sIndex) === 1) {\n            this.element.selectionStart = collec.startIndex;\n            this.element.selectionEnd = collec.endIndex;\n        }\n        else {\n            this.element.selectionStart = sIndex + 1;\n            this.element.selectionEnd = eIndex + 1;\n        }\n    }\n    else {\n        setElementValue.call(this, this.promptMask);\n        this.element.selectionStart = this.element.selectionEnd = sIndex;\n    }\n}\nfunction autoFillMaskInputValues(isRemove, oldEventVal, event) {\n    if (event.type === 'input') {\n        isRemove = false;\n        oldEventVal = this.element.value;\n        setElementValue.call(this, this.promptMask);\n        setMaskValue.call(this, oldEventVal);\n    }\n    return isRemove;\n}\nfunction removeMaskInputValues(event) {\n    var isRemove = false;\n    var oldEventVal;\n    var isDeleted = false;\n    if (this.element.value.length < this.promptMask.length) {\n        isRemove = true;\n        oldEventVal = this.element.value;\n        isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n        mobileRemoveFunction.call(this);\n    }\n    if (this.element.value.length >= this.promptMask.length && event.type === 'input') {\n        isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n    }\n    var initStartIndex = this.element.selectionStart;\n    var initEndIndex = this.element.selectionEnd;\n    var startIndex = this.element.selectionStart;\n    var endIndex = this.element.selectionEnd;\n    var maskValue = this.hiddenMask.replace(/[>|\\\\<]/g, '');\n    var curMask = maskValue[startIndex - 1];\n    var deleteEndIndex = this.element.selectionEnd;\n    if (isRemove || event.keyCode === 8 || event.keyCode === 46) {\n        this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: endIndex });\n        var multipleDel = false;\n        var preValue = this.element.value;\n        if (startIndex > 0 || ((event.keyCode === 8 || event.keyCode === 46) && startIndex < this.element.value.length\n            && ((this.element.selectionEnd - startIndex) !== this.element.value.length))) {\n            var index = startIndex;\n            if (startIndex !== endIndex) {\n                startIndex = endIndex;\n                if (event.keyCode === 46) {\n                    multipleDel = true;\n                }\n            }\n            else if (event.keyCode === 46) {\n                ++index;\n            }\n            else {\n                --index;\n            }\n            for (var k = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? k > index : k < index; (event.keyCode === 8 || isRemove || multipleDel) ? k-- : k++) {\n                for (var i = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? i > 0 : i < this.element.value.length; (event.keyCode === 8 || isRemove || multipleDel) ? i-- : i++) {\n                    var sIndex = void 0;\n                    if (((event.keyCode === 8 || multipleDel) && ((initStartIndex !== initEndIndex && initStartIndex !== startIndex) ||\n                        (initStartIndex === initEndIndex))) || isRemove) {\n                        curMask = maskValue[i - 1];\n                        sIndex = startIndex - 1;\n                    }\n                    else {\n                        curMask = maskValue[i];\n                        sIndex = startIndex;\n                        ++startIndex;\n                    }\n                    var oldValue = this.element.value[sIndex];\n                    if ((isNullOrUndefined(this.regExpCollec[\"\" + curMask]) && (!isNullOrUndefined(this.customCharacters)\n                        && isNullOrUndefined(this.customCharacters[\"\" + curMask]))\n                        && ((this.hiddenMask[sIndex] !== this.promptChar && this.customRegExpCollec[sIndex][0] !== '['\n                            && this.customRegExpCollec[sIndex][this.customRegExpCollec[sIndex].length - 1] !== ']')))\n                        || (this.promptMask[sIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters))) {\n                        this.element.selectionStart = this.element.selectionEnd = sIndex;\n                        event.preventDefault();\n                        if (event.keyCode === 46 && !multipleDel) {\n                            ++this.element.selectionStart;\n                        }\n                    }\n                    else {\n                        var value = this.element.value;\n                        var prompt_1 = this.promptChar;\n                        var elementValue = value.substring(0, sIndex) + prompt_1 + value.substring(startIndex, value.length);\n                        setElementValue.call(this, elementValue);\n                        event.preventDefault();\n                        if (event.keyCode === 46 && !multipleDel) {\n                            sIndex++;\n                        }\n                        this.element.selectionStart = this.element.selectionEnd = sIndex;\n                        isDeleted = true;\n                    }\n                    startIndex = this.element.selectionStart;\n                    if ((!isDeleted && event.keyCode === 8) || multipleDel || (!isDeleted && !(event.keyCode === 46))) {\n                        sIndex = startIndex - 1;\n                    }\n                    else {\n                        sIndex = startIndex;\n                        isDeleted = false;\n                    }\n                    oldValue = this.element.value[sIndex];\n                    if (((initStartIndex !== initEndIndex) && (this.element.selectionStart === initStartIndex))\n                        || (this.promptMask[sIndex] === this.promptChar) || ((oldValue !== this.promptMask[sIndex]) &&\n                        (this.promptMask[sIndex] !== this.promptChar) && !isNullOrUndefined(this.customCharacters))) {\n                        break;\n                    }\n                }\n            }\n        }\n        if (event.keyCode === 46 && multipleDel && isDeleted) {\n            this.element.selectionStart = this.element.selectionEnd = deleteEndIndex;\n        }\n        if (this.element.selectionStart === 0 && (this.element.selectionEnd === this.element.value.length)) {\n            setElementValue.call(this, this.promptMask);\n            event.preventDefault();\n            this.element.selectionStart = this.element.selectionEnd = startIndex;\n        }\n        this.redoCollec.unshift({\n            value: this.element.value, startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n        });\n        if (this.element.value !== preValue) {\n            triggerMaskChangeEvent.call(this, event, oldEventVal);\n        }\n    }\n}\nfunction maskInputKeyPressHandler(event) {\n    if (this.mask && !this.readonly) {\n        var oldValue = this.element.value;\n        if (!(event.ctrlKey || event.metaKey) || ((event.ctrlKey || event.metaKey) && event.code !== 'KeyA' && event.code !== 'KeyY'\n            && event.code !== 'KeyZ' && event.code !== 'KeyX' && event.code !== 'KeyC' && event.code !== 'KeyV')) {\n            this.maskKeyPress = true;\n            var key = event.key;\n            if (key === 'Spacebar') {\n                key = String.fromCharCode(event.keyCode);\n            }\n            if (!key) {\n                this.isIosInvalid = true;\n                validateValue.call(this, String.fromCharCode(event.keyCode), event.ctrlKey, event);\n                event.preventDefault();\n                this.isIosInvalid = false;\n            }\n            else if (key && key.length === 1) {\n                validateValue.call(this, key, event.ctrlKey, event);\n                event.preventDefault();\n            }\n            if (event.keyCode === 32 && key === ' ' && this.promptChar === ' ') {\n                this.element.selectionStart = this.element.selectionEnd = this.element.selectionStart - key.length;\n            }\n        }\n        if (this.element.value !== oldValue) {\n            triggerMaskChangeEvent.call(this, event, oldValue);\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction triggerMaskChangeEvent(event, oldValue) {\n    var prevOnChange = this.isProtectedOnChange;\n    if (!isNullOrUndefined(this.changeEventArgs) && !this.isInitial) {\n        var eventArgs = {};\n        this.changeEventArgs = { value: this.element.value, maskedValue: this.element.value, isInteraction: false, isInteracted: false };\n        if (this.mask) {\n            this.changeEventArgs.value = strippedValue.call(this, this.element);\n        }\n        if (!isNullOrUndefined(event)) {\n            this.changeEventArgs.isInteracted = true;\n            this.changeEventArgs.isInteraction = true;\n            this.changeEventArgs.event = event;\n        }\n        this.isProtectedOnChange = true;\n        this.value = this.changeEventArgs.value;\n        this.isProtectedOnChange = prevOnChange;\n        merge(eventArgs, this.changeEventArgs);\n        /* istanbul ignore next */\n        if (this.isAngular && this.preventChange) {\n            this.preventChange = false;\n        }\n        else {\n            this.trigger('change', eventArgs);\n        }\n    }\n    this.preEleVal = this.element.value;\n    this.prevValue = strippedValue.call(this, this.element);\n}\nfunction maskInputKeyUpHandler(event) {\n    if (this.mask && !this.readonly) {\n        var collec = void 0;\n        if (!this.maskKeyPress && event.keyCode === 229) {\n            var oldEventVal = void 0;\n            if (this.element.value.length === 1) {\n                this.element.value = this.element.value + this.promptMask;\n                this.element.setSelectionRange(1, 1);\n            }\n            if (this.element.value.length > this.promptMask.length) {\n                var startIndex = this.element.selectionStart;\n                var addedValues = this.element.value.length - this.promptMask.length;\n                var val_1 = this.element.value.substring(startIndex - addedValues, startIndex);\n                if (this.undoCollec.length > 0) {\n                    collec = this.undoCollec[this.undoCollec.length - 1];\n                    var startIndex_1 = this.element.selectionStart;\n                    oldEventVal = collec.value;\n                    var oldVal = collec.value.substring(startIndex_1 - addedValues, startIndex_1);\n                    collec = this.redoCollec[0];\n                    val_1 = val_1.trim();\n                    var isSpace = Browser.isAndroid && val_1 === '';\n                    if (!isSpace && oldVal !== val_1 && collec.value.substring(startIndex_1 - addedValues, startIndex_1) !== val_1) {\n                        validateValue.call(this, val_1, event.ctrlKey, event);\n                    }\n                    else if (isSpace) {\n                        preventUnsupportedValues.call(this, event, startIndex_1 - 1, this.element.selectionEnd - 1, val_1, event.ctrlKey, false);\n                    }\n                }\n                else {\n                    oldEventVal = this.promptMask;\n                    validateValue.call(this, val_1, event.ctrlKey, event);\n                }\n                this.maskKeyPress = false;\n                triggerMaskChangeEvent.call(this, event, oldEventVal);\n            }\n        }\n        else {\n            removeMaskError.call(this);\n        }\n        var val = strippedValue.call(this, this.element);\n        if (!((this.element.selectionStart === 0) && (this.promptMask === this.element.value) && val === '')\n            || (val === '' && this.value !== val)) {\n            this.prevValue = val;\n            this.value = val;\n        }\n    }\n    else {\n        triggerMaskChangeEvent.call(this, event);\n    }\n    if (this.element.selectionStart === 0 && this.element.selectionEnd === 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var temp_1 = this.element;\n        setTimeout(function () {\n            temp_1.setSelectionRange(0, 0);\n        }, 0);\n    }\n}\nfunction mobileSwipeCheck(key) {\n    if (key.length > 1 && ((this.promptMask.length + key.length) < this.element.value.length)) {\n        var elementValue = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + key +\n            this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length);\n        setElementValue.call(this, elementValue);\n        this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + key.length;\n    }\n    this.element.selectionStart = this.element.selectionStart - key.length;\n    this.element.selectionEnd = this.element.selectionEnd - key.length;\n}\nfunction mobileValidation(key) {\n    if (!this.maskKeyPress) {\n        mobileSwipeCheck.call(this, key);\n    }\n}\nfunction validateValue(key, isCtrlKey, event) {\n    mobileValidation.call(this, key);\n    if (isNullOrUndefined(this) || isNullOrUndefined(key)) {\n        return;\n    }\n    var startIndex = this.element.selectionStart;\n    var initStartIndex = startIndex;\n    var curMask;\n    var allowText = false;\n    var value = this.element.value;\n    var eventOldVal;\n    var prevSupport = false;\n    var isEqualVal = false;\n    for (var k = 0; k < key.length; k++) {\n        var keyValue = key[k];\n        startIndex = this.element.selectionStart;\n        if (!this.maskKeyPress && initStartIndex === startIndex) {\n            startIndex = startIndex + k;\n        }\n        if ((!this.maskKeyPress || startIndex < this.promptMask.length)) {\n            for (var i = startIndex; i < this.promptMask.length; i++) {\n                var maskValue = this.escapeMaskValue;\n                curMask = maskValue[startIndex];\n                if (this.hiddenMask[startIndex] === '\\\\' && this.hiddenMask[startIndex + 1] === key) {\n                    isEqualVal = true;\n                }\n                if ((isNullOrUndefined(this.regExpCollec[\"\" + curMask]) && (isNullOrUndefined(this.customCharacters)\n                    || (!isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[\"\" + curMask])))\n                    && ((this.hiddenMask[startIndex] !== this.promptChar && this.customRegExpCollec[startIndex][0] !== '['\n                        && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] !== ']')))\n                    || ((this.promptMask[startIndex] !== this.promptChar) && isNullOrUndefined(this.customCharacters))\n                    || (this.promptChar === curMask && this.escapeMaskValue === this.mask)) {\n                    this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n                    startIndex = this.element.selectionStart;\n                    curMask = this.hiddenMask[startIndex];\n                }\n            }\n            if (!isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[\"\" + curMask])) {\n                var customValStr = this.customCharacters[\"\" + curMask];\n                var customValArr = customValStr.split(',');\n                for (var i = 0; i < customValArr.length; i++) {\n                    /* eslint-disable-next-line security/detect-non-literal-regexp */\n                    if (keyValue.match(new RegExp('[' + customValArr[i] + ']'))) {\n                        allowText = true;\n                        break;\n                    }\n                }\n                /* eslint-disable-next-line security/detect-non-literal-regexp */\n            }\n            else if (!isNullOrUndefined(this.regExpCollec[\"\" + curMask]) && keyValue.match(new RegExp(this.regExpCollec[\"\" + curMask]))\n                && this.promptMask[startIndex] === this.promptChar) {\n                allowText = true;\n            }\n            else if (this.promptMask[startIndex] === this.promptChar && this.customRegExpCollec[startIndex][0] === '['\n                && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] === ']'\n                /* eslint-disable-next-line security/detect-non-literal-regexp */\n                && keyValue.match(new RegExp(this.customRegExpCollec[startIndex]))) {\n                allowText = true;\n            }\n            if ((!this.maskKeyPress || startIndex < this.hiddenMask.length) && allowText) {\n                if (k === 0) {\n                    if (this.maskKeyPress) {\n                        this.undoCollec.push({ value: value, startIndex: startIndex, endIndex: startIndex });\n                    }\n                    else {\n                        var sIndex = this.element.selectionStart;\n                        var eIndex = this.element.selectionEnd;\n                        if (this.redoCollec.length > 0) {\n                            eventOldVal = this.redoCollec[0].value;\n                            setElementValue.call(this, eventOldVal);\n                            this.undoCollec.push(this.redoCollec[0]);\n                        }\n                        else {\n                            this.undoCollec.push({ value: this.promptMask, startIndex: startIndex, endIndex: startIndex });\n                            eventOldVal = this.promptMask;\n                            setElementValue.call(this, eventOldVal);\n                        }\n                        this.element.selectionStart = sIndex;\n                        this.element.selectionEnd = eIndex;\n                    }\n                }\n                startIndex = this.element.selectionStart;\n                applySupportedValues.call(this, event, startIndex, keyValue, eventOldVal, isEqualVal);\n                prevSupport = true;\n                if (k === key.length - 1) {\n                    this.redoCollec.unshift({\n                        value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n                    });\n                }\n                allowText = false;\n            }\n            else {\n                startIndex = this.element.selectionStart;\n                preventUnsupportedValues.call(this, event, startIndex, initStartIndex, key, isCtrlKey, prevSupport);\n            }\n            if (k === key.length - 1 && !allowText) {\n                if (!Browser.isAndroid || (Browser.isAndroid && startIndex < this.promptMask.length)) {\n                    this.redoCollec.unshift({\n                        value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\n                    });\n                }\n            }\n        }\n        else {\n            if (key.length === 1 && !isCtrlKey && !isNullOrUndefined(event)) {\n                addMaskErrorClass.call(this);\n            }\n        }\n    }\n}\nfunction applySupportedValues(event, startIndex, keyValue, eventOldVal, isEqualVal) {\n    if (this.hiddenMask.length > this.promptMask.length) {\n        keyValue = changeToLowerUpperCase.call(this, keyValue, this.element.value);\n    }\n    if (!isEqualVal) {\n        var value = this.element.value;\n        var elementValue = value.substring(0, startIndex) + keyValue + value.substring(startIndex + 1, value.length);\n        setElementValue.call(this, elementValue);\n        this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n    }\n}\nfunction preventUnsupportedValues(event, sIdx, idx, key, ctrl, chkSupport) {\n    if (!this.maskKeyPress) {\n        var value = this.element.value;\n        if (sIdx >= this.promptMask.length) {\n            setElementValue.call(this, value.substring(0, sIdx));\n        }\n        else {\n            if (idx === sIdx) {\n                setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx + 1, value.length));\n            }\n            else {\n                if (this.promptMask.length === this.element.value.length) {\n                    setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx, value.length));\n                }\n                else {\n                    setElementValue.call(this, value.substring(0, idx) + value.substring(idx + 1, value.length));\n                }\n            }\n            this.element.selectionStart = this.element.selectionEnd = (chkSupport ||\n                this.element.value[idx] !== this.promptChar) ? sIdx : idx;\n        }\n        addMaskErrorClass.call(this);\n    }\n    if (key.length === 1 && !ctrl && !isNullOrUndefined(event)) {\n        addMaskErrorClass.call(this);\n    }\n}\nfunction addMaskErrorClass() {\n    var _this = this;\n    var parentElement = this.element.parentNode;\n    var timer = 200;\n    if (parentElement.classList.contains(INPUTGROUP) || parentElement.classList.contains(FLOATINPUT)) {\n        addClass([parentElement], ERROR);\n    }\n    else {\n        addClass([this.element], ERROR);\n    }\n    if (this.isIosInvalid === true) {\n        timer = 400;\n    }\n    attributes(this.element, { 'aria-invalid': 'true' });\n    setTimeout(function () {\n        if (!_this.maskKeyPress) {\n            removeMaskError.call(_this);\n        }\n    }, timer);\n}\nfunction removeMaskError() {\n    var parentElement = this.element.parentNode;\n    if (!isNullOrUndefined(parentElement)) {\n        removeClass([parentElement], ERROR);\n    }\n    removeClass([this.element], ERROR);\n    attributes(this.element, { 'aria-invalid': 'false' });\n}\n/**\n * Validates user input using masking elements '<' , '>' and '|'.\n *\n * @hidden\n */\nfunction changeToLowerUpperCase(key, value) {\n    var promptMask;\n    var i;\n    var curVal = value;\n    var caseCount = 0;\n    for (i = 0; i < this.hiddenMask.length; i++) {\n        if (this.hiddenMask[i] === '\\\\') {\n            promptMask = curVal.substring(0, i) + '\\\\' + curVal.substring(i, curVal.length);\n        }\n        if (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|') {\n            if (this.hiddenMask[i] !== curVal[i]) {\n                promptMask = curVal.substring(0, i) + this.hiddenMask[i] + curVal.substring(i, curVal.length);\n            }\n            ++caseCount;\n        }\n        if (promptMask) {\n            if (((promptMask[i] === this.promptChar) && (i > this.element.selectionStart)) ||\n                (this.element.value.indexOf(this.promptChar) < 0 && (this.element.selectionStart + caseCount) === i)) {\n                caseCount = 0;\n                break;\n            }\n            curVal = promptMask;\n        }\n    }\n    while (i >= 0 && promptMask) {\n        if (i === 0 || promptMask[i - 1] !== '\\\\') {\n            if (promptMask[i] === '>') {\n                key = key.toUpperCase();\n                break;\n            }\n            else if (promptMask[i] === '<') {\n                key = key.toLowerCase();\n                break;\n            }\n            else if (promptMask[i] === '|') {\n                break;\n            }\n        }\n        --i;\n    }\n    return key;\n}\n/**\n * To set updated values in the MaskedTextBox.\n *\n * @hidden\n */\nexport function setMaskValue(val) {\n    if (this.mask && val !== undefined && (this.prevValue === undefined || this.prevValue !== val)) {\n        this.maskKeyPress = true;\n        setElementValue.call(this, this.promptMask);\n        if (val !== '' && !(val === null && this.floatLabelType === 'Never' && this.placeholder)) {\n            this.element.selectionStart = 0;\n            this.element.selectionEnd = 0;\n        }\n        if (val !== null) {\n            for (var i = 0; i < val.length; i++) {\n                validateValue.call(this, val[i], false, null);\n            }\n        }\n        var newVal = strippedValue.call(this, this.element);\n        this.prevValue = newVal;\n        this.value = newVal;\n        triggerMaskChangeEvent.call(this, null, null);\n        this.maskKeyPress = false;\n        var labelElement = this.element.parentNode.querySelector('.e-float-text');\n        if (this.element.value === this.promptMask && this.floatLabelType === 'Auto' && this.placeholder &&\n            !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL) && !this.isFocus) {\n            removeClass([labelElement], TOPLABEL);\n            addClass([labelElement], BOTTOMLABEL);\n            setElementValue.call(this, '');\n        }\n    }\n    if (this.mask === null || this.mask === '' && this.value !== undefined) {\n        setElementValue.call(this, this.value);\n    }\n}\n/**\n * To set updated values in the input element.\n *\n * @hidden\n */\nexport function setElementValue(val, element) {\n    if (!this.isFocus && this.floatLabelType === 'Auto' && this.placeholder && isNullOrUndefined(this.value)) {\n        val = '';\n    }\n    var value = strippedValue.call(this, (element ? element : this.element), val);\n    if (value === null || value === '') {\n        Input.setValue(val, (element ? element : this.element), this.floatLabelType, false);\n        if (this.showClearButton) {\n            this.inputObj.clearButton.classList.add('e-clear-icon-hide');\n        }\n    }\n    else {\n        Input.setValue(val, (element ? element : this.element), this.floatLabelType, this.showClearButton);\n    }\n}\n/**\n * Provide mask support to input textbox through utility method.\n *\n * @hidden\n */\nexport function maskInput(args) {\n    var inputEle = getMaskInput(args);\n    applyMask.call(inputEle);\n    var val = strippedValue.call(this, this.element);\n    this.prevValue = val;\n    this.value = val;\n    if (args.mask) {\n        unwireEvents.call(inputEle);\n        wireEvents.call(inputEle);\n    }\n}\nfunction getMaskInput(args) {\n    addClass([args.element], UTILMASK);\n    var inputEle = {\n        element: args.element,\n        mask: args.mask,\n        promptMask: '',\n        hiddenMask: '',\n        escapeMaskValue: '',\n        promptChar: args.promptChar ? (args.promptChar.length > 1) ? args.promptChar = args.promptChar[0]\n            : args.promptChar : '_',\n        value: args.value ? args.value : null,\n        regExpCollec: regularExpressions,\n        customRegExpCollec: [],\n        customCharacters: args.customCharacters,\n        undoCollec: [],\n        redoCollec: [],\n        maskKeyPress: false,\n        prevValue: ''\n    };\n    createMask.call(inputEle);\n    return inputEle;\n}\n/**\n * Gets raw value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\nexport function getVal(args) {\n    return strippedValue.call(getUtilMaskEle(args), args.element);\n}\n/**\n * Gets masked value of the textbox which has been masked through utility method.\n *\n * @hidden\n */\nexport function getMaskedVal(args) {\n    return unstrippedValue.call(getUtilMaskEle(args), args.element);\n}\nfunction getUtilMaskEle(args) {\n    var inputEle;\n    if (!isNullOrUndefined(args) && args.element.classList.contains(UTILMASK)) {\n        inputEle = getMaskInput(args);\n    }\n    return inputEle;\n}\n/**\n * Arguments to perform undo and redo functionalities.\n *\n * @hidden\n */\nvar MaskUndo = /** @class */ (function () {\n    function MaskUndo() {\n    }\n    return MaskUndo;\n}());\nexport { MaskUndo };\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar maskUndo = new MaskUndo();\n/* eslint-enable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}