{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit, removeClass } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { calculateAggregate, iterateExtend, addRemoveEventListener, applyStickyLeftRightPosition } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\n * Footer module is used to render grid content\n *\n * @hidden\n */\nvar FooterRenderer = /** @class */function (_super) {\n  __extends(FooterRenderer, _super);\n  function FooterRenderer(gridModule, serviceLocator) {\n    var _this = _super.call(this, gridModule, serviceLocator) || this;\n    _this.aggregates = {};\n    _this.parent = gridModule;\n    _this.locator = serviceLocator;\n    _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n    _this.addEventListener();\n    return _this;\n  }\n  /**\n   * The function is used to render grid footer div\n   *\n   * @returns {void}\n   */\n  FooterRenderer.prototype.renderPanel = function () {\n    var div = this.parent.createElement('div', {\n      className: literals.gridFooter\n    });\n    var innerDiv = this.parent.createElement('div', {\n      className: 'e-summarycontent'\n    });\n    div.appendChild(innerDiv);\n    this.setPanel(div);\n    if (this.parent.getPager() != null) {\n      this.parent.element.insertBefore(div, this.parent.getPager());\n    } else {\n      this.parent.element.appendChild(div);\n    }\n  };\n  /**\n   * The function is used to render grid footer table\n   *\n   * @returns {void}\n   */\n  FooterRenderer.prototype.renderTable = function () {\n    var innerDiv = this.createContentTable('_footer_table');\n    var table = innerDiv.querySelector('.' + literals.table);\n    var tFoot = this.parent.createElement('tfoot');\n    table.appendChild(tFoot);\n    this.setTable(table);\n  };\n  FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n    var input = this.parent.dataSource instanceof Array ? !this.parent.getDataModule().isRemote() && this.parent.parentDetails ? this.getData() : this.parent.dataSource : this.parent.currentViewData;\n    var summaries = this.modelGenerator.getData();\n    var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() : this.modelGenerator.getColumns(cStart);\n    // eslint-disable-next-line max-len\n    var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) : this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n    var fragment = document.createDocumentFragment();\n    var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n    rowrenderer.element = this.parent.createElement('TR', {\n      className: 'e-summaryrow',\n      attrs: {\n        role: 'row'\n      }\n    });\n    for (var srow = 0, len = summaries.length; srow < len; srow++) {\n      var row = rows[parseInt(srow.toString(), 10)];\n      if (!row) {\n        continue;\n      }\n      var tr = rowrenderer.render(row, dummies);\n      if (tr.querySelectorAll('.e-leftfreeze').length && tr.querySelectorAll('.e-indentcell').length) {\n        var td = tr.querySelectorAll('.e-indentcell');\n        for (var i = 0; i < td.length; i++) {\n          td[parseInt(i.toString(), 10)].classList.add('e-leftfreeze');\n          applyStickyLeftRightPosition(td[parseInt(i.toString(), 10)], i * 30, this.parent.enableRtl, 'Left');\n        }\n      }\n      if (this.parent.isFrozenGrid() && tr.querySelectorAll('.e-summarycell').length) {\n        removeClass([].slice.call(tr.querySelectorAll('.e-summarycell')), ['e-freezeleftborder', 'e-freezerightborder']);\n      }\n      fragment.appendChild(tr);\n    }\n    var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isReact;\n    if ((this.parent.isReact || isReactChild) && summaries.length && this.parent.isInitialLoad) {\n      this.parent.renderTemplates(function () {\n        table.tFoot.innerHTML = '';\n        table.tFoot.appendChild(fragment);\n      });\n    } else {\n      table.tFoot.appendChild(fragment);\n    }\n    this.aggregates = !isNullOrUndefined(e) ? e : this.aggregates;\n  };\n  FooterRenderer.prototype.refresh = function (e) {\n    var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isReact;\n    if (!(this.parent.isReact || isReactChild) || !this.parent.isInitialLoad) {\n      this.getTable().tFoot.innerHTML = '';\n    }\n    this.renderSummaryContent(e, this.getTable(), undefined, undefined);\n    if (isNullOrUndefined(e) && this.parent.isAutoFitColumns) {\n      this.parent.autoFitColumns();\n    }\n    this.onScroll();\n  };\n  FooterRenderer.prototype.refreshCol = function () {\n    // frozen table\n    var mheaderCol = this.parent.enableColumnVirtualization ? this.parent.headerModule.getColGroup() : this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n    this.getTable().replaceChild(mheaderCol, this.getColGroup());\n    this.setColGroup(mheaderCol);\n  };\n  FooterRenderer.prototype.onWidthChange = function (args) {\n    this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n    if (this.parent.allowResizing && args.module === 'resize') {\n      this.updateFooterTableWidth(this.getTable());\n    }\n  };\n  FooterRenderer.prototype.onScroll = function (e) {\n    if (e === void 0) {\n      e = {\n        left: this.parent.getContent().firstChild.scrollLeft\n      };\n    }\n    this.getTable().parentElement.scrollLeft = e.left;\n  };\n  FooterRenderer.prototype.getColFromIndex = function (index) {\n    return this.getColGroup().children[parseInt(index.toString(), 10)];\n  };\n  FooterRenderer.prototype.columnVisibilityChanged = function () {\n    this.refresh();\n  };\n  FooterRenderer.prototype.addEventListener = function () {\n    this.evtHandlers = [{\n      event: colGroupRefresh,\n      handler: this.refreshCol\n    }, {\n      event: columnWidthChanged,\n      handler: this.onWidthChange\n    }, {\n      event: scroll,\n      handler: this.onScroll\n    }, {\n      event: columnVisibilityChanged,\n      handler: this.columnVisibilityChanged\n    }, {\n      event: refreshFooterRenderer,\n      handler: this.refreshFooterRenderer\n    }];\n    addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n  };\n  FooterRenderer.prototype.removeEventListener = function () {\n    addRemoveEventListener(this.parent, this.evtHandlers, false);\n  };\n  FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n    var tHead = this.parent.getHeaderTable();\n    if (tHead && tFoot) {\n      tFoot.style.width = tHead.style.width;\n    }\n  };\n  FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n    var aggregates = this.onAggregates(editedData);\n    this.refresh(aggregates);\n  };\n  FooterRenderer.prototype.getIndexByKey = function (data, ds) {\n    var key = this.parent.getPrimaryKeyFieldNames()[0];\n    for (var i = 0; i < ds.length; i++) {\n      if (ds[parseInt(i.toString(), 10)][\"\" + key] === data[\"\" + key]) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  FooterRenderer.prototype.getData = function () {\n    return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));\n  };\n  FooterRenderer.prototype.onAggregates = function (editedData) {\n    editedData = editedData instanceof Array ? editedData : [];\n    var field = this.parent.getPrimaryKeyFieldNames()[0];\n    var dataSource = [];\n    var isModified = false;\n    var batchChanges = {};\n    var gridData = 'dataSource';\n    var isFiltered = false;\n    if (!(this.parent.renderModule.data.isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && (this.parent.allowFiltering && this.parent.filterSettings.columns.length || this.parent.searchSettings.key.length)) {\n      isFiltered = true;\n    }\n    var currentViewData;\n    if (!isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) {\n      currentViewData = this.parent.getCurrentViewRecords();\n    } else {\n      currentViewData = this.parent.dataSource instanceof Array ? isFiltered ? this.parent.getFilteredRecords() : this.parent.dataSource : this.parent.dataSource[\"\" + gridData].json.length ? isFiltered ? this.parent.getFilteredRecords() : this.parent.dataSource[\"\" + gridData].json : this.parent.getCurrentViewRecords();\n    }\n    if (this.parent.parentDetails && !this.parent.getDataModule().isRemote()) {\n      currentViewData = this.getData();\n    }\n    if (this.parent.editModule) {\n      batchChanges = this.parent.editModule.getBatchChanges();\n    }\n    if (Object.keys(batchChanges).length) {\n      for (var i = 0; i < currentViewData.length; i++) {\n        isModified = false;\n        // eslint-disable-next-line max-len\n        if (batchChanges[literals.changedRecords].length && this.getIndexByKey(currentViewData[parseInt(i.toString(), 10)], batchChanges[literals.changedRecords]) > -1) {\n          isModified = true;\n          // eslint-disable-next-line max-len\n          dataSource.push(batchChanges[literals.changedRecords][this.getIndexByKey(currentViewData[parseInt(i.toString(), 10)], batchChanges[literals.changedRecords])]);\n        }\n        // eslint-disable-next-line max-len\n        if (batchChanges[literals.deletedRecords].length && this.getIndexByKey(currentViewData[parseInt(i.toString(), 10)], batchChanges[literals.deletedRecords]) > -1) {\n          isModified = true;\n        } else if (!isModified) {\n          dataSource.push(currentViewData[parseInt(i.toString(), 10)]);\n        }\n      }\n      if (batchChanges[literals.addedRecords].length) {\n        for (var i = 0; i < batchChanges[literals.addedRecords].length; i++) {\n          dataSource.push(batchChanges[literals.addedRecords][parseInt(i.toString(), 10)]);\n        }\n      }\n    } else {\n      if (editedData.length) {\n        var data = iterateExtend(currentViewData);\n        dataSource = data.map(function (item) {\n          var idVal = DataUtil.getObject(field, item);\n          var value;\n          var hasVal = editedData.some(function (cItem) {\n            value = cItem;\n            return idVal === DataUtil.getObject(field, cItem);\n          });\n          return hasVal ? value : item;\n        });\n      } else {\n        dataSource = currentViewData;\n      }\n    }\n    var eData = editedData;\n    if (eData.type && eData.type === 'cancel') {\n      dataSource = currentViewData;\n    }\n    var aggregate = {};\n    var agrVal;\n    var aggregateRows = this.parent.aggregates;\n    for (var i = 0; i < aggregateRows.length; i++) {\n      for (var j = 0; j < aggregateRows[parseInt(i.toString(), 10)].columns.length; j++) {\n        var data = [];\n        var type = aggregateRows[parseInt(i.toString(), 10)].columns[parseInt(j.toString(), 10)].type.toString();\n        data = dataSource;\n        var types = type.split(',').map(function (t) {\n          return t.trim();\n        });\n        for (var _i = 0, types_1 = types; _i < types_1.length; _i++) {\n          var aggregateType = types_1[_i];\n          agrVal = calculateAggregate(aggregateType, data, aggregateRows[parseInt(i.toString(), 10)].columns[parseInt(j.toString(), 10)], this.parent);\n          aggregate[aggregateRows[parseInt(i.toString(), 10)].columns[parseInt(j.toString(), 10)].field + ' - ' + aggregateType.toLowerCase()] = agrVal;\n        }\n      }\n    }\n    var result = {\n      result: dataSource,\n      count: dataSource.length,\n      aggregates: aggregate\n    };\n    return result;\n  };\n  return FooterRenderer;\n}(ContentRender);\nexport { FooterRenderer };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isNullOrUndefined","formatUnit","removeClass","colGroupRefresh","columnWidthChanged","scroll","columnVisibilityChanged","refreshFooterRenderer","ContentRender","RowRenderer","SummaryModelGenerator","calculateAggregate","iterateExtend","addRemoveEventListener","applyStickyLeftRightPosition","DataUtil","literals","FooterRenderer","_super","gridModule","serviceLocator","_this","call","aggregates","parent","locator","modelGenerator","addEventListener","renderPanel","div","createElement","className","gridFooter","innerDiv","appendChild","setPanel","getPager","element","insertBefore","renderTable","createContentTable","table","querySelector","tFoot","setTable","renderSummaryContent","e","cStart","cEnd","input","dataSource","getDataModule","isRemote","parentDetails","getData","currentViewData","summaries","dummies","getColumns","rows","generateRows","fragment","document","createDocumentFragment","rowrenderer","attrs","role","srow","len","length","row","parseInt","toString","tr","render","querySelectorAll","td","i","classList","add","enableRtl","isFrozenGrid","slice","isReactChild","parentInstObj","isReact","isInitialLoad","renderTemplates","innerHTML","refresh","getTable","undefined","isAutoFitColumns","autoFitColumns","onScroll","refreshCol","mheaderCol","enableColumnVirtualization","headerModule","getColGroup","gridHeader","colGroup","cloneNode","replaceChild","setColGroup","onWidthChange","args","getColFromIndex","index","style","width","allowResizing","module","updateFooterTableWidth","left","getContent","firstChild","scrollLeft","parentElement","children","evtHandlers","event","handler","removeEventListener","tHead","getHeaderTable","editedData","onAggregates","getIndexByKey","data","ds","key","getPrimaryKeyFieldNames","dataManager","executeLocal","generateQuery","field","isModified","batchChanges","gridData","isFiltered","renderModule","result","allowFiltering","filterSettings","columns","searchSettings","getCurrentViewRecords","getFilteredRecords","json","editModule","getBatchChanges","keys","changedRecords","push","deletedRecords","addedRecords","map","item","idVal","getObject","value","hasVal","some","cItem","eData","type","aggregate","agrVal","aggregateRows","j","types","split","t","trim","_i","types_1","aggregateType","toLowerCase","count"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/renderer/footer-renderer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit, removeClass } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { calculateAggregate, iterateExtend, addRemoveEventListener, applyStickyLeftRightPosition } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\n * Footer module is used to render grid content\n *\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     *\n     * @returns {void}\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: literals.gridFooter });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     *\n     * @returns {void}\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.' + literals.table);\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? !this.parent.getDataModule().isRemote() &&\n            this.parent.parentDetails ? this.getData() : this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart);\n        // eslint-disable-next-line max-len\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow', attrs: { role: 'row' } });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[parseInt(srow.toString(), 10)];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            if (tr.querySelectorAll('.e-leftfreeze').length && tr.querySelectorAll('.e-indentcell').length) {\n                var td = tr.querySelectorAll('.e-indentcell');\n                for (var i = 0; i < td.length; i++) {\n                    td[parseInt(i.toString(), 10)].classList.add('e-leftfreeze');\n                    applyStickyLeftRightPosition(td[parseInt(i.toString(), 10)], i * 30, this.parent.enableRtl, 'Left');\n                }\n            }\n            if (this.parent.isFrozenGrid() && tr.querySelectorAll('.e-summarycell').length) {\n                removeClass([].slice.call(tr.querySelectorAll('.e-summarycell')), ['e-freezeleftborder', 'e-freezerightborder']);\n            }\n            fragment.appendChild(tr);\n        }\n        var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n            this.parent.parentDetails.parentInstObj.isReact;\n        if ((this.parent.isReact || isReactChild) && summaries.length && this.parent.isInitialLoad) {\n            this.parent.renderTemplates(function () {\n                table.tFoot.innerHTML = '';\n                table.tFoot.appendChild(fragment);\n            });\n        }\n        else {\n            table.tFoot.appendChild(fragment);\n        }\n        this.aggregates = !isNullOrUndefined(e) ? e : this.aggregates;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n            this.parent.parentDetails.parentInstObj.isReact;\n        if (!(this.parent.isReact || isReactChild) || !this.parent.isInitialLoad) {\n            this.getTable().tFoot.innerHTML = '';\n        }\n        this.renderSummaryContent(e, this.getTable(), undefined, undefined);\n        if (isNullOrUndefined(e) && this.parent.isAutoFitColumns) {\n            this.parent.autoFitColumns();\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table\n        var mheaderCol = this.parent.enableColumnVirtualization ? this.parent.headerModule.getColGroup() :\n            this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = {\n            left: this.parent.getContent().firstChild.scrollLeft\n        }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        return this.getColGroup().children[parseInt(index.toString(), 10)];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.evtHandlers = [{ event: colGroupRefresh, handler: this.refreshCol },\n            { event: columnWidthChanged, handler: this.onWidthChange },\n            { event: scroll, handler: this.onScroll },\n            { event: columnVisibilityChanged, handler: this.columnVisibilityChanged },\n            { event: refreshFooterRenderer, handler: this.refreshFooterRenderer }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n        var aggregates = this.onAggregates(editedData);\n        this.refresh(aggregates);\n    };\n    FooterRenderer.prototype.getIndexByKey = function (data, ds) {\n        var key = this.parent.getPrimaryKeyFieldNames()[0];\n        for (var i = 0; i < ds.length; i++) {\n            if (ds[parseInt(i.toString(), 10)][\"\" + key] === data[\"\" + key]) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    FooterRenderer.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));\n    };\n    FooterRenderer.prototype.onAggregates = function (editedData) {\n        editedData = editedData instanceof Array ? editedData : [];\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        var dataSource = [];\n        var isModified = false;\n        var batchChanges = {};\n        var gridData = 'dataSource';\n        var isFiltered = false;\n        if (!(this.parent.renderModule.data.isRemote() || (!isNullOrUndefined(this.parent.dataSource)\n            && this.parent.dataSource.result)) && ((this.parent.allowFiltering\n            && this.parent.filterSettings.columns.length) || this.parent.searchSettings.key.length)) {\n            isFiltered = true;\n        }\n        var currentViewData;\n        if (!isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) {\n            currentViewData = this.parent.getCurrentViewRecords();\n        }\n        else {\n            currentViewData = this.parent.dataSource instanceof Array ?\n                (isFiltered ? this.parent.getFilteredRecords() : this.parent.dataSource) : (this.parent.dataSource[\"\" + gridData].json.length ?\n                (isFiltered ? this.parent.getFilteredRecords() : this.parent.dataSource[\"\" + gridData].json)\n                : this.parent.getCurrentViewRecords());\n        }\n        if (this.parent.parentDetails && !this.parent.getDataModule().isRemote()) {\n            currentViewData = this.getData();\n        }\n        if (this.parent.editModule) {\n            batchChanges = this.parent.editModule.getBatchChanges();\n        }\n        if (Object.keys(batchChanges).length) {\n            for (var i = 0; i < currentViewData.length; i++) {\n                isModified = false;\n                // eslint-disable-next-line max-len\n                if (batchChanges[literals.changedRecords].length && this.getIndexByKey(currentViewData[parseInt(i.toString(), 10)], batchChanges[literals.changedRecords]) > -1) {\n                    isModified = true;\n                    // eslint-disable-next-line max-len\n                    dataSource.push(batchChanges[literals.changedRecords][this.getIndexByKey(currentViewData[parseInt(i.toString(), 10)], batchChanges[literals.changedRecords])]);\n                }\n                // eslint-disable-next-line max-len\n                if (batchChanges[literals.deletedRecords].length && this.getIndexByKey(currentViewData[parseInt(i.toString(), 10)], batchChanges[literals.deletedRecords]) > -1) {\n                    isModified = true;\n                }\n                else if (!isModified) {\n                    dataSource.push(currentViewData[parseInt(i.toString(), 10)]);\n                }\n            }\n            if (batchChanges[literals.addedRecords].length) {\n                for (var i = 0; i < batchChanges[literals.addedRecords].length; i++) {\n                    dataSource.push(batchChanges[literals.addedRecords][parseInt(i.toString(), 10)]);\n                }\n            }\n        }\n        else {\n            if (editedData.length) {\n                var data = iterateExtend(currentViewData);\n                dataSource = data.map(function (item) {\n                    var idVal = DataUtil.getObject(field, item);\n                    var value;\n                    var hasVal = editedData.some(function (cItem) {\n                        value = cItem;\n                        return idVal === DataUtil.getObject(field, cItem);\n                    });\n                    return hasVal ? value : item;\n                });\n            }\n            else {\n                dataSource = currentViewData;\n            }\n        }\n        var eData = editedData;\n        if ((eData.type && eData.type === 'cancel')) {\n            dataSource = currentViewData;\n        }\n        var aggregate = {};\n        var agrVal;\n        var aggregateRows = this.parent.aggregates;\n        for (var i = 0; i < aggregateRows.length; i++) {\n            for (var j = 0; j < aggregateRows[parseInt(i.toString(), 10)].columns.length; j++) {\n                var data = [];\n                var type = aggregateRows[parseInt(i.toString(), 10)]\n                    .columns[parseInt(j.toString(), 10)].type.toString();\n                data = dataSource;\n                var types = type.split(',').map(function (t) { return t.trim(); });\n                for (var _i = 0, types_1 = types; _i < types_1.length; _i++) {\n                    var aggregateType = types_1[_i];\n                    agrVal = calculateAggregate(aggregateType, data, aggregateRows[parseInt(i.toString(), 10)]\n                        .columns[parseInt(j.toString(), 10)], this.parent);\n                    aggregate[aggregateRows[parseInt(i.toString(), 10)].columns[parseInt(j.toString(), 10)].field + ' - ' + aggregateType.toLowerCase()] = agrVal;\n                }\n            }\n        }\n        var result = {\n            result: dataSource,\n            count: dataSource.length,\n            aggregates: aggregate\n        };\n        return result;\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIA,CAAC,CAACM,cAAc,CAACD,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IAC9E,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnBF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASO,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGT,CAAC;IAAE;IACtCA,CAAC,CAACU,SAAS,GAAGT,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACS,MAAM,CAACV,CAAC,CAAC,IAAIO,EAAE,CAACE,SAAS,GAAGT,CAAC,CAACS,SAAS,EAAE,IAAIF,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJ,SAASI,iBAAiB,QAAQ,sBAAsB;AACxD,SAASC,UAAU,EAAEC,WAAW,QAAQ,sBAAsB;AAC9D,SAASC,eAAe,EAAEC,kBAAkB,EAAEC,MAAM,EAAEC,uBAAuB,EAAEC,qBAAqB,QAAQ,kBAAkB;AAC9H,SAASC,aAAa,QAAQ,oBAAoB;AAClD,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,qBAAqB,QAAQ,qCAAqC;AAC3E,SAASC,kBAAkB,EAAEC,aAAa,EAAEC,sBAAsB,EAAEC,4BAA4B,QAAQ,cAAc;AACtH,SAASC,QAAQ,QAAQ,sBAAsB;AAC/C,OAAO,KAAKC,QAAQ,MAAM,yBAAyB;AACnD;AACA;AACA;AACA;AACA;AACA,IAAIC,cAAc,GAAG,aAAe,UAAUC,MAAM,EAAE;EAClDhC,SAAS,CAAC+B,cAAc,EAAEC,MAAM,CAAC;EACjC,SAASD,cAAcA,CAACE,UAAU,EAAEC,cAAc,EAAE;IAChD,IAAIC,KAAK,GAAGH,MAAM,CAACI,IAAI,CAAC,IAAI,EAAEH,UAAU,EAAEC,cAAc,CAAC,IAAI,IAAI;IACjEC,KAAK,CAACE,UAAU,GAAG,CAAC,CAAC;IACrBF,KAAK,CAACG,MAAM,GAAGL,UAAU;IACzBE,KAAK,CAACI,OAAO,GAAGL,cAAc;IAC9BC,KAAK,CAACK,cAAc,GAAG,IAAIhB,qBAAqB,CAACW,KAAK,CAACG,MAAM,CAAC;IAC9DH,KAAK,CAACM,gBAAgB,CAAC,CAAC;IACxB,OAAON,KAAK;EAChB;EACA;AACJ;AACA;AACA;AACA;EACIJ,cAAc,CAACnB,SAAS,CAAC8B,WAAW,GAAG,YAAY;IAC/C,IAAIC,GAAG,GAAG,IAAI,CAACL,MAAM,CAACM,aAAa,CAAC,KAAK,EAAE;MAAEC,SAAS,EAAEf,QAAQ,CAACgB;IAAW,CAAC,CAAC;IAC9E,IAAIC,QAAQ,GAAG,IAAI,CAACT,MAAM,CAACM,aAAa,CAAC,KAAK,EAAE;MAAEC,SAAS,EAAE;IAAmB,CAAC,CAAC;IAClFF,GAAG,CAACK,WAAW,CAACD,QAAQ,CAAC;IACzB,IAAI,CAACE,QAAQ,CAACN,GAAG,CAAC;IAClB,IAAI,IAAI,CAACL,MAAM,CAACY,QAAQ,CAAC,CAAC,IAAI,IAAI,EAAE;MAChC,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACC,YAAY,CAACT,GAAG,EAAE,IAAI,CAACL,MAAM,CAACY,QAAQ,CAAC,CAAC,CAAC;IACjE,CAAC,MACI;MACD,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACH,WAAW,CAACL,GAAG,CAAC;IACxC;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIZ,cAAc,CAACnB,SAAS,CAACyC,WAAW,GAAG,YAAY;IAC/C,IAAIN,QAAQ,GAAG,IAAI,CAACO,kBAAkB,CAAC,eAAe,CAAC;IACvD,IAAIC,KAAK,GAAGR,QAAQ,CAACS,aAAa,CAAC,GAAG,GAAG1B,QAAQ,CAACyB,KAAK,CAAC;IACxD,IAAIE,KAAK,GAAG,IAAI,CAACnB,MAAM,CAACM,aAAa,CAAC,OAAO,CAAC;IAC9CW,KAAK,CAACP,WAAW,CAACS,KAAK,CAAC;IACxB,IAAI,CAACC,QAAQ,CAACH,KAAK,CAAC;EACxB,CAAC;EACDxB,cAAc,CAACnB,SAAS,CAAC+C,oBAAoB,GAAG,UAAUC,CAAC,EAAEL,KAAK,EAAEM,MAAM,EAAEC,IAAI,EAAE;IAC9E,IAAIC,KAAK,GAAG,IAAI,CAACzB,MAAM,CAAC0B,UAAU,YAAYzD,KAAK,GAAG,CAAC,IAAI,CAAC+B,MAAM,CAAC2B,aAAa,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,IACzF,IAAI,CAAC5B,MAAM,CAAC6B,aAAa,GAAG,IAAI,CAACC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC9B,MAAM,CAAC0B,UAAU,GAAG,IAAI,CAAC1B,MAAM,CAAC+B,eAAe;IACrG,IAAIC,SAAS,GAAG,IAAI,CAAC9B,cAAc,CAAC4B,OAAO,CAAC,CAAC;IAC7C,IAAIG,OAAO,GAAGzD,iBAAiB,CAAC+C,MAAM,CAAC,GAAG,IAAI,CAACrB,cAAc,CAACgC,UAAU,CAAC,CAAC,GACtE,IAAI,CAAChC,cAAc,CAACgC,UAAU,CAACX,MAAM,CAAC;IAC1C;IACA,IAAIY,IAAI,GAAG3D,iBAAiB,CAAC+C,MAAM,CAAC,GAAG,IAAI,CAACrB,cAAc,CAACkC,YAAY,CAACX,KAAK,EAAEH,CAAC,IAAI,IAAI,CAACvB,UAAU,CAAC,GAChG,IAAI,CAACG,cAAc,CAACkC,YAAY,CAACX,KAAK,EAAEH,CAAC,IAAI,IAAI,CAACvB,UAAU,EAAEwB,MAAM,EAAEC,IAAI,CAAC;IAC/E,IAAIa,QAAQ,GAAGC,QAAQ,CAACC,sBAAsB,CAAC,CAAC;IAChD,IAAIC,WAAW,GAAG,IAAIvD,WAAW,CAAC,IAAI,CAACgB,OAAO,EAAE,IAAI,EAAE,IAAI,CAACD,MAAM,CAAC;IAClEwC,WAAW,CAAC3B,OAAO,GAAG,IAAI,CAACb,MAAM,CAACM,aAAa,CAAC,IAAI,EAAE;MAAEC,SAAS,EAAE,cAAc;MAAEkC,KAAK,EAAE;QAAEC,IAAI,EAAE;MAAM;IAAE,CAAC,CAAC;IAC5G,KAAK,IAAIC,IAAI,GAAG,CAAC,EAAEC,GAAG,GAAGZ,SAAS,CAACa,MAAM,EAAEF,IAAI,GAAGC,GAAG,EAAED,IAAI,EAAE,EAAE;MAC3D,IAAIG,GAAG,GAAGX,IAAI,CAACY,QAAQ,CAACJ,IAAI,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAC7C,IAAI,CAACF,GAAG,EAAE;QACN;MACJ;MACA,IAAIG,EAAE,GAAGT,WAAW,CAACU,MAAM,CAACJ,GAAG,EAAEb,OAAO,CAAC;MACzC,IAAIgB,EAAE,CAACE,gBAAgB,CAAC,eAAe,CAAC,CAACN,MAAM,IAAII,EAAE,CAACE,gBAAgB,CAAC,eAAe,CAAC,CAACN,MAAM,EAAE;QAC5F,IAAIO,EAAE,GAAGH,EAAE,CAACE,gBAAgB,CAAC,eAAe,CAAC;QAC7C,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,EAAE,CAACP,MAAM,EAAEQ,CAAC,EAAE,EAAE;UAChCD,EAAE,CAACL,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACM,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;UAC5DjE,4BAA4B,CAAC8D,EAAE,CAACL,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEK,CAAC,GAAG,EAAE,EAAE,IAAI,CAACrD,MAAM,CAACwD,SAAS,EAAE,MAAM,CAAC;QACvG;MACJ;MACA,IAAI,IAAI,CAACxD,MAAM,CAACyD,YAAY,CAAC,CAAC,IAAIR,EAAE,CAACE,gBAAgB,CAAC,gBAAgB,CAAC,CAACN,MAAM,EAAE;QAC5EnE,WAAW,CAAC,EAAE,CAACgF,KAAK,CAAC5D,IAAI,CAACmD,EAAE,CAACE,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,oBAAoB,EAAE,qBAAqB,CAAC,CAAC;MACpH;MACAd,QAAQ,CAAC3B,WAAW,CAACuC,EAAE,CAAC;IAC5B;IACA,IAAIU,YAAY,GAAG,IAAI,CAAC3D,MAAM,CAAC6B,aAAa,IAAI,IAAI,CAAC7B,MAAM,CAAC6B,aAAa,CAAC+B,aAAa,IACnF,IAAI,CAAC5D,MAAM,CAAC6B,aAAa,CAAC+B,aAAa,CAACC,OAAO;IACnD,IAAI,CAAC,IAAI,CAAC7D,MAAM,CAAC6D,OAAO,IAAIF,YAAY,KAAK3B,SAAS,CAACa,MAAM,IAAI,IAAI,CAAC7C,MAAM,CAAC8D,aAAa,EAAE;MACxF,IAAI,CAAC9D,MAAM,CAAC+D,eAAe,CAAC,YAAY;QACpC9C,KAAK,CAACE,KAAK,CAAC6C,SAAS,GAAG,EAAE;QAC1B/C,KAAK,CAACE,KAAK,CAACT,WAAW,CAAC2B,QAAQ,CAAC;MACrC,CAAC,CAAC;IACN,CAAC,MACI;MACDpB,KAAK,CAACE,KAAK,CAACT,WAAW,CAAC2B,QAAQ,CAAC;IACrC;IACA,IAAI,CAACtC,UAAU,GAAG,CAACvB,iBAAiB,CAAC8C,CAAC,CAAC,GAAGA,CAAC,GAAG,IAAI,CAACvB,UAAU;EACjE,CAAC;EACDN,cAAc,CAACnB,SAAS,CAAC2F,OAAO,GAAG,UAAU3C,CAAC,EAAE;IAC5C,IAAIqC,YAAY,GAAG,IAAI,CAAC3D,MAAM,CAAC6B,aAAa,IAAI,IAAI,CAAC7B,MAAM,CAAC6B,aAAa,CAAC+B,aAAa,IACnF,IAAI,CAAC5D,MAAM,CAAC6B,aAAa,CAAC+B,aAAa,CAACC,OAAO;IACnD,IAAI,EAAE,IAAI,CAAC7D,MAAM,CAAC6D,OAAO,IAAIF,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC3D,MAAM,CAAC8D,aAAa,EAAE;MACtE,IAAI,CAACI,QAAQ,CAAC,CAAC,CAAC/C,KAAK,CAAC6C,SAAS,GAAG,EAAE;IACxC;IACA,IAAI,CAAC3C,oBAAoB,CAACC,CAAC,EAAE,IAAI,CAAC4C,QAAQ,CAAC,CAAC,EAAEC,SAAS,EAAEA,SAAS,CAAC;IACnE,IAAI3F,iBAAiB,CAAC8C,CAAC,CAAC,IAAI,IAAI,CAACtB,MAAM,CAACoE,gBAAgB,EAAE;MACtD,IAAI,CAACpE,MAAM,CAACqE,cAAc,CAAC,CAAC;IAChC;IACA,IAAI,CAACC,QAAQ,CAAC,CAAC;EACnB,CAAC;EACD7E,cAAc,CAACnB,SAAS,CAACiG,UAAU,GAAG,YAAY;IAC9C;IACA,IAAIC,UAAU,GAAG,IAAI,CAACxE,MAAM,CAACyE,0BAA0B,GAAG,IAAI,CAACzE,MAAM,CAAC0E,YAAY,CAACC,WAAW,CAAC,CAAC,GAC5F,IAAI,CAAC3E,MAAM,CAACa,OAAO,CAACK,aAAa,CAAC,GAAG,GAAG1B,QAAQ,CAACoF,UAAU,CAAC,CAAC1D,aAAa,CAAC1B,QAAQ,CAACqF,QAAQ,CAAC,CAACC,SAAS,CAAC,IAAI,CAAC;IACjH,IAAI,CAACZ,QAAQ,CAAC,CAAC,CAACa,YAAY,CAACP,UAAU,EAAE,IAAI,CAACG,WAAW,CAAC,CAAC,CAAC;IAC5D,IAAI,CAACK,WAAW,CAACR,UAAU,CAAC;EAChC,CAAC;EACD/E,cAAc,CAACnB,SAAS,CAAC2G,aAAa,GAAG,UAAUC,IAAI,EAAE;IACrD,IAAI,CAACC,eAAe,CAACD,IAAI,CAACE,KAAK,CAAC,CAACC,KAAK,CAACC,KAAK,GAAG7G,UAAU,CAACyG,IAAI,CAACI,KAAK,CAAC;IACrE,IAAI,IAAI,CAACtF,MAAM,CAACuF,aAAa,IAAIL,IAAI,CAACM,MAAM,KAAK,QAAQ,EAAE;MACvD,IAAI,CAACC,sBAAsB,CAAC,IAAI,CAACvB,QAAQ,CAAC,CAAC,CAAC;IAChD;EACJ,CAAC;EACDzE,cAAc,CAACnB,SAAS,CAACgG,QAAQ,GAAG,UAAUhD,CAAC,EAAE;IAC7C,IAAIA,CAAC,KAAK,KAAK,CAAC,EAAE;MAAEA,CAAC,GAAG;QACpBoE,IAAI,EAAE,IAAI,CAAC1F,MAAM,CAAC2F,UAAU,CAAC,CAAC,CAACC,UAAU,CAACC;MAC9C,CAAC;IAAE;IACH,IAAI,CAAC3B,QAAQ,CAAC,CAAC,CAAC4B,aAAa,CAACD,UAAU,GAAGvE,CAAC,CAACoE,IAAI;EACrD,CAAC;EACDjG,cAAc,CAACnB,SAAS,CAAC6G,eAAe,GAAG,UAAUC,KAAK,EAAE;IACxD,OAAO,IAAI,CAACT,WAAW,CAAC,CAAC,CAACoB,QAAQ,CAAChD,QAAQ,CAACqC,KAAK,CAACpC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;EACtE,CAAC;EACDvD,cAAc,CAACnB,SAAS,CAACQ,uBAAuB,GAAG,YAAY;IAC3D,IAAI,CAACmF,OAAO,CAAC,CAAC;EAClB,CAAC;EACDxE,cAAc,CAACnB,SAAS,CAAC6B,gBAAgB,GAAG,YAAY;IACpD,IAAI,CAAC6F,WAAW,GAAG,CAAC;MAAEC,KAAK,EAAEtH,eAAe;MAAEuH,OAAO,EAAE,IAAI,CAAC3B;IAAW,CAAC,EACpE;MAAE0B,KAAK,EAAErH,kBAAkB;MAAEsH,OAAO,EAAE,IAAI,CAACjB;IAAc,CAAC,EAC1D;MAAEgB,KAAK,EAAEpH,MAAM;MAAEqH,OAAO,EAAE,IAAI,CAAC5B;IAAS,CAAC,EACzC;MAAE2B,KAAK,EAAEnH,uBAAuB;MAAEoH,OAAO,EAAE,IAAI,CAACpH;IAAwB,CAAC,EACzE;MAAEmH,KAAK,EAAElH,qBAAqB;MAAEmH,OAAO,EAAE,IAAI,CAACnH;IAAsB,CAAC,CAAC;IAC1EM,sBAAsB,CAAC,IAAI,CAACW,MAAM,EAAE,IAAI,CAACgG,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC;EACrE,CAAC;EACDvG,cAAc,CAACnB,SAAS,CAAC6H,mBAAmB,GAAG,YAAY;IACvD9G,sBAAsB,CAAC,IAAI,CAACW,MAAM,EAAE,IAAI,CAACgG,WAAW,EAAE,KAAK,CAAC;EAChE,CAAC;EACDvG,cAAc,CAACnB,SAAS,CAACmH,sBAAsB,GAAG,UAAUtE,KAAK,EAAE;IAC/D,IAAIiF,KAAK,GAAG,IAAI,CAACpG,MAAM,CAACqG,cAAc,CAAC,CAAC;IACxC,IAAID,KAAK,IAAIjF,KAAK,EAAE;MAChBA,KAAK,CAACkE,KAAK,CAACC,KAAK,GAAGc,KAAK,CAACf,KAAK,CAACC,KAAK;IACzC;EACJ,CAAC;EACD7F,cAAc,CAACnB,SAAS,CAACS,qBAAqB,GAAG,UAAUuH,UAAU,EAAE;IACnE,IAAIvG,UAAU,GAAG,IAAI,CAACwG,YAAY,CAACD,UAAU,CAAC;IAC9C,IAAI,CAACrC,OAAO,CAAClE,UAAU,CAAC;EAC5B,CAAC;EACDN,cAAc,CAACnB,SAAS,CAACkI,aAAa,GAAG,UAAUC,IAAI,EAAEC,EAAE,EAAE;IACzD,IAAIC,GAAG,GAAG,IAAI,CAAC3G,MAAM,CAAC4G,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;IAClD,KAAK,IAAIvD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqD,EAAE,CAAC7D,MAAM,EAAEQ,CAAC,EAAE,EAAE;MAChC,IAAIqD,EAAE,CAAC3D,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG2D,GAAG,CAAC,KAAKF,IAAI,CAAC,EAAE,GAAGE,GAAG,CAAC,EAAE;QAC7D,OAAOtD,CAAC;MACZ;IACJ;IACA,OAAO,CAAC,CAAC;EACb,CAAC;EACD5D,cAAc,CAACnB,SAAS,CAACwD,OAAO,GAAG,YAAY;IAC3C,OAAO,IAAI,CAAC9B,MAAM,CAAC2B,aAAa,CAAC,CAAC,CAACkF,WAAW,CAACC,YAAY,CAAC,IAAI,CAAC9G,MAAM,CAAC2B,aAAa,CAAC,CAAC,CAACoF,aAAa,CAAC,IAAI,CAAC,CAAC;EAChH,CAAC;EACDtH,cAAc,CAACnB,SAAS,CAACiI,YAAY,GAAG,UAAUD,UAAU,EAAE;IAC1DA,UAAU,GAAGA,UAAU,YAAYrI,KAAK,GAAGqI,UAAU,GAAG,EAAE;IAC1D,IAAIU,KAAK,GAAG,IAAI,CAAChH,MAAM,CAAC4G,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;IACpD,IAAIlF,UAAU,GAAG,EAAE;IACnB,IAAIuF,UAAU,GAAG,KAAK;IACtB,IAAIC,YAAY,GAAG,CAAC,CAAC;IACrB,IAAIC,QAAQ,GAAG,YAAY;IAC3B,IAAIC,UAAU,GAAG,KAAK;IACtB,IAAI,EAAE,IAAI,CAACpH,MAAM,CAACqH,YAAY,CAACZ,IAAI,CAAC7E,QAAQ,CAAC,CAAC,IAAK,CAACpD,iBAAiB,CAAC,IAAI,CAACwB,MAAM,CAAC0B,UAAU,CAAC,IACtF,IAAI,CAAC1B,MAAM,CAAC0B,UAAU,CAAC4F,MAAO,CAAC,KAAM,IAAI,CAACtH,MAAM,CAACuH,cAAc,IAC/D,IAAI,CAACvH,MAAM,CAACwH,cAAc,CAACC,OAAO,CAAC5E,MAAM,IAAK,IAAI,CAAC7C,MAAM,CAAC0H,cAAc,CAACf,GAAG,CAAC9D,MAAM,CAAC,EAAE;MACzFuE,UAAU,GAAG,IAAI;IACrB;IACA,IAAIrF,eAAe;IACnB,IAAI,CAACvD,iBAAiB,CAAC,IAAI,CAACwB,MAAM,CAAC0B,UAAU,CAAC,IAAI,IAAI,CAAC1B,MAAM,CAAC0B,UAAU,CAAC4F,MAAM,EAAE;MAC7EvF,eAAe,GAAG,IAAI,CAAC/B,MAAM,CAAC2H,qBAAqB,CAAC,CAAC;IACzD,CAAC,MACI;MACD5F,eAAe,GAAG,IAAI,CAAC/B,MAAM,CAAC0B,UAAU,YAAYzD,KAAK,GACpDmJ,UAAU,GAAG,IAAI,CAACpH,MAAM,CAAC4H,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC5H,MAAM,CAAC0B,UAAU,GAAK,IAAI,CAAC1B,MAAM,CAAC0B,UAAU,CAAC,EAAE,GAAGyF,QAAQ,CAAC,CAACU,IAAI,CAAChF,MAAM,GAC5HuE,UAAU,GAAG,IAAI,CAACpH,MAAM,CAAC4H,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC5H,MAAM,CAAC0B,UAAU,CAAC,EAAE,GAAGyF,QAAQ,CAAC,CAACU,IAAI,GACzF,IAAI,CAAC7H,MAAM,CAAC2H,qBAAqB,CAAC,CAAE;IAC9C;IACA,IAAI,IAAI,CAAC3H,MAAM,CAAC6B,aAAa,IAAI,CAAC,IAAI,CAAC7B,MAAM,CAAC2B,aAAa,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE;MACtEG,eAAe,GAAG,IAAI,CAACD,OAAO,CAAC,CAAC;IACpC;IACA,IAAI,IAAI,CAAC9B,MAAM,CAAC8H,UAAU,EAAE;MACxBZ,YAAY,GAAG,IAAI,CAAClH,MAAM,CAAC8H,UAAU,CAACC,eAAe,CAAC,CAAC;IAC3D;IACA,IAAIjK,MAAM,CAACkK,IAAI,CAACd,YAAY,CAAC,CAACrE,MAAM,EAAE;MAClC,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGtB,eAAe,CAACc,MAAM,EAAEQ,CAAC,EAAE,EAAE;QAC7C4D,UAAU,GAAG,KAAK;QAClB;QACA,IAAIC,YAAY,CAAC1H,QAAQ,CAACyI,cAAc,CAAC,CAACpF,MAAM,IAAI,IAAI,CAAC2D,aAAa,CAACzE,eAAe,CAACgB,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEkE,YAAY,CAAC1H,QAAQ,CAACyI,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;UAC7JhB,UAAU,GAAG,IAAI;UACjB;UACAvF,UAAU,CAACwG,IAAI,CAAChB,YAAY,CAAC1H,QAAQ,CAACyI,cAAc,CAAC,CAAC,IAAI,CAACzB,aAAa,CAACzE,eAAe,CAACgB,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEkE,YAAY,CAAC1H,QAAQ,CAACyI,cAAc,CAAC,CAAC,CAAC,CAAC;QAClK;QACA;QACA,IAAIf,YAAY,CAAC1H,QAAQ,CAAC2I,cAAc,CAAC,CAACtF,MAAM,IAAI,IAAI,CAAC2D,aAAa,CAACzE,eAAe,CAACgB,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEkE,YAAY,CAAC1H,QAAQ,CAAC2I,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;UAC7JlB,UAAU,GAAG,IAAI;QACrB,CAAC,MACI,IAAI,CAACA,UAAU,EAAE;UAClBvF,UAAU,CAACwG,IAAI,CAACnG,eAAe,CAACgB,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAChE;MACJ;MACA,IAAIkE,YAAY,CAAC1H,QAAQ,CAAC4I,YAAY,CAAC,CAACvF,MAAM,EAAE;QAC5C,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6D,YAAY,CAAC1H,QAAQ,CAAC4I,YAAY,CAAC,CAACvF,MAAM,EAAEQ,CAAC,EAAE,EAAE;UACjE3B,UAAU,CAACwG,IAAI,CAAChB,YAAY,CAAC1H,QAAQ,CAAC4I,YAAY,CAAC,CAACrF,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACpF;MACJ;IACJ,CAAC,MACI;MACD,IAAIsD,UAAU,CAACzD,MAAM,EAAE;QACnB,IAAI4D,IAAI,GAAGrH,aAAa,CAAC2C,eAAe,CAAC;QACzCL,UAAU,GAAG+E,IAAI,CAAC4B,GAAG,CAAC,UAAUC,IAAI,EAAE;UAClC,IAAIC,KAAK,GAAGhJ,QAAQ,CAACiJ,SAAS,CAACxB,KAAK,EAAEsB,IAAI,CAAC;UAC3C,IAAIG,KAAK;UACT,IAAIC,MAAM,GAAGpC,UAAU,CAACqC,IAAI,CAAC,UAAUC,KAAK,EAAE;YAC1CH,KAAK,GAAGG,KAAK;YACb,OAAOL,KAAK,KAAKhJ,QAAQ,CAACiJ,SAAS,CAACxB,KAAK,EAAE4B,KAAK,CAAC;UACrD,CAAC,CAAC;UACF,OAAOF,MAAM,GAAGD,KAAK,GAAGH,IAAI;QAChC,CAAC,CAAC;MACN,CAAC,MACI;QACD5G,UAAU,GAAGK,eAAe;MAChC;IACJ;IACA,IAAI8G,KAAK,GAAGvC,UAAU;IACtB,IAAKuC,KAAK,CAACC,IAAI,IAAID,KAAK,CAACC,IAAI,KAAK,QAAQ,EAAG;MACzCpH,UAAU,GAAGK,eAAe;IAChC;IACA,IAAIgH,SAAS,GAAG,CAAC,CAAC;IAClB,IAAIC,MAAM;IACV,IAAIC,aAAa,GAAG,IAAI,CAACjJ,MAAM,CAACD,UAAU;IAC1C,KAAK,IAAIsD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4F,aAAa,CAACpG,MAAM,EAAEQ,CAAC,EAAE,EAAE;MAC3C,KAAK,IAAI6F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,aAAa,CAAClG,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACyE,OAAO,CAAC5E,MAAM,EAAEqG,CAAC,EAAE,EAAE;QAC/E,IAAIzC,IAAI,GAAG,EAAE;QACb,IAAIqC,IAAI,GAAGG,aAAa,CAAClG,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAC/CyE,OAAO,CAAC1E,QAAQ,CAACmG,CAAC,CAAClG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC8F,IAAI,CAAC9F,QAAQ,CAAC,CAAC;QACxDyD,IAAI,GAAG/E,UAAU;QACjB,IAAIyH,KAAK,GAAGL,IAAI,CAACM,KAAK,CAAC,GAAG,CAAC,CAACf,GAAG,CAAC,UAAUgB,CAAC,EAAE;UAAE,OAAOA,CAAC,CAACC,IAAI,CAAC,CAAC;QAAE,CAAC,CAAC;QAClE,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,OAAO,GAAGL,KAAK,EAAEI,EAAE,GAAGC,OAAO,CAAC3G,MAAM,EAAE0G,EAAE,EAAE,EAAE;UACzD,IAAIE,aAAa,GAAGD,OAAO,CAACD,EAAE,CAAC;UAC/BP,MAAM,GAAG7J,kBAAkB,CAACsK,aAAa,EAAEhD,IAAI,EAAEwC,aAAa,CAAClG,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACrFyE,OAAO,CAAC1E,QAAQ,CAACmG,CAAC,CAAClG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,IAAI,CAAChD,MAAM,CAAC;UACtD+I,SAAS,CAACE,aAAa,CAAClG,QAAQ,CAACM,CAAC,CAACL,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACyE,OAAO,CAAC1E,QAAQ,CAACmG,CAAC,CAAClG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACgE,KAAK,GAAG,KAAK,GAAGyC,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC,GAAGV,MAAM;QACjJ;MACJ;IACJ;IACA,IAAI1B,MAAM,GAAG;MACTA,MAAM,EAAE5F,UAAU;MAClBiI,KAAK,EAAEjI,UAAU,CAACmB,MAAM;MACxB9C,UAAU,EAAEgJ;IAChB,CAAC;IACD,OAAOzB,MAAM;EACjB,CAAC;EACD,OAAO7H,cAAc;AACzB,CAAC,CAACT,aAAa,CAAE;AACjB,SAASS,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}