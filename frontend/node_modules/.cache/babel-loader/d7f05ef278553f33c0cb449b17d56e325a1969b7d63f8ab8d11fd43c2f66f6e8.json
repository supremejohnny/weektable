{"ast":null,"code":"/**\n * SanitizeHtmlHelper for sanitize the value.\n */\nimport { detach } from './dom';\nimport { isNullOrUndefined } from './util';\nvar removeTags = ['script', 'style', 'iframe[src]', 'link[href*=\"javascript:\"]', 'object[type=\"text/x-scriptlet\"]', 'object[data^=\"data:text/html;base64\"]', 'img[src^=\"data:text/html;base64\"]', '[src^=\"javascript:\"]', '[dynsrc^=\"javascript:\"]', '[lowsrc^=\"javascript:\"]', '[type^=\"application/x-shockwave-flash\"]'];\nvar removeAttrs = [{\n  attribute: 'href',\n  selector: '[href*=\"javascript:\"]'\n}, {\n  attribute: 'href',\n  selector: 'a[href]'\n}, {\n  attribute: 'background',\n  selector: '[background^=\"javascript:\"]'\n}, {\n  attribute: 'style',\n  selector: '[style*=\"javascript:\"]'\n}, {\n  attribute: 'style',\n  selector: '[style*=\"expression(\"]'\n}, {\n  attribute: 'href',\n  selector: 'a[href^=\"data:text/html;base64\"]'\n}];\nvar jsEvents = ['onchange', 'onclick', 'onmouseover', 'onmouseout', 'onkeydown', 'onload', 'onerror', 'onblur', 'onfocus', 'onbeforeload', 'onbeforeunload', 'onkeyup', 'onsubmit', 'onafterprint', 'onbeforeonload', 'onbeforeprint', 'oncanplay', 'oncanplaythrough', 'oncontextmenu', 'ondblclick', 'ondrag', 'ondragend', 'ondragenter', 'ondragleave', 'ondragover', 'ondragstart', 'ondrop', 'ondurationchange', 'onemptied', 'onended', 'onformchange', 'onforminput', 'onhaschange', 'oninput', 'oninvalid', 'onkeypress', 'onloadeddata', 'onloadedmetadata', 'onloadstart', 'onmessage', 'onmousedown', 'onmousemove', 'onmouseup', 'onmousewheel', 'onoffline', 'onoine', 'ononline', 'onpagehide', 'onpageshow', 'onpause', 'onplay', 'onplaying', 'onpopstate', 'onprogress', 'onratechange', 'onreadystatechange', 'onredo', 'onresize', 'onscroll', 'onseeked', 'onseeking', 'onselect', 'onstalled', 'onstorage', 'onsuspend', 'ontimeupdate', 'onundo', 'onunload', 'onvolumechange', 'onwaiting', 'onmouseenter', 'onmouseleave', 'onstart', 'onpropertychange', 'oncopy', 'ontoggle', 'onpointerout', 'onpointermove', 'onpointerleave', 'onpointerenter', 'onpointerrawupdate', 'onpointerover', 'onbeforecopy', 'onbeforecut', 'onbeforeinput'];\nvar SanitizeHtmlHelper = /** @class */function () {\n  function SanitizeHtmlHelper() {}\n  SanitizeHtmlHelper.beforeSanitize = function () {\n    return {\n      selectors: {\n        tags: removeTags,\n        attributes: removeAttrs\n      }\n    };\n  };\n  SanitizeHtmlHelper.sanitize = function (value) {\n    if (isNullOrUndefined(value)) {\n      return value;\n    }\n    var item = this.beforeSanitize();\n    var output = this.serializeValue(item, value);\n    return output;\n  };\n  SanitizeHtmlHelper.serializeValue = function (item, value) {\n    this.removeAttrs = item.selectors.attributes;\n    this.removeTags = item.selectors.tags;\n    this.wrapElement = document.createElement('div');\n    this.wrapElement.innerHTML = value;\n    this.removeXssTags();\n    this.removeJsEvents();\n    this.removeXssAttrs();\n    var tempEleValue = this.wrapElement.innerHTML;\n    this.removeElement();\n    this.wrapElement = null;\n    return tempEleValue.replace(/&amp;/g, '&');\n  };\n  SanitizeHtmlHelper.removeElement = function () {\n    // Removes an element's attibute to avoid html tag validation\n    var nodes = this.wrapElement.children;\n    for (var j = 0; j < nodes.length; j++) {\n      var attribute = nodes[parseInt(j.toString(), 10)].attributes;\n      for (var i = 0; i < attribute.length; i++) {\n        this.wrapElement.children[parseInt(j.toString(), 10)].removeAttribute(attribute[parseInt(i.toString(), 10)].localName);\n      }\n    }\n  };\n  SanitizeHtmlHelper.removeXssTags = function () {\n    var elements = this.wrapElement.querySelectorAll(this.removeTags.join(','));\n    if (elements.length > 0) {\n      elements.forEach(function (element) {\n        detach(element);\n      });\n    } else {\n      return;\n    }\n  };\n  SanitizeHtmlHelper.removeJsEvents = function () {\n    var elements = this.wrapElement.querySelectorAll('[' + jsEvents.join('],[') + ']');\n    if (elements.length > 0) {\n      elements.forEach(function (element) {\n        jsEvents.forEach(function (attr) {\n          if (element.hasAttribute(attr)) {\n            element.removeAttribute(attr);\n          }\n        });\n      });\n    } else {\n      return;\n    }\n  };\n  SanitizeHtmlHelper.removeXssAttrs = function () {\n    var _this = this;\n    this.removeAttrs.forEach(function (item, index) {\n      var elements = _this.wrapElement.querySelectorAll(item.selector);\n      if (elements.length > 0) {\n        if (item.selector === 'a[href]') {\n          elements.forEach(function (element) {\n            if (element.getAttribute(item.attribute).replace(/\\t|\\s|&/, '').indexOf('javascript:alert') !== -1) {\n              element.removeAttribute(item.attribute);\n            }\n          });\n        } else {\n          elements.forEach(function (element) {\n            element.removeAttribute(item.attribute);\n          });\n        }\n      }\n    });\n  };\n  return SanitizeHtmlHelper;\n}();\nexport { SanitizeHtmlHelper };","map":{"version":3,"names":["detach","isNullOrUndefined","removeTags","removeAttrs","attribute","selector","jsEvents","SanitizeHtmlHelper","beforeSanitize","selectors","tags","attributes","sanitize","value","item","output","serializeValue","wrapElement","document","createElement","innerHTML","removeXssTags","removeJsEvents","removeXssAttrs","tempEleValue","removeElement","replace","nodes","children","j","length","parseInt","toString","i","removeAttribute","localName","elements","querySelectorAll","join","forEach","element","attr","hasAttribute","_this","index","getAttribute","indexOf"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-base/src/sanitize-helper.js"],"sourcesContent":["/**\n * SanitizeHtmlHelper for sanitize the value.\n */\nimport { detach } from './dom';\nimport { isNullOrUndefined } from './util';\nvar removeTags = [\n    'script',\n    'style',\n    'iframe[src]',\n    'link[href*=\"javascript:\"]',\n    'object[type=\"text/x-scriptlet\"]',\n    'object[data^=\"data:text/html;base64\"]',\n    'img[src^=\"data:text/html;base64\"]',\n    '[src^=\"javascript:\"]',\n    '[dynsrc^=\"javascript:\"]',\n    '[lowsrc^=\"javascript:\"]',\n    '[type^=\"application/x-shockwave-flash\"]'\n];\nvar removeAttrs = [\n    { attribute: 'href', selector: '[href*=\"javascript:\"]' },\n    { attribute: 'href', selector: 'a[href]' },\n    { attribute: 'background', selector: '[background^=\"javascript:\"]' },\n    { attribute: 'style', selector: '[style*=\"javascript:\"]' },\n    { attribute: 'style', selector: '[style*=\"expression(\"]' },\n    { attribute: 'href', selector: 'a[href^=\"data:text/html;base64\"]' }\n];\nvar jsEvents = ['onchange',\n    'onclick',\n    'onmouseover',\n    'onmouseout',\n    'onkeydown',\n    'onload',\n    'onerror',\n    'onblur',\n    'onfocus',\n    'onbeforeload',\n    'onbeforeunload',\n    'onkeyup',\n    'onsubmit',\n    'onafterprint',\n    'onbeforeonload',\n    'onbeforeprint',\n    'oncanplay',\n    'oncanplaythrough',\n    'oncontextmenu',\n    'ondblclick',\n    'ondrag',\n    'ondragend',\n    'ondragenter',\n    'ondragleave',\n    'ondragover',\n    'ondragstart',\n    'ondrop',\n    'ondurationchange',\n    'onemptied',\n    'onended',\n    'onformchange',\n    'onforminput',\n    'onhaschange',\n    'oninput',\n    'oninvalid',\n    'onkeypress',\n    'onloadeddata',\n    'onloadedmetadata',\n    'onloadstart',\n    'onmessage',\n    'onmousedown',\n    'onmousemove',\n    'onmouseup',\n    'onmousewheel',\n    'onoffline',\n    'onoine',\n    'ononline',\n    'onpagehide',\n    'onpageshow',\n    'onpause',\n    'onplay',\n    'onplaying',\n    'onpopstate',\n    'onprogress',\n    'onratechange',\n    'onreadystatechange',\n    'onredo',\n    'onresize',\n    'onscroll',\n    'onseeked',\n    'onseeking',\n    'onselect',\n    'onstalled',\n    'onstorage',\n    'onsuspend',\n    'ontimeupdate',\n    'onundo',\n    'onunload',\n    'onvolumechange',\n    'onwaiting',\n    'onmouseenter',\n    'onmouseleave',\n    'onstart',\n    'onpropertychange',\n    'oncopy',\n    'ontoggle',\n    'onpointerout',\n    'onpointermove',\n    'onpointerleave',\n    'onpointerenter',\n    'onpointerrawupdate',\n    'onpointerover',\n    'onbeforecopy',\n    'onbeforecut',\n    'onbeforeinput'\n];\nvar SanitizeHtmlHelper = /** @class */ (function () {\n    function SanitizeHtmlHelper() {\n    }\n    SanitizeHtmlHelper.beforeSanitize = function () {\n        return {\n            selectors: {\n                tags: removeTags,\n                attributes: removeAttrs\n            }\n        };\n    };\n    SanitizeHtmlHelper.sanitize = function (value) {\n        if (isNullOrUndefined(value)) {\n            return value;\n        }\n        var item = this.beforeSanitize();\n        var output = this.serializeValue(item, value);\n        return output;\n    };\n    SanitizeHtmlHelper.serializeValue = function (item, value) {\n        this.removeAttrs = item.selectors.attributes;\n        this.removeTags = item.selectors.tags;\n        this.wrapElement = document.createElement('div');\n        this.wrapElement.innerHTML = value;\n        this.removeXssTags();\n        this.removeJsEvents();\n        this.removeXssAttrs();\n        var tempEleValue = this.wrapElement.innerHTML;\n        this.removeElement();\n        this.wrapElement = null;\n        return tempEleValue.replace(/&amp;/g, '&');\n    };\n    SanitizeHtmlHelper.removeElement = function () {\n        // Removes an element's attibute to avoid html tag validation\n        var nodes = this.wrapElement.children;\n        for (var j = 0; j < nodes.length; j++) {\n            var attribute = nodes[parseInt(j.toString(), 10)].attributes;\n            for (var i = 0; i < attribute.length; i++) {\n                this.wrapElement.children[parseInt(j.toString(), 10)].removeAttribute(attribute[parseInt(i.toString(), 10)].localName);\n            }\n        }\n    };\n    SanitizeHtmlHelper.removeXssTags = function () {\n        var elements = this.wrapElement.querySelectorAll(this.removeTags.join(','));\n        if (elements.length > 0) {\n            elements.forEach(function (element) {\n                detach(element);\n            });\n        }\n        else {\n            return;\n        }\n    };\n    SanitizeHtmlHelper.removeJsEvents = function () {\n        var elements = this.wrapElement.querySelectorAll('[' + jsEvents.join('],[') + ']');\n        if (elements.length > 0) {\n            elements.forEach(function (element) {\n                jsEvents.forEach(function (attr) {\n                    if (element.hasAttribute(attr)) {\n                        element.removeAttribute(attr);\n                    }\n                });\n            });\n        }\n        else {\n            return;\n        }\n    };\n    SanitizeHtmlHelper.removeXssAttrs = function () {\n        var _this = this;\n        this.removeAttrs.forEach(function (item, index) {\n            var elements = _this.wrapElement.querySelectorAll(item.selector);\n            if (elements.length > 0) {\n                if (item.selector === 'a[href]') {\n                    elements.forEach(function (element) {\n                        if ((element.getAttribute(item.attribute)).replace(/\\t|\\s|&/, '').indexOf('javascript:alert') !== -1) {\n                            element.removeAttribute(item.attribute);\n                        }\n                    });\n                }\n                else {\n                    elements.forEach(function (element) {\n                        element.removeAttribute(item.attribute);\n                    });\n                }\n            }\n        });\n    };\n    return SanitizeHtmlHelper;\n}());\nexport { SanitizeHtmlHelper };\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,MAAM,QAAQ,OAAO;AAC9B,SAASC,iBAAiB,QAAQ,QAAQ;AAC1C,IAAIC,UAAU,GAAG,CACb,QAAQ,EACR,OAAO,EACP,aAAa,EACb,2BAA2B,EAC3B,iCAAiC,EACjC,uCAAuC,EACvC,mCAAmC,EACnC,sBAAsB,EACtB,yBAAyB,EACzB,yBAAyB,EACzB,yCAAyC,CAC5C;AACD,IAAIC,WAAW,GAAG,CACd;EAAEC,SAAS,EAAE,MAAM;EAAEC,QAAQ,EAAE;AAAwB,CAAC,EACxD;EAAED,SAAS,EAAE,MAAM;EAAEC,QAAQ,EAAE;AAAU,CAAC,EAC1C;EAAED,SAAS,EAAE,YAAY;EAAEC,QAAQ,EAAE;AAA8B,CAAC,EACpE;EAAED,SAAS,EAAE,OAAO;EAAEC,QAAQ,EAAE;AAAyB,CAAC,EAC1D;EAAED,SAAS,EAAE,OAAO;EAAEC,QAAQ,EAAE;AAAyB,CAAC,EAC1D;EAAED,SAAS,EAAE,MAAM;EAAEC,QAAQ,EAAE;AAAmC,CAAC,CACtE;AACD,IAAIC,QAAQ,GAAG,CAAC,UAAU,EACtB,SAAS,EACT,aAAa,EACb,YAAY,EACZ,WAAW,EACX,QAAQ,EACR,SAAS,EACT,QAAQ,EACR,SAAS,EACT,cAAc,EACd,gBAAgB,EAChB,SAAS,EACT,UAAU,EACV,cAAc,EACd,gBAAgB,EAChB,eAAe,EACf,WAAW,EACX,kBAAkB,EAClB,eAAe,EACf,YAAY,EACZ,QAAQ,EACR,WAAW,EACX,aAAa,EACb,aAAa,EACb,YAAY,EACZ,aAAa,EACb,QAAQ,EACR,kBAAkB,EAClB,WAAW,EACX,SAAS,EACT,cAAc,EACd,aAAa,EACb,aAAa,EACb,SAAS,EACT,WAAW,EACX,YAAY,EACZ,cAAc,EACd,kBAAkB,EAClB,aAAa,EACb,WAAW,EACX,aAAa,EACb,aAAa,EACb,WAAW,EACX,cAAc,EACd,WAAW,EACX,QAAQ,EACR,UAAU,EACV,YAAY,EACZ,YAAY,EACZ,SAAS,EACT,QAAQ,EACR,WAAW,EACX,YAAY,EACZ,YAAY,EACZ,cAAc,EACd,oBAAoB,EACpB,QAAQ,EACR,UAAU,EACV,UAAU,EACV,UAAU,EACV,WAAW,EACX,UAAU,EACV,WAAW,EACX,WAAW,EACX,WAAW,EACX,cAAc,EACd,QAAQ,EACR,UAAU,EACV,gBAAgB,EAChB,WAAW,EACX,cAAc,EACd,cAAc,EACd,SAAS,EACT,kBAAkB,EAClB,QAAQ,EACR,UAAU,EACV,cAAc,EACd,eAAe,EACf,gBAAgB,EAChB,gBAAgB,EAChB,oBAAoB,EACpB,eAAe,EACf,cAAc,EACd,aAAa,EACb,eAAe,CAClB;AACD,IAAIC,kBAAkB,GAAG,aAAe,YAAY;EAChD,SAASA,kBAAkBA,CAAA,EAAG,CAC9B;EACAA,kBAAkB,CAACC,cAAc,GAAG,YAAY;IAC5C,OAAO;MACHC,SAAS,EAAE;QACPC,IAAI,EAAER,UAAU;QAChBS,UAAU,EAAER;MAChB;IACJ,CAAC;EACL,CAAC;EACDI,kBAAkB,CAACK,QAAQ,GAAG,UAAUC,KAAK,EAAE;IAC3C,IAAIZ,iBAAiB,CAACY,KAAK,CAAC,EAAE;MAC1B,OAAOA,KAAK;IAChB;IACA,IAAIC,IAAI,GAAG,IAAI,CAACN,cAAc,CAAC,CAAC;IAChC,IAAIO,MAAM,GAAG,IAAI,CAACC,cAAc,CAACF,IAAI,EAAED,KAAK,CAAC;IAC7C,OAAOE,MAAM;EACjB,CAAC;EACDR,kBAAkB,CAACS,cAAc,GAAG,UAAUF,IAAI,EAAED,KAAK,EAAE;IACvD,IAAI,CAACV,WAAW,GAAGW,IAAI,CAACL,SAAS,CAACE,UAAU;IAC5C,IAAI,CAACT,UAAU,GAAGY,IAAI,CAACL,SAAS,CAACC,IAAI;IACrC,IAAI,CAACO,WAAW,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAChD,IAAI,CAACF,WAAW,CAACG,SAAS,GAAGP,KAAK;IAClC,IAAI,CAACQ,aAAa,CAAC,CAAC;IACpB,IAAI,CAACC,cAAc,CAAC,CAAC;IACrB,IAAI,CAACC,cAAc,CAAC,CAAC;IACrB,IAAIC,YAAY,GAAG,IAAI,CAACP,WAAW,CAACG,SAAS;IAC7C,IAAI,CAACK,aAAa,CAAC,CAAC;IACpB,IAAI,CAACR,WAAW,GAAG,IAAI;IACvB,OAAOO,YAAY,CAACE,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC;EAC9C,CAAC;EACDnB,kBAAkB,CAACkB,aAAa,GAAG,YAAY;IAC3C;IACA,IAAIE,KAAK,GAAG,IAAI,CAACV,WAAW,CAACW,QAAQ;IACrC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,KAAK,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;MACnC,IAAIzB,SAAS,GAAGuB,KAAK,CAACI,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACrB,UAAU;MAC5D,KAAK,IAAIsB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG7B,SAAS,CAAC0B,MAAM,EAAEG,CAAC,EAAE,EAAE;QACvC,IAAI,CAAChB,WAAW,CAACW,QAAQ,CAACG,QAAQ,CAACF,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACE,eAAe,CAAC9B,SAAS,CAAC2B,QAAQ,CAACE,CAAC,CAACD,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,SAAS,CAAC;MAC1H;IACJ;EACJ,CAAC;EACD5B,kBAAkB,CAACc,aAAa,GAAG,YAAY;IAC3C,IAAIe,QAAQ,GAAG,IAAI,CAACnB,WAAW,CAACoB,gBAAgB,CAAC,IAAI,CAACnC,UAAU,CAACoC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC3E,IAAIF,QAAQ,CAACN,MAAM,GAAG,CAAC,EAAE;MACrBM,QAAQ,CAACG,OAAO,CAAC,UAAUC,OAAO,EAAE;QAChCxC,MAAM,CAACwC,OAAO,CAAC;MACnB,CAAC,CAAC;IACN,CAAC,MACI;MACD;IACJ;EACJ,CAAC;EACDjC,kBAAkB,CAACe,cAAc,GAAG,YAAY;IAC5C,IAAIc,QAAQ,GAAG,IAAI,CAACnB,WAAW,CAACoB,gBAAgB,CAAC,GAAG,GAAG/B,QAAQ,CAACgC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;IAClF,IAAIF,QAAQ,CAACN,MAAM,GAAG,CAAC,EAAE;MACrBM,QAAQ,CAACG,OAAO,CAAC,UAAUC,OAAO,EAAE;QAChClC,QAAQ,CAACiC,OAAO,CAAC,UAAUE,IAAI,EAAE;UAC7B,IAAID,OAAO,CAACE,YAAY,CAACD,IAAI,CAAC,EAAE;YAC5BD,OAAO,CAACN,eAAe,CAACO,IAAI,CAAC;UACjC;QACJ,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC,MACI;MACD;IACJ;EACJ,CAAC;EACDlC,kBAAkB,CAACgB,cAAc,GAAG,YAAY;IAC5C,IAAIoB,KAAK,GAAG,IAAI;IAChB,IAAI,CAACxC,WAAW,CAACoC,OAAO,CAAC,UAAUzB,IAAI,EAAE8B,KAAK,EAAE;MAC5C,IAAIR,QAAQ,GAAGO,KAAK,CAAC1B,WAAW,CAACoB,gBAAgB,CAACvB,IAAI,CAACT,QAAQ,CAAC;MAChE,IAAI+B,QAAQ,CAACN,MAAM,GAAG,CAAC,EAAE;QACrB,IAAIhB,IAAI,CAACT,QAAQ,KAAK,SAAS,EAAE;UAC7B+B,QAAQ,CAACG,OAAO,CAAC,UAAUC,OAAO,EAAE;YAChC,IAAKA,OAAO,CAACK,YAAY,CAAC/B,IAAI,CAACV,SAAS,CAAC,CAAEsB,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAACoB,OAAO,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,EAAE;cAClGN,OAAO,CAACN,eAAe,CAACpB,IAAI,CAACV,SAAS,CAAC;YAC3C;UACJ,CAAC,CAAC;QACN,CAAC,MACI;UACDgC,QAAQ,CAACG,OAAO,CAAC,UAAUC,OAAO,EAAE;YAChCA,OAAO,CAACN,eAAe,CAACpB,IAAI,CAACV,SAAS,CAAC;UAC3C,CAAC,CAAC;QACN;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EACD,OAAOG,kBAAkB;AAC7B,CAAC,CAAC,CAAE;AACJ,SAASA,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}