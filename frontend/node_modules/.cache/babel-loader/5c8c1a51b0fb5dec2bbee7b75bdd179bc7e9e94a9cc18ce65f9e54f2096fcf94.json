{"ast":null,"code":"/**\n * PdfGraphics.ts class for EJ2-PDF\n */\nimport { PdfColorSpace, TextRenderingMode, PdfFillMode, PdfTextAlignment } from './enum';\nimport { PdfVerticalAlignment, PdfBlendMode } from './enum';\nimport { PdfSubSuperScript, PdfWordWrapType } from './fonts/enum';\nimport { PdfStreamWriter } from './../input-output/pdf-stream-writer';\nimport { PdfPen } from './pdf-pen';\nimport { PdfBrush } from './brushes/pdf-brush';\nimport { PdfSolidBrush } from './brushes/pdf-solid-brush';\nimport { PdfFont } from './fonts/pdf-font';\nimport { PdfTransformationMatrix, Matrix } from './pdf-transformation-matrix';\nimport { PointF, SizeF, RectangleF } from './../drawing/pdf-drawing';\nimport { ProcedureSets } from './constants';\nimport { PdfString } from './../primitives/pdf-string';\nimport { PdfStringFormat } from './fonts/pdf-string-format';\nimport { TemporaryDictionary } from './../collections/object-object-pair/dictionary';\nimport { PdfTransparency } from './pdf-transparency';\nimport { PdfStringLayouter, LineType } from './fonts/string-layouter';\nimport { DictionaryProperties } from './../input-output/pdf-dictionary-properties';\nimport { StringTokenizer } from './fonts/string-tokenizer';\nimport { PdfAutomaticFieldInfoCollection } from './../document/automatic-fields/automatic-field-info-collection';\nimport { PdfAutomaticFieldInfo } from './../document/automatic-fields/automatic-field-info';\nimport { Operators } from './../input-output/pdf-operators';\nimport { UnicodeTrueTypeFont } from './fonts/unicode-true-type-font';\nimport { InternalEnum } from './../primitives/pdf-string';\nimport { RtlRenderer } from './fonts/rtl-renderer';\nimport { PdfTextDirection } from './enum';\nimport { PathPointType } from './figures/enum';\nimport { PdfGradientBrush } from './../../implementation/graphics/brushes/pdf-gradient-brush';\nimport { PdfTilingBrush } from './brushes/pdf-tiling-brush';\n/**\n * `PdfGraphics` class represents a graphics context of the objects.\n * It's used for performing all the graphics operations.\n * ```typescript\n * // create a new PDF document\n * let document : PdfDocument = new PdfDocument();\n * // add a new page to the document\n * let page1 : PdfPage = document.pages.add();\n * // set the font\n * let font : PdfStandardFont = new PdfStandardFont(PdfFontFamily.Helvetica, 20);\n * // create black brush\n * let blackBrush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n * //\n * //graphics of the page\n * let page1Graphics : PdfGraphics = page1.graphics;\n * // draw the text on the page1 graphics\n * page1Graphics.drawString('Hello World', font, blackBrush, new PointF(0, 0));\n * //\n * // save the document\n * document.save('output.pdf');\n * // destroy the document\n * document.destroy();\n * ```\n */\nvar PdfGraphics = /** @class */function () {\n  function PdfGraphics(arg1, arg2, arg3) {\n    /**\n     * Represents the `Current color space`.\n     * @private\n     */\n    this.currentColorSpace = PdfColorSpace.Rgb;\n    /**\n     * Stores `previous rendering mode`.\n     * @private\n     */\n    this.previousTextRenderingMode = TextRenderingMode.Fill;\n    /**\n     * Previous `character spacing` value or 0.\n     * @private\n     */\n    this.previousCharacterSpacing = 0.0;\n    /**\n     * Previous `word spacing` value or 0.\n     * @private\n     */\n    this.previousWordSpacing = 0.0;\n    /**\n     * The `previously used text scaling` value.\n     * @private\n     */\n    this.previousTextScaling = 100.0;\n    /**\n     * Instance of `ProcedureSets` class.\n     * @private\n     */\n    this.procedureSets = new ProcedureSets();\n    /**\n     * To check wihether it is a `direct text rendering`.\n     * @default true\n     * @private\n     */\n    this.isNormalRender = true;\n    /**\n     * check whether to `use font size` to calculate the shift.\n     * @default false\n     * @private\n     */\n    this.isUseFontSize = false;\n    /**\n     * check whether the font is in `italic type`.\n     * @default false\n     * @private\n     */\n    this.isItalic = false;\n    /**\n     * Check whether it is an `emf Text Matrix`.\n     * @default false\n     * @private\n     */\n    this.isEmfTextScaled = false;\n    /**\n     * Check whether it is an `emf` call.\n     * @default false\n     * @private\n     */\n    this.isEmf = false;\n    /**\n     * Check whether it is an `emf plus` call.\n     * @default false\n     * @private\n     */\n    this.isEmfPlus = false;\n    /**\n     * Check whether it is in `base line format`.\n     * @default true\n     * @private\n     */\n    this.isBaselineFormat = true;\n    /**\n     * Emf Text `Scaling Factor`.\n     * @private\n     */\n    this.emfScalingFactor = new SizeF(0, 0);\n    /**\n     * To check whether the `last color space` of document and garphics is saved.\n     * @private\n     */\n    this.colorSpaceChanged = false;\n    /**\n     * Stores an instance of `DictionaryProperties`.\n     * @private\n     */\n    this.dictionaryProperties = new DictionaryProperties();\n    /**\n     * Checks whether the x co-ordinate is need to set as client size or not.\n     * @hidden\n     * @private\n     */\n    this.isOverloadWithPosition = false;\n    /**\n     * Checks whether the x co-ordinate is need to set as client size or not.\n     * @hidden\n     * @private\n     */\n    this.isPointOverload = false;\n    /**\n     * Current colorspaces.\n     * @hidden\n     * @private\n     */\n    this.currentColorSpaces = ['RGB', 'CMYK', 'GrayScale', 'Indexed'];\n    /**\n     * Checks the current image `is optimized` or not.\n     * @default false.\n     * @private\n     */\n    this.isImageOptimized = false;\n    /**\n     * Stores the `graphics states`.\n     * @private\n     */\n    this.graphicsState = [];\n    /**\n     * Indicates whether the object `had trasparency`.\n     * @default false\n     * @private\n     */\n    this.istransparencySet = false;\n    /**\n     * Stores the instance of `PdfAutomaticFieldInfoCollection` class .\n     * @default null\n     * @private\n     */\n    this.internalAutomaticFields = null;\n    /**\n     * Stores the index of the start line that should draw with in the next page.\n     * @private\n     */\n    this.startCutIndex = -1;\n    this.getResources = arg2;\n    this.canvasSize = arg1;\n    if (arg3 instanceof PdfStreamWriter) {\n      this.pdfStreamWriter = arg3;\n    } else {\n      this.pdfStreamWriter = new PdfStreamWriter(arg3);\n    }\n    this.initialize();\n  }\n  Object.defineProperty(PdfGraphics.prototype, \"stringLayoutResult\", {\n    //  Properties\n    /**\n     * Returns the `result` after drawing string.\n     * @private\n     */\n    get: function () {\n      return this.pdfStringLayoutResult;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"size\", {\n    /**\n     * Gets the `size` of the canvas.\n     * @private\n     */\n    get: function () {\n      return this.canvasSize;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"mediaBoxUpperRightBound\", {\n    /**\n     * Gets and Sets the value of `MediaBox upper right bound`.\n     * @private\n     */\n    get: function () {\n      if (typeof this.internalMediaBoxUpperRightBound === 'undefined') {\n        this.internalMediaBoxUpperRightBound = 0;\n      }\n      return this.internalMediaBoxUpperRightBound;\n    },\n    set: function (value) {\n      this.internalMediaBoxUpperRightBound = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"clientSize\", {\n    /**\n     * Gets the `size` of the canvas reduced by margins and page templates.\n     * @private\n     */\n    get: function () {\n      return new SizeF(this.clipBounds.width, this.clipBounds.height);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"colorSpace\", {\n    /**\n     * Gets or sets the current `color space` of the document\n     * @private\n     */\n    get: function () {\n      return this.currentColorSpace;\n    },\n    set: function (value) {\n      this.currentColorSpace = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"streamWriter\", {\n    /**\n     * Gets the `stream writer`.\n     * @private\n     */\n    get: function () {\n      return this.pdfStreamWriter;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"matrix\", {\n    /**\n     * Gets the `transformation matrix` reflecting current transformation.\n     * @private\n     */\n    get: function () {\n      if (this.transformationMatrix == null) {\n        this.transformationMatrix = new PdfTransformationMatrix();\n      }\n      return this.transformationMatrix;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"layer\", {\n    /**\n     * Gets the `layer` for the graphics, if exists.\n     * @private\n     */\n    get: function () {\n      return this.pageLayer;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"page\", {\n    /**\n     * Gets the `page` for this graphics, if exists.\n     * @private\n     */\n    get: function () {\n      return this.pageLayer.page;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphics.prototype, \"automaticFields\", {\n    get: function () {\n      if (this.internalAutomaticFields == null || typeof this.internalAutomaticFields === 'undefined') {\n        this.internalAutomaticFields = new PdfAutomaticFieldInfoCollection();\n      }\n      return this.internalAutomaticFields;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  //Implementation\n  /**\n   * `Initializes` this instance.\n   * @private\n   */\n  PdfGraphics.prototype.initialize = function () {\n    this.bStateSaved = false;\n    this.currentPen = null;\n    this.currentBrush = null;\n    this.currentFont = null;\n    this.currentColorSpace = PdfColorSpace.Rgb;\n    this.bCSInitialized = false;\n    this.transformationMatrix = null;\n    this.previousTextRenderingMode = -1; //.Fill;\n    this.previousCharacterSpacing = -1.0;\n    this.previousWordSpacing = -1.0;\n    this.previousTextScaling = -100.0;\n    // this.m_trasparencies = null;\n    this.currentStringFormat = null;\n    this.clipBounds = new RectangleF(new PointF(0, 0), this.size);\n    this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf);\n  };\n  PdfGraphics.prototype.drawPdfTemplate = function (template, location, size) {\n    if (typeof size === 'undefined') {\n      if (template == null) {\n        throw Error('ArgumentNullException-template');\n      }\n      this.drawPdfTemplate(template, location, template.size);\n    } else {\n      // let crossTable : PdfCrossTable = null;\n      // if (this.pageLayer != null) {\n      //     crossTable = (this.page as PdfPage).section.parentDocument.crossTable;\n      // }\n      if (template == null) {\n        throw Error('ArgumentNullException-template');\n      }\n      var scaleX = template.width > 0 ? size.width / template.width : 1;\n      var scaleY = template.height > 0 ? size.height / template.height : 1;\n      var bNeedScale = !(scaleX === 1 && scaleY === 1);\n      // Save state.\n      var state = this.save();\n      // Take into consideration that rect location is bottom/left.\n      var matrix = new PdfTransformationMatrix();\n      if (this.pageLayer != null) {\n        this.getTranslateTransform(location.x, location.y + size.height, matrix);\n      }\n      if (bNeedScale) {\n        this.getScaleTransform(scaleX, scaleY, matrix);\n      }\n      this.pdfStreamWriter.modifyCtm(matrix);\n      // Output template.\n      var resources = this.getResources.getResources();\n      var name_1 = resources.getName(template);\n      this.pdfStreamWriter.executeObject(name_1);\n      // Restore state.\n      this.restore(state);\n      //Transfer automatic fields from template.\n      var g = template.graphics;\n      if (g != null) {\n        for (var index = 0; index < g.automaticFields.automaticFields.length; index++) {\n          var fieldInfo = g.automaticFields.automaticFields[index];\n          var newLocation = new PointF(fieldInfo.location.x + location.x, fieldInfo.location.y + location.y);\n          var scalingX = template.size.width == 0 ? 0 : size.width / template.size.width;\n          var scalingY = template.size.height == 0 ? 0 : size.height / template.size.height;\n          this.automaticFields.add(new PdfAutomaticFieldInfo(fieldInfo.field, newLocation, scalingX, scalingY));\n          this.page.dictionary.modify();\n        }\n      }\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.imageB);\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.imageC);\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.imageI);\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n    }\n  };\n  /**\n   * @public\n   */\n  PdfGraphics.prototype.drawString = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9) {\n    if (typeof arg1 === 'string' && arg2 instanceof PdfFont && (arg3 instanceof PdfPen || arg3 === null) && (arg4 instanceof PdfBrush || arg4 === null) && typeof arg5 === 'number' && typeof arg6 === 'number' && (arg7 instanceof PdfStringFormat || arg7 === null) && typeof arg8 === 'undefined') {\n      this.isOverloadWithPosition = true;\n      this.drawString(arg1, arg2, arg3, arg4, arg5, arg6, this.clientSize.width - arg5, 0, arg7);\n    } else {\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var temparg5 = arg5;\n      var temparg6 = arg6;\n      var temparg7 = arg7;\n      var temparg8 = arg8;\n      var temparg9 = arg9;\n      var layouter = new PdfStringLayouter();\n      var result = layouter.layout(arg1, arg2, temparg9, new SizeF(temparg7, temparg8), this.isOverloadWithPosition, this.clientSize);\n      if (!result.empty) {\n        var rect = this.checkCorrectLayoutRectangle(result.actualSize, temparg5, temparg6, temparg9);\n        if (temparg7 <= 0) {\n          temparg5 = rect.x;\n          temparg7 = rect.width;\n        }\n        if (temparg8 <= 0) {\n          temparg6 = rect.y;\n          temparg8 = rect.height;\n        }\n        this.drawStringLayoutResult(result, arg2, temparg3, temparg4, new RectangleF(temparg5, temparg6, temparg7, temparg8), temparg9);\n        this.isEmfTextScaled = false;\n        this.emfScalingFactor = new SizeF(0, 0);\n      }\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n      this.isNormalRender = true;\n      this.pdfStringLayoutResult = result;\n      this.isUseFontSize = false;\n    }\n  };\n  PdfGraphics.prototype.drawLine = function (arg1, arg2, arg3, arg4, arg5) {\n    if (arg2 instanceof PointF) {\n      var temparg2 = arg2;\n      var temparg3 = arg3;\n      this.drawLine(arg1, temparg2.x, temparg2.y, temparg3.x, temparg3.y);\n    } else {\n      var temparg2 = arg2;\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var temparg5 = arg5;\n      this.stateControl(arg1, null, null);\n      var sw = this.streamWriter;\n      sw.beginPath(temparg2, temparg3);\n      sw.appendLineSegment(temparg4, temparg5);\n      sw.strokePath();\n      this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf);\n    }\n  };\n  PdfGraphics.prototype.drawRectangle = function (arg1, arg2, arg3, arg4, arg5, arg6) {\n    if (arg1 instanceof PdfPen && typeof arg2 === 'number') {\n      var temparg3 = arg3;\n      this.drawRectangle(arg1, null, arg2, temparg3, arg4, arg5);\n    } else if (arg1 instanceof PdfBrush && typeof arg2 === 'number') {\n      var temparg3 = arg3;\n      this.drawRectangle(null, arg1, arg2, temparg3, arg4, arg5);\n    } else {\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var temparg5 = arg5;\n      var temparg6 = arg6;\n      if (arg2 instanceof PdfTilingBrush) {\n        this.bCSInitialized = false;\n        var xOffset = this.matrix.matrix.offsetX + temparg3;\n        var yOffset = void 0;\n        if (this.layer != null && this.layer.page != null) {\n          yOffset = this.layer.page.size.height - this.matrix.matrix.offsetY + temparg4;\n        } else {\n          yOffset = this.clientSize.height - this.matrix.matrix.offsetY + temparg4;\n        }\n        arg2.location = new PointF(xOffset, yOffset);\n        arg2.graphics.colorSpace = this.colorSpace;\n      } else if (arg2 instanceof PdfGradientBrush) {\n        arg2.colorSpace = this.colorSpace;\n      }\n      if (arg2 instanceof PdfSolidBrush && arg2.color.isEmpty) {\n        arg2 = null;\n      }\n      var temparg1 = arg1;\n      var temparg2 = arg2;\n      this.stateControl(temparg1, temparg2, null);\n      this.streamWriter.appendRectangle(temparg3, temparg4, temparg5, temparg6);\n      this.drawPathHelper(temparg1, temparg2, false);\n    }\n  };\n  /**\n   * Draw rounded rectangle specified by a brush, pen, coordinate pair, a width, a height and a radius.\n   * ```typescript\n   * // Create a new PDF document.\n   * let document : PdfDocument = new PdfDocument();\n   * // Create a new page\n   * let page : PdfPage = document.pages.add();\n   * // Create brush for draw rectangle\n   * let brush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(238, 130, 238));\n   * // Create a new PDF pen\n   * let pen: PdfPen = new PdfPen(new PdfColor(255, 0, 0), 1);\n   * // Draw rounded rectangle\n   * page.graphics.drawRoundedRectangle(pen, brush, 20, 20, 100, 50, 5);\n   * // save the document\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   * @param pen Stoke color of the rectangle.\n   * @param brush Fill color of the rectangle.\n   * @param x The x-coordinate of the upper-left corner of the rectangle to draw.\n   * @param y The y-coordinate of the upper-left corner of the rectangle to draw.\n   * @param width Width of the rectangle to draw.\n   * @param height Height of the rectangle to draw.\n   * @param radius Radius of the arcs to draw.\n   */\n  PdfGraphics.prototype.drawRoundedRectangle = function (pen, brush, x, y, width, height, radius) {\n    if (pen === null) {\n      throw new Error('pen');\n    }\n    if (brush === null) {\n      throw new Error('brush');\n    }\n    if (radius === 0) {\n      this.drawRectangle(pen, brush, x, y, width, height);\n    } else {\n      var bounds = [x, y, width, height];\n      var diameter = radius * 2;\n      var size = [diameter, diameter];\n      var arc = [bounds[0], bounds[1], size[0], size[1]];\n      this._pathPoints = [];\n      this._pathTypes = [];\n      var startFigure = true;\n      startFigure = this._addArc(arc[0], arc[1], arc[2], arc[3], 180, 90, startFigure);\n      arc[0] = bounds[0] + bounds[2] - diameter;\n      startFigure = this._addArc(arc[0], arc[1], arc[2], arc[3], 270, 90, startFigure);\n      arc[1] = bounds[1] + bounds[3] - diameter;\n      startFigure = this._addArc(arc[0], arc[1], arc[2], arc[3], 0, 90, startFigure);\n      arc[0] = bounds[0];\n      startFigure = this._addArc(arc[0], arc[1], arc[2], arc[3], 90, 90, startFigure);\n      var index = this._pathPoints.length - 1;\n      var type = this._pathTypes[index];\n      type = type | PathPointType.CloseSubpath;\n      this._pathTypes[index] = type;\n      this._drawPath(pen, brush, this._pathPoints, this._pathTypes, PdfFillMode.Alternate);\n      this._pathPoints = [];\n      this._pathTypes = [];\n    }\n  };\n  PdfGraphics.prototype._addArc = function (x, y, width, height, startAngle, sweepAngle, startFigure) {\n    var points = this._getBezierArcPoints(x, y, x + width, y + height, startAngle, sweepAngle);\n    for (var i = 0; i < points.length; i = i + 8) {\n      var point = [points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5], points[i + 6], points[i + 7]];\n      startFigure = this._addArcPoints(point, PathPointType.Bezier3, startFigure);\n    }\n    return startFigure;\n  };\n  PdfGraphics.prototype._addArcPoints = function (points, pointType, startFigure) {\n    for (var i = 0; i < points.length; i++) {\n      var point = new PointF(points[i], points[i + 1]);\n      if (i === 0) {\n        if (this._pathPoints.length === 0 || startFigure) {\n          this._addPoint(point, PathPointType.Start);\n          startFigure = false;\n        } else if (point.x !== this._getLastPoint().x || point.y !== this._getLastPoint().y) {\n          this._addPoint(point, PathPointType.Line);\n        }\n      } else {\n        this._addPoint(point, pointType);\n      }\n      i++;\n    }\n    return startFigure;\n  };\n  PdfGraphics.prototype._getLastPoint = function () {\n    var lastPoint = new PointF(0, 0);\n    var count = this._pathPoints.length;\n    if (count > 0) {\n      lastPoint.x = this._pathPoints[count - 1].x;\n      lastPoint.y = this._pathPoints[count - 1].y;\n    }\n    return lastPoint;\n  };\n  PdfGraphics.prototype._addPoint = function (point, type) {\n    this._pathPoints.push(point);\n    this._pathTypes.push(type);\n  };\n  PdfGraphics.prototype._getBezierArcPoints = function (x1, y1, x2, y2, s1, e1) {\n    if (x1 > x2) {\n      var tmp = void 0;\n      tmp = x1;\n      x1 = x2;\n      x2 = tmp;\n    }\n    if (y2 > y1) {\n      var tmp = void 0;\n      tmp = y1;\n      y1 = y2;\n      y2 = tmp;\n    }\n    var fragAngle;\n    var numFragments;\n    if (Math.abs(e1) <= 90) {\n      fragAngle = e1;\n      numFragments = 1;\n    } else {\n      numFragments = Math.ceil(Math.abs(e1) / 90);\n      fragAngle = e1 / numFragments;\n    }\n    var xcen = (x1 + x2) / 2;\n    var ycen = (y1 + y2) / 2;\n    var rx = (x2 - x1) / 2;\n    var ry = (y2 - y1) / 2;\n    var halfAng = fragAngle * (Math.PI / 360);\n    var kappa = Math.abs(4.0 / 3.0 * (1.0 - Math.cos(halfAng)) / Math.sin(halfAng));\n    var pointList = [];\n    for (var i = 0; i < numFragments; i++) {\n      var theta0 = (s1 + i * fragAngle) * (Math.PI / 180);\n      var theta1 = (s1 + (i + 1) * fragAngle) * (Math.PI / 180);\n      var cos0 = Math.cos(theta0);\n      var cos1 = Math.cos(theta1);\n      var sin0 = Math.sin(theta0);\n      var sin1 = Math.sin(theta1);\n      if (fragAngle > 0) {\n        pointList.push(xcen + rx * cos0, ycen - ry * sin0, xcen + rx * (cos0 - kappa * sin0), ycen - ry * (sin0 + kappa * cos0), xcen + rx * (cos1 + kappa * sin1), ycen - ry * (sin1 - kappa * cos1), xcen + rx * cos1, ycen - ry * sin1);\n      } else {\n        pointList.push(xcen + rx * cos0, ycen - ry * sin0, xcen + rx * (cos0 + kappa * sin0), ycen - ry * (sin0 - kappa * cos0), xcen + rx * (cos1 - kappa * sin1), ycen - ry * (sin1 + kappa * cos1), xcen + rx * cos1, ycen - ry * sin1);\n      }\n    }\n    return pointList;\n  };\n  PdfGraphics.prototype.drawPathHelper = function (arg1, arg2, arg3, arg4) {\n    if (typeof arg3 === 'boolean') {\n      var temparg3 = arg3;\n      this.drawPathHelper(arg1, arg2, PdfFillMode.Winding, temparg3);\n    } else {\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var isPen = arg1 != null;\n      var isBrush = arg2 != null;\n      var isEvenOdd = temparg3 === PdfFillMode.Alternate;\n      if (isPen && isBrush) {\n        this.streamWriter.fillStrokePath(isEvenOdd);\n      } else if (!isPen && !isBrush) {\n        this.streamWriter.endPath();\n      } else if (isPen) {\n        this.streamWriter.strokePath();\n      } else {\n        this.streamWriter.fillPath(isEvenOdd);\n      }\n    }\n  };\n  PdfGraphics.prototype.drawImage = function (arg1, arg2, arg3, arg4, arg5) {\n    if (typeof arg2 === 'number' && typeof arg3 === 'number' && typeof arg4 === 'undefined') {\n      var size = arg1.physicalDimension;\n      this.drawImage(arg1, arg2, arg3, size.width, size.height);\n    } else {\n      var temparg2 = arg2;\n      var temparg3 = arg3;\n      var temparg4 = arg4;\n      var temparg5 = arg5;\n      arg1.save();\n      var matrix = new PdfTransformationMatrix();\n      this.getTranslateTransform(temparg2, temparg3 + temparg5, matrix);\n      this.getScaleTransform(arg4, arg5, matrix);\n      this.pdfStreamWriter.write('q');\n      this.pdfStreamWriter.modifyCtm(matrix);\n      // Output template.\n      var resources = this.getResources.getResources();\n      if (typeof this.pageLayer !== 'undefined' && this.page != null) {\n        resources.document = this.page.document;\n      }\n      var name_2 = resources.getName(arg1);\n      if (typeof this.pageLayer !== 'undefined') {\n        this.page.setResources(resources);\n      }\n      this.pdfStreamWriter.executeObject(name_2);\n      this.pdfStreamWriter.write(Operators.restoreState);\n      this.pdfStreamWriter.write(Operators.newLine);\n      var resource = this.getResources.getResources();\n      resource.requireProcedureSet(this.procedureSets.imageB);\n      resource.requireProcedureSet(this.procedureSets.imageC);\n      resource.requireProcedureSet(this.procedureSets.imageI);\n      resource.requireProcedureSet(this.procedureSets.text);\n    }\n  };\n  //Implementation\n  /**\n   * Returns `bounds` of the line info.\n   * @private\n   */\n  PdfGraphics.prototype.getLineBounds = function (lineIndex, result, font, layoutRectangle, format) {\n    var bounds;\n    if (!result.empty && lineIndex < result.lineCount && lineIndex >= 0) {\n      var line = result.lines[lineIndex];\n      var vShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n      var y = vShift + layoutRectangle.y + result.lineHeight * lineIndex;\n      var lineWidth = line.width;\n      var hShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n      var lineIndent = this.getLineIndent(line, format, layoutRectangle, lineIndex === 0);\n      hShift += !this.rightToLeft(format) ? lineIndent : 0;\n      var x = layoutRectangle.x + hShift;\n      var width = !this.shouldJustify(line, layoutRectangle.width, format) ? lineWidth - lineIndent : layoutRectangle.width - lineIndent;\n      var height = result.lineHeight;\n      bounds = new RectangleF(x, y, width, height);\n    } else {\n      bounds = new RectangleF(0, 0, 0, 0);\n    }\n    return bounds;\n  };\n  /**\n   * Creates `lay outed rectangle` depending on the text settings.\n   * @private\n   */\n  PdfGraphics.prototype.checkCorrectLayoutRectangle = function (textSize, x, y, format) {\n    var layoutedRectangle = new RectangleF(x, y, textSize.width, textSize.width);\n    if (format != null) {\n      switch (format.alignment) {\n        case PdfTextAlignment.Center:\n          layoutedRectangle.x -= layoutedRectangle.width / 2;\n          break;\n        case PdfTextAlignment.Right:\n          layoutedRectangle.x -= layoutedRectangle.width;\n          break;\n      }\n      switch (format.lineAlignment) {\n        case PdfVerticalAlignment.Middle:\n          layoutedRectangle.y -= layoutedRectangle.height / 2;\n          break;\n        case PdfVerticalAlignment.Bottom:\n          layoutedRectangle.y -= layoutedRectangle.height;\n          break;\n      }\n    }\n    return layoutedRectangle;\n  };\n  /**\n   * Sets the `layer` for the graphics.\n   * @private\n   */\n  PdfGraphics.prototype.setLayer = function (layer) {\n    this.pageLayer = layer;\n    var page = layer.page;\n    if (page != null && typeof page !== 'undefined') {\n      page.beginSave = this.pageSave;\n    }\n  };\n  /**\n   * Adding page number field before page saving.\n   * @private\n   */\n  PdfGraphics.prototype.pageSave = function (page) {\n    if (page.graphics.automaticFields != null) {\n      for (var i = 0; i < page.graphics.automaticFields.automaticFields.length; i++) {\n        var fieldInfo = page.graphics.automaticFields.automaticFields[i];\n        fieldInfo.field.performDraw(page.graphics, fieldInfo.location, fieldInfo.scalingX, fieldInfo.scalingY);\n      }\n    }\n  };\n  /**\n   * `Draws a layout result`.\n   * @private\n   */\n  PdfGraphics.prototype.drawStringLayoutResult = function (result, font, pen, brush, layoutRectangle, format) {\n    if (!result.empty) {\n      this.applyStringSettings(font, pen, brush, format, layoutRectangle);\n      // Set text scaling\n      var textScaling = format != null ? format.horizontalScalingFactor : 100.0;\n      if (textScaling !== this.previousTextScaling && !this.isEmfTextScaled) {\n        this.pdfStreamWriter.setTextScaling(textScaling);\n        this.previousTextScaling = textScaling;\n      }\n      var height = format == null || format.lineSpacing === 0 ? font.height : format.lineSpacing + font.height;\n      var subScript = format != null && format.subSuperScript === PdfSubSuperScript.SubScript;\n      var shift = 0;\n      shift = subScript ? height - (font.height + font.metrics.getDescent(format)) : height - font.metrics.getAscent(format);\n      this.shift = shift;\n      this.pdfStreamWriter.startNextLine(layoutRectangle.x, layoutRectangle.y - shift);\n      this.pdfStreamWriter.setLeading(+height);\n      var resultHeight = 0;\n      var remainingString = '';\n      for (var i = 0; i < result.lines.length; i++) {\n        resultHeight += result.lineHeight;\n        if (layoutRectangle.y + resultHeight > this.clientSize.height) {\n          this.startCutIndex = i;\n          break;\n        }\n      }\n      for (var j = this.startCutIndex; j < result.lines.length && j >= 0; j++) {\n        remainingString += result.lines[j].text;\n      }\n      var bounds = new RectangleF(layoutRectangle.x, layoutRectangle.y, layoutRectangle.width, layoutRectangle.height);\n      this.drawLayoutResult(result, font, format, layoutRectangle);\n      this.underlineStrikeoutText(pen, brush, result, font, bounds, format);\n      this.isEmfPlus = false;\n      this.isUseFontSize = false;\n      if (this.startCutIndex !== -1) {\n        var page = this.getNextPage();\n        page.graphics.drawString(remainingString, font, pen, brush, layoutRectangle.x, 0, layoutRectangle.width, 0, format);\n      }\n    } else {\n      throw new Error('ArgumentNullException:result');\n    }\n  };\n  /**\n   * Gets the `next page`.\n   * @private\n   */\n  PdfGraphics.prototype.getNextPage = function () {\n    var section = this.currentPage.section;\n    var nextPage = null;\n    var index = section.indexOf(this.currentPage);\n    if (index === section.count - 1) {\n      nextPage = section.add();\n    } else {\n      nextPage = section.getPages()[index + 1];\n    }\n    return nextPage;\n  };\n  PdfGraphics.prototype.setClip = function (rectangle, mode) {\n    if (typeof mode === 'undefined') {\n      this.setClip(rectangle, PdfFillMode.Winding);\n    } else {\n      this.pdfStreamWriter.appendRectangle(rectangle);\n      this.pdfStreamWriter.clipPath(mode === PdfFillMode.Alternate);\n    }\n  };\n  /**\n   * Applies all the `text settings`.\n   * @private\n   */\n  PdfGraphics.prototype.applyStringSettings = function (font, pen, brush, format, bounds) {\n    if (brush instanceof PdfTilingBrush) {\n      this.bCSInitialized = false;\n      brush.graphics.colorSpace = this.colorSpace;\n    } else if (brush instanceof PdfGradientBrush) {\n      this.bCSInitialized = false;\n      brush.colorSpace = this.colorSpace;\n    }\n    var setLineWidth = false;\n    var tm = this.getTextRenderingMode(pen, brush, format);\n    this.stateControl(pen, brush, font, format);\n    this.pdfStreamWriter.beginText();\n    if (tm !== this.previousTextRenderingMode) {\n      this.pdfStreamWriter.setTextRenderingMode(tm);\n      this.previousTextRenderingMode = tm;\n    }\n    // Set character spacing.\n    var cs = format != null ? format.characterSpacing : 0;\n    if (cs !== this.previousCharacterSpacing && !this.isEmfTextScaled) {\n      this.pdfStreamWriter.setCharacterSpacing(cs);\n      this.previousCharacterSpacing = cs;\n    }\n    // Set word spacing.\n    // NOTE: it works only if the space code is equal to 32 (0x20).\n    var ws = format != null ? format.wordSpacing : 0;\n    if (ws !== this.previousWordSpacing) {\n      this.pdfStreamWriter.setWordSpacing(ws);\n      this.previousWordSpacing = ws;\n    }\n  };\n  /**\n   * Calculates `shift value` if the text is vertically aligned.\n   * @private\n   */\n  PdfGraphics.prototype.getTextVerticalAlignShift = function (textHeight, boundsHeight, format) {\n    var shift = 0;\n    if (boundsHeight >= 0 && format != null && format.lineAlignment !== PdfVerticalAlignment.Top) {\n      switch (format.lineAlignment) {\n        case PdfVerticalAlignment.Middle:\n          shift = (boundsHeight - textHeight) / 2;\n          break;\n        case PdfVerticalAlignment.Bottom:\n          shift = boundsHeight - textHeight;\n          break;\n      }\n    }\n    return shift;\n  };\n  /**\n   * `Draws layout result`.\n   * @private\n   */\n  PdfGraphics.prototype.drawLayoutResult = function (result, font, format, layoutRectangle) {\n    var vAlignShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n    if (vAlignShift !== 0) {\n      this.pdfStreamWriter.startNextLine(0, vAlignShift);\n    }\n    var ttfFont = font;\n    var unicode = ttfFont != null && ttfFont.isUnicode;\n    var embed = ttfFont != null && ttfFont.isEmbedFont;\n    var lines = result.lines;\n    for (var i = 0, len = lines.length; i < len && i !== this.startCutIndex; i++) {\n      var lineInfo = lines[i];\n      var line = lineInfo.text;\n      var lineWidth = lineInfo.width;\n      var hAlignShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n      var lineIndent = this.getLineIndent(lineInfo, format, layoutRectangle, i === 0);\n      hAlignShift += !this.rightToLeft(format) ? lineIndent : 0;\n      if (hAlignShift !== 0 && !this.isEmfTextScaled) {\n        this.pdfStreamWriter.startNextLine(hAlignShift, 0);\n      }\n      if (unicode) {\n        this.drawUnicodeLine(lineInfo, layoutRectangle, font, format);\n      } else {\n        this.drawAsciiLine(lineInfo, layoutRectangle, font, format);\n      }\n      if (hAlignShift !== 0 && !this.isEmfTextScaled) {\n        this.pdfStreamWriter.startNextLine(-hAlignShift, 0);\n      }\n      if (this.isOverloadWithPosition && lines.length > 1) {\n        this.pdfStreamWriter.startNextLine(-layoutRectangle.x, 0);\n        layoutRectangle.x = 0;\n        layoutRectangle.width = this.clientSize.width;\n        this.isOverloadWithPosition = false;\n        this.isPointOverload = true;\n      } else if (this.isOverloadWithPosition) {\n        this.isOverloadWithPosition = false;\n      }\n    }\n    this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n    if (vAlignShift !== 0) {\n      this.pdfStreamWriter.startNextLine(0, -(vAlignShift - result.lineHeight));\n    }\n    this.pdfStreamWriter.endText();\n  };\n  /**\n   * `Draws Ascii line`.\n   * @private\n   */\n  PdfGraphics.prototype.drawAsciiLine = function (lineInfo, layoutRectangle, font, format) {\n    this.justifyLine(lineInfo, layoutRectangle.width, format);\n    var value = '';\n    if (lineInfo.text.indexOf('(') !== -1 || lineInfo.text.indexOf(')') !== -1) {\n      for (var i = 0; i < lineInfo.text.length; i++) {\n        if (lineInfo.text[i] === '(') {\n          value += '\\\\\\(';\n        } else if (lineInfo.text[i] === ')') {\n          value += '\\\\\\)';\n        } else {\n          value += lineInfo.text[i];\n        }\n      }\n    }\n    if (value === '') {\n      value = lineInfo.text;\n    }\n    var line = '(' + value + ')';\n    this.pdfStreamWriter.showNextLineText(new PdfString(line));\n  };\n  /**\n   * Draws unicode line.\n   * @private\n   */\n  PdfGraphics.prototype.drawUnicodeLine = function (lineInfo, layoutRectangle, font, format) {\n    var line = lineInfo.text;\n    var lineWidth = lineInfo.width;\n    var rtl = format !== null && typeof format !== 'undefined' && format.rightToLeft;\n    var useWordSpace = format !== null && typeof format !== 'undefined' && (format.wordSpacing !== 0 || format.alignment === PdfTextAlignment.Justify);\n    var ttfFont = font;\n    var wordSpacing = this.justifyLine(lineInfo, layoutRectangle.width, format);\n    var rtlRender = new RtlRenderer();\n    if (rtl || format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n      var blocks = null;\n      var rightAlign = format !== null && typeof format !== 'undefined' && format.alignment === PdfTextAlignment.Right;\n      if (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n        /* tslint:disable-next-line:max-line-length */\n        blocks = rtlRender.layout(line, ttfFont, format.textDirection === PdfTextDirection.RightToLeft ? true : false, useWordSpace, format);\n      } else {\n        blocks = rtlRender.layout(line, ttfFont, rightAlign, useWordSpace, format);\n      }\n      var words = null;\n      if (blocks.length > 1) {\n        if (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n          /* tslint:disable-next-line:max-line-length */\n          words = rtlRender.splitLayout(line, ttfFont, format.textDirection === PdfTextDirection.RightToLeft ? true : false, useWordSpace, format);\n        } else {\n          words = rtlRender.splitLayout(line, ttfFont, rightAlign, useWordSpace, format);\n        }\n      } else {\n        words = [line];\n      }\n      this.drawUnicodeBlocks(blocks, words, ttfFont, format, wordSpacing);\n    } else {\n      if (useWordSpace) {\n        var result = this.breakUnicodeLine(line, ttfFont, null);\n        var blocks = result.tokens;\n        var words = result.words;\n        this.drawUnicodeBlocks(blocks, words, ttfFont, format, wordSpacing);\n      } else {\n        var token = this.convertToUnicode(line, ttfFont);\n        var value = this.getUnicodeString(token);\n        this.streamWriter.showNextLineText(value);\n      }\n    }\n  };\n  /**\n   * Draws array of unicode tokens.\n   */\n  PdfGraphics.prototype.drawUnicodeBlocks = function (blocks, words, font, format, wordSpacing) {\n    if (blocks == null) {\n      throw new Error('Argument Null Exception : blocks');\n    }\n    if (words == null) {\n      throw new Error('Argument Null Exception : words');\n    }\n    if (font == null) {\n      throw new Error('Argument Null Exception : font');\n    }\n    this.streamWriter.startNextLine();\n    var x = 0;\n    var xShift = 0;\n    var firstLineIndent = 0;\n    var paragraphIndent = 0;\n    try {\n      if (format !== null && typeof format !== 'undefined') {\n        firstLineIndent = format.firstLineIndent;\n        paragraphIndent = format.paragraphIndent;\n        format.firstLineIndent = 0;\n        format.paragraphIndent = 0;\n      }\n      var spaceWidth = font.getCharWidth(StringTokenizer.whiteSpace, format) + wordSpacing;\n      var characterSpacing = format != null ? format.characterSpacing : 0;\n      var wordSpace = format !== null && typeof format !== 'undefined' && wordSpacing === 0 ? format.wordSpacing : 0;\n      spaceWidth += characterSpacing + wordSpace;\n      for (var i = 0; i < blocks.length; i++) {\n        var token = blocks[i];\n        var word = words[i];\n        var tokenWidth = 0;\n        if (x !== 0) {\n          this.streamWriter.startNextLine(x, 0);\n        }\n        if (word.length > 0) {\n          tokenWidth += /*Utils.Round(*/font.measureString(word, format).width /*)*/;\n          tokenWidth += characterSpacing;\n          var val = this.getUnicodeString(token);\n          this.streamWriter.showText(val);\n        }\n        if (i !== blocks.length - 1) {\n          x = tokenWidth + spaceWidth;\n          xShift += x;\n        }\n      }\n      // Rolback current line position.\n      if (xShift > 0) {\n        this.streamWriter.startNextLine(-xShift, 0);\n      }\n    } finally {\n      if (format !== null && typeof format !== 'undefined') {\n        format.firstLineIndent = firstLineIndent;\n        format.paragraphIndent = paragraphIndent;\n      }\n    }\n  };\n  /**\n   * Breakes the unicode line to the words and converts symbols to glyphs.\n   */\n  PdfGraphics.prototype.breakUnicodeLine = function (line, ttfFont, words) {\n    if (line === null) {\n      throw new Error('Argument Null Exception : line');\n    }\n    words = line.split(null);\n    var tokens = [];\n    for (var i = 0; i < words.length; i++) {\n      // Reconvert string according to unicode standard.\n      var word = words[i];\n      var token = this.convertToUnicode(word, ttfFont);\n      tokens[i] = token;\n    }\n    return {\n      tokens: tokens,\n      words: words\n    };\n  };\n  /**\n   * Creates PdfString from the unicode text.\n   */\n  PdfGraphics.prototype.getUnicodeString = function (token) {\n    if (token === null) {\n      throw new Error('Argument Null Exception : token');\n    }\n    var val = new PdfString(token);\n    val.converted = true;\n    val.encode = InternalEnum.ForceEncoding.Ascii;\n    return val;\n  };\n  /**\n   * Converts to unicode format.\n   */\n  PdfGraphics.prototype.convertToUnicode = function (text, ttfFont) {\n    var token = null;\n    if (text == null) {\n      throw new Error('Argument Null Exception : text');\n    }\n    if (ttfFont == null) {\n      throw new Error('Argument Null Exception : ttfFont');\n    }\n    if (ttfFont.fontInternal instanceof UnicodeTrueTypeFont) {\n      var ttfReader = ttfFont.fontInternal.ttfReader;\n      ttfFont.setSymbols(text);\n      token = ttfReader.convertString(text);\n      var bytes = PdfString.toUnicodeArray(token, false);\n      token = PdfString.byteToString(bytes);\n    }\n    return token;\n  };\n  /**\n   * `Justifies` the line if needed.\n   * @private\n   */\n  PdfGraphics.prototype.justifyLine = function (lineInfo, boundsWidth, format) {\n    var line = lineInfo.text;\n    var lineWidth = lineInfo.width;\n    var shouldJustify = this.shouldJustify(lineInfo, boundsWidth, format);\n    var hasWordSpacing = format != null && format.wordSpacing !== 0;\n    var symbols = StringTokenizer.spaces;\n    var whitespacesCount = StringTokenizer.getCharsCount(line, symbols);\n    var wordSpace = 0;\n    if (shouldJustify) {\n      // Correct line width.\n      if (hasWordSpacing) {\n        lineWidth -= whitespacesCount * format.wordSpacing;\n      }\n      var difference = boundsWidth - lineWidth;\n      wordSpace = difference / whitespacesCount;\n      this.pdfStreamWriter.setWordSpacing(wordSpace);\n    } else {\n      // If there is justifying, but the line shouldn't be justified, restore default word spacing.\n      if (hasWordSpacing) {\n        this.pdfStreamWriter.setWordSpacing(format.wordSpacing);\n      } else {\n        this.pdfStreamWriter.setWordSpacing(0);\n      }\n    }\n    return wordSpace;\n  };\n  /**\n   * `Reset` or reinitialize the current graphic value.\n   * @private\n   */\n  PdfGraphics.prototype.reset = function (size) {\n    this.canvasSize = size;\n    this.streamWriter.clear();\n    this.initialize();\n    this.initializeCoordinates();\n  };\n  /**\n   * Checks whether the line should be `justified`.\n   * @private\n   */\n  PdfGraphics.prototype.shouldJustify = function (lineInfo, boundsWidth, format) {\n    var line = lineInfo.text;\n    var lineWidth = lineInfo.width;\n    var justifyStyle = format != null && format.alignment === PdfTextAlignment.Justify;\n    var goodWidth = boundsWidth >= 0 && lineWidth < boundsWidth;\n    var symbols = StringTokenizer.spaces;\n    var whitespacesCount = StringTokenizer.getCharsCount(line, symbols);\n    var hasSpaces = whitespacesCount > 0 && line[0] !== StringTokenizer.whiteSpace;\n    var goodLineBreakStyle = (lineInfo.lineType & LineType.LayoutBreak) > 0 || format && format.wordWrap === PdfWordWrapType.None;\n    var shouldJustify = justifyStyle && goodWidth && hasSpaces && goodLineBreakStyle;\n    return shouldJustify;\n  };\n  /**\n   * Emulates `Underline, Strikeout` of the text if needed.\n   * @private\n   */\n  PdfGraphics.prototype.underlineStrikeoutText = function (pen, brush, result, font, layoutRectangle, format) {\n    if (font.underline || font.strikeout) {\n      // Calculate line width.\n      var linePen = this.createUnderlineStikeoutPen(pen, brush, font, format);\n      if (linePen != null) {\n        // Approximate line positions.\n        var vShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n        var underlineYOffset = 0;\n        underlineYOffset = layoutRectangle.y + vShift + font.metrics.getAscent(format) + 1.5 * linePen.width;\n        var strikeoutYOffset = layoutRectangle.y + vShift + font.metrics.getHeight(format) / 2 + 1.5 * linePen.width;\n        var lines = result.lines;\n        // Run through the text and draw lines.\n        for (var i = 0, len = result.lineCount; i < len; i++) {\n          var lineInfo = lines[i];\n          var line = lineInfo.text;\n          var lineWidth = lineInfo.width;\n          var hShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n          var lineIndent = this.getLineIndent(lineInfo, format, layoutRectangle, i === 0);\n          hShift += !this.rightToLeft(format) ? lineIndent : 0;\n          var x1 = layoutRectangle.x + hShift;\n          var x2 = !this.shouldJustify(lineInfo, layoutRectangle.width, format) ? x1 + lineWidth - lineIndent : x1 + layoutRectangle.width - lineIndent;\n          if (font.underline) {\n            var y = underlineYOffset;\n            this.drawLine(linePen, x1, y, x2, y);\n            underlineYOffset += result.lineHeight;\n          }\n          if (font.strikeout) {\n            var y = strikeoutYOffset;\n            this.drawLine(linePen, x1, y, x2, y);\n            strikeoutYOffset += result.lineHeight;\n          }\n          if (this.isPointOverload && lines.length > 1) {\n            layoutRectangle.x = 0;\n            layoutRectangle.width = this.clientSize.width;\n          }\n        }\n        this.isPointOverload = false;\n      }\n    }\n  };\n  /**\n   * `Creates a pen` for drawing lines in the text.\n   * @private\n   */\n  PdfGraphics.prototype.createUnderlineStikeoutPen = function (pen, brush, font, format) {\n    // Calculate line width.\n    var lineWidth = font.metrics.getSize(format) / 20;\n    var linePen = null;\n    // Create a pen fo the lines.\n    if (pen != null) {\n      linePen = new PdfPen(pen.color, lineWidth);\n    } else if (brush != null) {\n      linePen = new PdfPen(brush, lineWidth);\n    }\n    return linePen;\n  };\n  /**\n   * Return `text rendering mode`.\n   * @private\n   */\n  PdfGraphics.prototype.getTextRenderingMode = function (pen, brush, format) {\n    var tm = TextRenderingMode.None;\n    if (pen != null && brush != null) {\n      tm = TextRenderingMode.FillStroke;\n    } else if (pen != null) {\n      tm = TextRenderingMode.Stroke;\n    } else {\n      tm = TextRenderingMode.Fill;\n    }\n    if (format != null && format.clipPath) {\n      tm |= TextRenderingMode.ClipFlag;\n    }\n    return tm;\n  };\n  /**\n   * Returns `line indent` for the line.\n   * @private\n   */\n  PdfGraphics.prototype.getLineIndent = function (lineInfo, format, layoutBounds, firstLine) {\n    var lineIndent = 0;\n    var firstParagraphLine = (lineInfo.lineType & LineType.FirstParagraphLine) > 0;\n    if (format != null && firstParagraphLine) {\n      lineIndent = firstLine ? format.firstLineIndent : format.paragraphIndent;\n      lineIndent = layoutBounds.width > 0 ? Math.min(layoutBounds.width, lineIndent) : lineIndent;\n    }\n    return lineIndent;\n  };\n  /**\n   * Calculates shift value if the line is `horizontaly aligned`.\n   * @private\n   */\n  PdfGraphics.prototype.getHorizontalAlignShift = function (lineWidth, boundsWidth, format) {\n    var shift = 0;\n    if (boundsWidth >= 0 && format != null && format.alignment !== PdfTextAlignment.Left) {\n      switch (format.alignment) {\n        case PdfTextAlignment.Center:\n          shift = (boundsWidth - lineWidth) / 2;\n          break;\n        case PdfTextAlignment.Right:\n          shift = boundsWidth - lineWidth;\n          break;\n      }\n    }\n    return shift;\n  };\n  /**\n   * Gets or sets the value that indicates `text direction` mode.\n   * @private\n   */\n  PdfGraphics.prototype.rightToLeft = function (format) {\n    var rtl = format !== null && typeof format !== 'undefined' && format.rightToLeft;\n    if (format !== null && typeof format !== 'undefined') {\n      if (format.textDirection !== PdfTextDirection.None && typeof format.textDirection !== 'undefined') {\n        rtl = true;\n      }\n    }\n    return rtl;\n  };\n  PdfGraphics.prototype.stateControl = function (pen, brush, font, format) {\n    if (typeof format === 'undefined') {\n      this.stateControl(pen, brush, font, null);\n    } else {\n      if (brush instanceof PdfGradientBrush) {\n        this.bCSInitialized = false;\n        brush.colorSpace = this.colorSpace;\n      }\n      if (brush instanceof PdfTilingBrush) {\n        this.bCSInitialized = false;\n        brush.graphics.colorSpace = this.colorSpace;\n      }\n      var saveState = false;\n      if (brush !== null) {\n        var solidBrush = brush;\n        if (typeof this.pageLayer !== 'undefined' && this.pageLayer != null) {\n          if (this.colorSpaceChanged === false) {\n            this.lastDocumentCS = this.pageLayer.page.document.colorSpace;\n            this.lastGraphicsCS = this.pageLayer.page.graphics.colorSpace;\n            this.colorSpace = this.pageLayer.page.document.colorSpace;\n            this.currentColorSpace = this.pageLayer.page.document.colorSpace;\n            this.colorSpaceChanged = true;\n          }\n        }\n        this.initCurrentColorSpace(this.currentColorSpace);\n      } else if (pen != null) {\n        var pdfPen = pen;\n        if (typeof this.pageLayer !== 'undefined' && this.pageLayer != null) {\n          this.colorSpace = this.pageLayer.page.document.colorSpace;\n          this.currentColorSpace = this.pageLayer.page.document.colorSpace;\n        }\n        this.initCurrentColorSpace(this.currentColorSpace);\n      }\n      this.penControl(pen, saveState);\n      this.brushControl(brush, saveState);\n      this.fontControl(font, format, saveState);\n    }\n  };\n  /**\n   * Initializes the `current color space`.\n   * @private\n   */\n  PdfGraphics.prototype.initCurrentColorSpace = function (colorspace) {\n    var re = this.getResources.getResources();\n    if (!this.bCSInitialized) {\n      if (this.currentColorSpace != PdfColorSpace.GrayScale) {\n        this.pdfStreamWriter.setColorSpace('Device' + this.currentColorSpaces[this.currentColorSpace], true);\n        this.pdfStreamWriter.setColorSpace('Device' + this.currentColorSpaces[this.currentColorSpace], false);\n        this.bCSInitialized = true;\n      } else {\n        this.pdfStreamWriter.setColorSpace('DeviceGray', true);\n        this.pdfStreamWriter.setColorSpace('DeviceGray', false);\n        this.bCSInitialized = true;\n      }\n    }\n  };\n  /**\n   * Controls the `pen state`.\n   * @private\n   */\n  PdfGraphics.prototype.penControl = function (pen, saveState) {\n    if (pen != null) {\n      this.currentPen = pen;\n      pen.monitorChanges(this.currentPen, this.pdfStreamWriter, this.getResources, saveState, this.colorSpace, this.matrix.clone());\n      this.currentPen = pen.clone();\n    }\n  };\n  /**\n   * Controls the `brush state`.\n   * @private\n   */\n  PdfGraphics.prototype.brushControl = function (brush, saveState) {\n    if (brush != null && typeof brush !== 'undefined') {\n      var b = brush.clone();\n      var lgb = b;\n      if (lgb !== null && typeof lgb !== 'undefined' && !(brush instanceof PdfSolidBrush) && !(brush instanceof PdfTilingBrush)) {\n        var m = lgb.matrix;\n        var matrix = this.matrix.clone();\n        if (m != null) {\n          m.multiply(matrix);\n          matrix = m;\n        }\n        lgb.matrix = matrix;\n      }\n      this.currentBrush = lgb;\n      var br = brush;\n      b.monitorChanges(this.currentBrush, this.pdfStreamWriter, this.getResources, saveState, this.colorSpace);\n      this.currentBrush = brush;\n      brush = null;\n    }\n  };\n  /**\n   * Saves the font and other `font settings`.\n   * @private\n   */\n  PdfGraphics.prototype.fontControl = function (font, format, saveState) {\n    if (font != null) {\n      var curSubSuper = format != null ? format.subSuperScript : PdfSubSuperScript.None;\n      var prevSubSuper = this.currentStringFormat != null ? this.currentStringFormat.subSuperScript : PdfSubSuperScript.None;\n      if (saveState || font !== this.currentFont || curSubSuper !== prevSubSuper) {\n        var resources = this.getResources.getResources();\n        this.currentFont = font;\n        this.currentStringFormat = format;\n        var size = font.metrics.getSize(format);\n        this.isEmfTextScaled = false;\n        var fontName = resources.getName(font);\n        this.pdfStreamWriter.setFont(font, fontName, size);\n      }\n    }\n  };\n  PdfGraphics.prototype.setTransparency = function (arg1, arg2, arg3) {\n    if (typeof arg2 === 'undefined') {\n      this.istransparencySet = true;\n      this.setTransparency(arg1, arg1, PdfBlendMode.Normal);\n    } else if (typeof arg2 === 'number' && typeof arg3 === 'undefined') {\n      this.setTransparency(arg1, arg2, PdfBlendMode.Normal);\n    } else {\n      if (this.trasparencies == null) {\n        this.trasparencies = new TemporaryDictionary();\n      }\n      var transp = null;\n      var td = new TransparencyData(arg1, arg2, arg3);\n      if (this.trasparencies.containsKey(td)) {\n        transp = this.trasparencies.getValue(td);\n      }\n      if (transp == null) {\n        transp = new PdfTransparency(arg1, arg2, arg3);\n        this.trasparencies.setValue(td, transp);\n      }\n      var resources = this.getResources.getResources();\n      var name_3 = resources.getName(transp);\n      var sw = this.streamWriter;\n      sw.setGraphicsState(name_3);\n    }\n  };\n  PdfGraphics.prototype.clipTranslateMargins = function (x, y, left, top, right, bottom) {\n    if (x instanceof RectangleF && typeof y === 'undefined') {\n      this.clipBounds = x;\n      this.pdfStreamWriter.writeComment('Clip margins.');\n      this.pdfStreamWriter.appendRectangle(x);\n      this.pdfStreamWriter.closePath();\n      this.pdfStreamWriter.clipPath(false);\n      this.pdfStreamWriter.writeComment('Translate co-ordinate system.');\n      this.translateTransform(x.x, x.y);\n    } else if (typeof x === 'number') {\n      var clipArea = new RectangleF(left, top, this.size.width - left - right, this.size.height - top - bottom);\n      this.clipBounds = clipArea;\n      this.pdfStreamWriter.writeComment(\"Clip margins.\");\n      this.pdfStreamWriter.appendRectangle(clipArea);\n      this.pdfStreamWriter.closePath();\n      this.pdfStreamWriter.clipPath(false);\n      this.pdfStreamWriter.writeComment(\"Translate co-ordinate system.\");\n      this.translateTransform(x, y);\n    }\n  };\n  /**\n   * `Updates y` co-ordinate.\n   * @private\n   */\n  PdfGraphics.prototype.updateY = function (y) {\n    return -y;\n  };\n  /**\n   * Used to `translate the transformation`.\n   * ```typescript\n   * // create a new PDF document\n   * let document : PdfDocument = new PdfDocument();\n   * // create a new page\n   * let page1 : PdfPage = document.pages.add();\n   * // set pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n   * //\n   * // set translate transform\n   * page1.graphics.translateTransform(100, 100);\n   * //\n   * // draw the rectangle after applying translate transform\n   * page1.graphics.drawRectangle(pen, new RectangleF({x : 0, y : 0}, {width : 100, height : 50}));\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   * @param offsetX The x-coordinate of the translation.\n   * @param offsetY The y-coordinate of the translation.\n   */\n  PdfGraphics.prototype.translateTransform = function (offsetX, offsetY) {\n    var matrix = new PdfTransformationMatrix();\n    this.getTranslateTransform(offsetX, offsetY, matrix);\n    this.pdfStreamWriter.modifyCtm(matrix);\n    this.matrix.multiply(matrix);\n  };\n  /**\n   * `Translates` coordinates of the input matrix.\n   * @private\n   */\n  PdfGraphics.prototype.getTranslateTransform = function (x, y, input) {\n    input.translate(x, this.updateY(y));\n    return input;\n  };\n  /**\n   * Applies the specified `scaling operation` to the transformation matrix of this Graphics by prepending it to the object's transformation matrix.\n   * ```typescript\n   * // create a new PDF document\n   * let document : PdfDocument = new PdfDocument();\n   * // create a new page\n   * let page1 : PdfPage = document.pages.add();\n   * // create pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n   * //\n   * // apply scaling trasformation\n   * page1.graphics.scaleTransform(1.5, 2);\n   * //\n   * // draw the rectangle after applying scaling transform\n   * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   * @param scaleX Scale factor in the x direction.\n   * @param scaleY Scale factor in the y direction.\n   */\n  PdfGraphics.prototype.scaleTransform = function (scaleX, scaleY) {\n    var matrix = new PdfTransformationMatrix();\n    this.getScaleTransform(scaleX, scaleY, matrix);\n    this.pdfStreamWriter.modifyCtm(matrix);\n    this.matrix.multiply(matrix);\n  };\n  /**\n   * `Scales` coordinates of the input matrix.\n   * @private\n   */\n  PdfGraphics.prototype.getScaleTransform = function (x, y, input) {\n    if (input == null) {\n      input = new PdfTransformationMatrix();\n    }\n    input.scale(x, y);\n    return input;\n  };\n  /**\n   * Applies the specified `rotation` to the transformation matrix of this Graphics.\n   * ```typescript\n   * // create a new PDF document\n   * let document : PdfDocument = new PdfDocument();\n   * // create a new page\n   * let page1 : PdfPage = document.pages.add();\n   * // create pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n   * //\n   * // set RotateTransform with 25 degree of angle\n   * page1.graphics.rotateTransform(25);\n   * //\n   * // draw the rectangle after RotateTransformation\n   * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   * @param angle Angle of rotation in degrees.\n   */\n  PdfGraphics.prototype.rotateTransform = function (angle) {\n    var matrix = new PdfTransformationMatrix();\n    this.getRotateTransform(angle, matrix);\n    this.pdfStreamWriter.modifyCtm(matrix);\n    this.matrix.multiply(matrix);\n  };\n  /**\n   * `Initializes coordinate system`.\n   * @private\n   */\n  PdfGraphics.prototype.initializeCoordinates = function () {\n    // Matrix equation: TM(T-1)=M', where T=[1 0 0 -1 0 h]\n    this.pdfStreamWriter.writeComment('Change co-ordinate system to left/top.');\n    // Translate co-ordinates only, don't flip.\n    if (this.mediaBoxUpperRightBound !== -this.size.height) {\n      if (this.cropBox == null) {\n        if (this.mediaBoxUpperRightBound === this.size.height || this.mediaBoxUpperRightBound === 0) {\n          this.translateTransform(0, this.updateY(this.size.height));\n        } else {\n          this.translateTransform(0, this.updateY(this.mediaBoxUpperRightBound));\n        }\n      }\n    }\n  };\n  /**\n   * `Rotates` coordinates of the input matrix.\n   * @private\n   */\n  PdfGraphics.prototype.getRotateTransform = function (angle, input) {\n    if (input == null || typeof input === 'undefined') {\n      input = new PdfTransformationMatrix();\n    }\n    input.rotate(this.updateY(angle));\n    return input;\n  };\n  /**\n   * `Saves` the current state of this Graphics and identifies the saved state with a GraphicsState.\n   * ```typescript\n   * // create a new PDF document\n   * let document : PdfDocument = new PdfDocument();\n   * // create a new page\n   * let page1 : PdfPage = document.pages.add();\n   * // create pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n   * //\n   * // save the graphics state\n   * let state1 : PdfGraphicsState = page1.graphics.save();\n   * //\n   * page1.graphics.scaleTransform(1.5, 2);\n   * // draw the rectangle\n   * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n   * // restore the graphics state\n   * page1.graphics.restore(state1);\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   */\n  PdfGraphics.prototype.save = function () {\n    var state = new PdfGraphicsState(this, this.matrix.clone());\n    state.brush = this.currentBrush;\n    state.pen = this.currentPen;\n    state.font = this.currentFont;\n    state.colorSpace = this.currentColorSpace;\n    state.characterSpacing = this.previousCharacterSpacing;\n    state.wordSpacing = this.previousWordSpacing;\n    state.textScaling = this.previousTextScaling;\n    state.textRenderingMode = this.previousTextRenderingMode;\n    this.graphicsState.push(state);\n    this.pdfStreamWriter.saveGraphicsState();\n    return state;\n  };\n  PdfGraphics.prototype.restore = function (state) {\n    if (typeof state === 'undefined') {\n      if (this.graphicsState.length > 0) {\n        this.doRestoreState();\n      }\n    } else {\n      if (this.graphicsState.indexOf(state) !== -1) {\n        for (;;) {\n          if (this.graphicsState.length === 0) {\n            break;\n          }\n          var popState = this.doRestoreState();\n          if (popState === state) {\n            break;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * `Restores graphics state`.\n   * @private\n   */\n  PdfGraphics.prototype.doRestoreState = function () {\n    var state = this.graphicsState.pop();\n    this.transformationMatrix = state.matrix;\n    this.currentBrush = state.brush;\n    this.currentPen = state.pen;\n    this.currentFont = state.font;\n    this.currentColorSpace = state.colorSpace;\n    this.previousCharacterSpacing = state.characterSpacing;\n    this.previousWordSpacing = state.wordSpacing;\n    this.previousTextScaling = state.textScaling;\n    this.previousTextRenderingMode = state.textRenderingMode;\n    this.pdfStreamWriter.restoreGraphicsState();\n    return state;\n  };\n  /**\n   * `Draws the specified path`, using its original physical size, at the location specified by a coordinate pair.\n   * ```typescript\n   * // create a new PDF document.\n   * let document : PdfDocument = new PdfDocument();\n   * // add a page to the document.\n   * let page1 : PdfPage = document.pages.add();\n   * //Create new PDF path.\n   * let path : PdfPath = new PdfPath();\n   * //Add line path points.\n   * path.addLine(new PointF(10, 100), new PointF(10, 200));\n   * path.addLine(new PointF(100, 100), new PointF(100, 200));\n   * path.addLine(new PointF(100, 200), new PointF(55, 150));\n   * // set pen\n   * let pen : PdfPen = new PdfPen(new PdfColor(255, 0, 0));\n   * // set brush\n   * let brush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n   * // draw the path\n   * page1.graphics.drawPath(pen, brush, path);\n   * //\n   * // save the document.\n   * document.save('output.pdf');\n   * // destroy the document\n   * document.destroy();\n   * ```\n   * @param pen Color of the text.\n   * @param brush Color of the text.\n   * @param path Draw path.\n   */\n  PdfGraphics.prototype.drawPath = function (pen, brush, path) {\n    this._drawPath(pen, brush, path.pathPoints, path.pathTypes, path.fillMode);\n  };\n  PdfGraphics.prototype._drawPath = function (pen, brush, pathPoints, pathTypes, fillMode) {\n    if (brush instanceof PdfTilingBrush) {\n      this.bCSInitialized = false;\n      brush.graphics.colorSpace = this.colorSpace;\n    } else if (brush instanceof PdfGradientBrush) {\n      this.bCSInitialized = false;\n      brush.colorSpace = this.colorSpace;\n    }\n    this.stateControl(pen, brush, null);\n    this.buildUpPath(pathPoints, pathTypes);\n    this.drawPathHelper(pen, brush, fillMode, false);\n  };\n  /* tslint:disable-next-line:max-line-length */\n  PdfGraphics.prototype.drawArc = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n    if (arg2 instanceof RectangleF) {\n      this.drawArc(arg1, arg2.x, arg2.y, arg2.width, arg2.height, arg3, arg4);\n    } else {\n      if (arg7 !== 0) {\n        this.stateControl(arg1, null, null);\n        this.constructArcPath(arg2, arg3, arg2 + arg4, arg3 + arg5, arg6, arg7);\n        this.drawPathHelper(arg1, null, false);\n      }\n    }\n  };\n  /**\n   * Builds up the path.\n   * @private\n   */\n  PdfGraphics.prototype.buildUpPath = function (arg1, arg2) {\n    var cnt = arg1.length;\n    for (var i = 0; i < cnt; ++i) {\n      var typeValue = 0;\n      var point = arg1[i];\n      switch (arg2[i] & PdfGraphics.pathTypesValuesMask) {\n        case PathPointType.Start:\n          this.pdfStreamWriter.beginPath(point.x, point.y);\n          break;\n        case PathPointType.Bezier3:\n          var p2 = new PointF(0, 0);\n          var p3 = new PointF(0, 0);\n          var result1 = this.getBezierPoints(arg1, arg2, i, p2, p3);\n          this.pdfStreamWriter.appendBezierSegment(point, result1.p2, result1.p3);\n          i = result1.i;\n          break;\n        case PathPointType.Line:\n          this.pdfStreamWriter.appendLineSegment(point);\n          break;\n        default:\n          throw new Error('ArithmeticException - Incorrect path formation.');\n      }\n      typeValue = arg2[i];\n      this.checkFlags(typeValue);\n    }\n  };\n  /**\n   * Gets the bezier points from respective arrays.\n   * @private\n   */\n  /* tslint:disable-next-line:max-line-length */\n  PdfGraphics.prototype.getBezierPoints = function (points, types, i, p2, p3) {\n    var errorMsg = 'Malforming path.';\n    ++i;\n    if ((types[i] & PdfGraphics.pathTypesValuesMask) === PathPointType.Bezier3) {\n      p2 = points[i];\n      ++i;\n      if ((types[i] & PdfGraphics.pathTypesValuesMask) === PathPointType.Bezier3) {\n        p3 = points[i];\n      } else {\n        throw new Error('ArgumentException : errorMsg');\n      }\n    } else {\n      throw new Error('ArgumentException : errorMsg');\n    }\n    return {\n      i: i,\n      p2: p2,\n      p3: p3\n    };\n  };\n  /**\n   * Checks path point type flags.\n   * @private\n   */\n  PdfGraphics.prototype.checkFlags = function (type) {\n    if ((type & PathPointType.CloseSubpath) === PathPointType.CloseSubpath) {\n      this.pdfStreamWriter.closePath();\n    }\n  };\n  /**\n   * Constructs the arc path using Bezier curves.\n   * @private\n   */\n  PdfGraphics.prototype.constructArcPath = function (x1, y1, x2, y2, startAng, sweepAngle) {\n    var points = this.getBezierArc(x1, y1, x2, y2, startAng, sweepAngle);\n    if (points.length === 0) {\n      return;\n    }\n    var pt = [points[0], points[1], points[2], points[3], points[4], points[5], points[6], points[7]];\n    this.pdfStreamWriter.beginPath(pt[0], pt[1]);\n    var i = 0;\n    for (i = 0; i < points.length; i = i + 8) {\n      pt = [points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5], points[i + 6], points[i + 7]];\n      this.pdfStreamWriter.appendBezierSegment(pt[2], pt[3], pt[4], pt[5], pt[6], pt[7]);\n    }\n  };\n  /**\n   * Gets the bezier points for arc constructing.\n   * @private\n   */\n  PdfGraphics.prototype.getBezierArc = function (numX1, numY1, numX2, numY2, s1, e1) {\n    if (numX1 > numX2) {\n      var tmp = void 0;\n      tmp = numX1;\n      numX1 = numX2;\n      numX2 = tmp;\n    }\n    if (numY2 > numY1) {\n      var tmp = void 0;\n      tmp = numY1;\n      numY1 = numY2;\n      numY2 = tmp;\n    }\n    var fragAngle1;\n    var numFragments;\n    if (Math.abs(e1) <= 90) {\n      fragAngle1 = e1;\n      numFragments = 1;\n    } else {\n      numFragments = Math.ceil(Math.abs(e1) / 90);\n      fragAngle1 = e1 / numFragments;\n    }\n    var xcen = (numX1 + numX2) / 2;\n    var ycen = (numY1 + numY2) / 2;\n    var rx = (numX2 - numX1) / 2;\n    var ry = (numY2 - numY1) / 2;\n    var halfAng = fragAngle1 * (Math.PI / 360);\n    var kappa = Math.abs(4.0 / 3.0 * (1.0 - Math.cos(halfAng)) / Math.sin(halfAng));\n    var pointsList = [];\n    for (var i = 0; i < numFragments; i++) {\n      var thetaValue0 = (s1 + i * fragAngle1) * (Math.PI / 180);\n      var thetaValue1 = (s1 + (i + 1) * fragAngle1) * (Math.PI / 180);\n      var cos0 = Math.cos(thetaValue0);\n      var cos1 = Math.cos(thetaValue1);\n      var sin0 = Math.sin(thetaValue0);\n      var sin1 = Math.sin(thetaValue1);\n      if (fragAngle1 > 0) {\n        /* tslint:disable-next-line:max-line-length */\n        pointsList.push(xcen + rx * cos0, ycen - ry * sin0, xcen + rx * (cos0 - kappa * sin0), ycen - ry * (sin0 + kappa * cos0), xcen + rx * (cos1 + kappa * sin1), ycen - ry * (sin1 - kappa * cos1), xcen + rx * cos1, ycen - ry * sin1);\n      } else {\n        /* tslint:disable-next-line:max-line-length */\n        pointsList.push(xcen + rx * cos0, ycen - ry * sin0, xcen + rx * (cos0 + kappa * sin0), ycen - ry * (sin0 - kappa * cos0), xcen + rx * (cos1 - kappa * sin1), ycen - ry * (sin1 + kappa * cos1), xcen + rx * cos1, ycen - ry * sin1);\n      }\n    }\n    return pointsList;\n  };\n  /* tslint:disable */\n  // Constants\n  /**\n   * Specifies the mask of `path type values`.\n   * @private\n   */\n  PdfGraphics.pathTypesValuesMask = 0xf;\n  /**\n   * Checks whether the object is `transparencyObject`.\n   * @hidden\n   * @private\n   */\n  PdfGraphics.transparencyObject = false;\n  return PdfGraphics;\n}();\nexport { PdfGraphics };\n/**\n * `GetResourceEventHandler` class is alternate for event handlers and delegates.\n * @private\n * @hidden\n */\nvar GetResourceEventHandler = /** @class */function () {\n  /**\n   * Initialize instance of `GetResourceEventHandler` class.\n   * Alternate for event handlers and delegates.\n   * @private\n   */\n  function GetResourceEventHandler(sender) {\n    this.sender = sender;\n  }\n  /**\n   * Return the instance of `PdfResources` class.\n   * @private\n   */\n  GetResourceEventHandler.prototype.getResources = function () {\n    return this.sender.getResources();\n  };\n  return GetResourceEventHandler;\n}();\nexport { GetResourceEventHandler };\nvar PdfGraphicsState = /** @class */function () {\n  function PdfGraphicsState(graphics, matrix) {\n    /**\n     * Stores `previous rendering mode`.\n     * @default TextRenderingMode.Fill\n     * @private\n     */\n    this.internalTextRenderingMode = TextRenderingMode.Fill;\n    /**\n     * `Previous character spacing` value or 0.\n     * @default 0.0\n     * @private\n     */\n    this.internalCharacterSpacing = 0.0;\n    /**\n     * `Previous word spacing` value or 0.\n     * @default 0.0\n     * @private\n     */\n    this.internalWordSpacing = 0.0;\n    /**\n     * The previously used `text scaling value`.\n     * @default 100.0\n     * @private\n     */\n    this.internalTextScaling = 100.0;\n    /**\n     * `Current color space`.\n     * @default PdfColorSpace.Rgb\n     * @private\n     */\n    this.pdfColorSpace = PdfColorSpace.Rgb;\n    if (typeof graphics !== 'undefined') {\n      this.pdfGraphics = graphics;\n      var elements_1 = [];\n      graphics.matrix.matrix.elements.forEach(function (element) {\n        elements_1.push(element);\n      });\n      this.transformationMatrix = new PdfTransformationMatrix();\n      this.transformationMatrix.matrix = new Matrix(elements_1);\n    }\n  }\n  Object.defineProperty(PdfGraphicsState.prototype, \"graphics\", {\n    // Properties\n    /**\n     * Gets the parent `graphics object`.\n     * @private\n     */\n    get: function () {\n      return this.pdfGraphics;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"matrix\", {\n    /**\n     * Gets the `current matrix`.\n     * @private\n     */\n    get: function () {\n      return this.transformationMatrix;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"characterSpacing\", {\n    /**\n     * Gets or sets the `current character spacing`.\n     * @private\n     */\n    get: function () {\n      return this.internalCharacterSpacing;\n    },\n    set: function (value) {\n      this.internalCharacterSpacing = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"wordSpacing\", {\n    /**\n     * Gets or sets the `word spacing` value.\n     * @private\n     */\n    get: function () {\n      return this.internalWordSpacing;\n    },\n    set: function (value) {\n      this.internalWordSpacing = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"textScaling\", {\n    /**\n     * Gets or sets the `text scaling` value.\n     * @private\n     */\n    get: function () {\n      return this.internalTextScaling;\n    },\n    set: function (value) {\n      this.internalTextScaling = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"pen\", {\n    /**\n     * Gets or sets the `current pen` object.\n     * @private\n     */\n    get: function () {\n      return this.pdfPen;\n    },\n    set: function (value) {\n      this.pdfPen = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"brush\", {\n    /**\n     * Gets or sets the `brush`.\n     * @private\n     */\n    get: function () {\n      return this.pdfBrush;\n    },\n    set: function (value) {\n      this.pdfBrush = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"font\", {\n    /**\n     * Gets or sets the `current font` object.\n     * @private\n     */\n    get: function () {\n      return this.pdfFont;\n    },\n    set: function (value) {\n      this.pdfFont = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"colorSpace\", {\n    /**\n     * Gets or sets the `current color space` value.\n     * @private\n     */\n    get: function () {\n      return this.pdfColorSpace;\n    },\n    set: function (value) {\n      this.pdfColorSpace = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfGraphicsState.prototype, \"textRenderingMode\", {\n    /**\n     * Gets or sets the `text rendering mode`.\n     * @private\n     */\n    get: function () {\n      return this.internalTextRenderingMode;\n    },\n    set: function (value) {\n      this.internalTextRenderingMode = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return PdfGraphicsState;\n}();\nexport { PdfGraphicsState };\nvar TransparencyData = /** @class */function () {\n  // Constructors\n  /**\n   * Initializes a new instance of the `TransparencyData` class.\n   * @private\n   */\n  function TransparencyData(alphaPen, alphaBrush, blendMode) {\n    this.alphaPen = alphaPen;\n    this.alphaBrush = alphaBrush;\n    this.blendMode = blendMode;\n  }\n  return TransparencyData;\n}();\n/* tslint:enable */","map":{"version":3,"names":["PdfColorSpace","TextRenderingMode","PdfFillMode","PdfTextAlignment","PdfVerticalAlignment","PdfBlendMode","PdfSubSuperScript","PdfWordWrapType","PdfStreamWriter","PdfPen","PdfBrush","PdfSolidBrush","PdfFont","PdfTransformationMatrix","Matrix","PointF","SizeF","RectangleF","ProcedureSets","PdfString","PdfStringFormat","TemporaryDictionary","PdfTransparency","PdfStringLayouter","LineType","DictionaryProperties","StringTokenizer","PdfAutomaticFieldInfoCollection","PdfAutomaticFieldInfo","Operators","UnicodeTrueTypeFont","InternalEnum","RtlRenderer","PdfTextDirection","PathPointType","PdfGradientBrush","PdfTilingBrush","PdfGraphics","arg1","arg2","arg3","currentColorSpace","Rgb","previousTextRenderingMode","Fill","previousCharacterSpacing","previousWordSpacing","previousTextScaling","procedureSets","isNormalRender","isUseFontSize","isItalic","isEmfTextScaled","isEmf","isEmfPlus","isBaselineFormat","emfScalingFactor","colorSpaceChanged","dictionaryProperties","isOverloadWithPosition","isPointOverload","currentColorSpaces","isImageOptimized","graphicsState","istransparencySet","internalAutomaticFields","startCutIndex","getResources","canvasSize","pdfStreamWriter","initialize","Object","defineProperty","prototype","get","pdfStringLayoutResult","enumerable","configurable","internalMediaBoxUpperRightBound","set","value","clipBounds","width","height","transformationMatrix","pageLayer","page","bStateSaved","currentPen","currentBrush","currentFont","bCSInitialized","currentStringFormat","size","requireProcedureSet","pdf","drawPdfTemplate","template","location","Error","scaleX","scaleY","bNeedScale","state","save","matrix","getTranslateTransform","x","y","getScaleTransform","modifyCtm","resources","name_1","getName","executeObject","restore","g","graphics","index","automaticFields","length","fieldInfo","newLocation","scalingX","scalingY","add","field","dictionary","modify","imageB","imageC","imageI","text","drawString","arg4","arg5","arg6","arg7","arg8","arg9","clientSize","temparg3","temparg4","temparg5","temparg6","temparg7","temparg8","temparg9","layouter","result","layout","empty","rect","checkCorrectLayoutRectangle","actualSize","drawStringLayoutResult","drawLine","temparg2","stateControl","sw","streamWriter","beginPath","appendLineSegment","strokePath","drawRectangle","xOffset","offsetX","yOffset","layer","offsetY","colorSpace","color","isEmpty","temparg1","appendRectangle","drawPathHelper","drawRoundedRectangle","pen","brush","radius","bounds","diameter","arc","_pathPoints","_pathTypes","startFigure","_addArc","type","CloseSubpath","_drawPath","Alternate","startAngle","sweepAngle","points","_getBezierArcPoints","i","point","_addArcPoints","Bezier3","pointType","_addPoint","Start","_getLastPoint","Line","lastPoint","count","push","x1","y1","x2","y2","s1","e1","tmp","fragAngle","numFragments","Math","abs","ceil","xcen","ycen","rx","ry","halfAng","PI","kappa","cos","sin","pointList","theta0","theta1","cos0","cos1","sin0","sin1","Winding","isPen","isBrush","isEvenOdd","fillStrokePath","endPath","fillPath","drawImage","physicalDimension","write","document","name_2","setResources","restoreState","newLine","resource","getLineBounds","lineIndex","font","layoutRectangle","format","lineCount","line","lines","vShift","getTextVerticalAlignShift","lineHeight","lineWidth","hShift","getHorizontalAlignShift","lineIndent","getLineIndent","rightToLeft","shouldJustify","textSize","layoutedRectangle","alignment","Center","Right","lineAlignment","Middle","Bottom","setLayer","beginSave","pageSave","performDraw","applyStringSettings","textScaling","horizontalScalingFactor","setTextScaling","lineSpacing","subScript","subSuperScript","SubScript","shift","metrics","getDescent","getAscent","startNextLine","setLeading","resultHeight","remainingString","j","drawLayoutResult","underlineStrikeoutText","getNextPage","section","currentPage","nextPage","indexOf","getPages","setClip","rectangle","mode","clipPath","setLineWidth","tm","getTextRenderingMode","beginText","setTextRenderingMode","cs","characterSpacing","setCharacterSpacing","ws","wordSpacing","setWordSpacing","textHeight","boundsHeight","Top","vAlignShift","ttfFont","unicode","isUnicode","embed","isEmbedFont","len","lineInfo","hAlignShift","drawUnicodeLine","drawAsciiLine","endText","justifyLine","showNextLineText","rtl","useWordSpace","Justify","rtlRender","textDirection","None","blocks","rightAlign","RightToLeft","words","splitLayout","drawUnicodeBlocks","breakUnicodeLine","tokens","token","convertToUnicode","getUnicodeString","xShift","firstLineIndent","paragraphIndent","spaceWidth","getCharWidth","whiteSpace","wordSpace","word","tokenWidth","measureString","val","showText","split","converted","encode","ForceEncoding","Ascii","fontInternal","ttfReader","setSymbols","convertString","bytes","toUnicodeArray","byteToString","boundsWidth","hasWordSpacing","symbols","spaces","whitespacesCount","getCharsCount","difference","reset","clear","initializeCoordinates","justifyStyle","goodWidth","hasSpaces","goodLineBreakStyle","lineType","LayoutBreak","wordWrap","underline","strikeout","linePen","createUnderlineStikeoutPen","underlineYOffset","strikeoutYOffset","getHeight","getSize","FillStroke","Stroke","ClipFlag","layoutBounds","firstLine","firstParagraphLine","FirstParagraphLine","min","Left","saveState","solidBrush","lastDocumentCS","lastGraphicsCS","initCurrentColorSpace","pdfPen","penControl","brushControl","fontControl","colorspace","re","GrayScale","setColorSpace","monitorChanges","clone","b","lgb","m","multiply","br","curSubSuper","prevSubSuper","fontName","setFont","setTransparency","Normal","trasparencies","transp","td","TransparencyData","containsKey","getValue","setValue","name_3","setGraphicsState","clipTranslateMargins","left","top","right","bottom","writeComment","closePath","translateTransform","clipArea","updateY","input","translate","scaleTransform","scale","rotateTransform","angle","getRotateTransform","mediaBoxUpperRightBound","cropBox","rotate","PdfGraphicsState","textRenderingMode","saveGraphicsState","doRestoreState","popState","pop","restoreGraphicsState","drawPath","path","pathPoints","pathTypes","fillMode","buildUpPath","drawArc","constructArcPath","cnt","typeValue","pathTypesValuesMask","p2","p3","result1","getBezierPoints","appendBezierSegment","checkFlags","types","errorMsg","startAng","getBezierArc","pt","numX1","numY1","numX2","numY2","fragAngle1","pointsList","thetaValue0","thetaValue1","transparencyObject","GetResourceEventHandler","sender","internalTextRenderingMode","internalCharacterSpacing","internalWordSpacing","internalTextScaling","pdfColorSpace","pdfGraphics","elements_1","elements","forEach","element","pdfBrush","pdfFont","alphaPen","alphaBrush","blendMode"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-pdf-export/src/implementation/graphics/pdf-graphics.js"],"sourcesContent":["/**\n * PdfGraphics.ts class for EJ2-PDF\n */\nimport { PdfColorSpace, TextRenderingMode, PdfFillMode, PdfTextAlignment } from './enum';\nimport { PdfVerticalAlignment, PdfBlendMode } from './enum';\nimport { PdfSubSuperScript, PdfWordWrapType } from './fonts/enum';\nimport { PdfStreamWriter } from './../input-output/pdf-stream-writer';\nimport { PdfPen } from './pdf-pen';\nimport { PdfBrush } from './brushes/pdf-brush';\nimport { PdfSolidBrush } from './brushes/pdf-solid-brush';\nimport { PdfFont } from './fonts/pdf-font';\nimport { PdfTransformationMatrix, Matrix } from './pdf-transformation-matrix';\nimport { PointF, SizeF, RectangleF } from './../drawing/pdf-drawing';\nimport { ProcedureSets } from './constants';\nimport { PdfString } from './../primitives/pdf-string';\nimport { PdfStringFormat } from './fonts/pdf-string-format';\nimport { TemporaryDictionary } from './../collections/object-object-pair/dictionary';\nimport { PdfTransparency } from './pdf-transparency';\nimport { PdfStringLayouter, LineType } from './fonts/string-layouter';\nimport { DictionaryProperties } from './../input-output/pdf-dictionary-properties';\nimport { StringTokenizer } from './fonts/string-tokenizer';\nimport { PdfAutomaticFieldInfoCollection } from './../document/automatic-fields/automatic-field-info-collection';\nimport { PdfAutomaticFieldInfo } from './../document/automatic-fields/automatic-field-info';\nimport { Operators } from './../input-output/pdf-operators';\nimport { UnicodeTrueTypeFont } from './fonts/unicode-true-type-font';\nimport { InternalEnum } from './../primitives/pdf-string';\nimport { RtlRenderer } from './fonts/rtl-renderer';\nimport { PdfTextDirection } from './enum';\nimport { PathPointType } from './figures/enum';\nimport { PdfGradientBrush } from './../../implementation/graphics/brushes/pdf-gradient-brush';\nimport { PdfTilingBrush } from './brushes/pdf-tiling-brush';\n/**\n * `PdfGraphics` class represents a graphics context of the objects.\n * It's used for performing all the graphics operations.\n * ```typescript\n * // create a new PDF document\n * let document : PdfDocument = new PdfDocument();\n * // add a new page to the document\n * let page1 : PdfPage = document.pages.add();\n * // set the font\n * let font : PdfStandardFont = new PdfStandardFont(PdfFontFamily.Helvetica, 20);\n * // create black brush\n * let blackBrush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n * //\n * //graphics of the page\n * let page1Graphics : PdfGraphics = page1.graphics;\n * // draw the text on the page1 graphics\n * page1Graphics.drawString('Hello World', font, blackBrush, new PointF(0, 0));\n * //\n * // save the document\n * document.save('output.pdf');\n * // destroy the document\n * document.destroy();\n * ```\n */\nvar PdfGraphics = /** @class */ (function () {\n    function PdfGraphics(arg1, arg2, arg3) {\n        /**\n         * Represents the `Current color space`.\n         * @private\n         */\n        this.currentColorSpace = PdfColorSpace.Rgb;\n        /**\n         * Stores `previous rendering mode`.\n         * @private\n         */\n        this.previousTextRenderingMode = TextRenderingMode.Fill;\n        /**\n         * Previous `character spacing` value or 0.\n         * @private\n         */\n        this.previousCharacterSpacing = 0.0;\n        /**\n         * Previous `word spacing` value or 0.\n         * @private\n         */\n        this.previousWordSpacing = 0.0;\n        /**\n         * The `previously used text scaling` value.\n         * @private\n         */\n        this.previousTextScaling = 100.0;\n        /**\n         * Instance of `ProcedureSets` class.\n         * @private\n         */\n        this.procedureSets = new ProcedureSets();\n        /**\n         * To check wihether it is a `direct text rendering`.\n         * @default true\n         * @private\n         */\n        this.isNormalRender = true;\n        /**\n         * check whether to `use font size` to calculate the shift.\n         * @default false\n         * @private\n         */\n        this.isUseFontSize = false;\n        /**\n         * check whether the font is in `italic type`.\n         * @default false\n         * @private\n         */\n        this.isItalic = false;\n        /**\n         * Check whether it is an `emf Text Matrix`.\n         * @default false\n         * @private\n         */\n        this.isEmfTextScaled = false;\n        /**\n         * Check whether it is an `emf` call.\n         * @default false\n         * @private\n         */\n        this.isEmf = false;\n        /**\n         * Check whether it is an `emf plus` call.\n         * @default false\n         * @private\n         */\n        this.isEmfPlus = false;\n        /**\n         * Check whether it is in `base line format`.\n         * @default true\n         * @private\n         */\n        this.isBaselineFormat = true;\n        /**\n         * Emf Text `Scaling Factor`.\n         * @private\n         */\n        this.emfScalingFactor = new SizeF(0, 0);\n        /**\n         * To check whether the `last color space` of document and garphics is saved.\n         * @private\n         */\n        this.colorSpaceChanged = false;\n        /**\n         * Stores an instance of `DictionaryProperties`.\n         * @private\n         */\n        this.dictionaryProperties = new DictionaryProperties();\n        /**\n         * Checks whether the x co-ordinate is need to set as client size or not.\n         * @hidden\n         * @private\n         */\n        this.isOverloadWithPosition = false;\n        /**\n         * Checks whether the x co-ordinate is need to set as client size or not.\n         * @hidden\n         * @private\n         */\n        this.isPointOverload = false;\n        /**\n         * Current colorspaces.\n         * @hidden\n         * @private\n         */\n        this.currentColorSpaces = ['RGB', 'CMYK', 'GrayScale', 'Indexed'];\n        /**\n         * Checks the current image `is optimized` or not.\n         * @default false.\n         * @private\n         */\n        this.isImageOptimized = false;\n        /**\n         * Stores the `graphics states`.\n         * @private\n         */\n        this.graphicsState = [];\n        /**\n         * Indicates whether the object `had trasparency`.\n         * @default false\n         * @private\n         */\n        this.istransparencySet = false;\n        /**\n         * Stores the instance of `PdfAutomaticFieldInfoCollection` class .\n         * @default null\n         * @private\n         */\n        this.internalAutomaticFields = null;\n        /**\n         * Stores the index of the start line that should draw with in the next page.\n         * @private\n         */\n        this.startCutIndex = -1;\n        this.getResources = arg2;\n        this.canvasSize = arg1;\n        if (arg3 instanceof PdfStreamWriter) {\n            this.pdfStreamWriter = arg3;\n        }\n        else {\n            this.pdfStreamWriter = new PdfStreamWriter(arg3);\n        }\n        this.initialize();\n    }\n    Object.defineProperty(PdfGraphics.prototype, \"stringLayoutResult\", {\n        //  Properties\n        /**\n         * Returns the `result` after drawing string.\n         * @private\n         */\n        get: function () {\n            return this.pdfStringLayoutResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"size\", {\n        /**\n         * Gets the `size` of the canvas.\n         * @private\n         */\n        get: function () {\n            return this.canvasSize;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"mediaBoxUpperRightBound\", {\n        /**\n         * Gets and Sets the value of `MediaBox upper right bound`.\n         * @private\n         */\n        get: function () {\n            if (typeof this.internalMediaBoxUpperRightBound === 'undefined') {\n                this.internalMediaBoxUpperRightBound = 0;\n            }\n            return this.internalMediaBoxUpperRightBound;\n        },\n        set: function (value) {\n            this.internalMediaBoxUpperRightBound = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"clientSize\", {\n        /**\n         * Gets the `size` of the canvas reduced by margins and page templates.\n         * @private\n         */\n        get: function () {\n            return new SizeF(this.clipBounds.width, this.clipBounds.height);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"colorSpace\", {\n        /**\n         * Gets or sets the current `color space` of the document\n         * @private\n         */\n        get: function () {\n            return this.currentColorSpace;\n        },\n        set: function (value) {\n            this.currentColorSpace = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"streamWriter\", {\n        /**\n         * Gets the `stream writer`.\n         * @private\n         */\n        get: function () {\n            return this.pdfStreamWriter;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"matrix\", {\n        /**\n         * Gets the `transformation matrix` reflecting current transformation.\n         * @private\n         */\n        get: function () {\n            if (this.transformationMatrix == null) {\n                this.transformationMatrix = new PdfTransformationMatrix();\n            }\n            return this.transformationMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"layer\", {\n        /**\n         * Gets the `layer` for the graphics, if exists.\n         * @private\n         */\n        get: function () {\n            return this.pageLayer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"page\", {\n        /**\n         * Gets the `page` for this graphics, if exists.\n         * @private\n         */\n        get: function () {\n            return this.pageLayer.page;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphics.prototype, \"automaticFields\", {\n        get: function () {\n            if (this.internalAutomaticFields == null || typeof this.internalAutomaticFields === 'undefined') {\n                this.internalAutomaticFields = new PdfAutomaticFieldInfoCollection();\n            }\n            return this.internalAutomaticFields;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    //Implementation\n    /**\n     * `Initializes` this instance.\n     * @private\n     */\n    PdfGraphics.prototype.initialize = function () {\n        this.bStateSaved = false;\n        this.currentPen = null;\n        this.currentBrush = null;\n        this.currentFont = null;\n        this.currentColorSpace = PdfColorSpace.Rgb;\n        this.bCSInitialized = false;\n        this.transformationMatrix = null;\n        this.previousTextRenderingMode = (-1); //.Fill;\n        this.previousCharacterSpacing = -1.0;\n        this.previousWordSpacing = -1.0;\n        this.previousTextScaling = -100.0;\n        // this.m_trasparencies = null;\n        this.currentStringFormat = null;\n        this.clipBounds = new RectangleF(new PointF(0, 0), this.size);\n        this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf);\n    };\n    PdfGraphics.prototype.drawPdfTemplate = function (template, location, size) {\n        if (typeof size === 'undefined') {\n            if (template == null) {\n                throw Error('ArgumentNullException-template');\n            }\n            this.drawPdfTemplate(template, location, template.size);\n        }\n        else {\n            // let crossTable : PdfCrossTable = null;\n            // if (this.pageLayer != null) {\n            //     crossTable = (this.page as PdfPage).section.parentDocument.crossTable;\n            // }\n            if (template == null) {\n                throw Error('ArgumentNullException-template');\n            }\n            var scaleX = (template.width > 0) ? size.width / template.width : 1;\n            var scaleY = (template.height > 0) ? size.height / template.height : 1;\n            var bNeedScale = !(scaleX === 1 && scaleY === 1);\n            // Save state.\n            var state = this.save();\n            // Take into consideration that rect location is bottom/left.\n            var matrix = new PdfTransformationMatrix();\n            if (this.pageLayer != null) {\n                this.getTranslateTransform(location.x, location.y + size.height, matrix);\n            }\n            if (bNeedScale) {\n                this.getScaleTransform(scaleX, scaleY, matrix);\n            }\n            this.pdfStreamWriter.modifyCtm(matrix);\n            // Output template.\n            var resources = this.getResources.getResources();\n            var name_1 = resources.getName(template);\n            this.pdfStreamWriter.executeObject(name_1);\n            // Restore state.\n            this.restore(state);\n            //Transfer automatic fields from template.\n            var g = template.graphics;\n            if (g != null) {\n                for (var index = 0; index < g.automaticFields.automaticFields.length; index++) {\n                    var fieldInfo = g.automaticFields.automaticFields[index];\n                    var newLocation = new PointF(fieldInfo.location.x + location.x, fieldInfo.location.y + location.y);\n                    var scalingX = template.size.width == 0 ? 0 : size.width / template.size.width;\n                    var scalingY = template.size.height == 0 ? 0 : size.height / template.size.height;\n                    this.automaticFields.add(new PdfAutomaticFieldInfo(fieldInfo.field, newLocation, scalingX, scalingY));\n                    this.page.dictionary.modify();\n                }\n            }\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.imageB);\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.imageC);\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.imageI);\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n        }\n    };\n    /**\n     * @public\n     */\n    PdfGraphics.prototype.drawString = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9) {\n        if (typeof arg1 === 'string' && arg2 instanceof PdfFont && (arg3 instanceof PdfPen || arg3 === null) && (arg4 instanceof PdfBrush || arg4 === null) && typeof arg5 === 'number' && typeof arg6 === 'number' && (arg7 instanceof PdfStringFormat || arg7 === null) && typeof arg8 === 'undefined') {\n            this.isOverloadWithPosition = true;\n            this.drawString(arg1, arg2, arg3, arg4, arg5, arg6, (this.clientSize.width - arg5), 0, arg7);\n        }\n        else {\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var temparg5 = arg5;\n            var temparg6 = arg6;\n            var temparg7 = arg7;\n            var temparg8 = arg8;\n            var temparg9 = arg9;\n            var layouter = new PdfStringLayouter();\n            var result = layouter.layout(arg1, arg2, temparg9, new SizeF(temparg7, temparg8), this.isOverloadWithPosition, this.clientSize);\n            if (!result.empty) {\n                var rect = this.checkCorrectLayoutRectangle(result.actualSize, temparg5, temparg6, temparg9);\n                if (temparg7 <= 0) {\n                    temparg5 = rect.x;\n                    temparg7 = rect.width;\n                }\n                if (temparg8 <= 0) {\n                    temparg6 = rect.y;\n                    temparg8 = rect.height;\n                }\n                this.drawStringLayoutResult(result, arg2, temparg3, temparg4, new RectangleF(temparg5, temparg6, temparg7, temparg8), temparg9);\n                this.isEmfTextScaled = false;\n                this.emfScalingFactor = new SizeF(0, 0);\n            }\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n            this.isNormalRender = true;\n            this.pdfStringLayoutResult = result;\n            this.isUseFontSize = false;\n        }\n    };\n    PdfGraphics.prototype.drawLine = function (arg1, arg2, arg3, arg4, arg5) {\n        if (arg2 instanceof PointF) {\n            var temparg2 = arg2;\n            var temparg3 = arg3;\n            this.drawLine(arg1, temparg2.x, temparg2.y, temparg3.x, temparg3.y);\n        }\n        else {\n            var temparg2 = arg2;\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var temparg5 = arg5;\n            this.stateControl(arg1, null, null);\n            var sw = this.streamWriter;\n            sw.beginPath(temparg2, temparg3);\n            sw.appendLineSegment(temparg4, temparg5);\n            sw.strokePath();\n            this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf);\n        }\n    };\n    PdfGraphics.prototype.drawRectangle = function (arg1, arg2, arg3, arg4, arg5, arg6) {\n        if (arg1 instanceof PdfPen && typeof arg2 === 'number') {\n            var temparg3 = arg3;\n            this.drawRectangle(arg1, null, arg2, temparg3, arg4, arg5);\n        }\n        else if (arg1 instanceof PdfBrush && typeof arg2 === 'number') {\n            var temparg3 = arg3;\n            this.drawRectangle(null, arg1, arg2, temparg3, arg4, arg5);\n        }\n        else {\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var temparg5 = arg5;\n            var temparg6 = arg6;\n            if ((arg2 instanceof PdfTilingBrush)) {\n                this.bCSInitialized = false;\n                var xOffset = (this.matrix.matrix.offsetX + temparg3);\n                var yOffset = void 0;\n                if (((this.layer != null) && (this.layer.page != null))) {\n                    yOffset = ((this.layer.page.size.height - this.matrix.matrix.offsetY) + temparg4);\n                }\n                else {\n                    yOffset = ((this.clientSize.height - this.matrix.matrix.offsetY) + temparg4);\n                }\n                (arg2).location = new PointF(xOffset, yOffset);\n                (arg2).graphics.colorSpace = this.colorSpace;\n            }\n            else if ((arg2 instanceof PdfGradientBrush)) {\n                arg2.colorSpace = this.colorSpace;\n            }\n            if (arg2 instanceof PdfSolidBrush && arg2.color.isEmpty) {\n                arg2 = null;\n            }\n            var temparg1 = arg1;\n            var temparg2 = arg2;\n            this.stateControl(temparg1, temparg2, null);\n            this.streamWriter.appendRectangle(temparg3, temparg4, temparg5, temparg6);\n            this.drawPathHelper(temparg1, temparg2, false);\n        }\n    };\n    /**\n     * Draw rounded rectangle specified by a brush, pen, coordinate pair, a width, a height and a radius.\n     * ```typescript\n     * // Create a new PDF document.\n     * let document : PdfDocument = new PdfDocument();\n     * // Create a new page\n     * let page : PdfPage = document.pages.add();\n     * // Create brush for draw rectangle\n     * let brush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(238, 130, 238));\n     * // Create a new PDF pen\n     * let pen: PdfPen = new PdfPen(new PdfColor(255, 0, 0), 1);\n     * // Draw rounded rectangle\n     * page.graphics.drawRoundedRectangle(pen, brush, 20, 20, 100, 50, 5);\n     * // save the document\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     * @param pen Stoke color of the rectangle.\n     * @param brush Fill color of the rectangle.\n     * @param x The x-coordinate of the upper-left corner of the rectangle to draw.\n     * @param y The y-coordinate of the upper-left corner of the rectangle to draw.\n     * @param width Width of the rectangle to draw.\n     * @param height Height of the rectangle to draw.\n     * @param radius Radius of the arcs to draw.\n     */\n    PdfGraphics.prototype.drawRoundedRectangle = function (pen, brush, x, y, width, height, radius) {\n        if (pen === null) {\n            throw new Error('pen');\n        }\n        if (brush === null) {\n            throw new Error('brush');\n        }\n        if (radius === 0) {\n            this.drawRectangle(pen, brush, x, y, width, height);\n        }\n        else {\n            var bounds = [x, y, width, height];\n            var diameter = radius * 2;\n            var size = [diameter, diameter];\n            var arc = [bounds[0], bounds[1], size[0], size[1]];\n            this._pathPoints = [];\n            this._pathTypes = [];\n            var startFigure = true;\n            startFigure = this._addArc(arc[0], arc[1], arc[2], arc[3], 180, 90, startFigure);\n            arc[0] = (bounds[0] + bounds[2]) - diameter;\n            startFigure = this._addArc(arc[0], arc[1], arc[2], arc[3], 270, 90, startFigure);\n            arc[1] = (bounds[1] + bounds[3]) - diameter;\n            startFigure = this._addArc(arc[0], arc[1], arc[2], arc[3], 0, 90, startFigure);\n            arc[0] = bounds[0];\n            startFigure = this._addArc(arc[0], arc[1], arc[2], arc[3], 90, 90, startFigure);\n            var index = this._pathPoints.length - 1;\n            var type = ((this._pathTypes[index]));\n            type = (type | PathPointType.CloseSubpath);\n            this._pathTypes[index] = (type);\n            this._drawPath(pen, brush, this._pathPoints, this._pathTypes, PdfFillMode.Alternate);\n            this._pathPoints = [];\n            this._pathTypes = [];\n        }\n    };\n    PdfGraphics.prototype._addArc = function (x, y, width, height, startAngle, sweepAngle, startFigure) {\n        var points = this._getBezierArcPoints(x, y, (x + width), (y + height), startAngle, sweepAngle);\n        for (var i = 0; i < points.length; i = i + 8) {\n            var point = [points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5], points[i + 6], points[i + 7]];\n            startFigure = this._addArcPoints(point, PathPointType.Bezier3, startFigure);\n        }\n        return startFigure;\n    };\n    PdfGraphics.prototype._addArcPoints = function (points, pointType, startFigure) {\n        for (var i = 0; i < points.length; i++) {\n            var point = new PointF(points[i], points[(i + 1)]);\n            if (i === 0) {\n                if (this._pathPoints.length === 0 || startFigure) {\n                    this._addPoint(point, PathPointType.Start);\n                    startFigure = false;\n                }\n                else if (point.x !== this._getLastPoint().x || point.y !== this._getLastPoint().y) {\n                    this._addPoint(point, PathPointType.Line);\n                }\n            }\n            else {\n                this._addPoint(point, pointType);\n            }\n            i++;\n        }\n        return startFigure;\n    };\n    PdfGraphics.prototype._getLastPoint = function () {\n        var lastPoint = new PointF(0, 0);\n        var count = this._pathPoints.length;\n        if (count > 0) {\n            lastPoint.x = this._pathPoints[(count - 1)].x;\n            lastPoint.y = this._pathPoints[(count - 1)].y;\n        }\n        return lastPoint;\n    };\n    PdfGraphics.prototype._addPoint = function (point, type) {\n        this._pathPoints.push(point);\n        this._pathTypes.push(type);\n    };\n    PdfGraphics.prototype._getBezierArcPoints = function (x1, y1, x2, y2, s1, e1) {\n        if ((x1 > x2)) {\n            var tmp = void 0;\n            tmp = x1;\n            x1 = x2;\n            x2 = tmp;\n        }\n        if ((y2 > y1)) {\n            var tmp = void 0;\n            tmp = y1;\n            y1 = y2;\n            y2 = tmp;\n        }\n        var fragAngle;\n        var numFragments;\n        if ((Math.abs(e1) <= 90)) {\n            fragAngle = e1;\n            numFragments = 1;\n        }\n        else {\n            numFragments = (Math.ceil((Math.abs(e1) / 90)));\n            fragAngle = (e1 / numFragments);\n        }\n        var xcen = ((x1 + x2) / 2);\n        var ycen = ((y1 + y2) / 2);\n        var rx = ((x2 - x1) / 2);\n        var ry = ((y2 - y1) / 2);\n        var halfAng = ((fragAngle * (Math.PI / 360)));\n        var kappa = (Math.abs(4.0 / 3.0 * (1.0 - Math.cos(halfAng)) / Math.sin(halfAng)));\n        var pointList = [];\n        for (var i = 0; (i < numFragments); i++) {\n            var theta0 = (((s1 + (i * fragAngle)) * (Math.PI / 180)));\n            var theta1 = (((s1 + ((i + 1) * fragAngle)) * (Math.PI / 180)));\n            var cos0 = (Math.cos(theta0));\n            var cos1 = (Math.cos(theta1));\n            var sin0 = (Math.sin(theta0));\n            var sin1 = (Math.sin(theta1));\n            if ((fragAngle > 0)) {\n                pointList.push((xcen + (rx * cos0)), (ycen - (ry * sin0)), (xcen + (rx * (cos0 - (kappa * sin0)))), (ycen - (ry * (sin0 + (kappa * cos0)))), (xcen + (rx * (cos1 + (kappa * sin1)))), (ycen - (ry * (sin1 - (kappa * cos1)))), (xcen + (rx * cos1)), (ycen - (ry * sin1)));\n            }\n            else {\n                pointList.push((xcen + (rx * cos0)), (ycen - (ry * sin0)), (xcen + (rx * (cos0 + (kappa * sin0)))), (ycen - (ry * (sin0 - (kappa * cos0)))), (xcen + (rx * (cos1 - (kappa * sin1)))), (ycen - (ry * (sin1 + (kappa * cos1)))), (xcen + (rx * cos1)), (ycen - (ry * sin1)));\n            }\n        }\n        return pointList;\n    };\n    PdfGraphics.prototype.drawPathHelper = function (arg1, arg2, arg3, arg4) {\n        if (typeof arg3 === 'boolean') {\n            var temparg3 = arg3;\n            this.drawPathHelper(arg1, arg2, PdfFillMode.Winding, temparg3);\n        }\n        else {\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var isPen = arg1 != null;\n            var isBrush = arg2 != null;\n            var isEvenOdd = (temparg3 === PdfFillMode.Alternate);\n            if (isPen && isBrush) {\n                this.streamWriter.fillStrokePath(isEvenOdd);\n            }\n            else if (!isPen && !isBrush) {\n                this.streamWriter.endPath();\n            }\n            else if (isPen) {\n                this.streamWriter.strokePath();\n            }\n            else {\n                this.streamWriter.fillPath(isEvenOdd);\n            }\n        }\n    };\n    PdfGraphics.prototype.drawImage = function (arg1, arg2, arg3, arg4, arg5) {\n        if (typeof arg2 === 'number' && typeof arg3 === 'number' && typeof arg4 === 'undefined') {\n            var size = arg1.physicalDimension;\n            this.drawImage(arg1, arg2, arg3, size.width, size.height);\n        }\n        else {\n            var temparg2 = arg2;\n            var temparg3 = arg3;\n            var temparg4 = arg4;\n            var temparg5 = arg5;\n            arg1.save();\n            var matrix = new PdfTransformationMatrix();\n            this.getTranslateTransform(temparg2, (temparg3 + temparg5), matrix);\n            this.getScaleTransform(arg4, arg5, matrix);\n            this.pdfStreamWriter.write('q');\n            this.pdfStreamWriter.modifyCtm(matrix);\n            // Output template.\n            var resources = this.getResources.getResources();\n            if (typeof this.pageLayer !== 'undefined' && this.page != null) {\n                resources.document = this.page.document;\n            }\n            var name_2 = resources.getName(arg1);\n            if (typeof this.pageLayer !== 'undefined') {\n                this.page.setResources(resources);\n            }\n            this.pdfStreamWriter.executeObject(name_2);\n            this.pdfStreamWriter.write(Operators.restoreState);\n            this.pdfStreamWriter.write(Operators.newLine);\n            var resource = this.getResources.getResources();\n            resource.requireProcedureSet(this.procedureSets.imageB);\n            resource.requireProcedureSet(this.procedureSets.imageC);\n            resource.requireProcedureSet(this.procedureSets.imageI);\n            resource.requireProcedureSet(this.procedureSets.text);\n        }\n    };\n    //Implementation\n    /**\n     * Returns `bounds` of the line info.\n     * @private\n     */\n    PdfGraphics.prototype.getLineBounds = function (lineIndex, result, font, layoutRectangle, format) {\n        var bounds;\n        if (!result.empty && lineIndex < result.lineCount && lineIndex >= 0) {\n            var line = result.lines[lineIndex];\n            var vShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n            var y = vShift + layoutRectangle.y + (result.lineHeight * lineIndex);\n            var lineWidth = line.width;\n            var hShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n            var lineIndent = this.getLineIndent(line, format, layoutRectangle, (lineIndex === 0));\n            hShift += (!this.rightToLeft(format)) ? lineIndent : 0;\n            var x = layoutRectangle.x + hShift;\n            var width = (!this.shouldJustify(line, layoutRectangle.width, format)) ? lineWidth - lineIndent : layoutRectangle.width - lineIndent;\n            var height = result.lineHeight;\n            bounds = new RectangleF(x, y, width, height);\n        }\n        else {\n            bounds = new RectangleF(0, 0, 0, 0);\n        }\n        return bounds;\n    };\n    /**\n     * Creates `lay outed rectangle` depending on the text settings.\n     * @private\n     */\n    PdfGraphics.prototype.checkCorrectLayoutRectangle = function (textSize, x, y, format) {\n        var layoutedRectangle = new RectangleF(x, y, textSize.width, textSize.width);\n        if (format != null) {\n            switch (format.alignment) {\n                case PdfTextAlignment.Center:\n                    layoutedRectangle.x -= layoutedRectangle.width / 2;\n                    break;\n                case PdfTextAlignment.Right:\n                    layoutedRectangle.x -= layoutedRectangle.width;\n                    break;\n            }\n            switch (format.lineAlignment) {\n                case PdfVerticalAlignment.Middle:\n                    layoutedRectangle.y -= layoutedRectangle.height / 2;\n                    break;\n                case PdfVerticalAlignment.Bottom:\n                    layoutedRectangle.y -= layoutedRectangle.height;\n                    break;\n            }\n        }\n        return layoutedRectangle;\n    };\n    /**\n     * Sets the `layer` for the graphics.\n     * @private\n     */\n    PdfGraphics.prototype.setLayer = function (layer) {\n        this.pageLayer = layer;\n        var page = layer.page;\n        if (page != null && typeof page !== 'undefined') {\n            page.beginSave = this.pageSave;\n        }\n    };\n    /**\n     * Adding page number field before page saving.\n     * @private\n     */\n    PdfGraphics.prototype.pageSave = function (page) {\n        if (page.graphics.automaticFields != null) {\n            for (var i = 0; i < page.graphics.automaticFields.automaticFields.length; i++) {\n                var fieldInfo = page.graphics.automaticFields.automaticFields[i];\n                fieldInfo.field.performDraw(page.graphics, fieldInfo.location, fieldInfo.scalingX, fieldInfo.scalingY);\n            }\n        }\n    };\n    /**\n     * `Draws a layout result`.\n     * @private\n     */\n    PdfGraphics.prototype.drawStringLayoutResult = function (result, font, pen, brush, layoutRectangle, format) {\n        if (!result.empty) {\n            this.applyStringSettings(font, pen, brush, format, layoutRectangle);\n            // Set text scaling\n            var textScaling = (format != null) ? format.horizontalScalingFactor : 100.0;\n            if (textScaling !== this.previousTextScaling && !this.isEmfTextScaled) {\n                this.pdfStreamWriter.setTextScaling(textScaling);\n                this.previousTextScaling = textScaling;\n            }\n            var height = (format == null || format.lineSpacing === 0) ? font.height : format.lineSpacing + font.height;\n            var subScript = (format != null && format.subSuperScript === PdfSubSuperScript.SubScript);\n            var shift = 0;\n            shift = (subScript) ? height - (font.height + font.metrics.getDescent(format)) : (height - font.metrics.getAscent(format));\n            this.shift = shift;\n            this.pdfStreamWriter.startNextLine(layoutRectangle.x, layoutRectangle.y - shift);\n            this.pdfStreamWriter.setLeading(+height);\n            var resultHeight = 0;\n            var remainingString = '';\n            for (var i = 0; i < result.lines.length; i++) {\n                resultHeight += result.lineHeight;\n                if ((layoutRectangle.y + resultHeight) > this.clientSize.height) {\n                    this.startCutIndex = i;\n                    break;\n                }\n            }\n            for (var j = this.startCutIndex; (j < result.lines.length && j >= 0); j++) {\n                remainingString += result.lines[j].text;\n            }\n            var bounds = new RectangleF(layoutRectangle.x, layoutRectangle.y, layoutRectangle.width, layoutRectangle.height);\n            this.drawLayoutResult(result, font, format, layoutRectangle);\n            this.underlineStrikeoutText(pen, brush, result, font, bounds, format);\n            this.isEmfPlus = false;\n            this.isUseFontSize = false;\n            if (this.startCutIndex !== -1) {\n                var page = this.getNextPage();\n                page.graphics.drawString(remainingString, font, pen, brush, layoutRectangle.x, 0, layoutRectangle.width, 0, format);\n            }\n        }\n        else {\n            throw new Error('ArgumentNullException:result');\n        }\n    };\n    /**\n     * Gets the `next page`.\n     * @private\n     */\n    PdfGraphics.prototype.getNextPage = function () {\n        var section = this.currentPage.section;\n        var nextPage = null;\n        var index = section.indexOf(this.currentPage);\n        if (index === section.count - 1) {\n            nextPage = section.add();\n        }\n        else {\n            nextPage = section.getPages()[index + 1];\n        }\n        return nextPage;\n    };\n    PdfGraphics.prototype.setClip = function (rectangle, mode) {\n        if (typeof mode === 'undefined') {\n            this.setClip(rectangle, PdfFillMode.Winding);\n        }\n        else {\n            this.pdfStreamWriter.appendRectangle(rectangle);\n            this.pdfStreamWriter.clipPath((mode === PdfFillMode.Alternate));\n        }\n    };\n    /**\n     * Applies all the `text settings`.\n     * @private\n     */\n    PdfGraphics.prototype.applyStringSettings = function (font, pen, brush, format, bounds) {\n        if (brush instanceof PdfTilingBrush) {\n            this.bCSInitialized = false;\n            brush.graphics.colorSpace = this.colorSpace;\n        }\n        else if ((brush instanceof PdfGradientBrush)) {\n            this.bCSInitialized = false;\n            brush.colorSpace = this.colorSpace;\n        }\n        var setLineWidth = false;\n        var tm = this.getTextRenderingMode(pen, brush, format);\n        this.stateControl(pen, brush, font, format);\n        this.pdfStreamWriter.beginText();\n        if ((tm) !== this.previousTextRenderingMode) {\n            this.pdfStreamWriter.setTextRenderingMode(tm);\n            this.previousTextRenderingMode = tm;\n        }\n        // Set character spacing.\n        var cs = (format != null) ? format.characterSpacing : 0;\n        if (cs !== this.previousCharacterSpacing && !this.isEmfTextScaled) {\n            this.pdfStreamWriter.setCharacterSpacing(cs);\n            this.previousCharacterSpacing = cs;\n        }\n        // Set word spacing.\n        // NOTE: it works only if the space code is equal to 32 (0x20).\n        var ws = (format != null) ? format.wordSpacing : 0;\n        if (ws !== this.previousWordSpacing) {\n            this.pdfStreamWriter.setWordSpacing(ws);\n            this.previousWordSpacing = ws;\n        }\n    };\n    /**\n     * Calculates `shift value` if the text is vertically aligned.\n     * @private\n     */\n    PdfGraphics.prototype.getTextVerticalAlignShift = function (textHeight, boundsHeight, format) {\n        var shift = 0;\n        if (boundsHeight >= 0 && format != null && format.lineAlignment !== PdfVerticalAlignment.Top) {\n            switch (format.lineAlignment) {\n                case PdfVerticalAlignment.Middle:\n                    shift = (boundsHeight - textHeight) / 2;\n                    break;\n                case PdfVerticalAlignment.Bottom:\n                    shift = boundsHeight - textHeight;\n                    break;\n            }\n        }\n        return shift;\n    };\n    /**\n     * `Draws layout result`.\n     * @private\n     */\n    PdfGraphics.prototype.drawLayoutResult = function (result, font, format, layoutRectangle) {\n        var vAlignShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n        if (vAlignShift !== 0) {\n            this.pdfStreamWriter.startNextLine(0, vAlignShift);\n        }\n        var ttfFont = font;\n        var unicode = (ttfFont != null && ttfFont.isUnicode);\n        var embed = (ttfFont != null && ttfFont.isEmbedFont);\n        var lines = result.lines;\n        for (var i = 0, len = lines.length; (i < len && i !== this.startCutIndex); i++) {\n            var lineInfo = lines[i];\n            var line = lineInfo.text;\n            var lineWidth = lineInfo.width;\n            var hAlignShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n            var lineIndent = this.getLineIndent(lineInfo, format, layoutRectangle, (i === 0));\n            hAlignShift += (!this.rightToLeft(format)) ? lineIndent : 0;\n            if (hAlignShift !== 0 && !this.isEmfTextScaled) {\n                this.pdfStreamWriter.startNextLine(hAlignShift, 0);\n            }\n            if (unicode) {\n                this.drawUnicodeLine(lineInfo, layoutRectangle, font, format);\n            }\n            else {\n                this.drawAsciiLine(lineInfo, layoutRectangle, font, format);\n            }\n            if (hAlignShift !== 0 && !this.isEmfTextScaled) {\n                this.pdfStreamWriter.startNextLine(-hAlignShift, 0);\n            }\n            if (this.isOverloadWithPosition && lines.length > 1) {\n                this.pdfStreamWriter.startNextLine(-(layoutRectangle.x), 0);\n                layoutRectangle.x = 0;\n                layoutRectangle.width = this.clientSize.width;\n                this.isOverloadWithPosition = false;\n                this.isPointOverload = true;\n            }\n            else if (this.isOverloadWithPosition) {\n                this.isOverloadWithPosition = false;\n            }\n        }\n        this.getResources.getResources().requireProcedureSet(this.procedureSets.text);\n        if (vAlignShift !== 0) {\n            this.pdfStreamWriter.startNextLine(0, -(vAlignShift - result.lineHeight));\n        }\n        this.pdfStreamWriter.endText();\n    };\n    /**\n     * `Draws Ascii line`.\n     * @private\n     */\n    PdfGraphics.prototype.drawAsciiLine = function (lineInfo, layoutRectangle, font, format) {\n        this.justifyLine(lineInfo, layoutRectangle.width, format);\n        var value = '';\n        if (lineInfo.text.indexOf('(') !== -1 || lineInfo.text.indexOf(')') !== -1) {\n            for (var i = 0; i < lineInfo.text.length; i++) {\n                if (lineInfo.text[i] === '(') {\n                    value += '\\\\\\(';\n                }\n                else if (lineInfo.text[i] === ')') {\n                    value += '\\\\\\)';\n                }\n                else {\n                    value += lineInfo.text[i];\n                }\n            }\n        }\n        if (value === '') {\n            value = lineInfo.text;\n        }\n        var line = '(' + value + ')';\n        this.pdfStreamWriter.showNextLineText(new PdfString(line));\n    };\n    /**\n     * Draws unicode line.\n     * @private\n     */\n    PdfGraphics.prototype.drawUnicodeLine = function (lineInfo, layoutRectangle, font, format) {\n        var line = lineInfo.text;\n        var lineWidth = lineInfo.width;\n        var rtl = (format !== null && typeof format !== 'undefined' && format.rightToLeft);\n        var useWordSpace = (format !== null && typeof format !== 'undefined' && (format.wordSpacing !== 0 || format.alignment === PdfTextAlignment.Justify));\n        var ttfFont = font;\n        var wordSpacing = this.justifyLine(lineInfo, layoutRectangle.width, format);\n        var rtlRender = new RtlRenderer();\n        if (rtl || (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None)) {\n            var blocks = null;\n            var rightAlign = (format !== null && typeof format !== 'undefined' && format.alignment === PdfTextAlignment.Right);\n            if (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n                /* tslint:disable-next-line:max-line-length */\n                blocks = rtlRender.layout(line, ttfFont, (format.textDirection === PdfTextDirection.RightToLeft) ? true : false, useWordSpace, format);\n            }\n            else {\n                blocks = rtlRender.layout(line, ttfFont, rightAlign, useWordSpace, format);\n            }\n            var words = null;\n            if (blocks.length > 1) {\n                if (format !== null && typeof format !== 'undefined' && format.textDirection !== PdfTextDirection.None) {\n                    /* tslint:disable-next-line:max-line-length */\n                    words = rtlRender.splitLayout(line, ttfFont, (format.textDirection === PdfTextDirection.RightToLeft) ? true : false, useWordSpace, format);\n                }\n                else {\n                    words = rtlRender.splitLayout(line, ttfFont, rightAlign, useWordSpace, format);\n                }\n            }\n            else {\n                words = [line];\n            }\n            this.drawUnicodeBlocks(blocks, words, ttfFont, format, wordSpacing);\n        }\n        else {\n            if (useWordSpace) {\n                var result = this.breakUnicodeLine(line, ttfFont, null);\n                var blocks = result.tokens;\n                var words = result.words;\n                this.drawUnicodeBlocks(blocks, words, ttfFont, format, wordSpacing);\n            }\n            else {\n                var token = this.convertToUnicode(line, ttfFont);\n                var value = this.getUnicodeString(token);\n                this.streamWriter.showNextLineText(value);\n            }\n        }\n    };\n    /**\n     * Draws array of unicode tokens.\n     */\n    PdfGraphics.prototype.drawUnicodeBlocks = function (blocks, words, font, format, wordSpacing) {\n        if (blocks == null) {\n            throw new Error('Argument Null Exception : blocks');\n        }\n        if (words == null) {\n            throw new Error('Argument Null Exception : words');\n        }\n        if (font == null) {\n            throw new Error('Argument Null Exception : font');\n        }\n        this.streamWriter.startNextLine();\n        var x = 0;\n        var xShift = 0;\n        var firstLineIndent = 0;\n        var paragraphIndent = 0;\n        try {\n            if (format !== null && typeof format !== 'undefined') {\n                firstLineIndent = format.firstLineIndent;\n                paragraphIndent = format.paragraphIndent;\n                format.firstLineIndent = 0;\n                format.paragraphIndent = 0;\n            }\n            var spaceWidth = font.getCharWidth(StringTokenizer.whiteSpace, format) + wordSpacing;\n            var characterSpacing = (format != null) ? format.characterSpacing : 0;\n            var wordSpace = (format !== null && typeof format !== 'undefined' && wordSpacing === 0) ? format.wordSpacing : 0;\n            spaceWidth += characterSpacing + wordSpace;\n            for (var i = 0; i < blocks.length; i++) {\n                var token = blocks[i];\n                var word = words[i];\n                var tokenWidth = 0;\n                if (x !== 0) {\n                    this.streamWriter.startNextLine(x, 0);\n                }\n                if (word.length > 0) {\n                    tokenWidth += /*Utils.Round(*/ font.measureString(word, format).width /*)*/;\n                    tokenWidth += characterSpacing;\n                    var val = this.getUnicodeString(token);\n                    this.streamWriter.showText(val);\n                }\n                if (i !== blocks.length - 1) {\n                    x = tokenWidth + spaceWidth;\n                    xShift += x;\n                }\n            }\n            // Rolback current line position.\n            if (xShift > 0) {\n                this.streamWriter.startNextLine(-xShift, 0);\n            }\n        }\n        finally {\n            if (format !== null && typeof format !== 'undefined') {\n                format.firstLineIndent = firstLineIndent;\n                format.paragraphIndent = paragraphIndent;\n            }\n        }\n    };\n    /**\n     * Breakes the unicode line to the words and converts symbols to glyphs.\n     */\n    PdfGraphics.prototype.breakUnicodeLine = function (line, ttfFont, words) {\n        if (line === null) {\n            throw new Error('Argument Null Exception : line');\n        }\n        words = line.split(null);\n        var tokens = [];\n        for (var i = 0; i < words.length; i++) {\n            // Reconvert string according to unicode standard.\n            var word = words[i];\n            var token = this.convertToUnicode(word, ttfFont);\n            tokens[i] = token;\n        }\n        return { tokens: tokens, words: words };\n    };\n    /**\n     * Creates PdfString from the unicode text.\n     */\n    PdfGraphics.prototype.getUnicodeString = function (token) {\n        if (token === null) {\n            throw new Error('Argument Null Exception : token');\n        }\n        var val = new PdfString(token);\n        val.converted = true;\n        val.encode = InternalEnum.ForceEncoding.Ascii;\n        return val;\n    };\n    /**\n     * Converts to unicode format.\n     */\n    PdfGraphics.prototype.convertToUnicode = function (text, ttfFont) {\n        var token = null;\n        if (text == null) {\n            throw new Error('Argument Null Exception : text');\n        }\n        if (ttfFont == null) {\n            throw new Error('Argument Null Exception : ttfFont');\n        }\n        if (ttfFont.fontInternal instanceof UnicodeTrueTypeFont) {\n            var ttfReader = ttfFont.fontInternal.ttfReader;\n            ttfFont.setSymbols(text);\n            token = ttfReader.convertString(text);\n            var bytes = PdfString.toUnicodeArray(token, false);\n            token = PdfString.byteToString(bytes);\n        }\n        return token;\n    };\n    /**\n     * `Justifies` the line if needed.\n     * @private\n     */\n    PdfGraphics.prototype.justifyLine = function (lineInfo, boundsWidth, format) {\n        var line = lineInfo.text;\n        var lineWidth = lineInfo.width;\n        var shouldJustify = this.shouldJustify(lineInfo, boundsWidth, format);\n        var hasWordSpacing = (format != null && format.wordSpacing !== 0);\n        var symbols = StringTokenizer.spaces;\n        var whitespacesCount = StringTokenizer.getCharsCount(line, symbols);\n        var wordSpace = 0;\n        if (shouldJustify) {\n            // Correct line width.\n            if (hasWordSpacing) {\n                lineWidth -= (whitespacesCount * format.wordSpacing);\n            }\n            var difference = boundsWidth - lineWidth;\n            wordSpace = difference / whitespacesCount;\n            this.pdfStreamWriter.setWordSpacing(wordSpace);\n        }\n        else {\n            // If there is justifying, but the line shouldn't be justified, restore default word spacing.\n            if (hasWordSpacing) {\n                this.pdfStreamWriter.setWordSpacing(format.wordSpacing);\n            }\n            else {\n                this.pdfStreamWriter.setWordSpacing(0);\n            }\n        }\n        return wordSpace;\n    };\n    /**\n     * `Reset` or reinitialize the current graphic value.\n     * @private\n     */\n    PdfGraphics.prototype.reset = function (size) {\n        this.canvasSize = size;\n        this.streamWriter.clear();\n        this.initialize();\n        this.initializeCoordinates();\n    };\n    /**\n     * Checks whether the line should be `justified`.\n     * @private\n     */\n    PdfGraphics.prototype.shouldJustify = function (lineInfo, boundsWidth, format) {\n        var line = lineInfo.text;\n        var lineWidth = lineInfo.width;\n        var justifyStyle = (format != null && format.alignment === PdfTextAlignment.Justify);\n        var goodWidth = (boundsWidth >= 0 && lineWidth < boundsWidth);\n        var symbols = StringTokenizer.spaces;\n        var whitespacesCount = StringTokenizer.getCharsCount(line, symbols);\n        var hasSpaces = (whitespacesCount > 0 && line[0] !== StringTokenizer.whiteSpace);\n        var goodLineBreakStyle = ((lineInfo.lineType & LineType.LayoutBreak) > 0) || (format && format.wordWrap === PdfWordWrapType.None);\n        var shouldJustify = (justifyStyle && goodWidth && hasSpaces && goodLineBreakStyle);\n        return shouldJustify;\n    };\n    /**\n     * Emulates `Underline, Strikeout` of the text if needed.\n     * @private\n     */\n    PdfGraphics.prototype.underlineStrikeoutText = function (pen, brush, result, font, layoutRectangle, format) {\n        if (font.underline || font.strikeout) {\n            // Calculate line width.\n            var linePen = this.createUnderlineStikeoutPen(pen, brush, font, format);\n            if (linePen != null) {\n                // Approximate line positions.\n                var vShift = this.getTextVerticalAlignShift(result.actualSize.height, layoutRectangle.height, format);\n                var underlineYOffset = 0;\n                underlineYOffset = layoutRectangle.y + vShift + font.metrics.getAscent(format) + 1.5 * linePen.width;\n                var strikeoutYOffset = layoutRectangle.y + vShift + font.metrics.getHeight(format) / 2 + 1.5 * linePen.width;\n                var lines = result.lines;\n                // Run through the text and draw lines.\n                for (var i = 0, len = result.lineCount; i < len; i++) {\n                    var lineInfo = lines[i];\n                    var line = lineInfo.text;\n                    var lineWidth = lineInfo.width;\n                    var hShift = this.getHorizontalAlignShift(lineWidth, layoutRectangle.width, format);\n                    var lineIndent = this.getLineIndent(lineInfo, format, layoutRectangle, (i === 0));\n                    hShift += (!this.rightToLeft(format)) ? lineIndent : 0;\n                    var x1 = layoutRectangle.x + hShift;\n                    var x2 = (!this.shouldJustify(lineInfo, layoutRectangle.width, format)) ? x1 + lineWidth - lineIndent : x1 + layoutRectangle.width - lineIndent;\n                    if (font.underline) {\n                        var y = underlineYOffset;\n                        this.drawLine(linePen, x1, y, x2, y);\n                        underlineYOffset += result.lineHeight;\n                    }\n                    if (font.strikeout) {\n                        var y = strikeoutYOffset;\n                        this.drawLine(linePen, x1, y, x2, y);\n                        strikeoutYOffset += result.lineHeight;\n                    }\n                    if (this.isPointOverload && lines.length > 1) {\n                        layoutRectangle.x = 0;\n                        layoutRectangle.width = this.clientSize.width;\n                    }\n                }\n                this.isPointOverload = false;\n            }\n        }\n    };\n    /**\n     * `Creates a pen` for drawing lines in the text.\n     * @private\n     */\n    PdfGraphics.prototype.createUnderlineStikeoutPen = function (pen, brush, font, format) {\n        // Calculate line width.\n        var lineWidth = font.metrics.getSize(format) / 20;\n        var linePen = null;\n        // Create a pen fo the lines.\n        if (pen != null) {\n            linePen = new PdfPen(pen.color, lineWidth);\n        }\n        else if (brush != null) {\n            linePen = new PdfPen(brush, lineWidth);\n        }\n        return linePen;\n    };\n    /**\n     * Return `text rendering mode`.\n     * @private\n     */\n    PdfGraphics.prototype.getTextRenderingMode = function (pen, brush, format) {\n        var tm = TextRenderingMode.None;\n        if (pen != null && brush != null) {\n            tm = TextRenderingMode.FillStroke;\n        }\n        else if (pen != null) {\n            tm = TextRenderingMode.Stroke;\n        }\n        else {\n            tm = TextRenderingMode.Fill;\n        }\n        if (format != null && format.clipPath) {\n            tm |= TextRenderingMode.ClipFlag;\n        }\n        return tm;\n    };\n    /**\n     * Returns `line indent` for the line.\n     * @private\n     */\n    PdfGraphics.prototype.getLineIndent = function (lineInfo, format, layoutBounds, firstLine) {\n        var lineIndent = 0;\n        var firstParagraphLine = ((lineInfo.lineType & LineType.FirstParagraphLine) > 0);\n        if (format != null && firstParagraphLine) {\n            lineIndent = (firstLine) ? format.firstLineIndent : format.paragraphIndent;\n            lineIndent = (layoutBounds.width > 0) ? Math.min(layoutBounds.width, lineIndent) : lineIndent;\n        }\n        return lineIndent;\n    };\n    /**\n     * Calculates shift value if the line is `horizontaly aligned`.\n     * @private\n     */\n    PdfGraphics.prototype.getHorizontalAlignShift = function (lineWidth, boundsWidth, format) {\n        var shift = 0;\n        if (boundsWidth >= 0 && format != null && format.alignment !== PdfTextAlignment.Left) {\n            switch (format.alignment) {\n                case PdfTextAlignment.Center:\n                    shift = (boundsWidth - lineWidth) / 2;\n                    break;\n                case PdfTextAlignment.Right:\n                    shift = boundsWidth - lineWidth;\n                    break;\n            }\n        }\n        return shift;\n    };\n    /**\n     * Gets or sets the value that indicates `text direction` mode.\n     * @private\n     */\n    PdfGraphics.prototype.rightToLeft = function (format) {\n        var rtl = (format !== null && typeof format !== 'undefined' && format.rightToLeft);\n        if (format !== null && typeof format !== 'undefined') {\n            if (format.textDirection !== PdfTextDirection.None && typeof format.textDirection !== 'undefined') {\n                rtl = true;\n            }\n        }\n        return rtl;\n    };\n    PdfGraphics.prototype.stateControl = function (pen, brush, font, format) {\n        if (typeof format === 'undefined') {\n            this.stateControl(pen, brush, font, null);\n        }\n        else {\n            if (brush instanceof PdfGradientBrush) {\n                this.bCSInitialized = false;\n                brush.colorSpace = this.colorSpace;\n            }\n            if (brush instanceof PdfTilingBrush) {\n                this.bCSInitialized = false;\n                brush.graphics.colorSpace = this.colorSpace;\n            }\n            var saveState = false;\n            if (brush !== null) {\n                var solidBrush = brush;\n                if (typeof this.pageLayer !== 'undefined' && this.pageLayer != null) {\n                    if (this.colorSpaceChanged === false) {\n                        this.lastDocumentCS = this.pageLayer.page.document.colorSpace;\n                        this.lastGraphicsCS = this.pageLayer.page.graphics.colorSpace;\n                        this.colorSpace = this.pageLayer.page.document.colorSpace;\n                        this.currentColorSpace = this.pageLayer.page.document.colorSpace;\n                        this.colorSpaceChanged = true;\n                    }\n                }\n                this.initCurrentColorSpace(this.currentColorSpace);\n            }\n            else if (pen != null) {\n                var pdfPen = pen;\n                if (typeof this.pageLayer !== 'undefined' && this.pageLayer != null) {\n                    this.colorSpace = this.pageLayer.page.document.colorSpace;\n                    this.currentColorSpace = this.pageLayer.page.document.colorSpace;\n                }\n                this.initCurrentColorSpace(this.currentColorSpace);\n            }\n            this.penControl(pen, saveState);\n            this.brushControl(brush, saveState);\n            this.fontControl(font, format, saveState);\n        }\n    };\n    /**\n     * Initializes the `current color space`.\n     * @private\n     */\n    PdfGraphics.prototype.initCurrentColorSpace = function (colorspace) {\n        var re = this.getResources.getResources();\n        if (!this.bCSInitialized) {\n            if (this.currentColorSpace != PdfColorSpace.GrayScale) {\n                this.pdfStreamWriter.setColorSpace('Device' + this.currentColorSpaces[this.currentColorSpace], true);\n                this.pdfStreamWriter.setColorSpace('Device' + this.currentColorSpaces[this.currentColorSpace], false);\n                this.bCSInitialized = true;\n            }\n            else {\n                this.pdfStreamWriter.setColorSpace('DeviceGray', true);\n                this.pdfStreamWriter.setColorSpace('DeviceGray', false);\n                this.bCSInitialized = true;\n            }\n        }\n    };\n    /**\n     * Controls the `pen state`.\n     * @private\n     */\n    PdfGraphics.prototype.penControl = function (pen, saveState) {\n        if (pen != null) {\n            this.currentPen = pen;\n            pen.monitorChanges(this.currentPen, this.pdfStreamWriter, this.getResources, saveState, this.colorSpace, this.matrix.clone());\n            this.currentPen = pen.clone();\n        }\n    };\n    /**\n     * Controls the `brush state`.\n     * @private\n     */\n    PdfGraphics.prototype.brushControl = function (brush, saveState) {\n        if (brush != null && typeof brush !== 'undefined') {\n            var b = brush.clone();\n            var lgb = b;\n            if (lgb !== null && typeof lgb !== 'undefined' && !(brush instanceof PdfSolidBrush) && !(brush instanceof PdfTilingBrush)) {\n                var m = lgb.matrix;\n                var matrix = this.matrix.clone();\n                if ((m != null)) {\n                    m.multiply(matrix);\n                    matrix = m;\n                }\n                lgb.matrix = matrix;\n            }\n            this.currentBrush = lgb;\n            var br = (brush);\n            b.monitorChanges(this.currentBrush, this.pdfStreamWriter, this.getResources, saveState, this.colorSpace);\n            this.currentBrush = brush;\n            brush = null;\n        }\n    };\n    /**\n     * Saves the font and other `font settings`.\n     * @private\n     */\n    PdfGraphics.prototype.fontControl = function (font, format, saveState) {\n        if (font != null) {\n            var curSubSuper = (format != null) ? format.subSuperScript : PdfSubSuperScript.None;\n            var prevSubSuper = (this.currentStringFormat != null) ? this.currentStringFormat.subSuperScript : PdfSubSuperScript.None;\n            if (saveState || font !== this.currentFont || curSubSuper !== prevSubSuper) {\n                var resources = this.getResources.getResources();\n                this.currentFont = font;\n                this.currentStringFormat = format;\n                var size = font.metrics.getSize(format);\n                this.isEmfTextScaled = false;\n                var fontName = resources.getName(font);\n                this.pdfStreamWriter.setFont(font, fontName, size);\n            }\n        }\n    };\n    PdfGraphics.prototype.setTransparency = function (arg1, arg2, arg3) {\n        if (typeof arg2 === 'undefined') {\n            this.istransparencySet = true;\n            this.setTransparency(arg1, arg1, PdfBlendMode.Normal);\n        }\n        else if (typeof arg2 === 'number' && typeof arg3 === 'undefined') {\n            this.setTransparency(arg1, arg2, PdfBlendMode.Normal);\n        }\n        else {\n            if (this.trasparencies == null) {\n                this.trasparencies = new TemporaryDictionary();\n            }\n            var transp = null;\n            var td = new TransparencyData(arg1, arg2, arg3);\n            if (this.trasparencies.containsKey(td)) {\n                transp = this.trasparencies.getValue(td);\n            }\n            if (transp == null) {\n                transp = new PdfTransparency(arg1, arg2, arg3);\n                this.trasparencies.setValue(td, transp);\n            }\n            var resources = this.getResources.getResources();\n            var name_3 = resources.getName(transp);\n            var sw = this.streamWriter;\n            sw.setGraphicsState(name_3);\n        }\n    };\n    PdfGraphics.prototype.clipTranslateMargins = function (x, y, left, top, right, bottom) {\n        if (x instanceof RectangleF && typeof y === 'undefined') {\n            this.clipBounds = x;\n            this.pdfStreamWriter.writeComment('Clip margins.');\n            this.pdfStreamWriter.appendRectangle(x);\n            this.pdfStreamWriter.closePath();\n            this.pdfStreamWriter.clipPath(false);\n            this.pdfStreamWriter.writeComment('Translate co-ordinate system.');\n            this.translateTransform(x.x, x.y);\n        }\n        else if (typeof x === 'number') {\n            var clipArea = new RectangleF(left, top, this.size.width - left - right, this.size.height - top - bottom);\n            this.clipBounds = clipArea;\n            this.pdfStreamWriter.writeComment(\"Clip margins.\");\n            this.pdfStreamWriter.appendRectangle(clipArea);\n            this.pdfStreamWriter.closePath();\n            this.pdfStreamWriter.clipPath(false);\n            this.pdfStreamWriter.writeComment(\"Translate co-ordinate system.\");\n            this.translateTransform(x, y);\n        }\n    };\n    /**\n     * `Updates y` co-ordinate.\n     * @private\n     */\n    PdfGraphics.prototype.updateY = function (y) {\n        return -y;\n    };\n    /**\n     * Used to `translate the transformation`.\n     * ```typescript\n     * // create a new PDF document\n     * let document : PdfDocument = new PdfDocument();\n     * // create a new page\n     * let page1 : PdfPage = document.pages.add();\n     * // set pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n     * //\n     * // set translate transform\n     * page1.graphics.translateTransform(100, 100);\n     * //\n     * // draw the rectangle after applying translate transform\n     * page1.graphics.drawRectangle(pen, new RectangleF({x : 0, y : 0}, {width : 100, height : 50}));\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     * @param offsetX The x-coordinate of the translation.\n     * @param offsetY The y-coordinate of the translation.\n     */\n    PdfGraphics.prototype.translateTransform = function (offsetX, offsetY) {\n        var matrix = new PdfTransformationMatrix();\n        this.getTranslateTransform(offsetX, offsetY, matrix);\n        this.pdfStreamWriter.modifyCtm(matrix);\n        this.matrix.multiply(matrix);\n    };\n    /**\n     * `Translates` coordinates of the input matrix.\n     * @private\n     */\n    PdfGraphics.prototype.getTranslateTransform = function (x, y, input) {\n        input.translate(x, this.updateY(y));\n        return input;\n    };\n    /**\n     * Applies the specified `scaling operation` to the transformation matrix of this Graphics by prepending it to the object's transformation matrix.\n     * ```typescript\n     * // create a new PDF document\n     * let document : PdfDocument = new PdfDocument();\n     * // create a new page\n     * let page1 : PdfPage = document.pages.add();\n     * // create pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n     * //\n     * // apply scaling trasformation\n     * page1.graphics.scaleTransform(1.5, 2);\n     * //\n     * // draw the rectangle after applying scaling transform\n     * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     * @param scaleX Scale factor in the x direction.\n     * @param scaleY Scale factor in the y direction.\n     */\n    PdfGraphics.prototype.scaleTransform = function (scaleX, scaleY) {\n        var matrix = new PdfTransformationMatrix();\n        this.getScaleTransform(scaleX, scaleY, matrix);\n        this.pdfStreamWriter.modifyCtm(matrix);\n        this.matrix.multiply(matrix);\n    };\n    /**\n     * `Scales` coordinates of the input matrix.\n     * @private\n     */\n    PdfGraphics.prototype.getScaleTransform = function (x, y, input) {\n        if (input == null) {\n            input = new PdfTransformationMatrix();\n        }\n        input.scale(x, y);\n        return input;\n    };\n    /**\n     * Applies the specified `rotation` to the transformation matrix of this Graphics.\n     * ```typescript\n     * // create a new PDF document\n     * let document : PdfDocument = new PdfDocument();\n     * // create a new page\n     * let page1 : PdfPage = document.pages.add();\n     * // create pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n     * //\n     * // set RotateTransform with 25 degree of angle\n     * page1.graphics.rotateTransform(25);\n     * //\n     * // draw the rectangle after RotateTransformation\n     * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     * @param angle Angle of rotation in degrees.\n     */\n    PdfGraphics.prototype.rotateTransform = function (angle) {\n        var matrix = new PdfTransformationMatrix();\n        this.getRotateTransform(angle, matrix);\n        this.pdfStreamWriter.modifyCtm(matrix);\n        this.matrix.multiply(matrix);\n    };\n    /**\n     * `Initializes coordinate system`.\n     * @private\n     */\n    PdfGraphics.prototype.initializeCoordinates = function () {\n        // Matrix equation: TM(T-1)=M', where T=[1 0 0 -1 0 h]\n        this.pdfStreamWriter.writeComment('Change co-ordinate system to left/top.');\n        // Translate co-ordinates only, don't flip.\n        if (this.mediaBoxUpperRightBound !== -(this.size.height)) {\n            if (this.cropBox == null) {\n                if (this.mediaBoxUpperRightBound === this.size.height || this.mediaBoxUpperRightBound === 0) {\n                    this.translateTransform(0, this.updateY(this.size.height));\n                }\n                else {\n                    this.translateTransform(0, this.updateY(this.mediaBoxUpperRightBound));\n                }\n            }\n        }\n    };\n    /**\n     * `Rotates` coordinates of the input matrix.\n     * @private\n     */\n    PdfGraphics.prototype.getRotateTransform = function (angle, input) {\n        if (input == null || typeof input === 'undefined') {\n            input = new PdfTransformationMatrix();\n        }\n        input.rotate(this.updateY(angle));\n        return input;\n    };\n    /**\n     * `Saves` the current state of this Graphics and identifies the saved state with a GraphicsState.\n     * ```typescript\n     * // create a new PDF document\n     * let document : PdfDocument = new PdfDocument();\n     * // create a new page\n     * let page1 : PdfPage = document.pages.add();\n     * // create pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(0, 0, 0));\n     * //\n     * // save the graphics state\n     * let state1 : PdfGraphicsState = page1.graphics.save();\n     * //\n     * page1.graphics.scaleTransform(1.5, 2);\n     * // draw the rectangle\n     * page1.graphics.drawRectangle(pen, new RectangleF({x : 100, y : 100}, {width : 100, height : 50}));\n     * // restore the graphics state\n     * page1.graphics.restore(state1);\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     */\n    PdfGraphics.prototype.save = function () {\n        var state = new PdfGraphicsState(this, this.matrix.clone());\n        state.brush = this.currentBrush;\n        state.pen = this.currentPen;\n        state.font = this.currentFont;\n        state.colorSpace = this.currentColorSpace;\n        state.characterSpacing = this.previousCharacterSpacing;\n        state.wordSpacing = this.previousWordSpacing;\n        state.textScaling = this.previousTextScaling;\n        state.textRenderingMode = this.previousTextRenderingMode;\n        this.graphicsState.push(state);\n        this.pdfStreamWriter.saveGraphicsState();\n        return state;\n    };\n    PdfGraphics.prototype.restore = function (state) {\n        if (typeof state === 'undefined') {\n            if (this.graphicsState.length > 0) {\n                this.doRestoreState();\n            }\n        }\n        else {\n            if (this.graphicsState.indexOf(state) !== -1) {\n                for (;;) {\n                    if (this.graphicsState.length === 0) {\n                        break;\n                    }\n                    var popState = this.doRestoreState();\n                    if (popState === state) {\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * `Restores graphics state`.\n     * @private\n     */\n    PdfGraphics.prototype.doRestoreState = function () {\n        var state = this.graphicsState.pop();\n        this.transformationMatrix = state.matrix;\n        this.currentBrush = state.brush;\n        this.currentPen = state.pen;\n        this.currentFont = state.font;\n        this.currentColorSpace = state.colorSpace;\n        this.previousCharacterSpacing = state.characterSpacing;\n        this.previousWordSpacing = state.wordSpacing;\n        this.previousTextScaling = state.textScaling;\n        this.previousTextRenderingMode = state.textRenderingMode;\n        this.pdfStreamWriter.restoreGraphicsState();\n        return state;\n    };\n    /**\n     * `Draws the specified path`, using its original physical size, at the location specified by a coordinate pair.\n     * ```typescript\n     * // create a new PDF document.\n     * let document : PdfDocument = new PdfDocument();\n     * // add a page to the document.\n     * let page1 : PdfPage = document.pages.add();\n     * //Create new PDF path.\n     * let path : PdfPath = new PdfPath();\n     * //Add line path points.\n     * path.addLine(new PointF(10, 100), new PointF(10, 200));\n     * path.addLine(new PointF(100, 100), new PointF(100, 200));\n     * path.addLine(new PointF(100, 200), new PointF(55, 150));\n     * // set pen\n     * let pen : PdfPen = new PdfPen(new PdfColor(255, 0, 0));\n     * // set brush\n     * let brush : PdfSolidBrush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n     * // draw the path\n     * page1.graphics.drawPath(pen, brush, path);\n     * //\n     * // save the document.\n     * document.save('output.pdf');\n     * // destroy the document\n     * document.destroy();\n     * ```\n     * @param pen Color of the text.\n     * @param brush Color of the text.\n     * @param path Draw path.\n     */\n    PdfGraphics.prototype.drawPath = function (pen, brush, path) {\n        this._drawPath(pen, brush, path.pathPoints, path.pathTypes, path.fillMode);\n    };\n    PdfGraphics.prototype._drawPath = function (pen, brush, pathPoints, pathTypes, fillMode) {\n        if (brush instanceof PdfTilingBrush) {\n            this.bCSInitialized = false;\n            brush.graphics.colorSpace = this.colorSpace;\n        }\n        else if (brush instanceof PdfGradientBrush) {\n            this.bCSInitialized = false;\n            brush.colorSpace = this.colorSpace;\n        }\n        this.stateControl(pen, brush, null);\n        this.buildUpPath(pathPoints, pathTypes);\n        this.drawPathHelper(pen, brush, fillMode, false);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PdfGraphics.prototype.drawArc = function (arg1, arg2, arg3, arg4, arg5, arg6, arg7) {\n        if (arg2 instanceof RectangleF) {\n            this.drawArc(arg1, arg2.x, arg2.y, arg2.width, arg2.height, arg3, arg4);\n        }\n        else {\n            if ((arg7 !== 0)) {\n                this.stateControl(arg1, null, null);\n                this.constructArcPath(arg2, arg3, (arg2 + arg4), (arg3 + arg5), arg6, arg7);\n                this.drawPathHelper(arg1, null, false);\n            }\n        }\n    };\n    /**\n     * Builds up the path.\n     * @private\n     */\n    PdfGraphics.prototype.buildUpPath = function (arg1, arg2) {\n        var cnt = arg1.length;\n        for (var i = 0; i < cnt; ++i) {\n            var typeValue = 0;\n            var point = arg1[i];\n            switch (((arg2[i] & (PdfGraphics.pathTypesValuesMask)))) {\n                case PathPointType.Start:\n                    this.pdfStreamWriter.beginPath(point.x, point.y);\n                    break;\n                case PathPointType.Bezier3:\n                    var p2 = new PointF(0, 0);\n                    var p3 = new PointF(0, 0);\n                    var result1 = this.getBezierPoints(arg1, arg2, i, p2, p3);\n                    this.pdfStreamWriter.appendBezierSegment(point, result1.p2, result1.p3);\n                    i = result1.i;\n                    break;\n                case PathPointType.Line:\n                    this.pdfStreamWriter.appendLineSegment(point);\n                    break;\n                default:\n                    throw new Error('ArithmeticException - Incorrect path formation.');\n            }\n            typeValue = arg2[i];\n            this.checkFlags(typeValue);\n        }\n    };\n    /**\n     * Gets the bezier points from respective arrays.\n     * @private\n     */\n    /* tslint:disable-next-line:max-line-length */\n    PdfGraphics.prototype.getBezierPoints = function (points, types, i, p2, p3) {\n        var errorMsg = 'Malforming path.';\n        ++i;\n        if ((((types[i] & PdfGraphics.pathTypesValuesMask)) === PathPointType.Bezier3)) {\n            p2 = points[i];\n            ++i;\n            if ((((types[i] & PdfGraphics.pathTypesValuesMask)) === PathPointType.Bezier3)) {\n                p3 = points[i];\n            }\n            else {\n                throw new Error('ArgumentException : errorMsg');\n            }\n        }\n        else {\n            throw new Error('ArgumentException : errorMsg');\n        }\n        return { i: i, p2: p2, p3: p3 };\n    };\n    /**\n     * Checks path point type flags.\n     * @private\n     */\n    PdfGraphics.prototype.checkFlags = function (type) {\n        if ((((type & (PathPointType.CloseSubpath))) === PathPointType.CloseSubpath)) {\n            this.pdfStreamWriter.closePath();\n        }\n    };\n    /**\n     * Constructs the arc path using Bezier curves.\n     * @private\n     */\n    PdfGraphics.prototype.constructArcPath = function (x1, y1, x2, y2, startAng, sweepAngle) {\n        var points = this.getBezierArc(x1, y1, x2, y2, startAng, sweepAngle);\n        if ((points.length === 0)) {\n            return;\n        }\n        var pt = [points[0], points[1], points[2], points[3], points[4], points[5], points[6], points[7]];\n        this.pdfStreamWriter.beginPath(pt[0], pt[1]);\n        var i = 0;\n        for (i = 0; i < points.length; i = i + 8) {\n            pt = [points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5], points[i + 6], points[i + 7]];\n            this.pdfStreamWriter.appendBezierSegment(pt[2], pt[3], pt[4], pt[5], pt[6], pt[7]);\n        }\n    };\n    /**\n     * Gets the bezier points for arc constructing.\n     * @private\n     */\n    PdfGraphics.prototype.getBezierArc = function (numX1, numY1, numX2, numY2, s1, e1) {\n        if ((numX1 > numX2)) {\n            var tmp = void 0;\n            tmp = numX1;\n            numX1 = numX2;\n            numX2 = tmp;\n        }\n        if ((numY2 > numY1)) {\n            var tmp = void 0;\n            tmp = numY1;\n            numY1 = numY2;\n            numY2 = tmp;\n        }\n        var fragAngle1;\n        var numFragments;\n        if ((Math.abs(e1) <= 90)) {\n            fragAngle1 = e1;\n            numFragments = 1;\n        }\n        else {\n            numFragments = (Math.ceil((Math.abs(e1) / 90)));\n            fragAngle1 = (e1 / numFragments);\n        }\n        var xcen = ((numX1 + numX2) / 2);\n        var ycen = ((numY1 + numY2) / 2);\n        var rx = ((numX2 - numX1) / 2);\n        var ry = ((numY2 - numY1) / 2);\n        var halfAng = ((fragAngle1 * (Math.PI / 360)));\n        var kappa = (Math.abs(4.0 / 3.0 * (1.0 - Math.cos(halfAng)) / Math.sin(halfAng)));\n        var pointsList = [];\n        for (var i = 0; (i < numFragments); i++) {\n            var thetaValue0 = (((s1 + (i * fragAngle1)) * (Math.PI / 180)));\n            var thetaValue1 = (((s1 + ((i + 1) * fragAngle1)) * (Math.PI / 180)));\n            var cos0 = (Math.cos(thetaValue0));\n            var cos1 = (Math.cos(thetaValue1));\n            var sin0 = (Math.sin(thetaValue0));\n            var sin1 = (Math.sin(thetaValue1));\n            if ((fragAngle1 > 0)) {\n                /* tslint:disable-next-line:max-line-length */\n                pointsList.push((xcen + (rx * cos0)), (ycen - (ry * sin0)), (xcen + (rx * (cos0 - (kappa * sin0)))), (ycen - (ry * (sin0 + (kappa * cos0)))), (xcen + (rx * (cos1 + (kappa * sin1)))), (ycen - (ry * (sin1 - (kappa * cos1)))), (xcen + (rx * cos1)), (ycen - (ry * sin1)));\n            }\n            else {\n                /* tslint:disable-next-line:max-line-length */\n                pointsList.push((xcen + (rx * cos0)), (ycen - (ry * sin0)), (xcen + (rx * (cos0 + (kappa * sin0)))), (ycen - (ry * (sin0 - (kappa * cos0)))), (xcen + (rx * (cos1 - (kappa * sin1)))), (ycen - (ry * (sin1 + (kappa * cos1)))), (xcen + (rx * cos1)), (ycen - (ry * sin1)));\n            }\n        }\n        return pointsList;\n    };\n    /* tslint:disable */\n    // Constants\n    /**\n     * Specifies the mask of `path type values`.\n     * @private\n     */\n    PdfGraphics.pathTypesValuesMask = 0xf;\n    /**\n     * Checks whether the object is `transparencyObject`.\n     * @hidden\n     * @private\n     */\n    PdfGraphics.transparencyObject = false;\n    return PdfGraphics;\n}());\nexport { PdfGraphics };\n/**\n * `GetResourceEventHandler` class is alternate for event handlers and delegates.\n * @private\n * @hidden\n */\nvar GetResourceEventHandler = /** @class */ (function () {\n    /**\n     * Initialize instance of `GetResourceEventHandler` class.\n     * Alternate for event handlers and delegates.\n     * @private\n     */\n    function GetResourceEventHandler(sender) {\n        this.sender = sender;\n    }\n    /**\n     * Return the instance of `PdfResources` class.\n     * @private\n     */\n    GetResourceEventHandler.prototype.getResources = function () {\n        return this.sender.getResources();\n    };\n    return GetResourceEventHandler;\n}());\nexport { GetResourceEventHandler };\nvar PdfGraphicsState = /** @class */ (function () {\n    function PdfGraphicsState(graphics, matrix) {\n        /**\n         * Stores `previous rendering mode`.\n         * @default TextRenderingMode.Fill\n         * @private\n         */\n        this.internalTextRenderingMode = TextRenderingMode.Fill;\n        /**\n         * `Previous character spacing` value or 0.\n         * @default 0.0\n         * @private\n         */\n        this.internalCharacterSpacing = 0.0;\n        /**\n         * `Previous word spacing` value or 0.\n         * @default 0.0\n         * @private\n         */\n        this.internalWordSpacing = 0.0;\n        /**\n         * The previously used `text scaling value`.\n         * @default 100.0\n         * @private\n         */\n        this.internalTextScaling = 100.0;\n        /**\n         * `Current color space`.\n         * @default PdfColorSpace.Rgb\n         * @private\n         */\n        this.pdfColorSpace = PdfColorSpace.Rgb;\n        if (typeof graphics !== 'undefined') {\n            this.pdfGraphics = graphics;\n            var elements_1 = [];\n            graphics.matrix.matrix.elements.forEach(function (element) {\n                elements_1.push(element);\n            });\n            this.transformationMatrix = new PdfTransformationMatrix();\n            this.transformationMatrix.matrix = new Matrix(elements_1);\n        }\n    }\n    Object.defineProperty(PdfGraphicsState.prototype, \"graphics\", {\n        // Properties\n        /**\n         * Gets the parent `graphics object`.\n         * @private\n         */\n        get: function () {\n            return this.pdfGraphics;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"matrix\", {\n        /**\n         * Gets the `current matrix`.\n         * @private\n         */\n        get: function () {\n            return this.transformationMatrix;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"characterSpacing\", {\n        /**\n         * Gets or sets the `current character spacing`.\n         * @private\n         */\n        get: function () {\n            return this.internalCharacterSpacing;\n        },\n        set: function (value) {\n            this.internalCharacterSpacing = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"wordSpacing\", {\n        /**\n         * Gets or sets the `word spacing` value.\n         * @private\n         */\n        get: function () {\n            return this.internalWordSpacing;\n        },\n        set: function (value) {\n            this.internalWordSpacing = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"textScaling\", {\n        /**\n         * Gets or sets the `text scaling` value.\n         * @private\n         */\n        get: function () {\n            return this.internalTextScaling;\n        },\n        set: function (value) {\n            this.internalTextScaling = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"pen\", {\n        /**\n         * Gets or sets the `current pen` object.\n         * @private\n         */\n        get: function () {\n            return this.pdfPen;\n        },\n        set: function (value) {\n            this.pdfPen = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"brush\", {\n        /**\n         * Gets or sets the `brush`.\n         * @private\n         */\n        get: function () {\n            return this.pdfBrush;\n        },\n        set: function (value) {\n            this.pdfBrush = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"font\", {\n        /**\n         * Gets or sets the `current font` object.\n         * @private\n         */\n        get: function () {\n            return this.pdfFont;\n        },\n        set: function (value) {\n            this.pdfFont = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"colorSpace\", {\n        /**\n         * Gets or sets the `current color space` value.\n         * @private\n         */\n        get: function () {\n            return this.pdfColorSpace;\n        },\n        set: function (value) {\n            this.pdfColorSpace = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfGraphicsState.prototype, \"textRenderingMode\", {\n        /**\n         * Gets or sets the `text rendering mode`.\n         * @private\n         */\n        get: function () {\n            return this.internalTextRenderingMode;\n        },\n        set: function (value) {\n            this.internalTextRenderingMode = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return PdfGraphicsState;\n}());\nexport { PdfGraphicsState };\nvar TransparencyData = /** @class */ (function () {\n    // Constructors\n    /**\n     * Initializes a new instance of the `TransparencyData` class.\n     * @private\n     */\n    function TransparencyData(alphaPen, alphaBrush, blendMode) {\n        this.alphaPen = alphaPen;\n        this.alphaBrush = alphaBrush;\n        this.blendMode = blendMode;\n    }\n    return TransparencyData;\n}());\n/* tslint:enable */\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}