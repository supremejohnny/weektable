{"ast":null,"code":"import { removeClass, addClass, extend, EventHandler } from '@syncfusion/ej2-base';\nimport { closest, classList, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren, isComplexField, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */function () {\n  /**\n   * Constructor for the Grid detail template module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} locator - specifes the serviceLocator\n   * @hidden\n   */\n  function DetailRow(parent, locator) {\n    //Internal variables\n    this.aria = new AriaService();\n    this.childRefs = [];\n    this.parent = parent;\n    this.serviceLocator = locator;\n    this.focus = locator.getService('focus');\n    this.addEventListener();\n  }\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  DetailRow.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    EventHandler.add(this.parent.element, 'auxclick', this.auxilaryclickHandler, this);\n    this.parent.on(events.click, this.clickHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    this.parent.on(events.expandChildGrid, this.expand, this);\n    this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n    this.parent.on(events.destroy, this.destroyChildGrids, this);\n    this.parent.on(events.destroyChildGrid, this.destroyChildGrids, this);\n    this.parent.on(events.destroy, this.detachDetailTemplate, this);\n    this.parent.on(events.detachDetailTemplate, this.detachDetailTemplate, this);\n  };\n  DetailRow.prototype.clickHandler = function (e) {\n    if ((e.target.classList.contains('e-icon-grightarrow') || e.target.classList.contains('e-icon-gdownarrow')) && !this.parent.allowGrouping) {\n      e.preventDefault();\n    }\n    this.toogleExpandcollapse(closest(e.target, 'td'));\n  };\n  DetailRow.prototype.auxilaryclickHandler = function (e) {\n    if ((e.target.classList.contains('e-icon-grightarrow') || e.target.classList.contains('e-icon-gdownarrow')) && !this.parent.allowGrouping && e.button === 1) {\n      e.preventDefault();\n    }\n  };\n  DetailRow.prototype.toogleExpandcollapse = function (target) {\n    this.l10n = this.serviceLocator.getService('localization');\n    var gObj = this.parent;\n    var table = this.parent.getContentTable();\n    var lastrowIdx = this.parent.getCurrentViewRecords().length - 1;\n    var parent = 'parentDetails';\n    var childGrid;\n    var isExpanded = target && target.classList.contains('e-detailrowcollapse');\n    if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) || target && target.classList.contains('e-masked-cell')) {\n      return;\n    }\n    var tr = target.parentElement;\n    var uid = tr.getAttribute('data-uid');\n    var rowObj = gObj.getRowObjectFromUID(uid);\n    var needToRefresh = false;\n    var nextRow = this.parent.getContentTable().querySelector(literals.tbody).children[tr.rowIndex + 1];\n    if (target.classList.contains('e-detailrowcollapse')) {\n      var data_1 = rowObj.data;\n      if (this.isDetailRow(nextRow)) {\n        nextRow.style.display = '';\n        gObj.notify(events.detailStateChange, {\n          data: data_1,\n          childGrid: gObj.childGrid,\n          detailElement: target,\n          isExpanded: isExpanded\n        });\n        needToRefresh = true;\n      } else if (gObj.getDetailTemplate() || gObj.childGrid) {\n        var rowId = getUid('grid-row');\n        var detailRow = this.parent.createElement('tr', {\n          className: 'e-detailrow',\n          attrs: {\n            'data-uid': rowId,\n            role: 'row'\n          }\n        });\n        var detailCell_1 = this.parent.createElement('th', {\n          className: 'e-detailcell',\n          attrs: {\n            'scope': 'col',\n            role: 'columnheader'\n          }\n        });\n        var colSpan = this.parent.getVisibleColumns().length;\n        if (this.parent.allowRowDragAndDrop) {\n          colSpan++;\n        }\n        detailCell_1.setAttribute('colspan', colSpan.toString());\n        var row = new Row({\n          isDataRow: true,\n          isExpand: true,\n          uid: rowId,\n          isDetailRow: true,\n          cells: [new Cell({\n            cellType: CellType.Indent\n          }), new Cell({\n            isDataCell: true,\n            visible: true\n          })]\n        });\n        row.parentUid = rowObj.uid;\n        for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n          detailRow.appendChild(this.parent.createElement('td', {\n            className: 'e-indentcell'\n          }));\n          row.cells.unshift(new Cell({\n            cellType: CellType.Indent\n          }));\n        }\n        detailRow.appendChild(this.parent.createElement('th', {\n          className: 'e-detailindentcell',\n          attrs: {\n            'scope': 'col'\n          }\n        }));\n        detailRow.appendChild(detailCell_1);\n        tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n        var isReactCompiler = void 0;\n        var isReactChild = void 0;\n        if (gObj.detailTemplate) {\n          isReactCompiler = this.parent.isReact && typeof gObj.detailTemplate !== 'string' && !(gObj.detailTemplate.prototype && gObj.detailTemplate.prototype.CSPTemplate);\n          isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isReact;\n          var isReactPrintGrid = this.parent.printGridParent && this.parent.printGridParent.isReact;\n          var detailTemplateID = gObj.element.id + 'detailTemplate';\n          if (isReactCompiler || isReactChild || isReactPrintGrid) {\n            gObj.getDetailTemplate()(data_1, gObj, 'detailTemplate', detailTemplateID, null, null, detailCell_1);\n            this.parent.renderTemplates(function () {\n              gObj.trigger(events.detailDataBound, {\n                detailElement: detailCell_1,\n                data: data_1,\n                childGrid: childGrid\n              });\n            });\n          } else {\n            appendChildren(detailCell_1, gObj.getDetailTemplate()(data_1, gObj, 'detailTemplate', detailTemplateID, undefined, undefined, undefined, this.parent['root']));\n          }\n        } else {\n          childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n          childGrid.height = gObj.enableInfiniteScrolling && childGrid.height === 'auto' ? 300 : childGrid.height;\n          childGrid.root = gObj.root ? gObj.root : gObj;\n          this.childRefs.push(childGrid);\n          if (childGrid.query) {\n            childGrid.query = childGrid.query.clone();\n          }\n          childGrid[\"\" + parent] = {\n            parentID: gObj.element.id,\n            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n            parentKeyField: gObj.childGrid.queryString,\n            parentKeyFieldValue: gObj.childGrid.queryString && isComplexField(gObj.childGrid.queryString) ? getObject(gObj.childGrid.queryString, data_1) : data_1[gObj.childGrid.queryString],\n            parentRowData: data_1\n          };\n          if (gObj.isReact || gObj.isVue) {\n            childGrid.parentDetails.parentInstObj = gObj;\n          } else if (gObj.parentDetails && gObj.parentDetails.parentInstObj && (gObj.parentDetails.parentInstObj.isReact || gObj.parentDetails.parentInstObj.isVue)) {\n            childGrid.parentDetails.parentInstObj = gObj.parentDetails.parentInstObj;\n          }\n          if (gObj.printGridParent && gObj.printGridParent.isReact) {\n            childGrid.printGridParent = gObj.printGridParent;\n          }\n          childGrid.isLegacyTemplate = gObj.isReact || gObj.isLegacyTemplate;\n          if (gObj.isPrinting) {\n            childGrid.isPrinting = true;\n            childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n            childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n          }\n          rowObj.childGrid = childGrid;\n          var modules = childGrid.getInjectedModules();\n          var injectedModues = gObj.getInjectedModules();\n          if (!modules || modules.length !== injectedModues.length) {\n            childGrid.setInjectedModules(injectedModues);\n          }\n          var gridElem = this.parent.createElement('div', {\n            id: 'child' + parents(tr, 'e-grid').length + '_grid' + tr.rowIndex + getUid(''),\n            className: 'e-childgrid'\n          });\n          detailCell_1.appendChild(gridElem);\n          childGrid.appendTo(gridElem);\n        }\n        detailRow.appendChild(detailCell_1);\n        if (tr.nextSibling) {\n          tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n        } else {\n          tr.parentNode.appendChild(detailRow);\n        }\n        var rowElems = gObj.getRows();\n        var rowObjs = gObj.getRowsObject();\n        rowElems.splice(rowElems.indexOf(tr) + 1, 0, detailRow);\n        if (gObj.enableInfiniteScrolling && gObj.infiniteScrollSettings.enableCache) {\n          var infiniteCache = gObj.contentModule.infiniteCache;\n          var keys = Object.keys(infiniteCache);\n          for (var i = 0; i < keys.length; i++) {\n            var cacheIndex = infiniteCache[parseInt(keys[parseInt(i.toString(), 10)], 10)].indexOf(rowObj);\n            if (cacheIndex !== -1) {\n              infiniteCache[parseInt(keys[parseInt(i.toString(), 10)], 10)].splice(cacheIndex + 1, 0, row);\n              break;\n            }\n          }\n        } else {\n          rowObjs.splice(rowObjs.indexOf(rowObj) + 1, 0, row);\n        }\n        if (!isReactCompiler || !isReactChild) {\n          gObj.trigger(events.detailDataBound, {\n            detailElement: detailCell_1,\n            data: data_1,\n            childGrid: childGrid\n          });\n        }\n        gObj.notify(events.detailDataBound, {\n          rows: rowObjs\n        });\n      }\n      classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n      classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n      rowObj.isExpand = true;\n      if (target.classList.contains('e-lastrowcell') && this.parent.getContent().clientHeight > table.scrollHeight) {\n        removeClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n        var detailrowIdx = table.querySelector(literals.tbody).getElementsByClassName('e-detailrow').length - 1;\n        addClass(table.querySelector(literals.tbody).getElementsByClassName('e-detailrow')[parseInt(detailrowIdx.toString(), 10)].childNodes, ['e-lastrowcell']);\n        this.lastrowcell = true;\n      }\n      this.aria.setExpand(target, true);\n      target.firstElementChild.setAttribute('title', this.l10n.getConstant('Expanded'));\n    } else {\n      if (this.isDetailRow(nextRow)) {\n        nextRow.style.display = 'none';\n        gObj.notify(events.detailStateChange, {\n          data: rowObj.data,\n          childGrid: gObj.childGrid,\n          detailElement: target,\n          isExpanded: isExpanded\n        });\n      }\n      classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n      classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n      if (parseInt(tr.getAttribute(literals.ariaRowIndex), 10) - 1 === lastrowIdx && this.lastrowcell) {\n        addClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n        this.lastrowcell = false;\n      }\n      rowObj.isExpand = false;\n      needToRefresh = true;\n      this.aria.setExpand(target, false);\n      target.firstElementChild.setAttribute('title', this.l10n.getConstant('Collapsed'));\n    }\n    if (!isNullOrUndefined(gObj.detailTemplate) || gObj.childGrid && needToRefresh) {\n      gObj.updateVisibleExpandCollapseRows();\n      gObj.notify(events.refreshExpandandCollapse, {\n        rows: gObj.getRowsObject()\n      });\n    }\n    if (this.parent.allowTextWrap && this.parent.height === 'auto') {\n      if (this.parent.getContentTable().scrollHeight > this.parent.getContent().clientHeight) {\n        this.parent.scrollModule.setPadding();\n      } else {\n        this.parent.scrollModule.removePadding();\n      }\n    }\n  };\n  /**\n   * @hidden\n   * @param {IGrid} gObj - specifies the grid Object\n   * @param {Row<Column>}rowObj - specifies the row object\n   * @param {string} printMode - specifies the printmode\n   * @returns {Object} returns the object\n   */\n  DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n    var gridModel;\n    if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows && gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n      gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n      gridModel = extend({}, gObj.expandedRows[rowObj.index].gridModel, gObj.childGrid, true);\n    } else {\n      if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n        gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n      }\n      gridModel = extend({}, {}, gObj.childGrid, true);\n    }\n    return gridModel;\n  };\n  DetailRow.prototype.promiseResolve = function (grid) {\n    var _this = this;\n    return function () {\n      grid.off(events.contentReady, _this.promiseResolve);\n      grid.off(events.onEmpty, _this.promiseResolve);\n      grid.notify(events.hierarchyPrint, {});\n    };\n  };\n  DetailRow.prototype.isDetailRow = function (row) {\n    return row && row.classList.contains('e-detailrow');\n  };\n  DetailRow.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (this.parent.isDestroyed || !gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n    EventHandler.remove(this.parent.element, 'auxclick', this.auxilaryclickHandler);\n    this.parent.off(events.click, this.clickHandler);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.keyPressed, this.keyPressHandler);\n    this.parent.off(events.expandChildGrid, this.expand);\n    this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n    this.parent.off(events.destroy, this.destroyChildGrids);\n    this.parent.off(events.destroyChildGrid, this.destroyChildGrids);\n    this.parent.off(events.destroy, this.detachDetailTemplate);\n    this.parent.off(events.detachDetailTemplate, this.detachDetailTemplate);\n  };\n  DetailRow.prototype.getTDfromIndex = function (index, className) {\n    var tr = !isNullOrUndefined(index) ? this.parent.getDataRows()[parseInt(index.toString(), 10)] : undefined;\n    if (tr && tr.querySelector(className)) {\n      return tr.querySelector(className);\n    }\n    return null;\n  };\n  /**\n   * Expands a detail row with the given target.\n   *\n   * @param  {Element} target - Defines the collapsed element to expand.\n   * @returns {void}\n   */\n  DetailRow.prototype.expand = function (target) {\n    if (!isNaN(target)) {\n      target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n    }\n    if (target && target.classList.contains('e-detailrowcollapse')) {\n      this.toogleExpandcollapse(target);\n    }\n  };\n  /**\n   * Collapses a detail row with the given target.\n   *\n   * @param  {Element} target - Defines the expanded element to collapse.\n   * @returns {void}\n   */\n  DetailRow.prototype.collapse = function (target) {\n    if (!isNaN(target)) {\n      target = this.getTDfromIndex(target, '.e-detailrowexpand');\n    }\n    if (target && target.classList.contains('e-detailrowexpand')) {\n      this.toogleExpandcollapse(target);\n    }\n  };\n  /**\n   * Expands all the detail rows of the Grid.\n   *\n   * @returns {void}\n   */\n  DetailRow.prototype.expandAll = function () {\n    this.expandCollapse(true);\n    this.parent.trigger(events.actionComplete, {\n      requestType: 'expandAllComplete',\n      type: events.actionComplete,\n      moduleObj: this\n    });\n  };\n  /**\n   * Collapses all the detail rows of the Grid.\n   *\n   * @returns {void}\n   */\n  DetailRow.prototype.collapseAll = function () {\n    this.expandCollapse(false);\n    this.parent.trigger(events.actionComplete, {\n      requestType: 'collapseAllComplete',\n      type: events.actionComplete,\n      moduleObj: this\n    });\n  };\n  DetailRow.prototype.expandCollapse = function (isExpand) {\n    var td;\n    var rows = this.parent.getDataRows();\n    for (var i = 0, len = rows.length; i < len; i++) {\n      td = rows[parseInt(i.toString(), 10)].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n      if (isExpand) {\n        this.expand(td);\n      } else {\n        this.collapse(td);\n      }\n    }\n  };\n  DetailRow.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n    var isMacLike = /(Mac)/i.test(navigator.platform);\n    if (isMacLike && e.metaKey) {\n      if (e.action === 'downArrow') {\n        e.action = 'ctrlDownArrow';\n      } else if (e.action === 'upArrow') {\n        e.action = 'ctrlUpArrow';\n      }\n    }\n    switch (e.action) {\n      case 'ctrlDownArrow':\n        this.expandAll();\n        break;\n      case 'ctrlUpArrow':\n        this.collapseAll();\n        break;\n      case 'altUpArrow':\n      case 'altDownArrow':\n        // eslint-disable-next-line no-case-declarations\n        var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n        if (selected.length) {\n          var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n          var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n          if (e.action === 'altDownArrow') {\n            this.expand(td);\n          } else {\n            this.collapse(td);\n          }\n        }\n        break;\n      case 'enter':\n        if (this.parent.isEdit) {\n          return;\n        }\n        // eslint-disable-next-line no-case-declarations\n        var element = this.focus.getFocusedElement();\n        if (element && (element.classList.contains('e-icon-grightarrow') || element.classList.contains('e-icon-gdownarrow'))) {\n          element = element.parentElement;\n        }\n        if (element && !element.classList.contains('e-detailrowcollapse') && !element.classList.contains('e-detailrowexpand')) {\n          break;\n        }\n        this.toogleExpandcollapse(element);\n        break;\n    }\n  };\n  DetailRow.prototype.refreshColSpan = function () {\n    var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n    var colSpan = this.parent.getVisibleColumns().length;\n    for (var i = 0; i < detailrows.length; i++) {\n      detailrows[parseInt(i.toString(), 10)].querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n    }\n  };\n  DetailRow.prototype.destroyChildGrids = function (args) {\n    var gObj = this.parent;\n    if (gObj.enableInfiniteScrolling && (gObj.childGrid || gObj.detailTemplate) && args.requestType === 'infiniteScroll' && gObj.infiniteScrollSettings.enableCache) {\n      var cacheIndex = args.direction === 'down' ? args.currentPage - gObj.infiniteScrollSettings.initialBlocks : args.currentPage + gObj.infiniteScrollSettings.initialBlocks;\n      var infiniteCache_1 = gObj.contentModule.infiniteCache[parseInt(cacheIndex.toString(), 10)];\n      var detailRows_1 = infiniteCache_1.filter(function (data) {\n        return data.isDetailRow && data.parentUid;\n      });\n      if (gObj.childGrid) {\n        var _loop_1 = function (i) {\n          var detailRow = gObj.getContentTable().querySelector('[data-uid=\"' + detailRows_1[parseInt(i.toString(), 10)].uid + '\"]');\n          var childGridElement = detailRow.querySelector('.e-childgrid');\n          var childGridIndex = this_1.childRefs.findIndex(function (grid) {\n            return grid.element.id === childGridElement.id;\n          });\n          if (!this_1.childRefs[parseInt(childGridIndex.toString(), 10)].isDestroyed) {\n            this_1.childRefs[parseInt(childGridIndex.toString(), 10)].destroy();\n            this_1.childRefs.splice(childGridIndex, 1);\n          }\n          var detailRowIndex = infiniteCache_1.indexOf(detailRows_1[parseInt(i.toString(), 10)]);\n          infiniteCache_1.splice(detailRowIndex, 1);\n          infiniteCache_1[detailRowIndex - 1].childGrid = null;\n          infiniteCache_1[detailRowIndex - 1].isExpand = false;\n          detailRow.remove();\n        };\n        var this_1 = this;\n        for (var i = 0; i < detailRows_1.length; i++) {\n          _loop_1(i);\n        }\n      }\n      if (gObj.detailTemplate && detailRows_1.length) {\n        var args_1 = [];\n        var _loop_2 = function (i) {\n          args_1.push({\n            detailRow: gObj.getContentTable().querySelector('[data-uid=\"' + detailRows_1[parseInt(i.toString(), 10)].uid + '\"]'),\n            detailRowObject: detailRows_1[parseInt(i.toString(), 10)],\n            parentRowObject: infiniteCache_1.find(function (parent) {\n              return detailRows_1[parseInt(i.toString(), 10)].parentUid === parent.uid;\n            })\n          });\n        };\n        for (var i = 0; i < detailRows_1.length; i++) {\n          _loop_2(i);\n        }\n        this.parent.trigger(events.beforeDetailTemplateDetach, args_1, function () {\n          for (var i = 0; i < detailRows_1.length; i++) {\n            var detailRow = gObj.getContentTable().querySelector('[data-uid=\"' + detailRows_1[parseInt(i.toString(), 10)].uid + '\"]');\n            var detailRowIndex = infiniteCache_1.indexOf(detailRows_1[parseInt(i.toString(), 10)]);\n            infiniteCache_1.splice(detailRowIndex, 1);\n            infiniteCache_1[detailRowIndex - 1].isExpand = false;\n            detailRow.remove();\n          }\n        });\n      }\n      return;\n    }\n    var rows = this.parent.getRowsObject();\n    for (var i = 0; i < rows.length; i++) {\n      rows[parseInt(i.toString(), 10)].childGrid = null;\n    }\n    for (var i = 0; i < this.childRefs.length; i++) {\n      if (!this.childRefs[parseInt(i.toString(), 10)].isDestroyed) {\n        this.childRefs[parseInt(i.toString(), 10)].destroy();\n      }\n    }\n    this.childRefs = [];\n  };\n  DetailRow.prototype.detachDetailTemplate = function () {\n    var gObj = this.parent;\n    if (gObj.detailTemplate) {\n      var rowsObject_1 = gObj.getRowsObject();\n      var detailRows_2 = rowsObject_1.filter(function (data) {\n        return data.isDetailRow && data.parentUid;\n      });\n      if (detailRows_2.length) {\n        var args_2 = [];\n        detailRows_2.map(function (data) {\n          args_2.push({\n            detailRow: gObj.getContentTable().querySelector('[data-uid=\"' + data.uid + '\"]'),\n            detailRowObject: data,\n            parentRowObject: rowsObject_1.find(function (parent) {\n              return data.parentUid === parent.uid;\n            })\n          });\n        });\n        gObj.trigger(events.beforeDetailTemplateDetach, args_2, function () {\n          detailRows_2.map(function (data) {\n            gObj.getContentTable().querySelector('[data-uid=\"' + data.uid + '\"]').remove();\n          });\n        });\n      }\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   * @private\n   */\n  DetailRow.prototype.getModuleName = function () {\n    return 'detailRow';\n  };\n  return DetailRow;\n}();\nexport { DetailRow };","map":{"version":3,"names":["removeClass","addClass","extend","EventHandler","closest","classList","isNullOrUndefined","Grid","parents","getUid","appendChildren","isComplexField","getObject","events","AriaService","Row","Cell","CellType","literals","DetailRow","parent","locator","aria","childRefs","serviceLocator","focus","getService","addEventListener","prototype","isDestroyed","add","element","auxilaryclickHandler","on","click","clickHandler","destroy","keyPressed","keyPressHandler","expandChildGrid","expand","columnVisibilityChanged","refreshColSpan","destroyChildGrids","destroyChildGrid","detachDetailTemplate","e","target","contains","allowGrouping","preventDefault","toogleExpandcollapse","button","l10n","gObj","table","getContentTable","lastrowIdx","getCurrentViewRecords","length","childGrid","isExpanded","tr","parentElement","uid","getAttribute","rowObj","getRowObjectFromUID","needToRefresh","nextRow","querySelector","tbody","children","rowIndex","data_1","data","isDetailRow","style","display","notify","detailStateChange","detailElement","getDetailTemplate","rowId","detailRow","createElement","className","attrs","role","detailCell_1","colSpan","getVisibleColumns","allowRowDragAndDrop","setAttribute","toString","row","isDataRow","isExpand","cells","cellType","Indent","isDataCell","visible","parentUid","i","len","groupSettings","columns","appendChild","unshift","parentNode","insertBefore","nextSibling","isReactCompiler","isReactChild","detailTemplate","isReact","CSPTemplate","parentDetails","parentInstObj","isReactPrintGrid","printGridParent","detailTemplateID","id","renderTemplates","trigger","detailDataBound","undefined","getGridModel","printMode","height","enableInfiniteScrolling","root","push","query","clone","parentID","parentPrimaryKeys","getPrimaryKeyFieldNames","parentKeyField","queryString","parentKeyFieldValue","parentRowData","isVue","isLegacyTemplate","isPrinting","contentReady","promiseResolve","onEmpty","modules","getInjectedModules","injectedModues","setInjectedModules","gridElem","appendTo","rowElems","getRows","rowObjs","getRowsObject","splice","indexOf","infiniteScrollSettings","enableCache","infiniteCache","contentModule","keys","Object","cacheIndex","parseInt","rows","firstElementChild","getContent","clientHeight","scrollHeight","querySelectorAll","detailrowIdx","getElementsByClassName","childNodes","lastrowcell","setExpand","getConstant","ariaRowIndex","updateVisibleExpandCollapseRows","refreshExpandandCollapse","allowTextWrap","scrollModule","setPadding","removePadding","gridModel","expandedRows","index","hierarchyPrintMode","allowPaging","grid","_this","off","hierarchyPrint","gridElement","gridHeader","gridContent","remove","getTDfromIndex","getDataRows","isNaN","collapse","expandAll","expandCollapse","actionComplete","requestType","type","moduleObj","collapseAll","td","isMacLike","test","navigator","platform","metaKey","action","selected","allowSelection","getSelectedRowIndexes","dataRow","isEdit","getFocusedElement","detailrows","getTable","args","direction","currentPage","initialBlocks","infiniteCache_1","detailRows_1","filter","_loop_1","childGridElement","childGridIndex","this_1","findIndex","detailRowIndex","args_1","_loop_2","detailRowObject","parentRowObject","find","beforeDetailTemplateDetach","rowsObject_1","detailRows_2","args_2","map","getModuleName"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/detail-row.js"],"sourcesContent":["import { removeClass, addClass, extend, EventHandler } from '@syncfusion/ej2-base';\nimport { closest, classList, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren, isComplexField, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} locator - specifes the serviceLocator\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.childRefs = [];\n        this.parent = parent;\n        this.serviceLocator = locator;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    DetailRow.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'auxclick', this.auxilaryclickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.expandChildGrid, this.expand, this);\n        this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n        this.parent.on(events.destroy, this.destroyChildGrids, this);\n        this.parent.on(events.destroyChildGrid, this.destroyChildGrids, this);\n        this.parent.on(events.destroy, this.detachDetailTemplate, this);\n        this.parent.on(events.detachDetailTemplate, this.detachDetailTemplate, this);\n    };\n    DetailRow.prototype.clickHandler = function (e) {\n        if ((e.target.classList.contains('e-icon-grightarrow') || e.target.classList.contains('e-icon-gdownarrow'))\n            && !this.parent.allowGrouping) {\n            e.preventDefault();\n        }\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    DetailRow.prototype.auxilaryclickHandler = function (e) {\n        if ((e.target.classList.contains('e-icon-grightarrow') || e.target.classList.contains('e-icon-gdownarrow'))\n            && !this.parent.allowGrouping && (e.button === 1)) {\n            e.preventDefault();\n        }\n    };\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        this.l10n = this.serviceLocator.getService('localization');\n        var gObj = this.parent;\n        var table = this.parent.getContentTable();\n        var lastrowIdx = this.parent.getCurrentViewRecords().length - 1;\n        var parent = 'parentDetails';\n        var childGrid;\n        var isExpanded = target && target.classList.contains('e-detailrowcollapse');\n        if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand')))\n            || (target && target.classList.contains('e-masked-cell'))) {\n            return;\n        }\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var needToRefresh = false;\n        var nextRow = this.parent.getContentTable().querySelector(literals.tbody).children[tr.rowIndex + 1];\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var data_1 = rowObj.data;\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = '';\n                gObj.notify(events.detailStateChange, { data: data_1,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n                needToRefresh = true;\n            }\n            else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                var rowId = getUid('grid-row');\n                var detailRow = this.parent.createElement('tr', { className: 'e-detailrow', attrs: { 'data-uid': rowId, role: 'row' } });\n                var detailCell_1 = this.parent.createElement('th', { className: 'e-detailcell', attrs: { 'scope': 'col', role: 'columnheader' } });\n                var colSpan = this.parent.getVisibleColumns().length;\n                if (this.parent.allowRowDragAndDrop) {\n                    colSpan++;\n                }\n                detailCell_1.setAttribute('colspan', colSpan.toString());\n                var row = new Row({\n                    isDataRow: true,\n                    isExpand: true,\n                    uid: rowId,\n                    isDetailRow: true,\n                    cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                });\n                row.parentUid = rowObj.uid;\n                for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                    row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                }\n                detailRow.appendChild(this.parent.createElement('th', { className: 'e-detailindentcell', attrs: { 'scope': 'col' } }));\n                detailRow.appendChild(detailCell_1);\n                tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                var isReactCompiler = void 0;\n                var isReactChild = void 0;\n                if (gObj.detailTemplate) {\n                    isReactCompiler = this.parent.isReact && typeof (gObj.detailTemplate) !== 'string' &&\n                        !(gObj.detailTemplate.prototype && gObj.detailTemplate.prototype.CSPTemplate);\n                    isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n                        this.parent.parentDetails.parentInstObj.isReact;\n                    var isReactPrintGrid = this.parent.printGridParent && this.parent.printGridParent.isReact;\n                    var detailTemplateID = gObj.element.id + 'detailTemplate';\n                    if (isReactCompiler || isReactChild || isReactPrintGrid) {\n                        gObj.getDetailTemplate()(data_1, gObj, 'detailTemplate', detailTemplateID, null, null, detailCell_1);\n                        this.parent.renderTemplates(function () {\n                            gObj.trigger(events.detailDataBound, { detailElement: detailCell_1, data: data_1, childGrid: childGrid });\n                        });\n                    }\n                    else {\n                        appendChildren(detailCell_1, gObj.getDetailTemplate()(data_1, gObj, 'detailTemplate', detailTemplateID, undefined, undefined, undefined, this.parent['root']));\n                    }\n                }\n                else {\n                    childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n                    childGrid.height = gObj.enableInfiniteScrolling && childGrid.height === 'auto' ? 300 : childGrid.height;\n                    childGrid.root = gObj.root ? gObj.root : gObj;\n                    this.childRefs.push(childGrid);\n                    if (childGrid.query) {\n                        childGrid.query = childGrid.query.clone();\n                    }\n                    childGrid[\"\" + parent] = {\n                        parentID: gObj.element.id,\n                        parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                        parentKeyField: gObj.childGrid.queryString,\n                        parentKeyFieldValue: gObj.childGrid.queryString && isComplexField(gObj.childGrid.queryString) ?\n                            getObject(gObj.childGrid.queryString, data_1) : data_1[gObj.childGrid.queryString],\n                        parentRowData: data_1\n                    };\n                    if (gObj.isReact || gObj.isVue) {\n                        childGrid.parentDetails.parentInstObj = gObj;\n                    }\n                    else if (gObj.parentDetails && gObj.parentDetails.parentInstObj && (gObj.parentDetails.parentInstObj.isReact\n                        || gObj.parentDetails.parentInstObj.isVue)) {\n                        childGrid.parentDetails.parentInstObj = gObj.parentDetails.parentInstObj;\n                    }\n                    if (gObj.printGridParent && gObj.printGridParent.isReact) {\n                        childGrid.printGridParent = gObj.printGridParent;\n                    }\n                    childGrid.isLegacyTemplate = gObj.isReact\n                        || gObj.isLegacyTemplate;\n                    if (gObj.isPrinting) {\n                        childGrid.isPrinting = true;\n                        childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n                        childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n                    }\n                    rowObj.childGrid = childGrid;\n                    var modules = childGrid.getInjectedModules();\n                    var injectedModues = gObj.getInjectedModules();\n                    if (!modules || modules.length !== injectedModues.length) {\n                        childGrid.setInjectedModules(injectedModues);\n                    }\n                    var gridElem = this.parent.createElement('div', {\n                        id: 'child' + parents(tr, 'e-grid').length +\n                            '_grid' + tr.rowIndex + getUid(''), className: 'e-childgrid'\n                    });\n                    detailCell_1.appendChild(gridElem);\n                    childGrid.appendTo(gridElem);\n                }\n                detailRow.appendChild(detailCell_1);\n                if (tr.nextSibling) {\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                }\n                else {\n                    tr.parentNode.appendChild(detailRow);\n                }\n                var rowElems = gObj.getRows();\n                var rowObjs = gObj.getRowsObject();\n                rowElems.splice(rowElems.indexOf(tr) + 1, 0, detailRow);\n                if (gObj.enableInfiniteScrolling && gObj.infiniteScrollSettings.enableCache) {\n                    var infiniteCache = gObj.contentModule\n                        .infiniteCache;\n                    var keys = Object.keys(infiniteCache);\n                    for (var i = 0; i < keys.length; i++) {\n                        var cacheIndex = infiniteCache[parseInt(keys[parseInt(i.toString(), 10)], 10)].indexOf(rowObj);\n                        if (cacheIndex !== -1) {\n                            infiniteCache[parseInt(keys[parseInt(i.toString(), 10)], 10)].splice(cacheIndex + 1, 0, row);\n                            break;\n                        }\n                    }\n                }\n                else {\n                    rowObjs.splice(rowObjs.indexOf(rowObj) + 1, 0, row);\n                }\n                if (!isReactCompiler || !isReactChild) {\n                    gObj.trigger(events.detailDataBound, { detailElement: detailCell_1, data: data_1, childGrid: childGrid });\n                }\n                gObj.notify(events.detailDataBound, { rows: rowObjs });\n            }\n            classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n            classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n            rowObj.isExpand = true;\n            if (target.classList.contains('e-lastrowcell') && this.parent.getContent().clientHeight > table.scrollHeight) {\n                removeClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                var detailrowIdx = table.querySelector(literals.tbody).getElementsByClassName('e-detailrow').length - 1;\n                addClass(table.querySelector(literals.tbody).getElementsByClassName('e-detailrow')[parseInt(detailrowIdx.toString(), 10)].childNodes, ['e-lastrowcell']);\n                this.lastrowcell = true;\n            }\n            this.aria.setExpand(target, true);\n            target.firstElementChild.setAttribute('title', this.l10n.getConstant('Expanded'));\n        }\n        else {\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = 'none';\n                gObj.notify(events.detailStateChange, { data: rowObj.data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n            classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n            if (parseInt(tr.getAttribute(literals.ariaRowIndex), 10) - 1 === lastrowIdx && this.lastrowcell) {\n                addClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                this.lastrowcell = false;\n            }\n            rowObj.isExpand = false;\n            needToRefresh = true;\n            this.aria.setExpand(target, false);\n            target.firstElementChild.setAttribute('title', this.l10n.getConstant('Collapsed'));\n        }\n        if (!isNullOrUndefined(gObj.detailTemplate) || (gObj.childGrid && needToRefresh)) {\n            gObj.updateVisibleExpandCollapseRows();\n            gObj.notify(events.refreshExpandandCollapse, { rows: gObj.getRowsObject() });\n        }\n        if (this.parent.allowTextWrap && this.parent.height === 'auto') {\n            if (this.parent.getContentTable().scrollHeight > this.parent.getContent().clientHeight) {\n                this.parent.scrollModule.setPadding();\n            }\n            else {\n                this.parent.scrollModule.removePadding();\n            }\n        }\n    };\n    /**\n     * @hidden\n     * @param {IGrid} gObj - specifies the grid Object\n     * @param {Row<Column>}rowObj - specifies the row object\n     * @param {string} printMode - specifies the printmode\n     * @returns {Object} returns the object\n     */\n    DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n        var gridModel;\n        if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows &&\n            gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n            gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n            gridModel = extend({}, gObj.expandedRows[rowObj.index].gridModel, gObj.childGrid, true);\n        }\n        else {\n            if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n                gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n            }\n            gridModel = extend({}, {}, gObj.childGrid, true);\n        }\n        return gridModel;\n    };\n    DetailRow.prototype.promiseResolve = function (grid) {\n        var _this = this;\n        return function () {\n            grid.off(events.contentReady, _this.promiseResolve);\n            grid.off(events.onEmpty, _this.promiseResolve);\n            grid.notify(events.hierarchyPrint, {});\n        };\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.' + literals.gridHeader) &&\n            !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'auxclick', this.auxilaryclickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.expandChildGrid, this.expand);\n        this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n        this.parent.off(events.destroy, this.destroyChildGrids);\n        this.parent.off(events.destroyChildGrid, this.destroyChildGrids);\n        this.parent.off(events.destroy, this.detachDetailTemplate);\n        this.parent.off(events.detachDetailTemplate, this.detachDetailTemplate);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = !isNullOrUndefined(index) ? this.parent.getDataRows()[parseInt(index.toString(), 10)] : undefined;\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @returns {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     *\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @returns {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n        this.parent.trigger(events.actionComplete, { requestType: 'expandAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     *\n     * @returns {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n        this.parent.trigger(events.actionComplete, { requestType: 'collapseAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[parseInt(i.toString(), 10)].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            if (isExpand) {\n                this.expand(td);\n            }\n            else {\n                this.collapse(td);\n            }\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        var isMacLike = /(Mac)/i.test(navigator.platform);\n        if (isMacLike && e.metaKey) {\n            if (e.action === 'downArrow') {\n                e.action = 'ctrlDownArrow';\n            }\n            else if (e.action === 'upArrow') {\n                e.action = 'ctrlUpArrow';\n            }\n        }\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                // eslint-disable-next-line no-case-declarations\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    if (e.action === 'altDownArrow') {\n                        this.expand(td);\n                    }\n                    else {\n                        this.collapse(td);\n                    }\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                // eslint-disable-next-line no-case-declarations\n                var element = this.focus.getFocusedElement();\n                if (element && (element.classList.contains('e-icon-grightarrow') || element.classList.contains('e-icon-gdownarrow'))) {\n                    element = element.parentElement;\n                }\n                if (element && !element.classList.contains('e-detailrowcollapse') &&\n                    !element.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    DetailRow.prototype.refreshColSpan = function () {\n        var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n        var colSpan = this.parent.getVisibleColumns().length;\n        for (var i = 0; i < detailrows.length; i++) {\n            detailrows[parseInt(i.toString(), 10)].querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n        }\n    };\n    DetailRow.prototype.destroyChildGrids = function (args) {\n        var gObj = this.parent;\n        if (gObj.enableInfiniteScrolling && (gObj.childGrid || gObj.detailTemplate) && args.requestType === 'infiniteScroll'\n            && gObj.infiniteScrollSettings.enableCache) {\n            var cacheIndex = args.direction === 'down'\n                ? args.currentPage - gObj.infiniteScrollSettings.initialBlocks\n                : args.currentPage + gObj.infiniteScrollSettings.initialBlocks;\n            var infiniteCache_1 = gObj.contentModule\n                .infiniteCache[parseInt(cacheIndex.toString(), 10)];\n            var detailRows_1 = infiniteCache_1.filter(function (data) { return data.isDetailRow && data.parentUid; });\n            if (gObj.childGrid) {\n                var _loop_1 = function (i) {\n                    var detailRow = gObj.getContentTable()\n                        .querySelector('[data-uid=\"' + detailRows_1[parseInt(i.toString(), 10)].uid + '\"]');\n                    var childGridElement = detailRow.querySelector('.e-childgrid');\n                    var childGridIndex = this_1.childRefs.findIndex(function (grid) { return grid.element.id === childGridElement.id; });\n                    if (!this_1.childRefs[parseInt(childGridIndex.toString(), 10)].isDestroyed) {\n                        this_1.childRefs[parseInt(childGridIndex.toString(), 10)].destroy();\n                        this_1.childRefs.splice(childGridIndex, 1);\n                    }\n                    var detailRowIndex = infiniteCache_1.indexOf(detailRows_1[parseInt(i.toString(), 10)]);\n                    infiniteCache_1.splice(detailRowIndex, 1);\n                    infiniteCache_1[detailRowIndex - 1].childGrid = null;\n                    infiniteCache_1[detailRowIndex - 1].isExpand = false;\n                    detailRow.remove();\n                };\n                var this_1 = this;\n                for (var i = 0; i < detailRows_1.length; i++) {\n                    _loop_1(i);\n                }\n            }\n            if (gObj.detailTemplate && detailRows_1.length) {\n                var args_1 = [];\n                var _loop_2 = function (i) {\n                    args_1.push({\n                        detailRow: gObj.getContentTable().querySelector('[data-uid=\"' + detailRows_1[parseInt(i.toString(), 10)].uid + '\"]'),\n                        detailRowObject: detailRows_1[parseInt(i.toString(), 10)],\n                        parentRowObject: infiniteCache_1.find(function (parent) { return detailRows_1[parseInt(i.toString(), 10)]\n                            .parentUid === parent.uid; })\n                    });\n                };\n                for (var i = 0; i < detailRows_1.length; i++) {\n                    _loop_2(i);\n                }\n                this.parent.trigger(events.beforeDetailTemplateDetach, args_1, function () {\n                    for (var i = 0; i < detailRows_1.length; i++) {\n                        var detailRow = gObj.getContentTable()\n                            .querySelector('[data-uid=\"' + detailRows_1[parseInt(i.toString(), 10)].uid + '\"]');\n                        var detailRowIndex = infiniteCache_1.indexOf(detailRows_1[parseInt(i.toString(), 10)]);\n                        infiniteCache_1.splice(detailRowIndex, 1);\n                        infiniteCache_1[detailRowIndex - 1].isExpand = false;\n                        detailRow.remove();\n                    }\n                });\n            }\n            return;\n        }\n        var rows = this.parent.getRowsObject();\n        for (var i = 0; i < rows.length; i++) {\n            rows[parseInt(i.toString(), 10)].childGrid = null;\n        }\n        for (var i = 0; i < this.childRefs.length; i++) {\n            if (!this.childRefs[parseInt(i.toString(), 10)].isDestroyed) {\n                this.childRefs[parseInt(i.toString(), 10)].destroy();\n            }\n        }\n        this.childRefs = [];\n    };\n    DetailRow.prototype.detachDetailTemplate = function () {\n        var gObj = this.parent;\n        if (gObj.detailTemplate) {\n            var rowsObject_1 = gObj.getRowsObject();\n            var detailRows_2 = rowsObject_1.filter(function (data) { return data.isDetailRow && data.parentUid; });\n            if (detailRows_2.length) {\n                var args_2 = [];\n                detailRows_2.map(function (data) {\n                    args_2.push({\n                        detailRow: gObj.getContentTable().querySelector('[data-uid=\"' + data.uid + '\"]'),\n                        detailRowObject: data,\n                        parentRowObject: rowsObject_1.find(function (parent) { return data.parentUid === parent.uid; })\n                    });\n                });\n                gObj.trigger(events.beforeDetailTemplateDetach, args_2, function () {\n                    detailRows_2.map(function (data) {\n                        gObj.getContentTable().querySelector('[data-uid=\"' + data.uid + '\"]').remove();\n                    });\n                });\n            }\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}