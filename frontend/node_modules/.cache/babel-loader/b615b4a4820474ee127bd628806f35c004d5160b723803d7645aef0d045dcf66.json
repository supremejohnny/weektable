{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n///<reference path='../textarea/textarea-model.d.ts'/>\nimport { EventHandler, Property, createElement } from '@syncfusion/ej2-base';\nimport { TextArea } from '../textarea/textarea';\nimport { CaretPositionHelper } from './caret-helper';\nexport var ChatMessageRole;\n(function (ChatMessageRole) {\n  ChatMessageRole[\"System\"] = \"system\";\n  ChatMessageRole[\"User\"] = \"user\";\n  ChatMessageRole[\"Assistant\"] = \"assistant\";\n})(ChatMessageRole || (ChatMessageRole = {}));\nvar SmartTextArea = /** @class */function (_super) {\n  __extends(SmartTextArea, _super);\n  /**\n   * Constructor for creating the widget\n   *\n   * @private\n   * @param {SmartTextArea} options - Specifies Smart text area model\n   * @param {string | HTMLTextAreaElement} element - Specifies target element\n   */\n  function SmartTextArea(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  SmartTextArea.prototype.render = function () {\n    _super.prototype.render.call(this);\n    if (!(this.element instanceof HTMLTextAreaElement)) {\n      return;\n    }\n    this.textArea = this.element;\n    var smartTextArea = createElement('smart-textarea');\n    smartTextArea.classList.add('e-smart-textarea');\n    this.textArea.after(smartTextArea);\n    if (this.showSuggestionOnPopup !== 'None') {\n      var suggestionState = this.showSuggestionOnPopup === 'Enable' ? 'false' : 'true';\n      this.textArea.setAttribute('data-inline-suggestions', suggestionState);\n    }\n    this.suggestionDisplay = this.shouldShowInlineSuggestions(this.textArea) ? new InlineSuggestion(smartTextArea, this.textArea) : new ContextSuggestion(smartTextArea, this.textArea);\n  };\n  SmartTextArea.prototype.wireEvents = function () {\n    var _this = this;\n    _super.prototype.wireEvents.call(this);\n    EventHandler.add(this.element, 'keyup', this.handleKeyUp, this);\n    EventHandler.add(this.element, 'keydown', this.handleKeyDown, this);\n    EventHandler.add(this.element, 'mousedown', this.removeExistingOrPendingSuggestion, this);\n    EventHandler.add(this.element, 'focusout', this.removeExistingOrPendingSuggestion, this);\n    this.element.addEventListener('scroll', function () {\n      return _this.suggestionDisplay.reject();\n    }, {\n      passive: true\n    });\n  };\n  SmartTextArea.prototype.unWireEvents = function () {\n    var _this = this;\n    _super.prototype.unWireEvents.call(this);\n    EventHandler.remove(this.element, 'keyup', this.handleKeyUp);\n    EventHandler.remove(this.element, 'keydown', this.handleKeyDown);\n    EventHandler.remove(this.element, 'mousedown', this.removeExistingOrPendingSuggestion);\n    EventHandler.remove(this.element, 'focusout', this.removeExistingOrPendingSuggestion);\n    this.element.removeEventListener('scroll', function () {\n      return _this.suggestionDisplay.reject();\n    });\n  };\n  SmartTextArea.prototype.keydownHandler = function () {\n    // Overridden to prevent default behavior\n  };\n  SmartTextArea.prototype.shouldShowInlineSuggestions = function (textArea) {\n    var inlineSuggestions = textArea.getAttribute('data-inline-suggestions');\n    if (inlineSuggestions) {\n      return inlineSuggestions.toLowerCase() === 'true';\n    }\n    return !('ontouchstart' in window);\n  };\n  SmartTextArea.prototype.handleKeyDown = function (event) {\n    switch (event.key) {\n      case 'Tab':\n        if (this.suggestionDisplay.isShowing()) {\n          this.suggestionDisplay.accept();\n          event.preventDefault();\n        }\n        break;\n      case 'Alt':\n      case 'Control':\n      case 'Shift':\n      case 'Command':\n        break;\n      default:\n        if (this.suggestionDisplay.isShowing() && this.suggestionDisplay.currentSuggestion.startsWith(event.key)) {\n          CaretPositionHelper.insertCharacter(this.textArea, event.key);\n          event.preventDefault();\n          this.suggestionDisplay.show(this.suggestionDisplay.currentSuggestion.substring(event.key.length));\n          CaretPositionHelper.adjustScrollToCaretPosition(this.textArea);\n        } else {\n          this.removeExistingOrPendingSuggestion();\n        }\n        break;\n    }\n  };\n  SmartTextArea.prototype.handleKeyUp = function () {\n    var _this = this;\n    if (!this.suggestionDisplay.isShowing()) {\n      clearTimeout(this.typingDebounceTimeout);\n      this.typingDebounceTimeout = setTimeout(function () {\n        return _this.handleTypingPaused();\n      }, 350);\n    }\n  };\n  SmartTextArea.prototype.handleTypingPaused = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (document.activeElement !== this.textArea) {\n              return [2 /*return*/];\n            }\n            if (!(this.textArea.selectionStart === this.textArea.selectionEnd && (this.textArea.selectionStart === this.textArea.value.length || this.textArea.value[this.textArea.selectionStart] === '\\n'))) return [3 /*break*/, 2];\n            return [4 /*yield*/, this.requestSuggestionAsync()];\n          case 1:\n            _a.sent();\n            _a.label = 2;\n          case 2:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  SmartTextArea.prototype.removeExistingOrPendingSuggestion = function () {\n    clearTimeout(this.typingDebounceTimeout);\n    if (this.pendingSuggestionAbort) {\n      this.pendingSuggestionAbort.abort();\n      this.pendingSuggestionAbort = null;\n    }\n    this.suggestionDisplay.reject();\n  };\n  SmartTextArea.prototype.createSuggestionPrompt = function (textBefore, textAfter) {\n    var stringBuilder = 'Predict what text the user in the given ROLE would insert at the cursor position indicated by ^^^.\\nOnly give predictions for which you have' + ' an EXTREMELY high confidence that the user would insert that EXACT text.\\nDo not make up new information. If you are not sure, ' + 'just reply with NO_PREDICTION.\\n\\nRULES:\\n1. Reply with OK:, then in square brackets the predicted text, then END_INSERTION, and no other output.\\n2. ' + 'When a specific value or quantity cannot be inferred and would need to be provided, use the word NEED_INFO.\\n3. ' + 'If there is not enough information to predict any words that the user would type next, just reply with the word NO_PREDICTION.' + '\\n4. NEVER invent new information. If you can not be sure what the user is about to type, ALWAYS stop the prediction with END_INSERTION.';\n    var userPhrases = this.UserPhrases;\n    if (userPhrases && userPhrases.length > 0) {\n      stringBuilder += '\\nAlways try to use variations on the following phrases as part of the predictions:\\n';\n      for (var _i = 0, userPhrases_1 = userPhrases; _i < userPhrases_1.length; _i++) {\n        var phrase = userPhrases_1[_i];\n        stringBuilder += \"- \" + phrase + \"\\n\";\n      }\n    }\n    var chatMessageList = [{\n      role: ChatMessageRole.System,\n      content: stringBuilder\n    }, {\n      role: ChatMessageRole.User,\n      content: 'ROLE: Family member sending a text\\nUSER_TEXT: Hey, it is a nice day - the weather is ^^^'\n    }, {\n      role: ChatMessageRole.Assistant,\n      content: 'OK:[great!]END_INSERTION'\n    }, {\n      role: ChatMessageRole.User,\n      content: 'ROLE: Customer service assistant\\nUSER_TEXT: You can find more information on^^^\\n\\nAlternatively, phone us.'\n    }, {\n      role: ChatMessageRole.Assistant,\n      content: 'OK:[ our website at NEED_INFO]END_INSERTION'\n    }, {\n      role: ChatMessageRole.User,\n      content: 'ROLE: Casual\\nUSER_TEXT: Oh I see!\\n\\nWell sure thing, we can'\n    }, {\n      role: ChatMessageRole.Assistant,\n      content: 'OK:[ help you out with that!]END_INSERTION'\n    }, {\n      role: ChatMessageRole.User,\n      content: 'ROLE: Storyteller\\nUSER_TEXT: Sir Digby Chicken Caesar, also know^^^'\n    }, {\n      role: ChatMessageRole.Assistant,\n      content: 'OK:[n as NEED_INFO]END_INSERTION'\n    }, {\n      role: ChatMessageRole.User,\n      content: 'ROLE: Customer support agent\\nUSER_TEXT: Goodbye for now.^^^'\n    }, {\n      role: ChatMessageRole.Assistant,\n      content: 'NO_PREDICTION END_INSERTION'\n    }, {\n      role: ChatMessageRole.User,\n      content: 'ROLE: Pirate\\nUSER_TEXT: Have you found^^^'\n    }, {\n      role: ChatMessageRole.Assistant,\n      content: 'OK:[ the treasure, me hearties?]END_INSERTION'\n    }, {\n      role: ChatMessageRole.User,\n      content: \"ROLE: \" + this.userRole + \"\\nUSER_TEXT: \" + textBefore + \"^^^\" + textAfter\n    }];\n    return {\n      messages: chatMessageList,\n      temperature: 0.0,\n      maxTokens: 400,\n      stopSequences: ['END_INSERTION', 'NEED_INFO'],\n      frequencyPenalty: 0.0,\n      presencePenalty: 0.0\n    };\n  };\n  SmartTextArea.prototype.requestSuggestionAsync = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var requestDetails, suggestionData, chatConfig, insertSuggestion, response;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (this.pendingSuggestionAbort) {\n              this.pendingSuggestionAbort.abort();\n              return [2 /*return*/];\n            }\n            this.pendingSuggestionAbort = new AbortController();\n            requestDetails = {\n              textAreaValue: this.textArea.value,\n              cursorPosition: this.textArea.selectionStart\n            };\n            suggestionData = {\n              textBefore: requestDetails.textAreaValue.substring(0, requestDetails.cursorPosition),\n              textAfter: requestDetails.textAreaValue.substring(requestDetails.cursorPosition)\n            };\n            chatConfig = this.createSuggestionPrompt(suggestionData.textBefore, suggestionData.textAfter);\n            if (!(typeof this.aiSuggestionHandler === 'function')) return [3 /*break*/, 2];\n            return [4 /*yield*/, this.aiSuggestionHandler(chatConfig)];\n          case 1:\n            response = _a.sent();\n            insertSuggestion = this.validateSuggestion(response, suggestionData.textBefore);\n            _a.label = 2;\n          case 2:\n            if (insertSuggestion && requestDetails.textAreaValue === this.textArea.value && requestDetails.cursorPosition === this.textArea.selectionStart) {\n              if (!insertSuggestion.endsWith(' ')) {\n                insertSuggestion += ' ';\n              }\n              this.suggestionDisplay.show(insertSuggestion);\n            }\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  SmartTextArea.prototype.validateSuggestion = function (response, textBefore) {\n    var suggestion;\n    if (typeof response !== 'string' || response.length <= 5 || response.indexOf('OK:[') !== 0) {\n      return '';\n    }\n    var endIndex = this.indexOfAny(response, ['.', '?', '!']);\n    if (endIndex > 0 && response.length > endIndex + 1 && response[endIndex + 1] === ' ') {\n      response = response.substring(0, endIndex + 1);\n    }\n    suggestion = response.substring(4).replace(/[\\]\\s]+$/, '');\n    if (textBefore.length > 0 && textBefore[textBefore.length - 1] === ' ') {\n      suggestion = suggestion.replace(/^\\s+/, '');\n    }\n    return suggestion;\n  };\n  SmartTextArea.prototype.indexOfAny = function (str, chars) {\n    for (var i = 0; i < str.length; i++) {\n      if (chars.indexOf(str[\"\" + i]) !== -1) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  SmartTextArea.prototype.getModuleName = function () {\n    return 'smarttextarea';\n  };\n  SmartTextArea.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.textArea = null;\n    this.suggestionDisplay = null;\n    this.typingDebounceTimeout = null;\n  };\n  __decorate([Property('')], SmartTextArea.prototype, \"userRole\", void 0);\n  __decorate([Property([])], SmartTextArea.prototype, \"UserPhrases\", void 0);\n  __decorate([Property()], SmartTextArea.prototype, \"aiSuggestionHandler\", void 0);\n  __decorate([Property('None')], SmartTextArea.prototype, \"showSuggestionOnPopup\", void 0);\n  return SmartTextArea;\n}(TextArea);\nexport { SmartTextArea };\nvar InlineSuggestion = /** @class */function () {\n  function InlineSuggestion(smartTextArea, textArea) {\n    this.owner = smartTextArea;\n    this.textArea = textArea;\n    this.latestSuggestionText = '';\n    this.suggestionStartPos = null;\n    this.suggestionEndPos = null;\n    this.virtualCaret = null;\n    this.originalValueProperty = this.getOriginalValueProperty(textArea, 'value');\n  }\n  Object.defineProperty(InlineSuggestion.prototype, \"value\", {\n    get: function () {\n      var value = this.originalValueProperty.get.call(this.textArea);\n      return this.isShowing() ? value.substring(0, this.suggestionStartPos) + value.substring(this.suggestionEndPos) : value;\n    },\n    set: function (newValue) {\n      this.originalValueProperty.set.call(this.textArea, newValue);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  InlineSuggestion.prototype.getOriginalValueProperty = function (obj, property) {\n    while (obj) {\n      var descriptor = Object.getOwnPropertyDescriptor(obj, property);\n      if (descriptor) {\n        return descriptor;\n      }\n      obj = Object.getPrototypeOf(obj);\n    }\n    throw new Error(\"Property \" + property + \" not found on object or its prototype chain\");\n  };\n  Object.defineProperty(InlineSuggestion.prototype, \"valueIncludingSuggestion\", {\n    get: function () {\n      return this.originalValueProperty.get.call(this.textArea);\n    },\n    set: function (newValue) {\n      this.originalValueProperty.set.call(this.textArea, newValue);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  InlineSuggestion.prototype.isShowing = function () {\n    return this.suggestionStartPos !== null;\n  };\n  InlineSuggestion.prototype.show = function (suggestionText) {\n    this.latestSuggestionText = suggestionText;\n    this.suggestionStartPos = this.textArea.selectionStart;\n    this.suggestionEndPos = this.suggestionStartPos + suggestionText.length;\n    this.textArea.setAttribute('data-suggestion-visible', '');\n    this.valueIncludingSuggestion = this.valueIncludingSuggestion.substring(0, this.suggestionStartPos) + suggestionText + this.valueIncludingSuggestion.substring(this.suggestionStartPos);\n    this.textArea.setSelectionRange(this.suggestionStartPos, this.suggestionEndPos);\n    if (!this.virtualCaret) {\n      this.virtualCaret = new VirtualCaret(this.owner, this.textArea);\n    }\n    this.virtualCaret.show();\n  };\n  Object.defineProperty(InlineSuggestion.prototype, \"currentSuggestion\", {\n    get: function () {\n      return this.latestSuggestionText;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  InlineSuggestion.prototype.accept = function () {\n    this.textArea.setSelectionRange(this.suggestionEndPos, this.suggestionEndPos);\n    this.suggestionStartPos = null;\n    this.suggestionEndPos = null;\n    if (this.virtualCaret) {\n      this.virtualCaret.hide();\n    }\n    this.textArea.removeAttribute('data-suggestion-visible');\n    CaretPositionHelper.adjustScrollToCaretPosition(this.textArea);\n  };\n  InlineSuggestion.prototype.reject = function () {\n    if (!this.isShowing()) {\n      return;\n    }\n    var selectionStart = this.textArea.selectionStart;\n    var selectionEnd = this.textArea.selectionEnd;\n    this.valueIncludingSuggestion = this.valueIncludingSuggestion.substring(0, this.suggestionStartPos) + this.valueIncludingSuggestion.substring(this.suggestionEndPos);\n    if (this.suggestionStartPos === selectionStart && this.suggestionEndPos === selectionEnd) {\n      this.textArea.setSelectionRange(selectionStart, selectionStart);\n    }\n    this.suggestionStartPos = null;\n    this.suggestionEndPos = null;\n    this.textArea.removeAttribute('data-suggestion-visible');\n    if (this.virtualCaret) {\n      this.virtualCaret.hide();\n    }\n  };\n  return InlineSuggestion;\n}();\nvar ContextSuggestion = /** @class */function () {\n  function ContextSuggestion(container, textArea) {\n    var _this = this;\n    this.latestSuggestionText = '';\n    this.showing = false;\n    this.textArea = textArea;\n    this.suggestionElement = document.createElement('div');\n    this.suggestionElement.classList.add('smart-textarea-suggestion-overlay');\n    this.suggestionElement.addEventListener('mousedown', function (event) {\n      return _this.handleSuggestionClicked(event);\n    });\n    this.suggestionElement.addEventListener('touchend', function (event) {\n      return _this.handleSuggestionClicked(event);\n    });\n    this.suggestionPrefixElement = document.createElement('span');\n    this.suggestionTextElement = document.createElement('span');\n    this.suggestionElement.appendChild(this.suggestionPrefixElement);\n    this.suggestionElement.appendChild(this.suggestionTextElement);\n    this.suggestionPrefixElement.style.opacity = '0.3';\n    var computedStyle = window.getComputedStyle(this.textArea);\n    this.suggestionElement.style.font = computedStyle.font;\n    this.suggestionElement.style.marginTop = 1.4 * parseFloat(computedStyle.fontSize) + \"px\";\n    container.appendChild(this.suggestionElement);\n  }\n  Object.defineProperty(ContextSuggestion.prototype, \"currentSuggestion\", {\n    get: function () {\n      return this.latestSuggestionText;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ContextSuggestion.prototype.show = function (suggestionText) {\n    this.latestSuggestionText = suggestionText;\n    this.suggestionPrefixElement.textContent = suggestionText[0] !== ' ' ? this.getPrefixText(this.textArea, 20) : '';\n    this.suggestionTextElement.textContent = suggestionText;\n    var position = CaretPositionHelper.getTextAreaPosition(this.textArea);\n    var style = this.suggestionElement.style;\n    style.minWidth = null;\n    this.suggestionElement.classList.add('smart-textarea-suggestion-overlay-visible');\n    style.zIndex = this.textArea.style.zIndex + 1;\n    style.top = position.top + \"px\";\n    var leftPosition = position.left - this.suggestionPrefixElement.offsetWidth;\n    if (!style.left || Math.abs(parseFloat(style.left) - leftPosition) > 10) {\n      style.left = leftPosition + \"px\";\n    }\n    this.showing = true;\n    var computedStyle = window.getComputedStyle(this.suggestionElement);\n    var lineHeight = parseFloat(computedStyle.lineHeight);\n    var paddingTop = parseFloat(computedStyle.paddingTop);\n    var paddingBottom = parseFloat(computedStyle.paddingBottom);\n    var lines = Math.round((this.suggestionElement.offsetHeight - paddingTop - paddingBottom) / lineHeight);\n    if (lines > 2) {\n      var elementWidth = this.suggestionElement.offsetWidth;\n      style.minWidth = \"calc(min(70vw, \" + lines * elementWidth / 2 + \"px))\";\n    }\n    var rect = this.suggestionElement.getBoundingClientRect();\n    if (rect.right > document.body.clientWidth - 20) {\n      style.left = \"calc(\" + (parseFloat(style.left) - (rect.right - document.body.clientWidth)) + \"px - 2rem)\";\n    }\n  };\n  ContextSuggestion.prototype.accept = function () {\n    if (this.showing) {\n      CaretPositionHelper.insertCharacter(this.textArea, this.currentSuggestion);\n      CaretPositionHelper.adjustScrollToCaretPosition(this.textArea);\n      this.hide();\n    }\n  };\n  ContextSuggestion.prototype.reject = function () {\n    this.hide();\n  };\n  ContextSuggestion.prototype.hide = function () {\n    if (this.showing) {\n      this.showing = false;\n      this.suggestionElement.classList.remove('smart-textarea-suggestion-overlay-visible');\n    }\n  };\n  ContextSuggestion.prototype.isShowing = function () {\n    return this.showing;\n  };\n  ContextSuggestion.prototype.handleSuggestionClicked = function (event) {\n    event.preventDefault();\n    event.stopImmediatePropagation();\n    this.accept();\n  };\n  ContextSuggestion.prototype.getPrefixText = function (textArea, maxLength) {\n    var value = textArea.value;\n    var selectionStart = textArea.selectionStart;\n    for (var i = selectionStart - 1; i > selectionStart - maxLength; i--) {\n      if (i < 0 || /\\s/.test(value[\"\" + i])) {\n        return value.substring(i + 1, selectionStart);\n      }\n    }\n    return '';\n  };\n  return ContextSuggestion;\n}();\nvar VirtualCaret = /** @class */function () {\n  function VirtualCaret(smartTextArea, textArea) {\n    this.textArea = textArea;\n    this.caretDiv = document.createElement('div');\n    this.caretDiv.classList.add('smart-textarea-caret');\n    smartTextArea.appendChild(this.caretDiv);\n  }\n  VirtualCaret.prototype.show = function () {\n    var textAreaPosition = CaretPositionHelper.getTextAreaPosition(this.textArea);\n    var caretStyle = this.caretDiv.style;\n    caretStyle.display = 'block';\n    caretStyle.top = textAreaPosition.top + 'px';\n    caretStyle.left = textAreaPosition.left + 'px';\n    caretStyle.height = textAreaPosition.height + 'px';\n    caretStyle.zIndex = this.textArea.style.zIndex;\n    caretStyle.backgroundColor = textAreaPosition.elemStyle.caretColor;\n  };\n  VirtualCaret.prototype.hide = function () {\n    this.caretDiv.style.display = 'none';\n  };\n  return VirtualCaret;\n}();","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","push","EventHandler","Property","createElement","TextArea","CaretPositionHelper","ChatMessageRole","SmartTextArea","_super","options","element","render","HTMLTextAreaElement","textArea","smartTextArea","classList","add","after","showSuggestionOnPopup","suggestionState","setAttribute","suggestionDisplay","shouldShowInlineSuggestions","InlineSuggestion","ContextSuggestion","wireEvents","_this","handleKeyUp","handleKeyDown","removeExistingOrPendingSuggestion","addEventListener","passive","unWireEvents","remove","removeEventListener","keydownHandler","inlineSuggestions","getAttribute","toLowerCase","window","event","isShowing","accept","preventDefault","currentSuggestion","startsWith","insertCharacter","show","substring","adjustScrollToCaretPosition","clearTimeout","typingDebounceTimeout","setTimeout","handleTypingPaused","_a","document","activeElement","selectionStart","selectionEnd","requestSuggestionAsync","pendingSuggestionAbort","abort","createSuggestionPrompt","textBefore","textAfter","stringBuilder","userPhrases","UserPhrases","_i","userPhrases_1","phrase","chatMessageList","role","System","content","User","Assistant","userRole","messages","temperature","maxTokens","stopSequences","frequencyPenalty","presencePenalty","requestDetails","suggestionData","chatConfig","insertSuggestion","response","AbortController","textAreaValue","cursorPosition","aiSuggestionHandler","validateSuggestion","endsWith","suggestion","indexOf","endIndex","indexOfAny","replace","str","chars","getModuleName","destroy","owner","latestSuggestionText","suggestionStartPos","suggestionEndPos","virtualCaret","originalValueProperty","getOriginalValueProperty","get","set","newValue","enumerable","configurable","obj","property","descriptor","getPrototypeOf","Error","suggestionText","valueIncludingSuggestion","setSelectionRange","VirtualCaret","hide","removeAttribute","container","showing","suggestionElement","handleSuggestionClicked","suggestionPrefixElement","suggestionTextElement","appendChild","style","opacity","computedStyle","getComputedStyle","font","marginTop","parseFloat","fontSize","textContent","getPrefixText","position","getTextAreaPosition","minWidth","zIndex","top","leftPosition","left","offsetWidth","Math","abs","lineHeight","paddingTop","paddingBottom","lines","round","offsetHeight","elementWidth","rect","getBoundingClientRect","right","clientWidth","stopImmediatePropagation","maxLength","test","caretDiv","textAreaPosition","caretStyle","display","height","backgroundColor","elemStyle","caretColor"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-inputs/src/smart-textarea/smart-textarea.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n///<reference path='../textarea/textarea-model.d.ts'/>\nimport { EventHandler, Property, createElement } from '@syncfusion/ej2-base';\nimport { TextArea } from '../textarea/textarea';\nimport { CaretPositionHelper } from './caret-helper';\nexport var ChatMessageRole;\n(function (ChatMessageRole) {\n    ChatMessageRole[\"System\"] = \"system\";\n    ChatMessageRole[\"User\"] = \"user\";\n    ChatMessageRole[\"Assistant\"] = \"assistant\";\n})(ChatMessageRole || (ChatMessageRole = {}));\nvar SmartTextArea = /** @class */ (function (_super) {\n    __extends(SmartTextArea, _super);\n    /**\n     * Constructor for creating the widget\n     *\n     * @private\n     * @param {SmartTextArea} options - Specifies Smart text area model\n     * @param {string | HTMLTextAreaElement} element - Specifies target element\n     */\n    function SmartTextArea(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    SmartTextArea.prototype.render = function () {\n        _super.prototype.render.call(this);\n        if (!(this.element instanceof HTMLTextAreaElement)) {\n            return;\n        }\n        this.textArea = this.element;\n        var smartTextArea = createElement('smart-textarea');\n        smartTextArea.classList.add('e-smart-textarea');\n        this.textArea.after(smartTextArea);\n        if (this.showSuggestionOnPopup !== 'None') {\n            var suggestionState = this.showSuggestionOnPopup === 'Enable' ? 'false' : 'true';\n            this.textArea.setAttribute('data-inline-suggestions', suggestionState);\n        }\n        this.suggestionDisplay = this.shouldShowInlineSuggestions(this.textArea) ?\n            new InlineSuggestion(smartTextArea, this.textArea) : new ContextSuggestion(smartTextArea, this.textArea);\n    };\n    SmartTextArea.prototype.wireEvents = function () {\n        var _this = this;\n        _super.prototype.wireEvents.call(this);\n        EventHandler.add(this.element, 'keyup', this.handleKeyUp, this);\n        EventHandler.add(this.element, 'keydown', this.handleKeyDown, this);\n        EventHandler.add(this.element, 'mousedown', this.removeExistingOrPendingSuggestion, this);\n        EventHandler.add(this.element, 'focusout', this.removeExistingOrPendingSuggestion, this);\n        this.element.addEventListener('scroll', (function () { return _this.suggestionDisplay.reject(); }), {\n            passive: true\n        });\n    };\n    SmartTextArea.prototype.unWireEvents = function () {\n        var _this = this;\n        _super.prototype.unWireEvents.call(this);\n        EventHandler.remove(this.element, 'keyup', this.handleKeyUp);\n        EventHandler.remove(this.element, 'keydown', this.handleKeyDown);\n        EventHandler.remove(this.element, 'mousedown', this.removeExistingOrPendingSuggestion);\n        EventHandler.remove(this.element, 'focusout', this.removeExistingOrPendingSuggestion);\n        this.element.removeEventListener('scroll', (function () { return _this.suggestionDisplay.reject(); }));\n    };\n    SmartTextArea.prototype.keydownHandler = function () {\n        // Overridden to prevent default behavior\n    };\n    SmartTextArea.prototype.shouldShowInlineSuggestions = function (textArea) {\n        var inlineSuggestions = textArea.getAttribute('data-inline-suggestions');\n        if (inlineSuggestions) {\n            return inlineSuggestions.toLowerCase() === 'true';\n        }\n        return !('ontouchstart' in window);\n    };\n    SmartTextArea.prototype.handleKeyDown = function (event) {\n        switch (event.key) {\n            case 'Tab':\n                if (this.suggestionDisplay.isShowing()) {\n                    this.suggestionDisplay.accept();\n                    event.preventDefault();\n                }\n                break;\n            case 'Alt':\n            case 'Control':\n            case 'Shift':\n            case 'Command':\n                break;\n            default:\n                if (this.suggestionDisplay.isShowing() && this.suggestionDisplay.currentSuggestion.startsWith(event.key)) {\n                    CaretPositionHelper.insertCharacter(this.textArea, event.key);\n                    event.preventDefault();\n                    this.suggestionDisplay.show(this.suggestionDisplay.currentSuggestion.substring(event.key.length));\n                    CaretPositionHelper.adjustScrollToCaretPosition(this.textArea);\n                }\n                else {\n                    this.removeExistingOrPendingSuggestion();\n                }\n                break;\n        }\n    };\n    SmartTextArea.prototype.handleKeyUp = function () {\n        var _this = this;\n        if (!this.suggestionDisplay.isShowing()) {\n            clearTimeout(this.typingDebounceTimeout);\n            this.typingDebounceTimeout = setTimeout(function () { return _this.handleTypingPaused(); }, 350);\n        }\n    };\n    SmartTextArea.prototype.handleTypingPaused = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (document.activeElement !== this.textArea) {\n                            return [2 /*return*/];\n                        }\n                        if (!(this.textArea.selectionStart === this.textArea.selectionEnd &&\n                            (this.textArea.selectionStart === this.textArea.value.length ||\n                                this.textArea.value[this.textArea.selectionStart] === '\\n'))) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.requestSuggestionAsync()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SmartTextArea.prototype.removeExistingOrPendingSuggestion = function () {\n        clearTimeout(this.typingDebounceTimeout);\n        if (this.pendingSuggestionAbort) {\n            this.pendingSuggestionAbort.abort();\n            this.pendingSuggestionAbort = null;\n        }\n        this.suggestionDisplay.reject();\n    };\n    SmartTextArea.prototype.createSuggestionPrompt = function (textBefore, textAfter) {\n        var stringBuilder = 'Predict what text the user in the given ROLE would insert at the cursor position indicated by ^^^.\\nOnly give predictions for which you have' +\n            ' an EXTREMELY high confidence that the user would insert that EXACT text.\\nDo not make up new information. If you are not sure, ' +\n            'just reply with NO_PREDICTION.\\n\\nRULES:\\n1. Reply with OK:, then in square brackets the predicted text, then END_INSERTION, and no other output.\\n2. ' +\n            'When a specific value or quantity cannot be inferred and would need to be provided, use the word NEED_INFO.\\n3. ' +\n            'If there is not enough information to predict any words that the user would type next, just reply with the word NO_PREDICTION.' +\n            '\\n4. NEVER invent new information. If you can not be sure what the user is about to type, ALWAYS stop the prediction with END_INSERTION.';\n        var userPhrases = this.UserPhrases;\n        if (userPhrases && userPhrases.length > 0) {\n            stringBuilder += '\\nAlways try to use variations on the following phrases as part of the predictions:\\n';\n            for (var _i = 0, userPhrases_1 = userPhrases; _i < userPhrases_1.length; _i++) {\n                var phrase = userPhrases_1[_i];\n                stringBuilder += \"- \" + phrase + \"\\n\";\n            }\n        }\n        var chatMessageList = [\n            { role: ChatMessageRole.System, content: stringBuilder },\n            { role: ChatMessageRole.User, content: 'ROLE: Family member sending a text\\nUSER_TEXT: Hey, it is a nice day - the weather is ^^^' },\n            { role: ChatMessageRole.Assistant, content: 'OK:[great!]END_INSERTION' },\n            { role: ChatMessageRole.User, content: 'ROLE: Customer service assistant\\nUSER_TEXT: You can find more information on^^^\\n\\nAlternatively, phone us.' },\n            { role: ChatMessageRole.Assistant, content: 'OK:[ our website at NEED_INFO]END_INSERTION' },\n            { role: ChatMessageRole.User, content: 'ROLE: Casual\\nUSER_TEXT: Oh I see!\\n\\nWell sure thing, we can' },\n            { role: ChatMessageRole.Assistant, content: 'OK:[ help you out with that!]END_INSERTION' },\n            { role: ChatMessageRole.User, content: 'ROLE: Storyteller\\nUSER_TEXT: Sir Digby Chicken Caesar, also know^^^' },\n            { role: ChatMessageRole.Assistant, content: 'OK:[n as NEED_INFO]END_INSERTION' },\n            { role: ChatMessageRole.User, content: 'ROLE: Customer support agent\\nUSER_TEXT: Goodbye for now.^^^' },\n            { role: ChatMessageRole.Assistant, content: 'NO_PREDICTION END_INSERTION' },\n            { role: ChatMessageRole.User, content: 'ROLE: Pirate\\nUSER_TEXT: Have you found^^^' },\n            { role: ChatMessageRole.Assistant, content: 'OK:[ the treasure, me hearties?]END_INSERTION' },\n            { role: ChatMessageRole.User, content: \"ROLE: \" + this.userRole + \"\\nUSER_TEXT: \" + textBefore + \"^^^\" + textAfter }\n        ];\n        return {\n            messages: chatMessageList,\n            temperature: 0.0,\n            maxTokens: 400,\n            stopSequences: ['END_INSERTION', 'NEED_INFO'],\n            frequencyPenalty: 0.0,\n            presencePenalty: 0.0\n        };\n    };\n    SmartTextArea.prototype.requestSuggestionAsync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var requestDetails, suggestionData, chatConfig, insertSuggestion, response;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.pendingSuggestionAbort) {\n                            this.pendingSuggestionAbort.abort();\n                            return [2 /*return*/];\n                        }\n                        this.pendingSuggestionAbort = new AbortController();\n                        requestDetails = {\n                            textAreaValue: this.textArea.value,\n                            cursorPosition: this.textArea.selectionStart\n                        };\n                        suggestionData = {\n                            textBefore: requestDetails.textAreaValue.substring(0, requestDetails.cursorPosition),\n                            textAfter: requestDetails.textAreaValue.substring(requestDetails.cursorPosition)\n                        };\n                        chatConfig = this.createSuggestionPrompt(suggestionData.textBefore, suggestionData.textAfter);\n                        if (!(typeof this.aiSuggestionHandler === 'function')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.aiSuggestionHandler(chatConfig)];\n                    case 1:\n                        response = _a.sent();\n                        insertSuggestion = this.validateSuggestion(response, suggestionData.textBefore);\n                        _a.label = 2;\n                    case 2:\n                        if (insertSuggestion && requestDetails.textAreaValue === this.textArea.value &&\n                            requestDetails.cursorPosition === this.textArea.selectionStart) {\n                            if (!insertSuggestion.endsWith(' ')) {\n                                insertSuggestion += ' ';\n                            }\n                            this.suggestionDisplay.show(insertSuggestion);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SmartTextArea.prototype.validateSuggestion = function (response, textBefore) {\n        var suggestion;\n        if (typeof response !== 'string' || response.length <= 5 || response.indexOf('OK:[') !== 0) {\n            return '';\n        }\n        var endIndex = this.indexOfAny(response, ['.', '?', '!']);\n        if (endIndex > 0 && response.length > endIndex + 1 && response[endIndex + 1] === ' ') {\n            response = response.substring(0, endIndex + 1);\n        }\n        suggestion = response.substring(4).replace(/[\\]\\s]+$/, '');\n        if (textBefore.length > 0 && textBefore[textBefore.length - 1] === ' ') {\n            suggestion = suggestion.replace(/^\\s+/, '');\n        }\n        return suggestion;\n    };\n    SmartTextArea.prototype.indexOfAny = function (str, chars) {\n        for (var i = 0; i < str.length; i++) {\n            if (chars.indexOf(str[\"\" + i]) !== -1) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    SmartTextArea.prototype.getModuleName = function () {\n        return 'smarttextarea';\n    };\n    SmartTextArea.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.textArea = null;\n        this.suggestionDisplay = null;\n        this.typingDebounceTimeout = null;\n    };\n    __decorate([\n        Property('')\n    ], SmartTextArea.prototype, \"userRole\", void 0);\n    __decorate([\n        Property([])\n    ], SmartTextArea.prototype, \"UserPhrases\", void 0);\n    __decorate([\n        Property()\n    ], SmartTextArea.prototype, \"aiSuggestionHandler\", void 0);\n    __decorate([\n        Property('None')\n    ], SmartTextArea.prototype, \"showSuggestionOnPopup\", void 0);\n    return SmartTextArea;\n}(TextArea));\nexport { SmartTextArea };\nvar InlineSuggestion = /** @class */ (function () {\n    function InlineSuggestion(smartTextArea, textArea) {\n        this.owner = smartTextArea;\n        this.textArea = textArea;\n        this.latestSuggestionText = '';\n        this.suggestionStartPos = null;\n        this.suggestionEndPos = null;\n        this.virtualCaret = null;\n        this.originalValueProperty = this.getOriginalValueProperty(textArea, 'value');\n    }\n    Object.defineProperty(InlineSuggestion.prototype, \"value\", {\n        get: function () {\n            var value = this.originalValueProperty.get.call(this.textArea);\n            return this.isShowing() ? value.substring(0, this.suggestionStartPos) + value.substring(this.suggestionEndPos) : value;\n        },\n        set: function (newValue) {\n            this.originalValueProperty.set.call(this.textArea, newValue);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    InlineSuggestion.prototype.getOriginalValueProperty = function (obj, property) {\n        while (obj) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, property);\n            if (descriptor) {\n                return descriptor;\n            }\n            obj = Object.getPrototypeOf(obj);\n        }\n        throw new Error(\"Property \" + property + \" not found on object or its prototype chain\");\n    };\n    Object.defineProperty(InlineSuggestion.prototype, \"valueIncludingSuggestion\", {\n        get: function () {\n            return this.originalValueProperty.get.call(this.textArea);\n        },\n        set: function (newValue) {\n            this.originalValueProperty.set.call(this.textArea, newValue);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    InlineSuggestion.prototype.isShowing = function () {\n        return this.suggestionStartPos !== null;\n    };\n    InlineSuggestion.prototype.show = function (suggestionText) {\n        this.latestSuggestionText = suggestionText;\n        this.suggestionStartPos = this.textArea.selectionStart;\n        this.suggestionEndPos = this.suggestionStartPos + suggestionText.length;\n        this.textArea.setAttribute('data-suggestion-visible', '');\n        this.valueIncludingSuggestion = this.valueIncludingSuggestion.substring(0, this.suggestionStartPos) +\n            suggestionText +\n            this.valueIncludingSuggestion.substring(this.suggestionStartPos);\n        this.textArea.setSelectionRange(this.suggestionStartPos, this.suggestionEndPos);\n        if (!this.virtualCaret) {\n            this.virtualCaret = new VirtualCaret(this.owner, this.textArea);\n        }\n        this.virtualCaret.show();\n    };\n    Object.defineProperty(InlineSuggestion.prototype, \"currentSuggestion\", {\n        get: function () {\n            return this.latestSuggestionText;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    InlineSuggestion.prototype.accept = function () {\n        this.textArea.setSelectionRange(this.suggestionEndPos, this.suggestionEndPos);\n        this.suggestionStartPos = null;\n        this.suggestionEndPos = null;\n        if (this.virtualCaret) {\n            this.virtualCaret.hide();\n        }\n        this.textArea.removeAttribute('data-suggestion-visible');\n        CaretPositionHelper.adjustScrollToCaretPosition(this.textArea);\n    };\n    InlineSuggestion.prototype.reject = function () {\n        if (!this.isShowing()) {\n            return;\n        }\n        var selectionStart = this.textArea.selectionStart;\n        var selectionEnd = this.textArea.selectionEnd;\n        this.valueIncludingSuggestion = this.valueIncludingSuggestion.substring(0, this.suggestionStartPos) +\n            this.valueIncludingSuggestion.substring(this.suggestionEndPos);\n        if (this.suggestionStartPos === selectionStart && this.suggestionEndPos === selectionEnd) {\n            this.textArea.setSelectionRange(selectionStart, selectionStart);\n        }\n        this.suggestionStartPos = null;\n        this.suggestionEndPos = null;\n        this.textArea.removeAttribute('data-suggestion-visible');\n        if (this.virtualCaret) {\n            this.virtualCaret.hide();\n        }\n    };\n    return InlineSuggestion;\n}());\nvar ContextSuggestion = /** @class */ (function () {\n    function ContextSuggestion(container, textArea) {\n        var _this = this;\n        this.latestSuggestionText = '';\n        this.showing = false;\n        this.textArea = textArea;\n        this.suggestionElement = document.createElement('div');\n        this.suggestionElement.classList.add('smart-textarea-suggestion-overlay');\n        this.suggestionElement.addEventListener('mousedown', function (event) { return _this.handleSuggestionClicked(event); });\n        this.suggestionElement.addEventListener('touchend', function (event) { return _this.handleSuggestionClicked(event); });\n        this.suggestionPrefixElement = document.createElement('span');\n        this.suggestionTextElement = document.createElement('span');\n        this.suggestionElement.appendChild(this.suggestionPrefixElement);\n        this.suggestionElement.appendChild(this.suggestionTextElement);\n        this.suggestionPrefixElement.style.opacity = '0.3';\n        var computedStyle = window.getComputedStyle(this.textArea);\n        this.suggestionElement.style.font = computedStyle.font;\n        this.suggestionElement.style.marginTop = 1.4 * parseFloat(computedStyle.fontSize) + \"px\";\n        container.appendChild(this.suggestionElement);\n    }\n    Object.defineProperty(ContextSuggestion.prototype, \"currentSuggestion\", {\n        get: function () {\n            return this.latestSuggestionText;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ContextSuggestion.prototype.show = function (suggestionText) {\n        this.latestSuggestionText = suggestionText;\n        this.suggestionPrefixElement.textContent = suggestionText[0] !== ' ' ? this.getPrefixText(this.textArea, 20) : '';\n        this.suggestionTextElement.textContent = suggestionText;\n        var position = CaretPositionHelper.getTextAreaPosition(this.textArea);\n        var style = this.suggestionElement.style;\n        style.minWidth = null;\n        this.suggestionElement.classList.add('smart-textarea-suggestion-overlay-visible');\n        style.zIndex = this.textArea.style.zIndex + 1;\n        style.top = position.top + \"px\";\n        var leftPosition = position.left - this.suggestionPrefixElement.offsetWidth;\n        if (!style.left || Math.abs(parseFloat(style.left) - leftPosition) > 10) {\n            style.left = leftPosition + \"px\";\n        }\n        this.showing = true;\n        var computedStyle = window.getComputedStyle(this.suggestionElement);\n        var lineHeight = parseFloat(computedStyle.lineHeight);\n        var paddingTop = parseFloat(computedStyle.paddingTop);\n        var paddingBottom = parseFloat(computedStyle.paddingBottom);\n        var lines = Math.round((this.suggestionElement.offsetHeight - paddingTop - paddingBottom) / lineHeight);\n        if (lines > 2) {\n            var elementWidth = this.suggestionElement.offsetWidth;\n            style.minWidth = \"calc(min(70vw, \" + (lines * elementWidth) / 2 + \"px))\";\n        }\n        var rect = this.suggestionElement.getBoundingClientRect();\n        if (rect.right > document.body.clientWidth - 20) {\n            style.left = \"calc(\" + (parseFloat(style.left) - (rect.right - document.body.clientWidth)) + \"px - 2rem)\";\n        }\n    };\n    ContextSuggestion.prototype.accept = function () {\n        if (this.showing) {\n            CaretPositionHelper.insertCharacter(this.textArea, this.currentSuggestion);\n            CaretPositionHelper.adjustScrollToCaretPosition(this.textArea);\n            this.hide();\n        }\n    };\n    ContextSuggestion.prototype.reject = function () {\n        this.hide();\n    };\n    ContextSuggestion.prototype.hide = function () {\n        if (this.showing) {\n            this.showing = false;\n            this.suggestionElement.classList.remove('smart-textarea-suggestion-overlay-visible');\n        }\n    };\n    ContextSuggestion.prototype.isShowing = function () {\n        return this.showing;\n    };\n    ContextSuggestion.prototype.handleSuggestionClicked = function (event) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        this.accept();\n    };\n    ContextSuggestion.prototype.getPrefixText = function (textArea, maxLength) {\n        var value = textArea.value;\n        var selectionStart = textArea.selectionStart;\n        for (var i = selectionStart - 1; i > selectionStart - maxLength; i--) {\n            if (i < 0 || /\\s/.test(value[\"\" + i])) {\n                return value.substring(i + 1, selectionStart);\n            }\n        }\n        return '';\n    };\n    return ContextSuggestion;\n}());\nvar VirtualCaret = /** @class */ (function () {\n    function VirtualCaret(smartTextArea, textArea) {\n        this.textArea = textArea;\n        this.caretDiv = document.createElement('div');\n        this.caretDiv.classList.add('smart-textarea-caret');\n        smartTextArea.appendChild(this.caretDiv);\n    }\n    VirtualCaret.prototype.show = function () {\n        var textAreaPosition = CaretPositionHelper.getTextAreaPosition(this.textArea);\n        var caretStyle = this.caretDiv.style;\n        caretStyle.display = 'block';\n        caretStyle.top = textAreaPosition.top + 'px';\n        caretStyle.left = textAreaPosition.left + 'px';\n        caretStyle.height = textAreaPosition.height + 'px';\n        caretStyle.zIndex = this.textArea.style.zIndex;\n        caretStyle.backgroundColor = textAreaPosition.elemStyle.caretColor;\n    };\n    VirtualCaret.prototype.hide = function () {\n        this.caretDiv.style.display = 'none';\n    };\n    return VirtualCaret;\n}());\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIA,CAAC,CAACM,cAAc,CAACD,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IAC9E,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnBF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASO,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGT,CAAC;IAAE;IACtCA,CAAC,CAACU,SAAS,GAAGT,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACS,MAAM,CAACV,CAAC,CAAC,IAAIO,EAAE,CAACE,SAAS,GAAGT,CAAC,CAACS,SAAS,EAAE,IAAIF,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJ,IAAII,UAAU,GAAI,IAAI,IAAI,IAAI,CAACA,UAAU,IAAK,UAAUC,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACnF,IAAIC,CAAC,GAAGC,SAAS,CAACC,MAAM;IAAEC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGH,MAAM,GAAGE,IAAI,KAAK,IAAI,GAAGA,IAAI,GAAGd,MAAM,CAACmB,wBAAwB,CAACP,MAAM,EAAEC,GAAG,CAAC,GAAGC,IAAI;IAAEhB,CAAC;EAC5H,IAAI,OAAOsB,OAAO,KAAK,QAAQ,IAAI,OAAOA,OAAO,CAACC,QAAQ,KAAK,UAAU,EAAEH,CAAC,GAAGE,OAAO,CAACC,QAAQ,CAACV,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,CAAC,CAAC,KAC1H,KAAK,IAAIQ,CAAC,GAAGX,UAAU,CAACM,MAAM,GAAG,CAAC,EAAEK,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE,IAAIxB,CAAC,GAAGa,UAAU,CAACW,CAAC,CAAC,EAAEJ,CAAC,GAAG,CAACH,CAAC,GAAG,CAAC,GAAGjB,CAAC,CAACoB,CAAC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGjB,CAAC,CAACc,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,GAAGpB,CAAC,CAACc,MAAM,EAAEC,GAAG,CAAC,KAAKK,CAAC;EACjJ,OAAOH,CAAC,GAAG,CAAC,IAAIG,CAAC,IAAIlB,MAAM,CAACuB,cAAc,CAACX,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,EAAEA,CAAC;AACjE,CAAC;AACD,IAAIM,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAK,UAAUC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACrF,OAAO,KAAKD,CAAC,KAAKA,CAAC,GAAGE,OAAO,CAAC,EAAE,UAAUC,OAAO,EAAEC,MAAM,EAAE;IACvD,SAASC,SAASA,CAACC,KAAK,EAAE;MAAE,IAAI;QAAEC,IAAI,CAACN,SAAS,CAACO,IAAI,CAACF,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOG,CAAC,EAAE;QAAEL,MAAM,CAACK,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASC,QAAQA,CAACJ,KAAK,EAAE;MAAE,IAAI;QAAEC,IAAI,CAACN,SAAS,CAAC,OAAO,CAAC,CAACK,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOG,CAAC,EAAE;QAAEL,MAAM,CAACK,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASF,IAAIA,CAACI,MAAM,EAAE;MAAEA,MAAM,CAACC,IAAI,GAAGT,OAAO,CAACQ,MAAM,CAACL,KAAK,CAAC,GAAG,IAAIN,CAAC,CAAC,UAAUG,OAAO,EAAE;QAAEA,OAAO,CAACQ,MAAM,CAACL,KAAK,CAAC;MAAE,CAAC,CAAC,CAACO,IAAI,CAACR,SAAS,EAAEK,QAAQ,CAAC;IAAE;IAC9IH,IAAI,CAAC,CAACN,SAAS,GAAGA,SAAS,CAACa,KAAK,CAAChB,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAES,IAAI,CAAC,CAAC,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACD,IAAIO,WAAW,GAAI,IAAI,IAAI,IAAI,CAACA,WAAW,IAAK,UAAUjB,OAAO,EAAEkB,IAAI,EAAE;EACrE,IAAIC,CAAC,GAAG;MAAEC,KAAK,EAAE,CAAC;MAAEC,IAAI,EAAE,SAAAA,CAAA,EAAW;QAAE,IAAIC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAMA,CAAC,CAAC,CAAC,CAAC;QAAE,OAAOA,CAAC,CAAC,CAAC,CAAC;MAAE,CAAC;MAAEC,IAAI,EAAE,EAAE;MAAEC,GAAG,EAAE;IAAG,CAAC;IAAEC,CAAC;IAAEC,CAAC;IAAEJ,CAAC;IAAEK,CAAC;EAChH,OAAOA,CAAC,GAAG;IAAEjB,IAAI,EAAEkB,IAAI,CAAC,CAAC,CAAC;IAAE,OAAO,EAAEA,IAAI,CAAC,CAAC,CAAC;IAAE,QAAQ,EAAEA,IAAI,CAAC,CAAC;EAAE,CAAC,EAAE,OAAOC,MAAM,KAAK,UAAU,KAAKF,CAAC,CAACE,MAAM,CAACC,QAAQ,CAAC,GAAG,YAAW;IAAE,OAAO,IAAI;EAAE,CAAC,CAAC,EAAEH,CAAC;EACxJ,SAASC,IAAIA,CAACG,CAAC,EAAE;IAAE,OAAO,UAAUC,CAAC,EAAE;MAAE,OAAOvB,IAAI,CAAC,CAACsB,CAAC,EAAEC,CAAC,CAAC,CAAC;IAAE,CAAC;EAAE;EACjE,SAASvB,IAAIA,CAACwB,EAAE,EAAE;IACd,IAAIR,CAAC,EAAE,MAAM,IAAIS,SAAS,CAAC,iCAAiC,CAAC;IAC7D,OAAOf,CAAC,EAAE,IAAI;MACV,IAAIM,CAAC,GAAG,CAAC,EAAEC,CAAC,KAAKJ,CAAC,GAAGW,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGP,CAAC,CAAC,QAAQ,CAAC,GAAGO,EAAE,CAAC,CAAC,CAAC,GAAGP,CAAC,CAAC,OAAO,CAAC,KAAK,CAACJ,CAAC,GAAGI,CAAC,CAAC,QAAQ,CAAC,KAAKJ,CAAC,CAACa,IAAI,CAACT,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,CAAC,CAAChB,IAAI,CAAC,IAAI,CAAC,CAACY,CAAC,GAAGA,CAAC,CAACa,IAAI,CAACT,CAAC,EAAEO,EAAE,CAAC,CAAC,CAAC,CAAC,EAAEnB,IAAI,EAAE,OAAOQ,CAAC;MAC5J,IAAII,CAAC,GAAG,CAAC,EAAEJ,CAAC,EAAEW,EAAE,GAAG,CAACA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEX,CAAC,CAACd,KAAK,CAAC;MACvC,QAAQyB,EAAE,CAAC,CAAC,CAAC;QACT,KAAK,CAAC;QAAE,KAAK,CAAC;UAAEX,CAAC,GAAGW,EAAE;UAAE;QACxB,KAAK,CAAC;UAAEd,CAAC,CAACC,KAAK,EAAE;UAAE,OAAO;YAAEZ,KAAK,EAAEyB,EAAE,CAAC,CAAC,CAAC;YAAEnB,IAAI,EAAE;UAAM,CAAC;QACvD,KAAK,CAAC;UAAEK,CAAC,CAACC,KAAK,EAAE;UAAEM,CAAC,GAAGO,EAAE,CAAC,CAAC,CAAC;UAAEA,EAAE,GAAG,CAAC,CAAC,CAAC;UAAE;QACxC,KAAK,CAAC;UAAEA,EAAE,GAAGd,CAAC,CAACK,GAAG,CAACY,GAAG,CAAC,CAAC;UAAEjB,CAAC,CAACI,IAAI,CAACa,GAAG,CAAC,CAAC;UAAE;QACxC;UACI,IAAI,EAAEd,CAAC,GAAGH,CAAC,CAACI,IAAI,EAAED,CAAC,GAAGA,CAAC,CAAC9B,MAAM,GAAG,CAAC,IAAI8B,CAAC,CAACA,CAAC,CAAC9B,MAAM,GAAG,CAAC,CAAC,CAAC,KAAKyC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAIA,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;YAAEd,CAAC,GAAG,CAAC;YAAE;UAAU;UAC3G,IAAIc,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAACX,CAAC,IAAKW,EAAE,CAAC,CAAC,CAAC,GAAGX,CAAC,CAAC,CAAC,CAAC,IAAIW,EAAE,CAAC,CAAC,CAAC,GAAGX,CAAC,CAAC,CAAC,CAAE,CAAC,EAAE;YAAEH,CAAC,CAACC,KAAK,GAAGa,EAAE,CAAC,CAAC,CAAC;YAAE;UAAO;UACrF,IAAIA,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAId,CAAC,CAACC,KAAK,GAAGE,CAAC,CAAC,CAAC,CAAC,EAAE;YAAEH,CAAC,CAACC,KAAK,GAAGE,CAAC,CAAC,CAAC,CAAC;YAAEA,CAAC,GAAGW,EAAE;YAAE;UAAO;UACpE,IAAIX,CAAC,IAAIH,CAAC,CAACC,KAAK,GAAGE,CAAC,CAAC,CAAC,CAAC,EAAE;YAAEH,CAAC,CAACC,KAAK,GAAGE,CAAC,CAAC,CAAC,CAAC;YAAEH,CAAC,CAACK,GAAG,CAACa,IAAI,CAACJ,EAAE,CAAC;YAAE;UAAO;UAClE,IAAIX,CAAC,CAAC,CAAC,CAAC,EAAEH,CAAC,CAACK,GAAG,CAACY,GAAG,CAAC,CAAC;UACrBjB,CAAC,CAACI,IAAI,CAACa,GAAG,CAAC,CAAC;UAAE;MACtB;MACAH,EAAE,GAAGf,IAAI,CAACiB,IAAI,CAACnC,OAAO,EAAEmB,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOR,CAAC,EAAE;MAAEsB,EAAE,GAAG,CAAC,CAAC,EAAEtB,CAAC,CAAC;MAAEe,CAAC,GAAG,CAAC;IAAE,CAAC,SAAS;MAAED,CAAC,GAAGH,CAAC,GAAG,CAAC;IAAE;IACzD,IAAIW,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAMA,EAAE,CAAC,CAAC,CAAC;IAAE,OAAO;MAAEzB,KAAK,EAAEyB,EAAE,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;MAAEnB,IAAI,EAAE;IAAK,CAAC;EACpF;AACJ,CAAC;AACD;AACA;AACA,SAASwB,YAAY,EAAEC,QAAQ,EAAEC,aAAa,QAAQ,sBAAsB;AAC5E,SAASC,QAAQ,QAAQ,sBAAsB;AAC/C,SAASC,mBAAmB,QAAQ,gBAAgB;AACpD,OAAO,IAAIC,eAAe;AAC1B,CAAC,UAAUA,eAAe,EAAE;EACxBA,eAAe,CAAC,QAAQ,CAAC,GAAG,QAAQ;EACpCA,eAAe,CAAC,MAAM,CAAC,GAAG,MAAM;EAChCA,eAAe,CAAC,WAAW,CAAC,GAAG,WAAW;AAC9C,CAAC,EAAEA,eAAe,KAAKA,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC;AAC7C,IAAIC,aAAa,GAAG,aAAe,UAAUC,MAAM,EAAE;EACjD1E,SAAS,CAACyE,aAAa,EAAEC,MAAM,CAAC;EAChC;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,SAASD,aAAaA,CAACE,OAAO,EAAEC,OAAO,EAAE;IACrC,OAAOF,MAAM,CAACV,IAAI,CAAC,IAAI,EAAEW,OAAO,EAAEC,OAAO,CAAC,IAAI,IAAI;EACtD;EACAH,aAAa,CAAC7D,SAAS,CAACiE,MAAM,GAAG,YAAY;IACzCH,MAAM,CAAC9D,SAAS,CAACiE,MAAM,CAACb,IAAI,CAAC,IAAI,CAAC;IAClC,IAAI,EAAE,IAAI,CAACY,OAAO,YAAYE,mBAAmB,CAAC,EAAE;MAChD;IACJ;IACA,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACH,OAAO;IAC5B,IAAII,aAAa,GAAGX,aAAa,CAAC,gBAAgB,CAAC;IACnDW,aAAa,CAACC,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;IAC/C,IAAI,CAACH,QAAQ,CAACI,KAAK,CAACH,aAAa,CAAC;IAClC,IAAI,IAAI,CAACI,qBAAqB,KAAK,MAAM,EAAE;MACvC,IAAIC,eAAe,GAAG,IAAI,CAACD,qBAAqB,KAAK,QAAQ,GAAG,OAAO,GAAG,MAAM;MAChF,IAAI,CAACL,QAAQ,CAACO,YAAY,CAAC,yBAAyB,EAAED,eAAe,CAAC;IAC1E;IACA,IAAI,CAACE,iBAAiB,GAAG,IAAI,CAACC,2BAA2B,CAAC,IAAI,CAACT,QAAQ,CAAC,GACpE,IAAIU,gBAAgB,CAACT,aAAa,EAAE,IAAI,CAACD,QAAQ,CAAC,GAAG,IAAIW,iBAAiB,CAACV,aAAa,EAAE,IAAI,CAACD,QAAQ,CAAC;EAChH,CAAC;EACDN,aAAa,CAAC7D,SAAS,CAAC+E,UAAU,GAAG,YAAY;IAC7C,IAAIC,KAAK,GAAG,IAAI;IAChBlB,MAAM,CAAC9D,SAAS,CAAC+E,UAAU,CAAC3B,IAAI,CAAC,IAAI,CAAC;IACtCG,YAAY,CAACe,GAAG,CAAC,IAAI,CAACN,OAAO,EAAE,OAAO,EAAE,IAAI,CAACiB,WAAW,EAAE,IAAI,CAAC;IAC/D1B,YAAY,CAACe,GAAG,CAAC,IAAI,CAACN,OAAO,EAAE,SAAS,EAAE,IAAI,CAACkB,aAAa,EAAE,IAAI,CAAC;IACnE3B,YAAY,CAACe,GAAG,CAAC,IAAI,CAACN,OAAO,EAAE,WAAW,EAAE,IAAI,CAACmB,iCAAiC,EAAE,IAAI,CAAC;IACzF5B,YAAY,CAACe,GAAG,CAAC,IAAI,CAACN,OAAO,EAAE,UAAU,EAAE,IAAI,CAACmB,iCAAiC,EAAE,IAAI,CAAC;IACxF,IAAI,CAACnB,OAAO,CAACoB,gBAAgB,CAAC,QAAQ,EAAG,YAAY;MAAE,OAAOJ,KAAK,CAACL,iBAAiB,CAACpD,MAAM,CAAC,CAAC;IAAE,CAAC,EAAG;MAChG8D,OAAO,EAAE;IACb,CAAC,CAAC;EACN,CAAC;EACDxB,aAAa,CAAC7D,SAAS,CAACsF,YAAY,GAAG,YAAY;IAC/C,IAAIN,KAAK,GAAG,IAAI;IAChBlB,MAAM,CAAC9D,SAAS,CAACsF,YAAY,CAAClC,IAAI,CAAC,IAAI,CAAC;IACxCG,YAAY,CAACgC,MAAM,CAAC,IAAI,CAACvB,OAAO,EAAE,OAAO,EAAE,IAAI,CAACiB,WAAW,CAAC;IAC5D1B,YAAY,CAACgC,MAAM,CAAC,IAAI,CAACvB,OAAO,EAAE,SAAS,EAAE,IAAI,CAACkB,aAAa,CAAC;IAChE3B,YAAY,CAACgC,MAAM,CAAC,IAAI,CAACvB,OAAO,EAAE,WAAW,EAAE,IAAI,CAACmB,iCAAiC,CAAC;IACtF5B,YAAY,CAACgC,MAAM,CAAC,IAAI,CAACvB,OAAO,EAAE,UAAU,EAAE,IAAI,CAACmB,iCAAiC,CAAC;IACrF,IAAI,CAACnB,OAAO,CAACwB,mBAAmB,CAAC,QAAQ,EAAG,YAAY;MAAE,OAAOR,KAAK,CAACL,iBAAiB,CAACpD,MAAM,CAAC,CAAC;IAAE,CAAE,CAAC;EAC1G,CAAC;EACDsC,aAAa,CAAC7D,SAAS,CAACyF,cAAc,GAAG,YAAY;IACjD;EAAA,CACH;EACD5B,aAAa,CAAC7D,SAAS,CAAC4E,2BAA2B,GAAG,UAAUT,QAAQ,EAAE;IACtE,IAAIuB,iBAAiB,GAAGvB,QAAQ,CAACwB,YAAY,CAAC,yBAAyB,CAAC;IACxE,IAAID,iBAAiB,EAAE;MACnB,OAAOA,iBAAiB,CAACE,WAAW,CAAC,CAAC,KAAK,MAAM;IACrD;IACA,OAAO,EAAE,cAAc,IAAIC,MAAM,CAAC;EACtC,CAAC;EACDhC,aAAa,CAAC7D,SAAS,CAACkF,aAAa,GAAG,UAAUY,KAAK,EAAE;IACrD,QAAQA,KAAK,CAACzF,GAAG;MACb,KAAK,KAAK;QACN,IAAI,IAAI,CAACsE,iBAAiB,CAACoB,SAAS,CAAC,CAAC,EAAE;UACpC,IAAI,CAACpB,iBAAiB,CAACqB,MAAM,CAAC,CAAC;UAC/BF,KAAK,CAACG,cAAc,CAAC,CAAC;QAC1B;QACA;MACJ,KAAK,KAAK;MACV,KAAK,SAAS;MACd,KAAK,OAAO;MACZ,KAAK,SAAS;QACV;MACJ;QACI,IAAI,IAAI,CAACtB,iBAAiB,CAACoB,SAAS,CAAC,CAAC,IAAI,IAAI,CAACpB,iBAAiB,CAACuB,iBAAiB,CAACC,UAAU,CAACL,KAAK,CAACzF,GAAG,CAAC,EAAE;UACtGsD,mBAAmB,CAACyC,eAAe,CAAC,IAAI,CAACjC,QAAQ,EAAE2B,KAAK,CAACzF,GAAG,CAAC;UAC7DyF,KAAK,CAACG,cAAc,CAAC,CAAC;UACtB,IAAI,CAACtB,iBAAiB,CAAC0B,IAAI,CAAC,IAAI,CAAC1B,iBAAiB,CAACuB,iBAAiB,CAACI,SAAS,CAACR,KAAK,CAACzF,GAAG,CAACI,MAAM,CAAC,CAAC;UACjGkD,mBAAmB,CAAC4C,2BAA2B,CAAC,IAAI,CAACpC,QAAQ,CAAC;QAClE,CAAC,MACI;UACD,IAAI,CAACgB,iCAAiC,CAAC,CAAC;QAC5C;QACA;IACR;EACJ,CAAC;EACDtB,aAAa,CAAC7D,SAAS,CAACiF,WAAW,GAAG,YAAY;IAC9C,IAAID,KAAK,GAAG,IAAI;IAChB,IAAI,CAAC,IAAI,CAACL,iBAAiB,CAACoB,SAAS,CAAC,CAAC,EAAE;MACrCS,YAAY,CAAC,IAAI,CAACC,qBAAqB,CAAC;MACxC,IAAI,CAACA,qBAAqB,GAAGC,UAAU,CAAC,YAAY;QAAE,OAAO1B,KAAK,CAAC2B,kBAAkB,CAAC,CAAC;MAAE,CAAC,EAAE,GAAG,CAAC;IACpG;EACJ,CAAC;EACD9C,aAAa,CAAC7D,SAAS,CAAC2G,kBAAkB,GAAG,YAAY;IACrD,OAAO3F,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,YAAY;MAC/C,OAAOkB,WAAW,CAAC,IAAI,EAAE,UAAU0E,EAAE,EAAE;QACnC,QAAQA,EAAE,CAACvE,KAAK;UACZ,KAAK,CAAC;YACF,IAAIwE,QAAQ,CAACC,aAAa,KAAK,IAAI,CAAC3C,QAAQ,EAAE;cAC1C,OAAO,CAAC,CAAC,CAAC,WAAW;YACzB;YACA,IAAI,EAAE,IAAI,CAACA,QAAQ,CAAC4C,cAAc,KAAK,IAAI,CAAC5C,QAAQ,CAAC6C,YAAY,KAC5D,IAAI,CAAC7C,QAAQ,CAAC4C,cAAc,KAAK,IAAI,CAAC5C,QAAQ,CAAC1C,KAAK,CAAChB,MAAM,IACxD,IAAI,CAAC0D,QAAQ,CAAC1C,KAAK,CAAC,IAAI,CAAC0C,QAAQ,CAAC4C,cAAc,CAAC,KAAK,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;YAC7F,OAAO,CAAC,CAAC,CAAC,WAAW,IAAI,CAACE,sBAAsB,CAAC,CAAC,CAAC;UACvD,KAAK,CAAC;YACFL,EAAE,CAACtE,IAAI,CAAC,CAAC;YACTsE,EAAE,CAACvE,KAAK,GAAG,CAAC;UAChB,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC,CAAC,WAAW;QACjC;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;EACN,CAAC;EACDwB,aAAa,CAAC7D,SAAS,CAACmF,iCAAiC,GAAG,YAAY;IACpEqB,YAAY,CAAC,IAAI,CAACC,qBAAqB,CAAC;IACxC,IAAI,IAAI,CAACS,sBAAsB,EAAE;MAC7B,IAAI,CAACA,sBAAsB,CAACC,KAAK,CAAC,CAAC;MACnC,IAAI,CAACD,sBAAsB,GAAG,IAAI;IACtC;IACA,IAAI,CAACvC,iBAAiB,CAACpD,MAAM,CAAC,CAAC;EACnC,CAAC;EACDsC,aAAa,CAAC7D,SAAS,CAACoH,sBAAsB,GAAG,UAAUC,UAAU,EAAEC,SAAS,EAAE;IAC9E,IAAIC,aAAa,GAAG,8IAA8I,GAC9J,kIAAkI,GAClI,wJAAwJ,GACxJ,kHAAkH,GAClH,gIAAgI,GAChI,0IAA0I;IAC9I,IAAIC,WAAW,GAAG,IAAI,CAACC,WAAW;IAClC,IAAID,WAAW,IAAIA,WAAW,CAAC/G,MAAM,GAAG,CAAC,EAAE;MACvC8G,aAAa,IAAI,uFAAuF;MACxG,KAAK,IAAIG,EAAE,GAAG,CAAC,EAAEC,aAAa,GAAGH,WAAW,EAAEE,EAAE,GAAGC,aAAa,CAAClH,MAAM,EAAEiH,EAAE,EAAE,EAAE;QAC3E,IAAIE,MAAM,GAAGD,aAAa,CAACD,EAAE,CAAC;QAC9BH,aAAa,IAAI,IAAI,GAAGK,MAAM,GAAG,IAAI;MACzC;IACJ;IACA,IAAIC,eAAe,GAAG,CAClB;MAAEC,IAAI,EAAElE,eAAe,CAACmE,MAAM;MAAEC,OAAO,EAAET;IAAc,CAAC,EACxD;MAAEO,IAAI,EAAElE,eAAe,CAACqE,IAAI;MAAED,OAAO,EAAE;IAA4F,CAAC,EACpI;MAAEF,IAAI,EAAElE,eAAe,CAACsE,SAAS;MAAEF,OAAO,EAAE;IAA2B,CAAC,EACxE;MAAEF,IAAI,EAAElE,eAAe,CAACqE,IAAI;MAAED,OAAO,EAAE;IAA+G,CAAC,EACvJ;MAAEF,IAAI,EAAElE,eAAe,CAACsE,SAAS;MAAEF,OAAO,EAAE;IAA8C,CAAC,EAC3F;MAAEF,IAAI,EAAElE,eAAe,CAACqE,IAAI;MAAED,OAAO,EAAE;IAAgE,CAAC,EACxG;MAAEF,IAAI,EAAElE,eAAe,CAACsE,SAAS;MAAEF,OAAO,EAAE;IAA6C,CAAC,EAC1F;MAAEF,IAAI,EAAElE,eAAe,CAACqE,IAAI;MAAED,OAAO,EAAE;IAAuE,CAAC,EAC/G;MAAEF,IAAI,EAAElE,eAAe,CAACsE,SAAS;MAAEF,OAAO,EAAE;IAAmC,CAAC,EAChF;MAAEF,IAAI,EAAElE,eAAe,CAACqE,IAAI;MAAED,OAAO,EAAE;IAA+D,CAAC,EACvG;MAAEF,IAAI,EAAElE,eAAe,CAACsE,SAAS;MAAEF,OAAO,EAAE;IAA8B,CAAC,EAC3E;MAAEF,IAAI,EAAElE,eAAe,CAACqE,IAAI;MAAED,OAAO,EAAE;IAA6C,CAAC,EACrF;MAAEF,IAAI,EAAElE,eAAe,CAACsE,SAAS;MAAEF,OAAO,EAAE;IAAgD,CAAC,EAC7F;MAAEF,IAAI,EAAElE,eAAe,CAACqE,IAAI;MAAED,OAAO,EAAE,QAAQ,GAAG,IAAI,CAACG,QAAQ,GAAG,eAAe,GAAGd,UAAU,GAAG,KAAK,GAAGC;IAAU,CAAC,CACvH;IACD,OAAO;MACHc,QAAQ,EAAEP,eAAe;MACzBQ,WAAW,EAAE,GAAG;MAChBC,SAAS,EAAE,GAAG;MACdC,aAAa,EAAE,CAAC,eAAe,EAAE,WAAW,CAAC;MAC7CC,gBAAgB,EAAE,GAAG;MACrBC,eAAe,EAAE;IACrB,CAAC;EACL,CAAC;EACD5E,aAAa,CAAC7D,SAAS,CAACiH,sBAAsB,GAAG,YAAY;IACzD,OAAOjG,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,YAAY;MAC/C,IAAI0H,cAAc,EAAEC,cAAc,EAAEC,UAAU,EAAEC,gBAAgB,EAAEC,QAAQ;MAC1E,OAAO5G,WAAW,CAAC,IAAI,EAAE,UAAU0E,EAAE,EAAE;QACnC,QAAQA,EAAE,CAACvE,KAAK;UACZ,KAAK,CAAC;YACF,IAAI,IAAI,CAAC6E,sBAAsB,EAAE;cAC7B,IAAI,CAACA,sBAAsB,CAACC,KAAK,CAAC,CAAC;cACnC,OAAO,CAAC,CAAC,CAAC,WAAW;YACzB;YACA,IAAI,CAACD,sBAAsB,GAAG,IAAI6B,eAAe,CAAC,CAAC;YACnDL,cAAc,GAAG;cACbM,aAAa,EAAE,IAAI,CAAC7E,QAAQ,CAAC1C,KAAK;cAClCwH,cAAc,EAAE,IAAI,CAAC9E,QAAQ,CAAC4C;YAClC,CAAC;YACD4B,cAAc,GAAG;cACbtB,UAAU,EAAEqB,cAAc,CAACM,aAAa,CAAC1C,SAAS,CAAC,CAAC,EAAEoC,cAAc,CAACO,cAAc,CAAC;cACpF3B,SAAS,EAAEoB,cAAc,CAACM,aAAa,CAAC1C,SAAS,CAACoC,cAAc,CAACO,cAAc;YACnF,CAAC;YACDL,UAAU,GAAG,IAAI,CAACxB,sBAAsB,CAACuB,cAAc,CAACtB,UAAU,EAAEsB,cAAc,CAACrB,SAAS,CAAC;YAC7F,IAAI,EAAE,OAAO,IAAI,CAAC4B,mBAAmB,KAAK,UAAU,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;YAC9E,OAAO,CAAC,CAAC,CAAC,WAAW,IAAI,CAACA,mBAAmB,CAACN,UAAU,CAAC,CAAC;UAC9D,KAAK,CAAC;YACFE,QAAQ,GAAGlC,EAAE,CAACtE,IAAI,CAAC,CAAC;YACpBuG,gBAAgB,GAAG,IAAI,CAACM,kBAAkB,CAACL,QAAQ,EAAEH,cAAc,CAACtB,UAAU,CAAC;YAC/ET,EAAE,CAACvE,KAAK,GAAG,CAAC;UAChB,KAAK,CAAC;YACF,IAAIwG,gBAAgB,IAAIH,cAAc,CAACM,aAAa,KAAK,IAAI,CAAC7E,QAAQ,CAAC1C,KAAK,IACxEiH,cAAc,CAACO,cAAc,KAAK,IAAI,CAAC9E,QAAQ,CAAC4C,cAAc,EAAE;cAChE,IAAI,CAAC8B,gBAAgB,CAACO,QAAQ,CAAC,GAAG,CAAC,EAAE;gBACjCP,gBAAgB,IAAI,GAAG;cAC3B;cACA,IAAI,CAAClE,iBAAiB,CAAC0B,IAAI,CAACwC,gBAAgB,CAAC;YACjD;YACA,OAAO,CAAC,CAAC,CAAC,WAAW;QAC7B;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;EACN,CAAC;EACDhF,aAAa,CAAC7D,SAAS,CAACmJ,kBAAkB,GAAG,UAAUL,QAAQ,EAAEzB,UAAU,EAAE;IACzE,IAAIgC,UAAU;IACd,IAAI,OAAOP,QAAQ,KAAK,QAAQ,IAAIA,QAAQ,CAACrI,MAAM,IAAI,CAAC,IAAIqI,QAAQ,CAACQ,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;MACxF,OAAO,EAAE;IACb;IACA,IAAIC,QAAQ,GAAG,IAAI,CAACC,UAAU,CAACV,QAAQ,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IACzD,IAAIS,QAAQ,GAAG,CAAC,IAAIT,QAAQ,CAACrI,MAAM,GAAG8I,QAAQ,GAAG,CAAC,IAAIT,QAAQ,CAACS,QAAQ,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;MAClFT,QAAQ,GAAGA,QAAQ,CAACxC,SAAS,CAAC,CAAC,EAAEiD,QAAQ,GAAG,CAAC,CAAC;IAClD;IACAF,UAAU,GAAGP,QAAQ,CAACxC,SAAS,CAAC,CAAC,CAAC,CAACmD,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;IAC1D,IAAIpC,UAAU,CAAC5G,MAAM,GAAG,CAAC,IAAI4G,UAAU,CAACA,UAAU,CAAC5G,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;MACpE4I,UAAU,GAAGA,UAAU,CAACI,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;IAC/C;IACA,OAAOJ,UAAU;EACrB,CAAC;EACDxF,aAAa,CAAC7D,SAAS,CAACwJ,UAAU,GAAG,UAAUE,GAAG,EAAEC,KAAK,EAAE;IACvD,KAAK,IAAI7I,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4I,GAAG,CAACjJ,MAAM,EAAEK,CAAC,EAAE,EAAE;MACjC,IAAI6I,KAAK,CAACL,OAAO,CAACI,GAAG,CAAC,EAAE,GAAG5I,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;QACnC,OAAOA,CAAC;MACZ;IACJ;IACA,OAAO,CAAC,CAAC;EACb,CAAC;EACD+C,aAAa,CAAC7D,SAAS,CAAC4J,aAAa,GAAG,YAAY;IAChD,OAAO,eAAe;EAC1B,CAAC;EACD/F,aAAa,CAAC7D,SAAS,CAAC6J,OAAO,GAAG,YAAY;IAC1C/F,MAAM,CAAC9D,SAAS,CAAC6J,OAAO,CAACzG,IAAI,CAAC,IAAI,CAAC;IACnC,IAAI,CAACe,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACQ,iBAAiB,GAAG,IAAI;IAC7B,IAAI,CAAC8B,qBAAqB,GAAG,IAAI;EACrC,CAAC;EACDvG,UAAU,CAAC,CACPsD,QAAQ,CAAC,EAAE,CAAC,CACf,EAAEK,aAAa,CAAC7D,SAAS,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;EAC/CE,UAAU,CAAC,CACPsD,QAAQ,CAAC,EAAE,CAAC,CACf,EAAEK,aAAa,CAAC7D,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;EAClDE,UAAU,CAAC,CACPsD,QAAQ,CAAC,CAAC,CACb,EAAEK,aAAa,CAAC7D,SAAS,EAAE,qBAAqB,EAAE,KAAK,CAAC,CAAC;EAC1DE,UAAU,CAAC,CACPsD,QAAQ,CAAC,MAAM,CAAC,CACnB,EAAEK,aAAa,CAAC7D,SAAS,EAAE,uBAAuB,EAAE,KAAK,CAAC,CAAC;EAC5D,OAAO6D,aAAa;AACxB,CAAC,CAACH,QAAQ,CAAE;AACZ,SAASG,aAAa;AACtB,IAAIgB,gBAAgB,GAAG,aAAe,YAAY;EAC9C,SAASA,gBAAgBA,CAACT,aAAa,EAAED,QAAQ,EAAE;IAC/C,IAAI,CAAC2F,KAAK,GAAG1F,aAAa;IAC1B,IAAI,CAACD,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAAC4F,oBAAoB,GAAG,EAAE;IAC9B,IAAI,CAACC,kBAAkB,GAAG,IAAI;IAC9B,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAI,CAACC,qBAAqB,GAAG,IAAI,CAACC,wBAAwB,CAACjG,QAAQ,EAAE,OAAO,CAAC;EACjF;EACA3E,MAAM,CAACuB,cAAc,CAAC8D,gBAAgB,CAAC7E,SAAS,EAAE,OAAO,EAAE;IACvDqK,GAAG,EAAE,SAAAA,CAAA,EAAY;MACb,IAAI5I,KAAK,GAAG,IAAI,CAAC0I,qBAAqB,CAACE,GAAG,CAACjH,IAAI,CAAC,IAAI,CAACe,QAAQ,CAAC;MAC9D,OAAO,IAAI,CAAC4B,SAAS,CAAC,CAAC,GAAGtE,KAAK,CAAC6E,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC0D,kBAAkB,CAAC,GAAGvI,KAAK,CAAC6E,SAAS,CAAC,IAAI,CAAC2D,gBAAgB,CAAC,GAAGxI,KAAK;IAC1H,CAAC;IACD6I,GAAG,EAAE,SAAAA,CAAUC,QAAQ,EAAE;MACrB,IAAI,CAACJ,qBAAqB,CAACG,GAAG,CAAClH,IAAI,CAAC,IAAI,CAACe,QAAQ,EAAEoG,QAAQ,CAAC;IAChE,CAAC;IACDC,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACF5F,gBAAgB,CAAC7E,SAAS,CAACoK,wBAAwB,GAAG,UAAUM,GAAG,EAAEC,QAAQ,EAAE;IAC3E,OAAOD,GAAG,EAAE;MACR,IAAIE,UAAU,GAAGpL,MAAM,CAACmB,wBAAwB,CAAC+J,GAAG,EAAEC,QAAQ,CAAC;MAC/D,IAAIC,UAAU,EAAE;QACZ,OAAOA,UAAU;MACrB;MACAF,GAAG,GAAGlL,MAAM,CAACqL,cAAc,CAACH,GAAG,CAAC;IACpC;IACA,MAAM,IAAII,KAAK,CAAC,WAAW,GAAGH,QAAQ,GAAG,6CAA6C,CAAC;EAC3F,CAAC;EACDnL,MAAM,CAACuB,cAAc,CAAC8D,gBAAgB,CAAC7E,SAAS,EAAE,0BAA0B,EAAE;IAC1EqK,GAAG,EAAE,SAAAA,CAAA,EAAY;MACb,OAAO,IAAI,CAACF,qBAAqB,CAACE,GAAG,CAACjH,IAAI,CAAC,IAAI,CAACe,QAAQ,CAAC;IAC7D,CAAC;IACDmG,GAAG,EAAE,SAAAA,CAAUC,QAAQ,EAAE;MACrB,IAAI,CAACJ,qBAAqB,CAACG,GAAG,CAAClH,IAAI,CAAC,IAAI,CAACe,QAAQ,EAAEoG,QAAQ,CAAC;IAChE,CAAC;IACDC,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACF5F,gBAAgB,CAAC7E,SAAS,CAAC+F,SAAS,GAAG,YAAY;IAC/C,OAAO,IAAI,CAACiE,kBAAkB,KAAK,IAAI;EAC3C,CAAC;EACDnF,gBAAgB,CAAC7E,SAAS,CAACqG,IAAI,GAAG,UAAU0E,cAAc,EAAE;IACxD,IAAI,CAAChB,oBAAoB,GAAGgB,cAAc;IAC1C,IAAI,CAACf,kBAAkB,GAAG,IAAI,CAAC7F,QAAQ,CAAC4C,cAAc;IACtD,IAAI,CAACkD,gBAAgB,GAAG,IAAI,CAACD,kBAAkB,GAAGe,cAAc,CAACtK,MAAM;IACvE,IAAI,CAAC0D,QAAQ,CAACO,YAAY,CAAC,yBAAyB,EAAE,EAAE,CAAC;IACzD,IAAI,CAACsG,wBAAwB,GAAG,IAAI,CAACA,wBAAwB,CAAC1E,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC0D,kBAAkB,CAAC,GAC/Fe,cAAc,GACd,IAAI,CAACC,wBAAwB,CAAC1E,SAAS,CAAC,IAAI,CAAC0D,kBAAkB,CAAC;IACpE,IAAI,CAAC7F,QAAQ,CAAC8G,iBAAiB,CAAC,IAAI,CAACjB,kBAAkB,EAAE,IAAI,CAACC,gBAAgB,CAAC;IAC/E,IAAI,CAAC,IAAI,CAACC,YAAY,EAAE;MACpB,IAAI,CAACA,YAAY,GAAG,IAAIgB,YAAY,CAAC,IAAI,CAACpB,KAAK,EAAE,IAAI,CAAC3F,QAAQ,CAAC;IACnE;IACA,IAAI,CAAC+F,YAAY,CAAC7D,IAAI,CAAC,CAAC;EAC5B,CAAC;EACD7G,MAAM,CAACuB,cAAc,CAAC8D,gBAAgB,CAAC7E,SAAS,EAAE,mBAAmB,EAAE;IACnEqK,GAAG,EAAE,SAAAA,CAAA,EAAY;MACb,OAAO,IAAI,CAACN,oBAAoB;IACpC,CAAC;IACDS,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACF5F,gBAAgB,CAAC7E,SAAS,CAACgG,MAAM,GAAG,YAAY;IAC5C,IAAI,CAAC7B,QAAQ,CAAC8G,iBAAiB,CAAC,IAAI,CAAChB,gBAAgB,EAAE,IAAI,CAACA,gBAAgB,CAAC;IAC7E,IAAI,CAACD,kBAAkB,GAAG,IAAI;IAC9B,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,IAAI,CAACC,YAAY,EAAE;MACnB,IAAI,CAACA,YAAY,CAACiB,IAAI,CAAC,CAAC;IAC5B;IACA,IAAI,CAAChH,QAAQ,CAACiH,eAAe,CAAC,yBAAyB,CAAC;IACxDzH,mBAAmB,CAAC4C,2BAA2B,CAAC,IAAI,CAACpC,QAAQ,CAAC;EAClE,CAAC;EACDU,gBAAgB,CAAC7E,SAAS,CAACuB,MAAM,GAAG,YAAY;IAC5C,IAAI,CAAC,IAAI,CAACwE,SAAS,CAAC,CAAC,EAAE;MACnB;IACJ;IACA,IAAIgB,cAAc,GAAG,IAAI,CAAC5C,QAAQ,CAAC4C,cAAc;IACjD,IAAIC,YAAY,GAAG,IAAI,CAAC7C,QAAQ,CAAC6C,YAAY;IAC7C,IAAI,CAACgE,wBAAwB,GAAG,IAAI,CAACA,wBAAwB,CAAC1E,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC0D,kBAAkB,CAAC,GAC/F,IAAI,CAACgB,wBAAwB,CAAC1E,SAAS,CAAC,IAAI,CAAC2D,gBAAgB,CAAC;IAClE,IAAI,IAAI,CAACD,kBAAkB,KAAKjD,cAAc,IAAI,IAAI,CAACkD,gBAAgB,KAAKjD,YAAY,EAAE;MACtF,IAAI,CAAC7C,QAAQ,CAAC8G,iBAAiB,CAAClE,cAAc,EAAEA,cAAc,CAAC;IACnE;IACA,IAAI,CAACiD,kBAAkB,GAAG,IAAI;IAC9B,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAAC9F,QAAQ,CAACiH,eAAe,CAAC,yBAAyB,CAAC;IACxD,IAAI,IAAI,CAAClB,YAAY,EAAE;MACnB,IAAI,CAACA,YAAY,CAACiB,IAAI,CAAC,CAAC;IAC5B;EACJ,CAAC;EACD,OAAOtG,gBAAgB;AAC3B,CAAC,CAAC,CAAE;AACJ,IAAIC,iBAAiB,GAAG,aAAe,YAAY;EAC/C,SAASA,iBAAiBA,CAACuG,SAAS,EAAElH,QAAQ,EAAE;IAC5C,IAAIa,KAAK,GAAG,IAAI;IAChB,IAAI,CAAC+E,oBAAoB,GAAG,EAAE;IAC9B,IAAI,CAACuB,OAAO,GAAG,KAAK;IACpB,IAAI,CAACnH,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACoH,iBAAiB,GAAG1E,QAAQ,CAACpD,aAAa,CAAC,KAAK,CAAC;IACtD,IAAI,CAAC8H,iBAAiB,CAAClH,SAAS,CAACC,GAAG,CAAC,mCAAmC,CAAC;IACzE,IAAI,CAACiH,iBAAiB,CAACnG,gBAAgB,CAAC,WAAW,EAAE,UAAUU,KAAK,EAAE;MAAE,OAAOd,KAAK,CAACwG,uBAAuB,CAAC1F,KAAK,CAAC;IAAE,CAAC,CAAC;IACvH,IAAI,CAACyF,iBAAiB,CAACnG,gBAAgB,CAAC,UAAU,EAAE,UAAUU,KAAK,EAAE;MAAE,OAAOd,KAAK,CAACwG,uBAAuB,CAAC1F,KAAK,CAAC;IAAE,CAAC,CAAC;IACtH,IAAI,CAAC2F,uBAAuB,GAAG5E,QAAQ,CAACpD,aAAa,CAAC,MAAM,CAAC;IAC7D,IAAI,CAACiI,qBAAqB,GAAG7E,QAAQ,CAACpD,aAAa,CAAC,MAAM,CAAC;IAC3D,IAAI,CAAC8H,iBAAiB,CAACI,WAAW,CAAC,IAAI,CAACF,uBAAuB,CAAC;IAChE,IAAI,CAACF,iBAAiB,CAACI,WAAW,CAAC,IAAI,CAACD,qBAAqB,CAAC;IAC9D,IAAI,CAACD,uBAAuB,CAACG,KAAK,CAACC,OAAO,GAAG,KAAK;IAClD,IAAIC,aAAa,GAAGjG,MAAM,CAACkG,gBAAgB,CAAC,IAAI,CAAC5H,QAAQ,CAAC;IAC1D,IAAI,CAACoH,iBAAiB,CAACK,KAAK,CAACI,IAAI,GAAGF,aAAa,CAACE,IAAI;IACtD,IAAI,CAACT,iBAAiB,CAACK,KAAK,CAACK,SAAS,GAAG,GAAG,GAAGC,UAAU,CAACJ,aAAa,CAACK,QAAQ,CAAC,GAAG,IAAI;IACxFd,SAAS,CAACM,WAAW,CAAC,IAAI,CAACJ,iBAAiB,CAAC;EACjD;EACA/L,MAAM,CAACuB,cAAc,CAAC+D,iBAAiB,CAAC9E,SAAS,EAAE,mBAAmB,EAAE;IACpEqK,GAAG,EAAE,SAAAA,CAAA,EAAY;MACb,OAAO,IAAI,CAACN,oBAAoB;IACpC,CAAC;IACDS,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAClB,CAAC,CAAC;EACF3F,iBAAiB,CAAC9E,SAAS,CAACqG,IAAI,GAAG,UAAU0E,cAAc,EAAE;IACzD,IAAI,CAAChB,oBAAoB,GAAGgB,cAAc;IAC1C,IAAI,CAACU,uBAAuB,CAACW,WAAW,GAAGrB,cAAc,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,IAAI,CAACsB,aAAa,CAAC,IAAI,CAAClI,QAAQ,EAAE,EAAE,CAAC,GAAG,EAAE;IACjH,IAAI,CAACuH,qBAAqB,CAACU,WAAW,GAAGrB,cAAc;IACvD,IAAIuB,QAAQ,GAAG3I,mBAAmB,CAAC4I,mBAAmB,CAAC,IAAI,CAACpI,QAAQ,CAAC;IACrE,IAAIyH,KAAK,GAAG,IAAI,CAACL,iBAAiB,CAACK,KAAK;IACxCA,KAAK,CAACY,QAAQ,GAAG,IAAI;IACrB,IAAI,CAACjB,iBAAiB,CAAClH,SAAS,CAACC,GAAG,CAAC,2CAA2C,CAAC;IACjFsH,KAAK,CAACa,MAAM,GAAG,IAAI,CAACtI,QAAQ,CAACyH,KAAK,CAACa,MAAM,GAAG,CAAC;IAC7Cb,KAAK,CAACc,GAAG,GAAGJ,QAAQ,CAACI,GAAG,GAAG,IAAI;IAC/B,IAAIC,YAAY,GAAGL,QAAQ,CAACM,IAAI,GAAG,IAAI,CAACnB,uBAAuB,CAACoB,WAAW;IAC3E,IAAI,CAACjB,KAAK,CAACgB,IAAI,IAAIE,IAAI,CAACC,GAAG,CAACb,UAAU,CAACN,KAAK,CAACgB,IAAI,CAAC,GAAGD,YAAY,CAAC,GAAG,EAAE,EAAE;MACrEf,KAAK,CAACgB,IAAI,GAAGD,YAAY,GAAG,IAAI;IACpC;IACA,IAAI,CAACrB,OAAO,GAAG,IAAI;IACnB,IAAIQ,aAAa,GAAGjG,MAAM,CAACkG,gBAAgB,CAAC,IAAI,CAACR,iBAAiB,CAAC;IACnE,IAAIyB,UAAU,GAAGd,UAAU,CAACJ,aAAa,CAACkB,UAAU,CAAC;IACrD,IAAIC,UAAU,GAAGf,UAAU,CAACJ,aAAa,CAACmB,UAAU,CAAC;IACrD,IAAIC,aAAa,GAAGhB,UAAU,CAACJ,aAAa,CAACoB,aAAa,CAAC;IAC3D,IAAIC,KAAK,GAAGL,IAAI,CAACM,KAAK,CAAC,CAAC,IAAI,CAAC7B,iBAAiB,CAAC8B,YAAY,GAAGJ,UAAU,GAAGC,aAAa,IAAIF,UAAU,CAAC;IACvG,IAAIG,KAAK,GAAG,CAAC,EAAE;MACX,IAAIG,YAAY,GAAG,IAAI,CAAC/B,iBAAiB,CAACsB,WAAW;MACrDjB,KAAK,CAACY,QAAQ,GAAG,iBAAiB,GAAIW,KAAK,GAAGG,YAAY,GAAI,CAAC,GAAG,MAAM;IAC5E;IACA,IAAIC,IAAI,GAAG,IAAI,CAAChC,iBAAiB,CAACiC,qBAAqB,CAAC,CAAC;IACzD,IAAID,IAAI,CAACE,KAAK,GAAG5G,QAAQ,CAAC1E,IAAI,CAACuL,WAAW,GAAG,EAAE,EAAE;MAC7C9B,KAAK,CAACgB,IAAI,GAAG,OAAO,IAAIV,UAAU,CAACN,KAAK,CAACgB,IAAI,CAAC,IAAIW,IAAI,CAACE,KAAK,GAAG5G,QAAQ,CAAC1E,IAAI,CAACuL,WAAW,CAAC,CAAC,GAAG,YAAY;IAC7G;EACJ,CAAC;EACD5I,iBAAiB,CAAC9E,SAAS,CAACgG,MAAM,GAAG,YAAY;IAC7C,IAAI,IAAI,CAACsF,OAAO,EAAE;MACd3H,mBAAmB,CAACyC,eAAe,CAAC,IAAI,CAACjC,QAAQ,EAAE,IAAI,CAAC+B,iBAAiB,CAAC;MAC1EvC,mBAAmB,CAAC4C,2BAA2B,CAAC,IAAI,CAACpC,QAAQ,CAAC;MAC9D,IAAI,CAACgH,IAAI,CAAC,CAAC;IACf;EACJ,CAAC;EACDrG,iBAAiB,CAAC9E,SAAS,CAACuB,MAAM,GAAG,YAAY;IAC7C,IAAI,CAAC4J,IAAI,CAAC,CAAC;EACf,CAAC;EACDrG,iBAAiB,CAAC9E,SAAS,CAACmL,IAAI,GAAG,YAAY;IAC3C,IAAI,IAAI,CAACG,OAAO,EAAE;MACd,IAAI,CAACA,OAAO,GAAG,KAAK;MACpB,IAAI,CAACC,iBAAiB,CAAClH,SAAS,CAACkB,MAAM,CAAC,2CAA2C,CAAC;IACxF;EACJ,CAAC;EACDT,iBAAiB,CAAC9E,SAAS,CAAC+F,SAAS,GAAG,YAAY;IAChD,OAAO,IAAI,CAACuF,OAAO;EACvB,CAAC;EACDxG,iBAAiB,CAAC9E,SAAS,CAACwL,uBAAuB,GAAG,UAAU1F,KAAK,EAAE;IACnEA,KAAK,CAACG,cAAc,CAAC,CAAC;IACtBH,KAAK,CAAC6H,wBAAwB,CAAC,CAAC;IAChC,IAAI,CAAC3H,MAAM,CAAC,CAAC;EACjB,CAAC;EACDlB,iBAAiB,CAAC9E,SAAS,CAACqM,aAAa,GAAG,UAAUlI,QAAQ,EAAEyJ,SAAS,EAAE;IACvE,IAAInM,KAAK,GAAG0C,QAAQ,CAAC1C,KAAK;IAC1B,IAAIsF,cAAc,GAAG5C,QAAQ,CAAC4C,cAAc;IAC5C,KAAK,IAAIjG,CAAC,GAAGiG,cAAc,GAAG,CAAC,EAAEjG,CAAC,GAAGiG,cAAc,GAAG6G,SAAS,EAAE9M,CAAC,EAAE,EAAE;MAClE,IAAIA,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC+M,IAAI,CAACpM,KAAK,CAAC,EAAE,GAAGX,CAAC,CAAC,CAAC,EAAE;QACnC,OAAOW,KAAK,CAAC6E,SAAS,CAACxF,CAAC,GAAG,CAAC,EAAEiG,cAAc,CAAC;MACjD;IACJ;IACA,OAAO,EAAE;EACb,CAAC;EACD,OAAOjC,iBAAiB;AAC5B,CAAC,CAAC,CAAE;AACJ,IAAIoG,YAAY,GAAG,aAAe,YAAY;EAC1C,SAASA,YAAYA,CAAC9G,aAAa,EAAED,QAAQ,EAAE;IAC3C,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAAC2J,QAAQ,GAAGjH,QAAQ,CAACpD,aAAa,CAAC,KAAK,CAAC;IAC7C,IAAI,CAACqK,QAAQ,CAACzJ,SAAS,CAACC,GAAG,CAAC,sBAAsB,CAAC;IACnDF,aAAa,CAACuH,WAAW,CAAC,IAAI,CAACmC,QAAQ,CAAC;EAC5C;EACA5C,YAAY,CAAClL,SAAS,CAACqG,IAAI,GAAG,YAAY;IACtC,IAAI0H,gBAAgB,GAAGpK,mBAAmB,CAAC4I,mBAAmB,CAAC,IAAI,CAACpI,QAAQ,CAAC;IAC7E,IAAI6J,UAAU,GAAG,IAAI,CAACF,QAAQ,CAAClC,KAAK;IACpCoC,UAAU,CAACC,OAAO,GAAG,OAAO;IAC5BD,UAAU,CAACtB,GAAG,GAAGqB,gBAAgB,CAACrB,GAAG,GAAG,IAAI;IAC5CsB,UAAU,CAACpB,IAAI,GAAGmB,gBAAgB,CAACnB,IAAI,GAAG,IAAI;IAC9CoB,UAAU,CAACE,MAAM,GAAGH,gBAAgB,CAACG,MAAM,GAAG,IAAI;IAClDF,UAAU,CAACvB,MAAM,GAAG,IAAI,CAACtI,QAAQ,CAACyH,KAAK,CAACa,MAAM;IAC9CuB,UAAU,CAACG,eAAe,GAAGJ,gBAAgB,CAACK,SAAS,CAACC,UAAU;EACtE,CAAC;EACDnD,YAAY,CAAClL,SAAS,CAACmL,IAAI,GAAG,YAAY;IACtC,IAAI,CAAC2C,QAAQ,CAAClC,KAAK,CAACqC,OAAO,GAAG,MAAM;EACxC,CAAC;EACD,OAAO/C,YAAY;AACvB,CAAC,CAAC,CAAE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}