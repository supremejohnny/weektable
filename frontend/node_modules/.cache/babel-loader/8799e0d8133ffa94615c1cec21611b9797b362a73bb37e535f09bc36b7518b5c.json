{"ast":null,"code":"import { extend, select } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isGroupAdaptive, refreshForeignData, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { addRemoveEventListener, addFixedColumnBorder } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n *\n * @hidden\n */\nvar NormalEdit = /** @class */function () {\n  function NormalEdit(parent, serviceLocator, renderer) {\n    this.args = {};\n    this.currentVirtualData = {};\n    this.parent = parent;\n    this.renderer = renderer;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n  }\n  NormalEdit.prototype.clickHandler = function (e) {\n    var target = e.target;\n    var gObj = this.parent;\n    if (gObj.editSettings.showAddNewRow && isNullOrUndefined(gObj.element.querySelector('.' + literals.editedRow))) {\n      return;\n    }\n    if ((parentsUntil(target, literals.gridContent) && parentsUntil(parentsUntil(target, literals.gridContent), 'e-grid').id === gObj.element.id || gObj.frozenRows && parentsUntil(target, literals.headerContent) && !parentsUntil(target, 'e-columnheader')) && !parentsUntil(target, 'e-unboundcelldiv')) {\n      this.rowIndex = parentsUntil(target, literals.rowCell) ? parseInt(target.parentElement.getAttribute(literals.ariaRowIndex), 10) - 1 : -1;\n      if (gObj.isEdit) {\n        gObj.editModule.endEdit();\n      }\n    }\n  };\n  NormalEdit.prototype.dblClickHandler = function (e) {\n    if (parentsUntil(e.target, literals.rowCell) && this.parent.editSettings.allowEditOnDblClick && (!this.parent.editSettings.showAddNewRow || this.parent.editSettings.showAddNewRow && !parentsUntil(e.target, 'e-addedrow'))) {\n      this.parent.editModule.startEdit(parentsUntil(e.target, literals.row));\n    }\n  };\n  /**\n   * The function used to trigger editComplete\n   *\n   * @param {NotifyArgs} e - specifies the NotifyArgs\n   * @returns {void}\n   * @hidden\n   */\n  NormalEdit.prototype.editComplete = function (e) {\n    this.parent.isEdit = this.parent.editSettings.showAddNewRow ? true : false;\n    var action = 'action';\n    switch (e.requestType) {\n      case 'save':\n        if ((!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple') || !this.parent.isPersistSelection) && e[\"\" + action] !== 'edit' && (!this.parent.editSettings.showAddNewRow || this.parent.editSettings.showAddNewRow && e[\"\" + action] !== 'add')) {\n          if (this.parent.allowPaging && e['index'] > 0) {\n            e['index'] = this.parent.pageSettings.currentPage === Math.floor(e['index'] / this.parent.pageSettings.pageSize) + 1 ? e['index'] % this.parent.pageSettings.pageSize : -1;\n          }\n          if (this.parent.enableVirtualization && e['index'] > 0) {\n            this.parent.selectVirtualRowOnAdd = true;\n          }\n          this.parent.selectRow(e['index']);\n        }\n        this.parent.trigger(events.actionComplete, extend(e, {\n          requestType: 'save',\n          type: events.actionComplete\n        }));\n        this.parent.notify(events.closeEdit, {\n          requestType: 'save',\n          action: e[\"\" + action]\n        });\n        break;\n      case 'delete':\n        this.parent.trigger(events.actionComplete, extend(e, {\n          requestType: 'delete',\n          type: events.actionComplete\n        }));\n        if (!this.parent.isCheckBoxSelection && !(this.parent.enableInfiniteScrolling && (this.parent.childGrid || this.parent.detailTemplate))) {\n          this.parent.selectRow(this.editRowIndex);\n        }\n        this.parent.notify(events.closeEdit, {\n          requestType: 'delete',\n          action: e[\"\" + action]\n        });\n        break;\n    }\n  };\n  NormalEdit.prototype.getEditArgs = function (editedData, rowObj, isScroll) {\n    var primaryKeys = this.parent.getPrimaryKeyFieldNames();\n    var primaryKeyValues = [];\n    for (var i = 0; i < primaryKeys.length; i++) {\n      primaryKeyValues.push(getObject(primaryKeys[parseInt(i.toString(), 10)], editedData));\n    }\n    var args = {\n      primaryKey: primaryKeys,\n      primaryKeyValue: primaryKeyValues,\n      requestType: 'beginEdit',\n      rowData: editedData,\n      rowIndex: this.rowIndex,\n      type: 'edit',\n      cancel: false,\n      foreignKeyData: rowObj && rowObj.foreignKeyData,\n      target: undefined,\n      isScroll: isScroll\n    };\n    return args;\n  };\n  NormalEdit.prototype.startEdit = function (tr) {\n    var _this = this;\n    var gObj = this.parent;\n    this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute(literals.ariaRowIndex), 10) - 1;\n    if (gObj.enableVirtualization || gObj.enableColumnVirtualization || gObj.enableInfiniteScrolling) {\n      var selector = '.e-row[aria-rowindex=\"' + (this.rowIndex + 1) + '\"]';\n      var virtualRow = this.parent.element.querySelector(selector);\n      if (!virtualRow) {\n        return;\n      }\n    }\n    var e = {\n      data: undefined,\n      index: this.rowIndex,\n      isScroll: false\n    };\n    this.parent.notify(events.virtualScrollEditActionBegin, e);\n    if (isGroupAdaptive(gObj)) {\n      var rObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n      this.previousData = rObj.data;\n    } else if (this.parent.enableVirtualization || this.parent.enableColumnVirtualization || this.parent.enableInfiniteScrolling && (!this.previousData || this.parent.infiniteScrollSettings.enableCache)) {\n      this.previousData = e.data;\n    } else if (!this.parent.enableVirtualization) {\n      this.previousData = extend({}, {}, this.parent.getForeignKeyColumns().length || this.parent.allowGrouping && this.parent.groupSettings.columns.length ? this.parent.getRowObjectFromUID(tr.getAttribute('data-uid')).data : gObj.getCurrentViewRecords()[this.rowIndex], true);\n    }\n    var editedData = extend({}, {}, e.data || this.previousData, true);\n    this.uid = tr.getAttribute('data-uid');\n    var rowObj = gObj.getRowObjectFromUID(this.uid);\n    var args = this.getEditArgs(editedData, rowObj, e.isScroll);\n    args.row = tr;\n    if (!args.isScroll) {\n      this.parent.notify(events.createVirtualValidationForm, {\n        uid: this.uid,\n        prevData: this.previousData,\n        argsCreator: this.getEditArgs.bind(this),\n        renderer: this.renderer\n      });\n      gObj.trigger(events.beginEdit, args, function (begineditargs) {\n        begineditargs.type = 'actionBegin';\n        gObj.trigger(events.actionBegin, begineditargs, function (editargs) {\n          if (!editargs.cancel) {\n            _this.inlineEditHandler(editargs, tr);\n          }\n        });\n      });\n    } else {\n      this.inlineEditHandler(args, tr);\n    }\n  };\n  NormalEdit.prototype.disabledShowAddRow = function (disable, prevent) {\n    var addRow = this.parent.element.querySelector('.e-addedrow');\n    var inputs = [].slice.call(addRow ? addRow.querySelectorAll('.e-input') : []);\n    if (addRow && addRow.querySelector('.e-unboundcell')) {\n      var buttons = [].slice.call(addRow.querySelector('.e-unboundcell').querySelectorAll('.e-btn'));\n      for (var i = 0; i < buttons.length; i++) {\n        if (!disable) {\n          buttons[parseInt(i.toString(), 10)].classList.add('e-disabled');\n          buttons[parseInt(i.toString(), 10)].setAttribute('disabled', 'disabled');\n        } else {\n          buttons[parseInt(i.toString(), 10)].classList.remove('e-disabled');\n          buttons[parseInt(i.toString(), 10)].removeAttribute('disabled');\n        }\n      }\n    }\n    if (inputs.length) {\n      for (var i = 0; i < inputs.length; i++) {\n        var input = inputs[parseInt(i.toString(), 10)];\n        var uid = input.getAttribute('e-mappinguid');\n        var column = this.parent.getColumnByUid(uid);\n        var error = parentsUntil(input, 'e-rowcell').querySelector('.e-error');\n        if (error) {\n          error.classList.remove('e-error');\n        }\n        if (input.ej2_instances) {\n          if (prevent && isNullOrUndefined(column.defaultValue)) {\n            if (input.type === 'checkbox') {\n              input.ej2_instances[0].checked = false;\n              input.checked = false;\n            } else {\n              input.ej2_instances[0].value = null;\n              input.value = null;\n            }\n          }\n          if (input.type === 'checkbox' && !isNullOrUndefined(disable)) {\n            input.ej2_instances[0].disabled = disable && column.allowEditing ? false : true;\n          } else if (!isNullOrUndefined(disable)) {\n            input.ej2_instances[0].enabled = disable && column.allowEditing ? true : false;\n          }\n        } else {\n          if (prevent && input.value && input.value.length && isNullOrUndefined(column.defaultValue)) {\n            input.value = null;\n          }\n          if (!isNullOrUndefined(disable)) {\n            if (!disable) {\n              input.classList.add('e-disabled');\n              input.setAttribute('disabled', 'disabled');\n            } else if (column.allowEditing) {\n              input.classList.remove('e-disabled');\n              input.removeAttribute('disabled');\n            }\n          }\n        }\n      }\n    }\n  };\n  NormalEdit.prototype.inlineEditHandler = function (editargs, tr) {\n    var gObj = this.parent;\n    gObj.isEdit = true;\n    editargs.row = editargs.row ? editargs.row : tr;\n    if (gObj.editSettings.mode !== 'Dialog') {\n      gObj.clearSelection();\n    }\n    if (gObj.editSettings.mode === 'Dialog' && gObj.selectionModule) {\n      gObj.selectionModule.preventFocus = true;\n      editargs.row.classList.add('e-dlgeditrow');\n    }\n    this.renderer.update(editargs);\n    this.uid = tr.getAttribute('data-uid');\n    gObj.editModule.applyFormValidation();\n    if (gObj.editSettings.showAddNewRow && !tr.classList.contains('e-addedrow')) {\n      this.disabledShowAddRow(false, true);\n    }\n    editargs.type = 'actionComplete';\n    gObj.trigger(events.actionComplete, editargs);\n    if (gObj.editSettings.template) {\n      gObj.editModule.applyFormValidation(undefined, editargs.form.ej2_instances[0].rules);\n    }\n    this.args = editargs;\n    if (this.parent.allowTextWrap) {\n      this.parent.notify(events.freezeRender, {\n        case: 'textwrap'\n      });\n    }\n  };\n  NormalEdit.prototype.updateRow = function (index, data) {\n    var _this = this;\n    var gObj = this.parent;\n    this.editRowIndex = index;\n    var row = gObj.getRowByIndex(index);\n    if (!row) {\n      return;\n    }\n    var args = {\n      requestType: 'save',\n      action: 'edit',\n      type: events.actionBegin,\n      data: data,\n      cancel: false,\n      previousData: gObj.getCurrentViewRecords()[parseInt(index.toString(), 10)],\n      row: row\n    };\n    gObj.showSpinner();\n    if (gObj.enableInfiniteScrolling) {\n      this.uid = args.row.getAttribute('data-uid');\n      var index_1 = parseInt(args.row.getAttribute('aria-rowindex'), 10) - 1;\n      this.parent.notify(events.refreshInfiniteEditrowindex, {\n        index: index_1\n      });\n    }\n    gObj.notify(events.updateData, args);\n    if (args.promise) {\n      args.promise.then(function () {\n        return gObj.refresh();\n      }).catch(function (e) {\n        return _this.edFail(e);\n      });\n    } else {\n      if (!gObj.enableInfiniteScrolling) {\n        gObj.refresh();\n        if (gObj.enableVirtualization) {\n          gObj.contentModule.vgenerator.startIndex = null;\n        }\n      }\n    }\n  };\n  NormalEdit.prototype.editFormValidate = function () {\n    var gObj = this.parent;\n    var isValid = gObj.editModule.editFormValidate();\n    var validationArgs = {\n      prevData: this.previousData,\n      isValid: true,\n      editIdx: this.editRowIndex,\n      addIdx: this.addedRowIndex\n    };\n    gObj.notify(events.validateVirtualForm, validationArgs);\n    return isValid && validationArgs.isValid;\n  };\n  NormalEdit.prototype.endEdit = function () {\n    var _this = this;\n    var gObj = this.parent;\n    if (!this.parent.isEdit || !this.editFormValidate()) {\n      return;\n    }\n    var editedData = extend({}, {}, this.previousData, true);\n    var args = extend(this.args, {\n      requestType: 'save',\n      type: events.actionBegin,\n      data: editedData,\n      cancel: false,\n      previousData: this.previousData,\n      selectedRow: gObj.selectedRowIndex,\n      foreignKeyData: {}\n    });\n    var isDlg = gObj.editSettings.mode === 'Dialog';\n    var dlgWrapper = select('#' + gObj.element.id + '_dialogEdit_wrapper', document);\n    var dlgForm = isDlg ? dlgWrapper.querySelector('.e-gridform') : gObj.editSettings.showAddNewRow && gObj.element.querySelector('.' + literals.editedRow) ? gObj.element.querySelector('.' + literals.editedRow).getElementsByClassName('e-gridform')[0] : gObj.element.getElementsByClassName('e-gridform')[0];\n    var data = {\n      virtualData: extend({}, {}, this.previousData, true),\n      isAdd: false,\n      isScroll: false,\n      endEdit: true\n    };\n    this.parent.notify(events.getVirtualData, data);\n    if ((this.parent.enableVirtualization || this.parent.enableColumnVirtualization || this.parent.enableInfiniteScrolling) && this.parent.editSettings.mode === 'Normal' && Object.keys(data.virtualData).length) {\n      if (this.parent.isEdit) {\n        this.currentVirtualData = editedData = args.data = data.virtualData;\n      }\n    } else {\n      editedData = gObj.editModule.getCurrentEditedData(dlgForm, editedData);\n    }\n    var eleLength = [].slice.call(gObj.element.getElementsByClassName(literals.editedRow)).length;\n    if (!data.isAdd && Object.keys(this.currentVirtualData).length && !eleLength) {\n      eleLength = 1;\n    }\n    if (isDlg ? dlgWrapper.getElementsByClassName(literals.editedRow).length : eleLength) {\n      args.action = 'edit';\n      gObj.trigger(events.actionBegin, args, function (endEditArgs) {\n        if (endEditArgs.cancel) {\n          return;\n        }\n        if (_this.parent.loadingIndicator.indicatorType === 'Spinner') {\n          gObj.showSpinner();\n        }\n        if (_this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n          _this.parent.showMaskRow();\n        }\n        if (gObj.editSettings.showAddNewRow) {\n          _this.disabledShowAddRow(true);\n        }\n        gObj.notify(events.updateData, endEditArgs);\n      });\n    } else {\n      args.action = 'add';\n      args.selectedRow = 0;\n      args.index = this.addedRowIndex;\n      gObj.notify(events.virtualScrollEditSuccess, {});\n      gObj.notify(events.modelChanged, args);\n      this.addedRowIndex = null;\n      if (args.cancel) {\n        return;\n      }\n      if (this.parent.editSettings.showAddNewRow) {\n        this.parent.notify(events.showAddNewRowFocus, {});\n        if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {\n          this.disabledShowAddRow(true, true);\n        }\n      }\n    }\n  };\n  NormalEdit.prototype.destroyElements = function () {\n    var gObj = this.parent;\n    if (!gObj.editSettings.showAddNewRow || gObj.editSettings.showAddNewRow && gObj.element.querySelector('.e-editedrow')) {\n      gObj.editModule.destroyWidgets();\n      gObj.editModule.destroyForm();\n    }\n    this.parent.notify(events.dialogDestroy, {});\n  };\n  NormalEdit.prototype.editHandler = function (args) {\n    var _this = this;\n    if (args.promise) {\n      args.promise.then(function (e) {\n        return _this.edSucc(e, args);\n      }).catch(function (e) {\n        return _this.edFail(e);\n      });\n    } else {\n      this.editSuccess(args.data, args);\n    }\n    if (this.parent.editSettings.showAddNewRow) {\n      this.parent.editModule.applyFormValidation();\n    }\n  };\n  NormalEdit.prototype.edSucc = function (e, args) {\n    this.editSuccess(e, args);\n  };\n  NormalEdit.prototype.edFail = function (e) {\n    this.editFailure(e);\n  };\n  NormalEdit.prototype.updateCurrentViewData = function (data) {\n    if (!this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling) {\n      this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n    }\n  };\n  NormalEdit.prototype.requestSuccess = function (args) {\n    if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n      this.destroyElements();\n      this.stopEditStatus();\n      if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add' && this.parent.selectionModule) {\n        this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n      }\n    }\n  };\n  NormalEdit.prototype.editSuccess = function (e, args) {\n    if (!isNullOrUndefined(e) && !(e instanceof Array)) {\n      var rowData = 'rowData';\n      args.data = extend({}, extend({}, args[\"\" + rowData], args.data), e);\n    }\n    this.requestSuccess(args);\n    this.parent.trigger(events.beforeDataBound, args);\n    args.type = events.actionComplete;\n    this.parent.isEdit = this.parent.editSettings.showAddNewRow ? true : false;\n    this.refreshRow(args.data);\n    this.parent.notify(events.virtualScrollEditSuccess, args);\n    this.parent.editModule.checkLastRow(args.row);\n    this.parent.editModule.isLastRow = false;\n    this.updateCurrentViewData(args.data);\n    this.blazorTemplate();\n    this.editRowIndex = null;\n    if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && this.parent.groupSettings.showGroupedColumn) {\n      var dragRow = args.row;\n      var rows = this.parent.getRowsObject();\n      var dragRowUid = dragRow.getAttribute('data-uid');\n      var dragRowObject_1 = this.parent.getRowObjectFromUID(dragRowUid);\n      var _loop_1 = function (i) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var thisRef = this_1;\n        rows = rows.filter(function (data) {\n          var flag = data.isDataRow && data !== dragRowObject_1 && !isNullOrUndefined(data.data);\n          if (flag) {\n            var groupedColumn = thisRef.parent.groupSettings.columns[parseInt(i.toString(), 10)].split('.');\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var comparer1 = data.data[groupedColumn[0]];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var comparer2 = args.data[groupedColumn[0]];\n            for (var j = 1; j < groupedColumn.length; j++) {\n              comparer1 = comparer1[groupedColumn[j]];\n              comparer2 = comparer2[groupedColumn[j]];\n            }\n            return flag && comparer1 === comparer2;\n          } else {\n            return flag;\n          }\n        });\n      };\n      var this_1 = this;\n      for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n        _loop_1(i);\n      }\n      var dropRowObject = rows[0];\n      if (!isNullOrUndefined(dragRowObject_1) && !isNullOrUndefined(dropRowObject) && dragRowObject_1.parentUid !== dropRowObject.parentUid) {\n        this.parent['groupModule'].groupedRowReorder(dragRowObject_1, dropRowObject);\n      } else if (this.parent.aggregates.length) {\n        this.parent.aggregateModule.refresh(args.data, this.parent.groupSettings.enableLazyLoading ? args.row : undefined);\n      }\n    } else if (this.parent.aggregates.length) {\n      this.parent.aggregateModule.refresh(args.data, this.parent.groupSettings.enableLazyLoading ? args.row : undefined);\n    }\n    this.parent.trigger(events.actionComplete, args);\n    if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple') || !this.parent.isPersistSelection && !this.parent.selectionSettings.checkboxOnly) {\n      if (this.parent.editSettings.mode !== 'Dialog') {\n        this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n      }\n    }\n    this.parent.notify(events.closeEdit, {\n      requestType: args.requestType,\n      action: args.action\n    });\n    if (this.parent.aggregates.length && this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length && (this.parent.groupModule.getGroupAggregateTemplates(true).length || this.parent.groupModule.getGroupAggregateTemplates(false).length)) {\n      return;\n    }\n    this.parent.removeMaskRow();\n    this.parent.hideSpinner();\n  };\n  NormalEdit.prototype.closeForm = function () {\n    if (!this.cloneRow && this.parent.isEdit) {\n      this.stopEditStatus();\n    }\n    if (this.cloneRow) {\n      this.cloneRow.remove();\n      this.cloneRow = null;\n      this.originalRow.classList.remove('e-hiddenrow');\n    }\n  };\n  NormalEdit.prototype.blazorTemplate = function () {\n    var cols = this.parent.getColumns();\n    if (this.parent.editSettings.template && this.parent.editSettings.mode === 'Normal') {\n      updateBlazorTemplate(this.parent.element.id + 'editSettingsTemplate', 'Template', this.parent.editSettings);\n    }\n    for (var i = 0; i < cols.length; i++) {\n      var col = cols[parseInt(i.toString(), 10)];\n      if (col.template) {\n        updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n      }\n      if (col.editTemplate) {\n        updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col);\n      }\n    }\n  };\n  NormalEdit.prototype.editFailure = function (e) {\n    if (e.cancel) {\n      return;\n    }\n    this.parent.removeMaskRow();\n    this.parent.trigger(events.actionFailure, {\n      error: e\n    });\n    this.parent.hideSpinner();\n    this.parent.log('actionfailure', {\n      error: e\n    });\n  };\n  NormalEdit.prototype.needRefresh = function () {\n    var refresh = true;\n    var editedRow = this.parent.element.querySelector('.e-gridform');\n    if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache) && this.parent.editSettings.mode === 'Normal' && !editedRow) {\n      refresh = false;\n    }\n    return refresh;\n  };\n  NormalEdit.prototype.refreshRow = function (data) {\n    var row = new RowRenderer(this.serviceLocator, null, this.parent);\n    var rowObj = this.parent.getRowObjectFromUID(this.uid);\n    if (rowObj) {\n      rowObj.changes = data;\n      this.parent.notify(events.refreshVirtualCache, {\n        data: data\n      });\n      refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n      if (this.needRefresh()) {\n        row.refresh(rowObj, this.parent.getColumns(), true);\n      }\n      var tr = [].slice.call(this.parent.element.querySelectorAll('[aria-rowindex=\"' + (rowObj.index + 1) + '\"]'));\n      for (var i = 0; i < tr.length; i++) {\n        addFixedColumnBorder(tr[parseInt(i.toString(), 10)]);\n        if (this.parent.enableColumnVirtualization && tr[parseInt(i.toString(), 10)].querySelectorAll('.e-leftfreeze,.e-rightfreeze,.e-fixedfreeze').length) {\n          var cols = this.parent.getColumns();\n          var leftrightCells = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-leftfreeze,.e-rightfreeze.e-fixedfreeze'));\n          for (var j = 0; j < leftrightCells.length; j++) {\n            if (leftrightCells[parseInt(j.toString(), 10)].classList.contains('e-leftfreeze')) {\n              leftrightCells[parseInt(j.toString(), 10)].style.left = cols[parseInt(j.toString(), 10)].valueX - this.parent.translateX + 'px';\n            } else if (leftrightCells[parseInt(j.toString(), 10)].classList.contains('e-rightfreeze')) {\n              var idx = parseInt(leftrightCells[parseInt(j.toString(), 10)].getAttribute('aria-colindex'), 10) - 1;\n              leftrightCells[parseInt(j.toString(), 10)].style.right = cols[parseInt(idx.toString(), 10)].valueX + this.parent.translateX + 'px';\n            } else {\n              leftrightCells[parseInt(j.toString(), 10)].style.left = this.parent.leftrightColumnWidth('left') - this.parent.translateX + 'px';\n              leftrightCells[parseInt(j.toString(), 10)].style.right = this.parent.leftrightColumnWidth('right') + this.parent.translateX + 'px';\n            }\n          }\n        }\n      }\n    }\n  };\n  NormalEdit.prototype.closeEdit = function () {\n    var _this = this;\n    if (!this.parent.isEdit || this.parent.editSettings.showAddNewRow && this.parent.element.querySelector('.e-addedrow') && isNullOrUndefined(this.parent.element.querySelector('.' + literals.editedRow))) {\n      if (this.parent.editSettings.showAddNewRow) {\n        this.disabledShowAddRow(true, true);\n        this.parent.notify(events.showAddNewRowFocus, {});\n      }\n      return;\n    }\n    var gObj = this.parent;\n    var args = extend(this.args, {\n      requestType: 'cancel',\n      type: events.actionBegin,\n      cancel: false,\n      data: this.previousData,\n      selectedRow: gObj.selectedRowIndex\n    });\n    gObj.notify(events.virtualScrollEditCancel, args);\n    this.blazorTemplate();\n    gObj.trigger(events.actionBegin, args, function (closeEditArgs) {\n      if (closeEditArgs.cancel) {\n        return;\n      }\n      _this.parent.notify(events.destroyEditForm, args);\n      if (_this.parent.editSettings.mode === 'Dialog') {\n        _this.parent.notify(events.dialogDestroy, {});\n      }\n      closeEditArgs.type = events.actionComplete;\n      if (!_this.parent.editSettings.showAddNewRow) {\n        gObj.isEdit = false;\n      }\n      if (gObj.editSettings.mode !== 'Dialog') {\n        _this.refreshRow(closeEditArgs.data);\n      }\n      _this.stopEditStatus();\n      gObj.isEdit = false;\n      if (gObj.editSettings.showAddNewRow) {\n        _this.disabledShowAddRow(true);\n        gObj.editModule.applyFormValidation();\n        gObj.isEdit = true;\n      }\n      var isLazyLoad = gObj.groupSettings.enableLazyLoading && gObj.groupSettings.columns.length && !gObj.getContentTable().querySelector('tr.e-emptyrow');\n      if (!gObj.getContentTable().querySelector('tr.e-emptyrow') && !gObj.getContentTable().querySelector('tr.e-row') && !isLazyLoad) {\n        gObj.renderModule.emptyRow();\n      }\n      if (gObj.editSettings.mode !== 'Dialog') {\n        gObj.selectRow(_this.rowIndex);\n      }\n      gObj.trigger(events.actionComplete, closeEditArgs);\n    });\n  };\n  NormalEdit.prototype.addRecord = function (data, index) {\n    var _this = this;\n    var gObj = this.parent;\n    this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n    if (data) {\n      gObj.notify(events.modelChanged, {\n        requestType: 'save',\n        type: events.actionBegin,\n        data: data,\n        selectedRow: 0,\n        action: 'add',\n        index: index\n      });\n      return;\n    }\n    if (gObj.isEdit) {\n      return;\n    }\n    this.previousData = {};\n    this.uid = '';\n    var cols = gObj.getColumns();\n    var rowData = {\n      virtualData: {},\n      isScroll: false\n    };\n    if (!gObj.editSettings.showAddNewRow) {\n      this.parent.notify(events.getVirtualData, rowData);\n    }\n    for (var i = 0; i < cols.length; i++) {\n      if (rowData.isScroll) {\n        continue;\n      }\n      if (cols[parseInt(i.toString(), 10)].field) {\n        if (cols[parseInt(i.toString(), 10)].type === 'string') {\n          cols[parseInt(i.toString(), 10)].defaultValue = this.parent.sanitize(cols[parseInt(i.toString(), 10)].defaultValue);\n        }\n        DataUtil.setValue(cols[parseInt(i.toString(), 10)].field, cols[parseInt(i.toString(), 10)].defaultValue, this.previousData);\n      }\n    }\n    var args = {\n      cancel: false,\n      foreignKeyData: {},\n      requestType: 'add',\n      data: this.previousData,\n      type: events.actionBegin,\n      index: index,\n      rowData: this.previousData,\n      target: undefined,\n      isScroll: rowData.isScroll\n    };\n    if ((this.parent.enableVirtualization || this.parent.enableColumnVirtualization || this.parent.infiniteScrollSettings.enableCache) && Object.keys(rowData.virtualData).length) {\n      args.data = args.rowData = rowData.virtualData;\n    }\n    if (!args.isScroll) {\n      this.parent.notify(events.createVirtualValidationForm, {\n        uid: this.uid,\n        prevData: this.previousData,\n        argsCreator: this.getEditArgs.bind(this),\n        renderer: this.renderer\n      });\n      if (gObj.editSettings.showAddNewRow) {\n        this.inlineAddHandler(args);\n      } else {\n        gObj.trigger(events.actionBegin, args, function (addArgs) {\n          if (addArgs.cancel) {\n            return;\n          }\n          _this.inlineAddHandler(addArgs);\n        });\n      }\n    } else {\n      this.inlineAddHandler(args);\n    }\n  };\n  NormalEdit.prototype.inlineAddHandler = function (addArgs) {\n    var gObj = this.parent;\n    gObj.isEdit = true;\n    if (gObj.editSettings.mode !== 'Dialog') {\n      gObj.clearSelection();\n    }\n    this.renderer.addNew(addArgs);\n    gObj.editModule.applyFormValidation();\n    addArgs.type = events.actionComplete;\n    addArgs.row = gObj.element.querySelector('.' + literals.addedRow);\n    if (!gObj.editSettings.showAddNewRow) {\n      gObj.trigger(events.actionComplete, addArgs);\n    }\n    if (gObj.editSettings.template) {\n      gObj.editModule.applyFormValidation(undefined, addArgs.form.ej2_instances[0].rules);\n    }\n    this.args = addArgs;\n  };\n  NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n    this.editRowIndex = this.parent.selectedRowIndex;\n    if (data) {\n      data = data instanceof Array ? data : [data];\n      var gObj = this.parent;\n      var dataLen = Object.keys(data).length;\n      fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n      var _loop_2 = function (i) {\n        var _a;\n        var tmpRecord;\n        var contained = gObj.currentViewData.some(function (record) {\n          tmpRecord = record;\n          return data[parseInt(i.toString(), 10)] === getObject(fieldname, record) || data[parseInt(i.toString(), 10)] === record;\n        });\n        data[parseInt(i.toString(), 10)] = contained ? tmpRecord : data[parseInt(i.toString(), 10)][\"\" + fieldname] ? data[parseInt(i.toString(), 10)] : (_a = {}, _a[fieldname] = data[parseInt(i.toString(), 10)], _a);\n      };\n      for (var i = 0; i < dataLen; i++) {\n        _loop_2(i);\n      }\n    }\n    var args = {\n      requestType: 'delete',\n      type: events.actionBegin,\n      foreignKeyData: {},\n      data: data ? data : this.parent.getSelectedRecords(),\n      tr: this.parent.getSelectedRows(),\n      cancel: false\n    };\n    if (!isNullOrUndefined(this.parent.commandDelIndex)) {\n      args.data[0] = this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute('data-uid')).data;\n    }\n    this.parent.notify(events.modelChanged, args);\n  };\n  NormalEdit.prototype.stopEditStatus = function () {\n    var gObj = this.parent;\n    var addElements = [].slice.call(gObj.editSettings.showAddNewRow ? [] : gObj.element.getElementsByClassName(literals.addedRow));\n    var editElements = [].slice.call(gObj.element.getElementsByClassName(literals.editedRow));\n    for (var i = 0; i < addElements.length; i++) {\n      remove(addElements[parseInt(i.toString(), 10)]);\n    }\n    for (var i = 0; i < editElements.length; i++) {\n      editElements[parseInt(i.toString(), 10)].classList.remove(literals.editedRow);\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  NormalEdit.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.evtHandlers = [{\n      event: events.crudAction,\n      handler: this.editHandler\n    }, {\n      event: events.doubleTap,\n      handler: this.dblClickHandler\n    }, {\n      event: events.click,\n      handler: this.clickHandler\n    }, {\n      event: events.recordAdded,\n      handler: this.requestSuccess\n    }, {\n      event: events.dblclick,\n      handler: this.dblClickHandler\n    }, {\n      event: events.deleteComplete,\n      handler: this.editComplete\n    }, {\n      event: events.saveComplete,\n      handler: this.editComplete\n    }, {\n      event: events.rowModeChange,\n      handler: this.closeEdit\n    }, {\n      event: events.closeInline,\n      handler: this.closeForm\n    }];\n    addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  NormalEdit.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    addRemoveEventListener(this.parent, this.evtHandlers, false);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  NormalEdit.prototype.destroy = function () {\n    this.removeEventListener();\n    this.renderer.destroy();\n  };\n  return NormalEdit;\n}();\nexport { NormalEdit };","map":{"version":3,"names":["extend","select","remove","isNullOrUndefined","updateBlazorTemplate","parentsUntil","isGroupAdaptive","refreshForeignData","getObject","events","RowRenderer","DataUtil","addRemoveEventListener","addFixedColumnBorder","literals","NormalEdit","parent","serviceLocator","renderer","args","currentVirtualData","addEventListener","prototype","clickHandler","e","target","gObj","editSettings","showAddNewRow","element","querySelector","editedRow","gridContent","id","frozenRows","headerContent","rowIndex","rowCell","parseInt","parentElement","getAttribute","ariaRowIndex","isEdit","editModule","endEdit","dblClickHandler","allowEditOnDblClick","startEdit","row","editComplete","action","requestType","isCheckBoxSelection","selectionSettings","type","isPersistSelection","allowPaging","pageSettings","currentPage","Math","floor","pageSize","enableVirtualization","selectVirtualRowOnAdd","selectRow","trigger","actionComplete","notify","closeEdit","enableInfiniteScrolling","childGrid","detailTemplate","editRowIndex","getEditArgs","editedData","rowObj","isScroll","primaryKeys","getPrimaryKeyFieldNames","primaryKeyValues","i","length","push","toString","primaryKey","primaryKeyValue","rowData","cancel","foreignKeyData","undefined","tr","_this","enableColumnVirtualization","selector","virtualRow","data","index","virtualScrollEditActionBegin","rObj","getRowObjectFromUID","previousData","infiniteScrollSettings","enableCache","getForeignKeyColumns","allowGrouping","groupSettings","columns","getCurrentViewRecords","uid","createVirtualValidationForm","prevData","argsCreator","bind","beginEdit","begineditargs","actionBegin","editargs","inlineEditHandler","disabledShowAddRow","disable","prevent","addRow","inputs","slice","call","querySelectorAll","buttons","classList","add","setAttribute","removeAttribute","input","column","getColumnByUid","error","ej2_instances","defaultValue","checked","value","disabled","allowEditing","enabled","mode","clearSelection","selectionModule","preventFocus","update","applyFormValidation","contains","template","form","rules","allowTextWrap","freezeRender","case","updateRow","getRowByIndex","showSpinner","index_1","refreshInfiniteEditrowindex","updateData","promise","then","refresh","catch","edFail","contentModule","vgenerator","startIndex","editFormValidate","isValid","validationArgs","editIdx","addIdx","addedRowIndex","validateVirtualForm","selectedRow","selectedRowIndex","isDlg","dlgWrapper","document","dlgForm","getElementsByClassName","virtualData","isAdd","getVirtualData","Object","keys","getCurrentEditedData","eleLength","endEditArgs","loadingIndicator","indicatorType","showMaskRow","virtualScrollEditSuccess","modelChanged","showAddNewRowFocus","destroyElements","destroyWidgets","destroyForm","dialogDestroy","editHandler","edSucc","editSuccess","editFailure","updateCurrentViewData","requestSuccess","formObj","isDestroyed","stopEditStatus","Array","beforeDataBound","refreshRow","checkLastRow","isLastRow","blazorTemplate","showGroupedColumn","dragRow","rows","getRowsObject","dragRowUid","dragRowObject_1","_loop_1","thisRef","this_1","filter","flag","isDataRow","groupedColumn","split","comparer1","comparer2","j","dropRowObject","parentUid","groupedRowReorder","aggregates","aggregateModule","enableLazyLoading","checkboxOnly","groupModule","getGroupAggregateTemplates","removeMaskRow","hideSpinner","closeForm","cloneRow","originalRow","cols","getColumns","col","editTemplate","actionFailure","log","needRefresh","changes","refreshVirtualCache","leftrightCells","style","left","valueX","translateX","idx","right","leftrightColumnWidth","virtualScrollEditCancel","closeEditArgs","destroyEditForm","isLazyLoad","getContentTable","renderModule","emptyRow","addRecord","field","sanitize","setValue","inlineAddHandler","addArgs","addNew","addedRow","deleteRecord","fieldname","dataLen","_loop_2","_a","tmpRecord","contained","currentViewData","some","record","getSelectedRecords","getSelectedRows","commandDelIndex","addElements","editElements","evtHandlers","event","crudAction","handler","doubleTap","click","recordAdded","dblclick","deleteComplete","saveComplete","rowModeChange","closeInline","removeEventListener","destroy"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/normal-edit.js"],"sourcesContent":["import { extend, select } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isGroupAdaptive, refreshForeignData, getObject } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { addRemoveEventListener, addFixedColumnBorder } from '../base/util';\nimport * as literals from '../base/string-literals';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n *\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.args = {};\n        this.currentVirtualData = {};\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if (gObj.editSettings.showAddNewRow && isNullOrUndefined(gObj.element.querySelector('.' + literals.editedRow))) {\n            return;\n        }\n        if ((((parentsUntil(target, literals.gridContent) &&\n            parentsUntil(parentsUntil(target, literals.gridContent), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, literals.headerContent) && !parentsUntil(target, 'e-columnheader')))\n            && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, literals.rowCell)\n                ? parseInt(target.parentElement.getAttribute(literals.ariaRowIndex), 10) - 1 : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, literals.rowCell) && this.parent.editSettings.allowEditOnDblClick &&\n            (!this.parent.editSettings.showAddNewRow || (this.parent.editSettings.showAddNewRow &&\n                !parentsUntil(e.target, 'e-addedrow')))) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, literals.row));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = this.parent.editSettings.showAddNewRow ? true : false;\n        var action = 'action';\n        switch (e.requestType) {\n            case 'save':\n                if ((!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) && (e[\"\" + action] !== 'edit' && (!this.parent.editSettings.showAddNewRow ||\n                    (this.parent.editSettings.showAddNewRow && e[\"\" + action] !== 'add')))) {\n                    if (this.parent.allowPaging && e['index'] > 0) {\n                        e['index'] = this.parent.pageSettings.currentPage === Math.floor(e['index'] / this.parent.pageSettings.pageSize) + 1 ?\n                            e['index'] % this.parent.pageSettings.pageSize : -1;\n                    }\n                    if (this.parent.enableVirtualization && e['index'] > 0) {\n                        this.parent.selectVirtualRowOnAdd = true;\n                    }\n                    this.parent.selectRow(e['index']);\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                this.parent.notify(events.closeEdit, { requestType: 'save', action: e[\"\" + action] });\n                break;\n            case 'delete':\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                if (!this.parent.isCheckBoxSelection && !(this.parent.enableInfiniteScrolling\n                    && (this.parent.childGrid || this.parent.detailTemplate))) {\n                    this.parent.selectRow(this.editRowIndex);\n                }\n                this.parent.notify(events.closeEdit, { requestType: 'delete', action: e[\"\" + action] });\n                break;\n        }\n    };\n    NormalEdit.prototype.getEditArgs = function (editedData, rowObj, isScroll) {\n        var primaryKeys = this.parent.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(getObject(primaryKeys[parseInt(i.toString(), 10)], editedData));\n        }\n        var args = {\n            primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: editedData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData, target: undefined, isScroll: isScroll\n        };\n        return args;\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var _this = this;\n        var gObj = this.parent;\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute(literals.ariaRowIndex), 10) - 1;\n        if (gObj.enableVirtualization || gObj.enableColumnVirtualization || gObj.enableInfiniteScrolling) {\n            var selector = '.e-row[aria-rowindex=\"' + (this.rowIndex + 1) + '\"]';\n            var virtualRow = this.parent.element.querySelector(selector);\n            if (!virtualRow) {\n                return;\n            }\n        }\n        var e = { data: undefined, index: this.rowIndex, isScroll: false };\n        this.parent.notify(events.virtualScrollEditActionBegin, e);\n        if (isGroupAdaptive(gObj)) {\n            var rObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            this.previousData = rObj.data;\n        }\n        else if (this.parent.enableVirtualization || this.parent.enableColumnVirtualization ||\n            (this.parent.enableInfiniteScrolling && (!this.previousData || this.parent.infiniteScrollSettings.enableCache))) {\n            this.previousData = e.data;\n        }\n        else if (!this.parent.enableVirtualization) {\n            this.previousData = extend({}, {}, this.parent.getForeignKeyColumns().length || (this.parent.allowGrouping\n                && this.parent.groupSettings.columns.length) ? this.parent.getRowObjectFromUID(tr.getAttribute('data-uid')).data :\n                gObj.getCurrentViewRecords()[this.rowIndex], true);\n        }\n        var editedData = extend({}, {}, e.data || this.previousData, true);\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = this.getEditArgs(editedData, rowObj, e.isScroll);\n        args.row = tr;\n        if (!args.isScroll) {\n            this.parent.notify(events.createVirtualValidationForm, { uid: this.uid, prevData: this.previousData, argsCreator: this.getEditArgs.bind(this), renderer: this.renderer });\n            gObj.trigger(events.beginEdit, args, function (begineditargs) {\n                begineditargs.type = 'actionBegin';\n                gObj.trigger(events.actionBegin, begineditargs, function (editargs) {\n                    if (!editargs.cancel) {\n                        _this.inlineEditHandler(editargs, tr);\n                    }\n                });\n            });\n        }\n        else {\n            this.inlineEditHandler(args, tr);\n        }\n    };\n    NormalEdit.prototype.disabledShowAddRow = function (disable, prevent) {\n        var addRow = this.parent.element.querySelector('.e-addedrow');\n        var inputs = [].slice.call(addRow ? addRow.querySelectorAll('.e-input') : []);\n        if (addRow && addRow.querySelector('.e-unboundcell')) {\n            var buttons = [].slice.call(addRow.querySelector('.e-unboundcell').querySelectorAll('.e-btn'));\n            for (var i = 0; i < buttons.length; i++) {\n                if (!disable) {\n                    buttons[parseInt(i.toString(), 10)].classList.add('e-disabled');\n                    buttons[parseInt(i.toString(), 10)].setAttribute('disabled', 'disabled');\n                }\n                else {\n                    buttons[parseInt(i.toString(), 10)].classList.remove('e-disabled');\n                    buttons[parseInt(i.toString(), 10)].removeAttribute('disabled');\n                }\n            }\n        }\n        if (inputs.length) {\n            for (var i = 0; i < inputs.length; i++) {\n                var input = inputs[parseInt(i.toString(), 10)];\n                var uid = input.getAttribute('e-mappinguid');\n                var column = this.parent.getColumnByUid(uid);\n                var error = parentsUntil(input, 'e-rowcell').querySelector('.e-error');\n                if (error) {\n                    error.classList.remove('e-error');\n                }\n                if (input.ej2_instances) {\n                    if (prevent && isNullOrUndefined(column.defaultValue)) {\n                        if (input.type === 'checkbox') {\n                            input.ej2_instances[0].checked = false;\n                            input.checked = false;\n                        }\n                        else {\n                            input.ej2_instances[0].value = null;\n                            input.value = null;\n                        }\n                    }\n                    if (input.type === 'checkbox' && !isNullOrUndefined(disable)) {\n                        input.ej2_instances[0].disabled = disable && column.allowEditing ? false : true;\n                    }\n                    else if (!isNullOrUndefined(disable)) {\n                        input.ej2_instances[0].enabled = disable && column.allowEditing ? true : false;\n                    }\n                }\n                else {\n                    if (prevent && input.value && input.value.length &&\n                        isNullOrUndefined(column.defaultValue)) {\n                        input.value = null;\n                    }\n                    if (!isNullOrUndefined(disable)) {\n                        if (!disable) {\n                            input.classList.add('e-disabled');\n                            input.setAttribute('disabled', 'disabled');\n                        }\n                        else if (column.allowEditing) {\n                            input.classList.remove('e-disabled');\n                            input.removeAttribute('disabled');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    NormalEdit.prototype.inlineEditHandler = function (editargs, tr) {\n        var gObj = this.parent;\n        gObj.isEdit = true;\n        editargs.row = editargs.row ? editargs.row : tr;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            gObj.clearSelection();\n        }\n        if (gObj.editSettings.mode === 'Dialog' && gObj.selectionModule) {\n            gObj.selectionModule.preventFocus = true;\n            editargs.row.classList.add('e-dlgeditrow');\n        }\n        this.renderer.update(editargs);\n        this.uid = tr.getAttribute('data-uid');\n        gObj.editModule.applyFormValidation();\n        if (gObj.editSettings.showAddNewRow && !tr.classList.contains('e-addedrow')) {\n            this.disabledShowAddRow(false, true);\n        }\n        editargs.type = 'actionComplete';\n        gObj.trigger(events.actionComplete, editargs);\n        if (gObj.editSettings.template) {\n            gObj.editModule.applyFormValidation(undefined, editargs.form.ej2_instances[0].rules);\n        }\n        this.args = editargs;\n        if (this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var _this = this;\n        var gObj = this.parent;\n        this.editRowIndex = index;\n        var row = gObj.getRowByIndex(index);\n        if (!row) {\n            return;\n        }\n        var args = {\n            requestType: 'save', action: 'edit', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[parseInt(index.toString(), 10)],\n            row: row\n        };\n        gObj.showSpinner();\n        if (gObj.enableInfiniteScrolling) {\n            this.uid = args.row.getAttribute('data-uid');\n            var index_1 = parseInt(args.row.getAttribute('aria-rowindex'), 10) - 1;\n            this.parent.notify(events.refreshInfiniteEditrowindex, { index: index_1 });\n        }\n        gObj.notify(events.updateData, args);\n        if (args.promise) {\n            args.promise.then(function () { return gObj.refresh(); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            if (!gObj.enableInfiniteScrolling) {\n                gObj.refresh();\n                if (gObj.enableVirtualization) {\n                    gObj.contentModule.vgenerator.startIndex = null;\n                }\n            }\n        }\n    };\n    NormalEdit.prototype.editFormValidate = function () {\n        var gObj = this.parent;\n        var isValid = gObj.editModule.editFormValidate();\n        var validationArgs = {\n            prevData: this.previousData, isValid: true, editIdx: this.editRowIndex, addIdx: this.addedRowIndex\n        };\n        gObj.notify(events.validateVirtualForm, validationArgs);\n        return (isValid && validationArgs.isValid);\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var _this = this;\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !this.editFormValidate()) {\n            return;\n        }\n        var editedData = extend({}, {}, this.previousData, true);\n        var args = extend(this.args, {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        });\n        var isDlg = gObj.editSettings.mode === 'Dialog';\n        var dlgWrapper = select('#' + gObj.element.id + '_dialogEdit_wrapper', document);\n        var dlgForm = isDlg ? dlgWrapper.querySelector('.e-gridform') : gObj.editSettings.showAddNewRow &&\n            gObj.element.querySelector('.' + literals.editedRow) ? gObj.element.querySelector('.' + literals.editedRow).getElementsByClassName('e-gridform')[0] : gObj.element.getElementsByClassName('e-gridform')[0];\n        var data = {\n            virtualData: extend({}, {}, this.previousData, true), isAdd: false, isScroll: false, endEdit: true\n        };\n        this.parent.notify(events.getVirtualData, data);\n        if ((this.parent.enableVirtualization || this.parent.enableColumnVirtualization || this.parent.enableInfiniteScrolling)\n            && this.parent.editSettings.mode === 'Normal' && Object.keys(data.virtualData).length) {\n            if (this.parent.isEdit) {\n                this.currentVirtualData = editedData = args.data = data.virtualData;\n            }\n        }\n        else {\n            editedData = gObj.editModule.getCurrentEditedData(dlgForm, editedData);\n        }\n        var eleLength = [].slice.call(gObj.element.getElementsByClassName(literals.editedRow)).length;\n        if (!data.isAdd && Object.keys(this.currentVirtualData).length && !eleLength) {\n            eleLength = 1;\n        }\n        if (isDlg ? dlgWrapper.getElementsByClassName(literals.editedRow).length : eleLength) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args, function (endEditArgs) {\n                if (endEditArgs.cancel) {\n                    return;\n                }\n                if (_this.parent.loadingIndicator.indicatorType === 'Spinner') {\n                    gObj.showSpinner();\n                }\n                if (_this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                    _this.parent.showMaskRow();\n                }\n                if (gObj.editSettings.showAddNewRow) {\n                    _this.disabledShowAddRow(true);\n                }\n                gObj.notify(events.updateData, endEditArgs);\n            });\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.virtualScrollEditSuccess, {});\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n            if (this.parent.editSettings.showAddNewRow) {\n                this.parent.notify(events.showAddNewRowFocus, {});\n                if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {\n                    this.disabledShowAddRow(true, true);\n                }\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        if (!gObj.editSettings.showAddNewRow || (gObj.editSettings.showAddNewRow && gObj.element.querySelector('.e-editedrow'))) {\n            gObj.editModule.destroyWidgets();\n            gObj.editModule.destroyForm();\n        }\n        this.parent.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n        if (this.parent.editSettings.showAddNewRow) {\n            this.parent.editModule.applyFormValidation();\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        if (!this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling) {\n            this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n        }\n    };\n    NormalEdit.prototype.requestSuccess = function (args) {\n        if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n            this.destroyElements();\n            this.stopEditStatus();\n            if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add' &&\n                this.parent.selectionModule) {\n                this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n            }\n        }\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (!isNullOrUndefined(e) && !(e instanceof Array)) {\n            var rowData = 'rowData';\n            args.data = extend({}, extend({}, args[\"\" + rowData], args.data), e);\n        }\n        this.requestSuccess(args);\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = this.parent.editSettings.showAddNewRow ? true : false;\n        this.refreshRow(args.data);\n        this.parent.notify(events.virtualScrollEditSuccess, args);\n        this.parent.editModule.checkLastRow(args.row);\n        this.parent.editModule.isLastRow = false;\n        this.updateCurrentViewData(args.data);\n        this.blazorTemplate();\n        this.editRowIndex = null;\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns.length\n            && this.parent.groupSettings.showGroupedColumn) {\n            var dragRow = args.row;\n            var rows = this.parent.getRowsObject();\n            var dragRowUid = dragRow.getAttribute('data-uid');\n            var dragRowObject_1 = this.parent.getRowObjectFromUID(dragRowUid);\n            var _loop_1 = function (i) {\n                // eslint-disable-next-line @typescript-eslint/no-this-alias\n                var thisRef = this_1;\n                rows = rows.filter(function (data) {\n                    var flag = data.isDataRow && data !== dragRowObject_1 && !isNullOrUndefined(data.data);\n                    if (flag) {\n                        var groupedColumn = thisRef.parent.groupSettings.columns[parseInt(i.toString(), 10)].split('.');\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var comparer1 = data.data[groupedColumn[0]];\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var comparer2 = args.data[groupedColumn[0]];\n                        for (var j = 1; j < groupedColumn.length; j++) {\n                            comparer1 = comparer1[groupedColumn[j]];\n                            comparer2 = comparer2[groupedColumn[j]];\n                        }\n                        return flag && comparer1 === comparer2;\n                    }\n                    else {\n                        return flag;\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                _loop_1(i);\n            }\n            var dropRowObject = rows[0];\n            if (!isNullOrUndefined(dragRowObject_1) && !isNullOrUndefined(dropRowObject) &&\n                dragRowObject_1.parentUid !== dropRowObject.parentUid) {\n                this.parent['groupModule'].groupedRowReorder(dragRowObject_1, dropRowObject);\n            }\n            else if (this.parent.aggregates.length) {\n                this.parent.aggregateModule.refresh(args.data, this.parent.groupSettings.enableLazyLoading ? args.row : undefined);\n            }\n        }\n        else if (this.parent.aggregates.length) {\n            this.parent.aggregateModule.refresh(args.data, this.parent.groupSettings.enableLazyLoading ? args.row : undefined);\n        }\n        this.parent.trigger(events.actionComplete, args);\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection) && !this.parent.selectionSettings.checkboxOnly) {\n            if (this.parent.editSettings.mode !== 'Dialog') {\n                this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n            }\n        }\n        this.parent.notify(events.closeEdit, { requestType: args.requestType, action: args.action });\n        if (this.parent.aggregates.length && this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length\n            && (this.parent.groupModule.getGroupAggregateTemplates(true).length\n                || this.parent.groupModule.getGroupAggregateTemplates(false).length)) {\n            return;\n        }\n        this.parent.removeMaskRow();\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.closeForm = function () {\n        if (!this.cloneRow && this.parent.isEdit) {\n            this.stopEditStatus();\n        }\n        if (this.cloneRow) {\n            this.cloneRow.remove();\n            this.cloneRow = null;\n            this.originalRow.classList.remove('e-hiddenrow');\n        }\n    };\n    NormalEdit.prototype.blazorTemplate = function () {\n        var cols = this.parent.getColumns();\n        if (this.parent.editSettings.template && this.parent.editSettings.mode === 'Normal') {\n            updateBlazorTemplate(this.parent.element.id + 'editSettingsTemplate', 'Template', this.parent.editSettings);\n        }\n        for (var i = 0; i < cols.length; i++) {\n            var col = cols[parseInt(i.toString(), 10)];\n            if (col.template) {\n                updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n            }\n            if (col.editTemplate) {\n                updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col);\n            }\n        }\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        if (e.cancel) {\n            return;\n        }\n        this.parent.removeMaskRow();\n        this.parent.trigger(events.actionFailure, ({ error: e }));\n        this.parent.hideSpinner();\n        this.parent.log('actionfailure', { error: e });\n    };\n    NormalEdit.prototype.needRefresh = function () {\n        var refresh = true;\n        var editedRow = this.parent.element.querySelector('.e-gridform');\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && this.parent.editSettings.mode === 'Normal' && !editedRow) {\n            refresh = false;\n        }\n        return refresh;\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            this.parent.notify(events.refreshVirtualCache, { data: data });\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            if (this.needRefresh()) {\n                row.refresh(rowObj, this.parent.getColumns(), true);\n            }\n            var tr = [].slice.call(this.parent.element.querySelectorAll('[aria-rowindex=\"' + (rowObj.index + 1) + '\"]'));\n            for (var i = 0; i < tr.length; i++) {\n                addFixedColumnBorder(tr[parseInt(i.toString(), 10)]);\n                if (this.parent.enableColumnVirtualization &&\n                    tr[parseInt(i.toString(), 10)].querySelectorAll('.e-leftfreeze,.e-rightfreeze,.e-fixedfreeze').length) {\n                    var cols = this.parent.getColumns();\n                    var leftrightCells = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-leftfreeze,.e-rightfreeze.e-fixedfreeze'));\n                    for (var j = 0; j < leftrightCells.length; j++) {\n                        if (leftrightCells[parseInt(j.toString(), 10)].classList.contains('e-leftfreeze')) {\n                            leftrightCells[parseInt(j.toString(), 10)].style.left = (cols[parseInt(j.toString(), 10)].valueX - this.parent.translateX) + 'px';\n                        }\n                        else if (leftrightCells[parseInt(j.toString(), 10)].classList.contains('e-rightfreeze')) {\n                            var idx = parseInt(leftrightCells[parseInt(j.toString(), 10)].getAttribute('aria-colindex'), 10) - 1;\n                            leftrightCells[parseInt(j.toString(), 10)].style.right = ((cols[parseInt(idx.toString(), 10)].valueX + this.parent.translateX)) + 'px';\n                        }\n                        else {\n                            leftrightCells[parseInt(j.toString(), 10)].style.left = (this.parent.leftrightColumnWidth('left') -\n                                this.parent.translateX) + 'px';\n                            leftrightCells[parseInt(j.toString(), 10)].style.right = (this.parent.leftrightColumnWidth('right') +\n                                this.parent.translateX) + 'px';\n                        }\n                    }\n                }\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        var _this = this;\n        if (!this.parent.isEdit || (this.parent.editSettings.showAddNewRow && this.parent.element.querySelector('.e-addedrow') &&\n            isNullOrUndefined(this.parent.element.querySelector('.' + literals.editedRow)))) {\n            if (this.parent.editSettings.showAddNewRow) {\n                this.disabledShowAddRow(true, true);\n                this.parent.notify(events.showAddNewRowFocus, {});\n            }\n            return;\n        }\n        var gObj = this.parent;\n        var args = extend(this.args, {\n            requestType: 'cancel', type: events.actionBegin, cancel: false, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        });\n        gObj.notify(events.virtualScrollEditCancel, args);\n        this.blazorTemplate();\n        gObj.trigger(events.actionBegin, args, function (closeEditArgs) {\n            if (closeEditArgs.cancel) {\n                return;\n            }\n            _this.parent.notify(events.destroyEditForm, args);\n            if (_this.parent.editSettings.mode === 'Dialog') {\n                _this.parent.notify(events.dialogDestroy, {});\n            }\n            closeEditArgs.type = events.actionComplete;\n            if (!_this.parent.editSettings.showAddNewRow) {\n                gObj.isEdit = false;\n            }\n            if (gObj.editSettings.mode !== 'Dialog') {\n                _this.refreshRow(closeEditArgs.data);\n            }\n            _this.stopEditStatus();\n            gObj.isEdit = false;\n            if (gObj.editSettings.showAddNewRow) {\n                _this.disabledShowAddRow(true);\n                gObj.editModule.applyFormValidation();\n                gObj.isEdit = true;\n            }\n            var isLazyLoad = gObj.groupSettings.enableLazyLoading && gObj.groupSettings.columns.length\n                && !gObj.getContentTable().querySelector('tr.e-emptyrow');\n            if (!gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n                !gObj.getContentTable().querySelector('tr.e-row') && !isLazyLoad) {\n                gObj.renderModule.emptyRow();\n            }\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.selectRow(_this.rowIndex);\n            }\n            gObj.trigger(events.actionComplete, closeEditArgs);\n        });\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var _this = this;\n        var gObj = this.parent;\n        this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        var cols = gObj.getColumns();\n        var rowData = { virtualData: {}, isScroll: false };\n        if (!gObj.editSettings.showAddNewRow) {\n            this.parent.notify(events.getVirtualData, rowData);\n        }\n        for (var i = 0; i < cols.length; i++) {\n            if (rowData.isScroll) {\n                continue;\n            }\n            if (cols[parseInt(i.toString(), 10)].field) {\n                if (cols[parseInt(i.toString(), 10)].type === 'string') {\n                    cols[parseInt(i.toString(), 10)].defaultValue = this.parent\n                        .sanitize(cols[parseInt(i.toString(), 10)].defaultValue);\n                }\n                DataUtil.setValue(cols[parseInt(i.toString(), 10)].field, cols[parseInt(i.toString(), 10)].defaultValue, this.previousData);\n            }\n        }\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index,\n            rowData: this.previousData, target: undefined, isScroll: rowData.isScroll\n        };\n        if ((this.parent.enableVirtualization || this.parent.enableColumnVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && Object.keys(rowData.virtualData).length) {\n            args.data = args.rowData = rowData.virtualData;\n        }\n        if (!args.isScroll) {\n            this.parent.notify(events.createVirtualValidationForm, { uid: this.uid, prevData: this.previousData, argsCreator: this.getEditArgs.bind(this), renderer: this.renderer });\n            if (gObj.editSettings.showAddNewRow) {\n                this.inlineAddHandler(args);\n            }\n            else {\n                gObj.trigger(events.actionBegin, args, function (addArgs) {\n                    if (addArgs.cancel) {\n                        return;\n                    }\n                    _this.inlineAddHandler(addArgs);\n                });\n            }\n        }\n        else {\n            this.inlineAddHandler(args);\n        }\n    };\n    NormalEdit.prototype.inlineAddHandler = function (addArgs) {\n        var gObj = this.parent;\n        gObj.isEdit = true;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            gObj.clearSelection();\n        }\n        this.renderer.addNew(addArgs);\n        gObj.editModule.applyFormValidation();\n        addArgs.type = events.actionComplete;\n        addArgs.row = gObj.element.querySelector('.' + literals.addedRow);\n        if (!gObj.editSettings.showAddNewRow) {\n            gObj.trigger(events.actionComplete, addArgs);\n        }\n        if (gObj.editSettings.template) {\n            gObj.editModule.applyFormValidation(undefined, addArgs.form.ej2_instances[0].rules);\n        }\n        this.args = addArgs;\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_2 = function (i) {\n                var _a;\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[parseInt(i.toString(), 10)] === getObject(fieldname, record) || data[parseInt(i.toString(), 10)] === record;\n                });\n                data[parseInt(i.toString(), 10)] = contained ? tmpRecord : data[parseInt(i.toString(), 10)][\"\" + fieldname] ?\n                    data[parseInt(i.toString(), 10)] : (_a = {}, _a[fieldname] = data[parseInt(i.toString(), 10)], _a);\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_2(i);\n            }\n        }\n        var args = {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        };\n        if (!isNullOrUndefined(this.parent.commandDelIndex)) {\n            args.data[0] =\n                this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute('data-uid')).data;\n        }\n        this.parent.notify(events.modelChanged, args);\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var addElements = [].slice.call(gObj.editSettings.showAddNewRow ? [] :\n            gObj.element.getElementsByClassName(literals.addedRow));\n        var editElements = [].slice.call(gObj.element.getElementsByClassName(literals.editedRow));\n        for (var i = 0; i < addElements.length; i++) {\n            remove(addElements[parseInt(i.toString(), 10)]);\n        }\n        for (var i = 0; i < editElements.length; i++) {\n            editElements[parseInt(i.toString(), 10)].classList.remove(literals.editedRow);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.evtHandlers = [{ event: events.crudAction, handler: this.editHandler },\n            { event: events.doubleTap, handler: this.dblClickHandler },\n            { event: events.click, handler: this.clickHandler },\n            { event: events.recordAdded, handler: this.requestSuccess },\n            { event: events.dblclick, handler: this.dblClickHandler },\n            { event: events.deleteComplete, handler: this.editComplete },\n            { event: events.saveComplete, handler: this.editComplete },\n            { event: events.rowModeChange, handler: this.closeEdit },\n            { event: events.closeInline, handler: this.closeForm }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}