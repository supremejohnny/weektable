{"ast":null,"code":"import { EventHandler, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil, Global, frozenDirection, isChildColumn, applyStickyLeftRightPosition, groupCaptionRowLeftRightPos, addStickyColumnPosition } from '../base/util';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\nexport var resizeClassList = {\n  root: 'e-rhandler',\n  suppress: 'e-rsuppress',\n  icon: 'e-ricon',\n  helper: 'e-rhelper',\n  header: 'th.e-headercell',\n  cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n *\n * @hidden\n * @private\n */\nvar Resize = /** @class */function () {\n  /**\n   * Constructor for the Grid resize module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @hidden\n   */\n  function Resize(parent) {\n    this.tapped = false;\n    this.isDblClk = true;\n    /** @hidden */\n    this.resizeProcess = false;\n    this.isCancelAutoFit = false;\n    this.parent = parent;\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.widthService = new ColumnWidthService(parent);\n    this.addEventListener();\n  }\n  /**\n   * Resize by field names.\n   *\n   * @param  {string|string[]} fName - Defines the field name.\n   * @param  {number} startRowIndex - Specifies the start row index.\n   * @param  {number} endRowIndex - Specifies the end row index.\n   * @returns {void}\n   */\n  Resize.prototype.autoFitColumns = function (fName, startRowIndex, endRowIndex) {\n    var _this = this;\n    var columnName = fName === undefined || fName === null || fName.length <= 0 ? this.parent.getColumns().map(function (x) {\n      x.autoFit = true;\n      return x.field;\n    }) : typeof fName === 'string' ? [fName] : fName;\n    this.parent.isAutoFitColumns = true;\n    if (!isNullOrUndefined(fName) && typeof fName === 'object' && fName.length !== 0) {\n      fName.forEach(function (field) {\n        if (_this.parent.getColumnByField(field)) {\n          _this.parent.getColumnByField(field).autoFit = true;\n        }\n      });\n    } else if (typeof fName === 'string' && fName.trim() !== '') {\n      this.parent.getColumnByField(fName).autoFit = true;\n    }\n    if (this.parent.enableAdaptiveUI) {\n      this.parent.element.classList.add('e-grid-autofit');\n    }\n    this.findColumn(columnName, startRowIndex, endRowIndex);\n  };\n  Resize.prototype.autoFit = function () {\n    var cols = this.parent.getColumns();\n    var isMaxWidthCount = 0;\n    var newarray = cols.filter(function (c) {\n      if (!isNullOrUndefined(c.maxWidth)) {\n        isMaxWidthCount++;\n      }\n      return c.autoFit === true;\n    }).map(function (c) {\n      return c.field || c.headerText;\n    });\n    if (newarray.length > 0 && !this.parent.preventAutoFit) {\n      this.autoFitColumns(newarray);\n    }\n    var contentTable = this.parent.getContentTable();\n    if (this.parent.allowResizing && isMaxWidthCount && (this.parent.resizeSettings.mode === 'Auto' || this.parent.resizeSettings.mode === 'Normal' && !this.parent.autoFit && newarray.length === 0)) {\n      this.widthService.setWidthToTable(contentTable.style.width.indexOf('px') === -1);\n    } else if (this.parent.autoFit && this.parent.resizeSettings.mode === 'Auto') {\n      this.widthService.setWidthToTable();\n    }\n    if (contentTable.style.width.indexOf('px') !== -1 && contentTable.getBoundingClientRect().width < contentTable.parentElement.clientWidth) {\n      addClass([this.parent.getHeaderTable(), contentTable], ['e-tableborder']);\n    }\n  };\n  Resize.prototype.getCellElementsByColumnIndex = function (columnIndex) {\n    if (this.parent.frozenRows) {\n      return [].slice.call(this.parent.getHeaderTable().querySelectorAll(\"td.e-rowcell:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption):not(.e-detailcell)\")).concat([].slice.call(this.parent.getContentTable().querySelectorAll(\"td.e-rowcell:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption):not(.e-detailcell)\")));\n    } else {\n      return [].slice.call(this.parent.getContentTable().querySelectorAll(\"td.e-rowcell:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption):not(.e-detailcell)\"));\n    }\n  };\n  Resize.prototype.resizeColumn = function (fName, index, id, startRowIndex, endRowIndex) {\n    var gObj = this.parent;\n    var tWidth = 0;\n    var headerTable = gObj.getHeaderTable();\n    var contentTable = gObj.getContentTable();\n    var footerTable;\n    var headerDivTag = 'e-gridheader';\n    var contentDivTag = literals.gridContent;\n    var footerDivTag = literals.gridFooter;\n    var indentWidth = 0;\n    var uid = id ? id : this.parent.getUidByColumnField(fName);\n    var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n    var headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n    var contentTextClone = this.getCellElementsByColumnIndex(columnIndex);\n    var footerTextClone;\n    var columnIndexByField = this.parent.getColumnIndexByField(fName);\n    if (!isNullOrUndefined(gObj.getFooterContent())) {\n      footerTable = gObj.getFooterContentTable();\n    }\n    if (footerTable) {\n      footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n    }\n    var indentWidthClone = [].slice.call(headerTable.querySelector('tr').getElementsByClassName('e-grouptopleftcell'));\n    if (indentWidthClone.length > 0) {\n      for (var i = 0; i < indentWidthClone.length; i++) {\n        indentWidth += indentWidthClone[parseInt(i.toString(), 10)].offsetWidth;\n      }\n    }\n    var detailsElement = contentTable.querySelector('.e-detailrowcollapse') || contentTable.querySelector('.e-detailrowexpand');\n    if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n      indentWidth += detailsElement.offsetWidth;\n    }\n    var headerText = [headerTextClone];\n    var contentText = [];\n    var footerText = [];\n    if (footerTable) {\n      for (var i = 0; i < footerTextClone.length; i++) {\n        footerText[parseInt(i.toString(), 10)] = footerTextClone[parseInt(i.toString(), 10)].cloneNode(true);\n      }\n    }\n    for (var i = 0; i < contentTextClone.length; i++) {\n      contentText[parseInt(i.toString(), 10)] = contentTextClone[parseInt(i.toString(), 10)].cloneNode(true);\n    }\n    var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n    var wFooter = null;\n    var wContent = null;\n    if (gObj.getCurrentViewRecords().length) {\n      wContent = this.createTable(contentTable, contentText, contentDivTag, startRowIndex, endRowIndex);\n    }\n    if (footerText.length) {\n      wFooter = this.createTable(footerTable, footerText, footerDivTag);\n    }\n    var columnbyindex = gObj.getColumns()[parseInt(columnIndexByField.toString(), 10)];\n    var width = columnbyindex.width = formatUnit(Math.max(wHeader, wContent, wFooter));\n    var colMaxWidth = columnbyindex.maxWidth && parseFloat(columnbyindex.maxWidth.toString());\n    if (parseInt(width, 10) > colMaxWidth) {\n      columnbyindex.width = colMaxWidth;\n    }\n    this.widthService.setColumnWidth(gObj.getColumns()[parseInt(columnIndexByField.toString(), 10)]);\n    var result = gObj.getColumns().some(function (x) {\n      return (x.visible || gObj.groupSettings.columns.length) && (x.width === null || x.width === undefined || x.width.length <= 0);\n    });\n    if (result === false) {\n      var element = gObj.getColumns();\n      for (var i = 0; i < element.length; i++) {\n        if (element[parseInt(i.toString(), 10)].visible) {\n          tWidth = tWidth + parseFloat(element[parseInt(i.toString(), 10)].width);\n        }\n      }\n    }\n    var calcTableWidth = tWidth + indentWidth;\n    if (tWidth > 0) {\n      if (this.parent.detailTemplate || this.parent.childGrid) {\n        this.widthService.setColumnWidth(new Column({\n          width: '30px'\n        }));\n      }\n      if (this.parent.resizeSettings.mode === 'Auto') {\n        calcTableWidth = '100%';\n      }\n      headerTable.style.width = formatUnit(calcTableWidth);\n      contentTable.style.width = formatUnit(calcTableWidth);\n      if (!isNullOrUndefined(footerTable)) {\n        footerTable.style.width = formatUnit(calcTableWidth);\n      }\n    }\n    if (gObj.isFrozenGrid() && gObj.enableColumnVirtualization) {\n      this.widthService.refreshFrozenScrollbar();\n    }\n    var tableWidth = headerTable.offsetWidth;\n    var contentwidth = contentTable.parentElement.scrollWidth;\n    if (contentwidth > tableWidth) {\n      if (!isNullOrUndefined(contentTable.querySelector('.e-emptyrow'))) {\n        addClass([headerTable], ['e-tableborder']);\n        removeClass([contentTable], ['e-tableborder']);\n      } else {\n        addClass([headerTable, contentTable], ['e-tableborder']);\n      }\n      removeClass([gObj.element], ['e-left-shadow', 'e-right-shadow']);\n    } else {\n      removeClass([headerTable, contentTable], ['e-tableborder']);\n      if (gObj.getVisibleFrozenRightCount()) {\n        addClass([gObj.element], 'e-right-shadow');\n      }\n    }\n    if (!isNullOrUndefined(footerTable)) {\n      footerTable.classList.add('e-tableborder');\n    }\n  };\n  /**\n   * To destroy the resize\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Resize.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n    this.widthService = null;\n    this.unwireEvents();\n    this.removeEventListener();\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   * @private\n   */\n  Resize.prototype.getModuleName = function () {\n    return 'resize';\n  };\n  Resize.prototype.findColumn = function (fName, startRowIndex, endRowIndex) {\n    for (var i = 0; i < fName.length; i++) {\n      var fieldName = fName[parseInt(i.toString(), 10)];\n      var columnIndex = this.parent.getColumnIndexByField(fieldName);\n      var column = this.parent.getColumns()[parseInt(columnIndex.toString(), 10)];\n      if (columnIndex > -1 && !isNullOrUndefined(column) && column.visible === true) {\n        this.resizeColumn(fieldName, columnIndex, null, startRowIndex, endRowIndex);\n      }\n    }\n    if (this.parent.allowTextWrap) {\n      this.parent.notify(events.freezeRender, {\n        case: 'refreshHeight',\n        isModeChg: true\n      });\n    }\n    if (this.parent.isFrozenGrid()) {\n      this.refreshResizefrzCols(true, true);\n    }\n  };\n  /**\n   * To create table for autofit\n   *\n   * @param {Element} table - specifies the table\n   * @param {Element[]} text - specifies the text\n   * @param {string} tag - specifies the tag name\n   * @param  {number} startRowIndex - Specifies the start row index.\n   * @param  {number} endRowIndex - Specifies the end row index.\n   * @returns {number} returns the number\n   * @hidden\n   */\n  Resize.prototype.createTable = function (table, text, tag, startRowIndex, endRowIndex) {\n    if (startRowIndex === void 0) {\n      startRowIndex = 1;\n    }\n    if (endRowIndex === void 0) {\n      endRowIndex = text.length;\n    }\n    if (startRowIndex > endRowIndex) {\n      startRowIndex ^= endRowIndex;\n      endRowIndex ^= startRowIndex;\n      startRowIndex ^= endRowIndex;\n    }\n    var myTableDiv = this.parent.createElement('div');\n    var adaptiveClass = this.parent.enableAdaptiveUI ? ' e-bigger' : '';\n    myTableDiv.className = this.parent.element.className + adaptiveClass;\n    myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n    var mySubDiv = this.parent.createElement('div');\n    mySubDiv.className = tag;\n    var myTable = this.parent.createElement('table', {\n      attrs: {\n        role: 'grid'\n      }\n    });\n    myTable.className = table.className;\n    myTable.classList.add('e-resizetable');\n    myTable.style.cssText = 'table-layout: auto;width: auto';\n    var myTr = this.parent.createElement('tr');\n    for (var i = startRowIndex <= 0 ? 1 : startRowIndex; i <= (endRowIndex > text.length ? text.length : endRowIndex); i++) {\n      var tr = myTr.cloneNode();\n      tr.className = table.querySelector('tr').className;\n      tr.appendChild(text[parseInt((i - 1).toString(), 10)]);\n      myTable.appendChild(tr);\n    }\n    mySubDiv.appendChild(myTable);\n    myTableDiv.appendChild(mySubDiv);\n    document.body.appendChild(myTableDiv);\n    var offsetWidthValue = myTable.getBoundingClientRect().width;\n    document.body.removeChild(myTableDiv);\n    return Math.ceil(offsetWidthValue);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Resize.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n    this.parent.on(events.refreshResizePosition, this.refreshResizePosition, this);\n    this.parent.on(events.initialEnd, this.wireEvents, this);\n    this.parent.on(events.contentReady, this.autoFit, this);\n    this.parent.on(events.refreshHandlers, this.refreshHeight, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Resize.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.headerRefreshed, this.refreshHeight);\n    this.parent.off(events.refreshResizePosition, this.refreshResizePosition);\n    this.parent.off(events.initialEnd, this.wireEvents);\n    this.parent.off(events.refreshHandlers, this.refreshHeight);\n    this.parent.off(events.destroy, this.destroy);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Resize.prototype.render = function () {\n    this.unwireEvents();\n    this.wireEvents();\n    this.setHandlerHeight();\n  };\n  Resize.prototype.refreshHeight = function () {\n    if (this.parent.getHeaderTable()) {\n      var element = this.getResizeHandlers();\n      for (var i = 0; i < element.length; i++) {\n        if (element[parseInt(i.toString(), 10)].parentElement.offsetHeight > 0) {\n          element[parseInt(i.toString(), 10)].style.height = '100%';\n        }\n      }\n      this.setHandlerHeight();\n    }\n  };\n  Resize.prototype.wireEvents = function () {\n    EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart, this);\n    EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n  };\n  Resize.prototype.unwireEvents = function () {\n    EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart);\n    EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n  };\n  Resize.prototype.getResizeHandlers = function () {\n    return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.root));\n  };\n  Resize.prototype.setHandlerHeight = function () {\n    var element = [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.suppress));\n    for (var i = 0; i < element.length; i++) {\n      element[parseInt(i.toString(), 10)].style.height = '100%';\n    }\n  };\n  Resize.prototype.callAutoFit = function (e) {\n    if (Browser.isDevice && typeof e.preventDefault === 'function' && this.isDblClk) {\n      e.preventDefault();\n    }\n    if (e.target.classList.contains('e-rhandler') && !this.isCancelAutoFit) {\n      var col = this.getTargetColumn(e);\n      if (col.columns) {\n        return;\n      }\n      this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n      if (this.parent.isFrozenGrid()) {\n        this.refreshResizefrzCols(true, true);\n      }\n      var header = closest(e.target, resizeClassList.header);\n      header.classList.add('e-resized');\n    }\n  };\n  Resize.prototype.touchResizeStart = function (e) {\n    if (!Global.timer) {\n      Global.timer = setTimeout(function () {\n        Global.timer = null;\n      }, 300);\n      return this.resizeStart(e);\n    } else {\n      clearTimeout(Global.timer);\n      Global.timer = null;\n      this.callAutoFit(e);\n    }\n  };\n  Resize.prototype.resizeStart = function (e) {\n    var _this = this;\n    if (e.target.classList.contains('e-rhandler')) {\n      this.isCancelAutoFit = false;\n      var args = {\n        e: e,\n        column: this.getTargetColumn(e)\n      };\n      this.parent.trigger(events.resizeStart, args, function (args) {\n        if (args.cancel || _this.parent.isEdit) {\n          _this.cancelResizeAction();\n          _this.isCancelAutoFit = true;\n          return;\n        }\n      });\n      if (!this.isCancelAutoFit) {\n        if (!this.helper) {\n          if (this.getScrollBarWidth() === 0) {\n            this.resizeProcess = true;\n            for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n              var col = _a[_i];\n              this.widthService.setColumnWidth(col);\n            }\n            if (this.parent.allowGrouping) {\n              for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                this.widthService.setColumnWidth(new Column({\n                  width: '30px'\n                }), i);\n              }\n            }\n            if (this.parent.isRowDragable()) {\n              this.widthService.setColumnWidth(new Column({\n                width: '30px'\n              }));\n            }\n            this.widthService.setWidthToTable();\n            this.resizeProcess = false;\n          }\n          this.refreshStackedColumnWidth();\n          this.element = e.target;\n          this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n          this.appendHelper();\n          this.column = this.getTargetColumn(e);\n          this.pageX = this.getPointX(e);\n          if (this.column.getFreezeTableName() === literals.frozenRight) {\n            if (this.parent.enableRtl) {\n              this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0) - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n            } else {\n              this.minMove = parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString()) - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n            }\n          } else if (this.parent.enableRtl) {\n            this.minMove = parseFloat(this.column.width.toString()) - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n          } else {\n            this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0) - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n          }\n          this.minMove += this.pageX;\n        }\n        EventHandler.add(document, Browser.touchEndEvent, this.resizeEnd, this);\n        EventHandler.add(this.parent.element, Browser.touchMoveEvent, this.resizing, this);\n        if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n          this.helper.classList.add(resizeClassList.icon);\n          EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n          EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n        } else {\n          this.updateCursor('add');\n        }\n      }\n    }\n  };\n  Resize.prototype.cancelResizeAction = function (removeEvents) {\n    if (removeEvents) {\n      EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n      EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n      this.updateCursor('remove');\n    }\n    if (Browser.isDevice && !isNullOrUndefined(this.helper)) {\n      EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n      EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n    }\n    if (!isNullOrUndefined(this.helper)) {\n      detach(this.helper);\n    }\n    this.refresh();\n  };\n  Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n    if (minWidth && width < minWidth) {\n      return minWidth;\n    } else if (maxWidth && width > maxWidth) {\n      return maxWidth;\n    } else {\n      return width;\n    }\n  };\n  Resize.prototype.updateResizeEleHeight = function () {\n    var elements = [].slice.call(this.parent.getHeaderContent().getElementsByClassName('e-rhandler'));\n    for (var i = 0; i < elements.length; i++) {\n      elements[parseInt(i.toString(), 10)].style.height = this.element.parentElement.offsetHeight + 'px';\n    }\n  };\n  Resize.prototype.getColData = function (column, mousemove) {\n    return {\n      width: parseFloat(isNullOrUndefined(this.widthService.getWidth(column)) || this.widthService.getWidth(column) === 'auto' ? '0' : this.widthService.getWidth(column).toString()) + mousemove,\n      minWidth: column.minWidth ? parseFloat(column.minWidth.toString()) : null,\n      maxWidth: column.maxWidth ? parseFloat(column.maxWidth.toString()) : null\n    };\n  };\n  Resize.prototype.refreshResizeFixedCols = function (pos) {\n    var cols = this.parent.getColumns();\n    var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n    var th = [].slice.call(this.parent.getHeaderContent().querySelector('tbody').querySelectorAll('.e-fixedfreeze')).concat([].slice.call(this.parent.getContent().querySelectorAll('.e-fixedfreeze')));\n    for (var i = 0; i < th.length; i++) {\n      var node = th[parseInt(i.toString(), 10)];\n      var column = void 0;\n      if (node.classList.contains('e-summarycell')) {\n        var uid = node.getAttribute('e-mappinguid');\n        column = this.parent.getColumnByUid(uid);\n      } else {\n        var index = parseInt(node.getAttribute('aria-colindex'), 10) - 1;\n        column = cols[parseInt(index.toString(), 10)];\n      }\n      var width = 0;\n      if (pos === 'Left') {\n        if (this.parent.getVisibleFrozenLeftCount()) {\n          width = this.parent.getIndentCount() * 30;\n        } else if (this.parent.getFrozenMode() === 'Right') {\n          width = this.parent.groupSettings.columns.length * 30;\n        }\n        for (var j = 0; j < cols.length; j++) {\n          if (column.index > cols[parseInt(j.toString(), 10)].index) {\n            if (column.uid === cols[parseInt(j.toString(), 10)].uid) {\n              break;\n            }\n            if (cols[parseInt(j.toString(), 10)].freeze === 'Left' || cols[parseInt(j.toString(), 10)].isFrozen || cols[parseInt(j.toString(), 10)].freeze === 'Fixed') {\n              if (cols[parseInt(j.toString(), 10)].visible) {\n                width += parseFloat(cols[parseInt(j.toString(), 10)].width.toString());\n              }\n            }\n          }\n        }\n        applyStickyLeftRightPosition(node, (width === 0 ? width : width - 1) - translateX, this.parent.enableRtl, 'Left');\n      }\n      if (pos === 'Right') {\n        width = this.parent.getFrozenMode() === 'Right' && this.parent.isRowDragable() ? 30 : 0;\n        for (var j = cols.length - 1; j >= 0; j--) {\n          if (column.uid === cols[parseInt(j.toString(), 10)].uid) {\n            break;\n          }\n          if (cols[parseInt(j.toString(), 10)].freeze === 'Right' || cols[parseInt(j.toString(), 10)].freeze === 'Fixed') {\n            if (cols[parseInt(j.toString(), 10)].visible) {\n              width += parseFloat(cols[parseInt(j.toString(), 10)].width.toString());\n            }\n          }\n        }\n        var colSpanwidth = 0;\n        if (node.colSpan > 1) {\n          colSpanwidth = this.calculateColspanWidth(cols, node, column.index);\n        }\n        applyStickyLeftRightPosition(node, width - colSpanwidth + translateX, this.parent.enableRtl, 'Right');\n      }\n    }\n  };\n  Resize.prototype.calculateColspanWidth = function (cols, node, index) {\n    var width = 0;\n    for (var j = index + 1; j < index + node.colSpan; j++) {\n      width += parseInt(cols[parseInt(j.toString(), 10)].width.toString(), 10);\n    }\n    return width;\n  };\n  Resize.prototype.refreshResizePosition = function () {\n    this.refreshResizefrzCols(true);\n  };\n  Resize.prototype.refreshResizefrzCols = function (freezeRefresh, isAutoFitCol) {\n    var _this = this;\n    var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n    if (freezeRefresh || this.column.freeze === 'Left' || this.column.isFrozen || this.column.columns && frozenDirection(this.column) === 'Left') {\n      var width_1 = this.parent.getIndentCount() * 30;\n      var columns = this.parent.getColumns().filter(function (col) {\n        return col.freeze === 'Left' || col.isFrozen;\n      });\n      if (!freezeRefresh || isAutoFitCol) {\n        this.frzHdrRefresh('Left');\n      }\n      for (var i = 0; i < columns.length; i++) {\n        if (freezeRefresh || columns[parseInt(i.toString(), 10)].index > this.column.index) {\n          var elements = [];\n          if (this.parent.frozenRows) {\n            elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]')).concat([].slice.call(this.parent.getContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]')));\n          } else {\n            elements = [].slice.call(this.parent.getContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]'));\n          }\n          elements.filter(function (cell) {\n            applyStickyLeftRightPosition(cell, width_1 - translateX, _this.parent.enableRtl, 'Left');\n          });\n          if (this.parent.enableColumnVirtualization) {\n            columns[parseInt(i.toString(), 10)].valueX = width_1;\n          }\n        }\n        if (columns[parseInt(i.toString(), 10)].visible) {\n          width_1 += parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n        }\n      }\n      this.refreshResizeFixedCols('Left');\n    }\n    if (freezeRefresh || this.column.freeze === 'Right' || this.column.columns && frozenDirection(this.column) === 'Right') {\n      var width_2 = this.parent.getFrozenMode() === 'Right' && this.parent.isRowDragable() ? 30 : 0;\n      var columns_1 = this.parent.getColumns();\n      if (!freezeRefresh || isAutoFitCol) {\n        this.frzHdrRefresh('Right');\n      }\n      var columnsRight = columns_1.filter(function (col) {\n        return col.freeze === 'Right';\n      });\n      var _loop_1 = function (i) {\n        var elements = [];\n        if (this_1.parent.frozenRows) {\n          elements = [].slice.call(this_1.parent.getHeaderContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]')).concat([].slice.call(this_1.parent.getContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]')));\n        } else {\n          elements = [].slice.call(this_1.parent.getContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]'));\n        }\n        elements.filter(function (cell) {\n          var colSpanwidth = 0;\n          if (cell.colSpan > 1) {\n            colSpanwidth = _this.calculateColspanWidth(columns_1, cell, columns_1[parseInt(i.toString(), 10)].index);\n          }\n          applyStickyLeftRightPosition(cell, width_2 - colSpanwidth + translateX, _this.parent.enableRtl, 'Right');\n        });\n        if (this_1.parent.enableColumnVirtualization) {\n          columns_1[parseInt(i.toString(), 10)].valueX = width_2;\n        }\n        if (columns_1[parseInt(i.toString(), 10)].visible) {\n          width_2 = width_2 + parseFloat(columns_1[parseInt(i.toString(), 10)].width.toString());\n        }\n      };\n      var this_1 = this;\n      for (var i = columns_1.length - 1; i >= columns_1.length - columnsRight.length; i--) {\n        _loop_1(i);\n      }\n      this.refreshResizeFixedCols('Right');\n    }\n    if (this.column && (this.column.freeze === 'Fixed' || this.column.columns && frozenDirection(this.column) === 'Fixed')) {\n      this.refreshResizeFixedCols('Left');\n      this.refreshResizeFixedCols('Right');\n      this.frzHdrRefresh('Left');\n      this.frzHdrRefresh('Right');\n    }\n    if (this.parent.groupSettings.columns.length && this.parent.aggregates.length && this.parent.getContent().querySelector('.e-groupcaptionrow')) {\n      this.refreshGroupCaptionRow();\n    }\n  };\n  Resize.prototype.refreshGroupCaptionRow = function () {\n    var capRow = [].slice.call(this.parent.getContent().querySelectorAll('.e-groupcaptionrow'));\n    for (var i = 0; i < capRow.length; i++) {\n      var tr = capRow[parseInt(i.toString(), 10)];\n      if (tr.querySelector('.e-summarycell')) {\n        groupCaptionRowLeftRightPos(tr, this.parent);\n      }\n    }\n  };\n  Resize.prototype.frzHdrRefresh = function (pos) {\n    var _this = this;\n    var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n    if (pos === 'Left') {\n      var tr = [].slice.call(this.parent.getHeaderContent().querySelector('thead').querySelectorAll('tr'));\n      for (var i = 0; i < tr.length; i++) {\n        var th = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-leftfreeze,.e-fixedfreeze'));\n        var _loop_2 = function (j) {\n          var node = th[parseInt(j.toString(), 10)];\n          if (node.classList.contains('e-rowdragheader') || node.classList.contains('e-dragheadercell') || node.classList.contains('e-grouptopleftcell')) {\n            return \"continue\";\n          }\n          var column = this_2.getParticularCol(node);\n          var cols = this_2.parent.getColumns();\n          var width = 0;\n          var summarycell = [];\n          if (this_2.parent.aggregates.length && this_2.parent.getFooterContent()) {\n            if (this_2.parent.getContent().querySelectorAll('.e-summaryrow').length) {\n              var summaryRows = [].slice.call(this_2.parent.getContent().querySelectorAll('.e-summaryrow'));\n              summaryRows.filter(function (row) {\n                summarycell.push(row.querySelector('[e-mappinguid=\"' + column.uid + '\"]'));\n              });\n            }\n            summarycell = summarycell.concat([].slice.call(this_2.parent.getFooterContent().querySelectorAll('[e-mappinguid=\"' + column.uid + '\"]')));\n          }\n          if (node.classList.contains('e-fixedfreeze')) {\n            if (this_2.parent.getVisibleFrozenLeftCount()) {\n              width = this_2.parent.getIndentCount() * 30;\n            } else if (this_2.parent.getFrozenMode() === 'Right') {\n              width = this_2.parent.groupSettings.columns.length * 30;\n            }\n            for (var w = 0; w < cols.length; w++) {\n              if (column.index > cols[parseInt(w.toString(), 10)].index) {\n                if (column.uid === cols[parseInt(w.toString(), 10)].uid) {\n                  break;\n                }\n                if (cols[parseInt(w.toString(), 10)].freeze === 'Left' || cols[parseInt(w.toString(), 10)].isFrozen || cols[parseInt(w.toString(), 10)].freeze === 'Fixed') {\n                  if (cols[parseInt(w.toString(), 10)].visible) {\n                    width += parseInt(cols[parseInt(w.toString(), 10)].width.toString(), 10);\n                  }\n                }\n              }\n            }\n            if (summarycell && summarycell.length) {\n              summarycell.filter(function (cell) {\n                applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n              });\n            }\n            applyStickyLeftRightPosition(node, (width === 0 ? width : width - 1) - translateX, this_2.parent.enableRtl, 'Left');\n          } else {\n            width = this_2.parent.getIndentCount() * 30;\n            if (column.index === 0) {\n              if (summarycell && summarycell.length) {\n                summarycell.filter(function (cell) {\n                  applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                });\n              }\n              applyStickyLeftRightPosition(node, width - translateX, this_2.parent.enableRtl, 'Left');\n              if (this_2.parent.enableColumnVirtualization) {\n                column.valueX = width;\n              }\n            } else {\n              for (var k = 0; k < cols.length; k++) {\n                if (column.index < cols[parseInt(k.toString(), 10)].index || column.uid === cols[parseInt(k.toString(), 10)].uid) {\n                  break;\n                }\n                if (cols[parseInt(k.toString(), 10)].visible) {\n                  width += parseInt(cols[parseInt(k.toString(), 10)].width.toString(), 10);\n                }\n              }\n              if (summarycell && summarycell.length) {\n                summarycell.filter(function (cell) {\n                  applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                });\n              }\n              applyStickyLeftRightPosition(node, width - translateX, this_2.parent.enableRtl, 'Left');\n              if (this_2.parent.enableColumnVirtualization) {\n                column.valueX = width;\n              }\n            }\n            addStickyColumnPosition(this_2.parent, column, node);\n          }\n        };\n        var this_2 = this;\n        for (var j = 0; j < th.length; j++) {\n          _loop_2(j);\n        }\n      }\n    }\n    if (pos === 'Right') {\n      var tr = [].slice.call(this.parent.getHeaderContent().querySelector('thead').querySelectorAll('tr'));\n      for (var i = 0; i < tr.length; i++) {\n        var th = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-rightfreeze, .e-fixedfreeze'));\n        var _loop_3 = function (j) {\n          var node = th[parseInt(j.toString(), 10)];\n          var column = this_3.getParticularCol(node);\n          var cols = this_3.parent.getColumns();\n          var width = 0;\n          var summarycell = [];\n          if (this_3.parent.aggregates.length && this_3.parent.getFooterContent()) {\n            if (this_3.parent.getContent().querySelectorAll('.e-summaryrow').length) {\n              var summaryRows = [].slice.call(this_3.parent.getContent().querySelectorAll('.e-summaryrow'));\n              summaryRows.filter(function (row) {\n                summarycell.push(row.querySelector('[e-mappinguid=\"' + column.uid + '\"]'));\n              });\n            }\n            summarycell = summarycell.concat([].slice.call(this_3.parent.getFooterContent().querySelectorAll('[e-mappinguid=\"' + column.uid + '\"]')));\n          }\n          if (node.classList.contains('e-fixedfreeze')) {\n            width = this_3.parent.getFrozenMode() === 'Right' && this_3.parent.isRowDragable() ? 30 : 0;\n            for (var w = cols.length - 1; w >= 0; w--) {\n              if (column.index < cols[parseInt(w.toString(), 10)].index) {\n                if (column.columns && isChildColumn(column, cols[parseInt(w.toString(), 10)].uid) || column.index > cols[parseInt(w.toString(), 10)].index) {\n                  break;\n                }\n                if (cols[parseInt(w.toString(), 10)].freeze === 'Right' || cols[parseInt(w.toString(), 10)].freeze === 'Fixed') {\n                  if (cols[parseInt(w.toString(), 10)].visible) {\n                    width += parseFloat(cols[parseInt(w.toString(), 10)].width.toString());\n                  }\n                }\n              }\n            }\n            if (summarycell.length) {\n              summarycell.filter(function (cell) {\n                applyStickyLeftRightPosition(cell, width + translateX, _this.parent.enableRtl, 'Right');\n              });\n            }\n            applyStickyLeftRightPosition(node, width + translateX, this_3.parent.enableRtl, 'Right');\n          } else {\n            width = this_3.parent.getFrozenMode() === 'Right' && this_3.parent.isRowDragable() ? 30 : 0;\n            for (var k = cols.length - 1; k >= 0; k--) {\n              if (column.columns && isChildColumn(column, cols[parseInt(k.toString(), 10)].uid) || column.index > cols[parseInt(k.toString(), 10)].index || column.uid === cols[parseInt(k.toString(), 10)].uid) {\n                break;\n              }\n              if (cols[parseInt(k.toString(), 10)].visible) {\n                width += parseInt(cols[parseInt(k.toString(), 10)].width.toString(), 10);\n              }\n            }\n            if (summarycell.length) {\n              summarycell.filter(function (cell) {\n                applyStickyLeftRightPosition(cell, width + translateX, _this.parent.enableRtl, 'Right');\n              });\n            }\n            applyStickyLeftRightPosition(node, width + translateX, this_3.parent.enableRtl, 'Right');\n            if (this_3.parent.enableColumnVirtualization) {\n              column.valueX = width;\n            }\n          }\n        };\n        var this_3 = this;\n        for (var j = th.length - 1; j >= 0; j--) {\n          _loop_3(j);\n        }\n      }\n    }\n  };\n  Resize.prototype.getParticularCol = function (node) {\n    var uid = node.classList.contains('e-filterbarcell') ? node.getAttribute('e-mappinguid') : node.querySelector('[e-mappinguid]').getAttribute('e-mappinguid');\n    return this.parent.getColumnByUid(uid);\n  };\n  Resize.prototype.resizing = function (e) {\n    var _this = this;\n    if (Browser.isDevice && typeof e.preventDefault === 'function') {\n      e.preventDefault();\n    }\n    if (isNullOrUndefined(this.column)) {\n      return;\n    }\n    var offsetWidth = 0;\n    if (isNullOrUndefined(this.column)) {\n      offsetWidth = parentsUntil(this.element, 'th').offsetWidth;\n    }\n    if (this.parent.allowTextWrap) {\n      this.updateResizeEleHeight();\n      this.setHelperHeight();\n    }\n    var pageX = this.getPointX(e);\n    var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : pageX - this.pageX;\n    var prevWidth = parseFloat(this.column.width.toString());\n    var colData = this.getColData(this.column, mousemove);\n    if (!colData.width) {\n      colData.width = closest(this.element, 'th').offsetWidth;\n    }\n    var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n    this.parent.log('resize_min_max', {\n      column: this.column,\n      width: width\n    });\n    if (!this.parent.enableRtl && this.minMove >= pageX || this.parent.enableRtl && this.minMove <= pageX) {\n      width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10;\n      this.pageX = pageX = this.minMove;\n    }\n    if (width !== parseFloat(isNullOrUndefined(this.column.width) || this.column.width === 'auto' ? offsetWidth.toString() : this.column.width.toString())) {\n      this.pageX = pageX;\n      this.column.width = formatUnit(width);\n      var args = {\n        e: e,\n        column: this.column\n      };\n      this.parent.trigger(events.onResize, args);\n      if (args.cancel) {\n        this.cancelResizeAction(true);\n        return;\n      }\n      var columns = [this.column];\n      var finalColumns = [this.column];\n      if (this.column.columns) {\n        columns = this.getSubColumns(this.column, []);\n        columns = this.calulateColumnsWidth(columns, false, mousemove);\n        finalColumns = this.calulateColumnsWidth(columns, true, mousemove);\n      }\n      var minMaxCols = this.parent.getColumns().filter(function (col) {\n        return col.visible && (col.maxWidth || col.minWidth);\n      });\n      if (this.parent.resizeSettings.mode === 'Auto' && minMaxCols.length) {\n        var columns_2 = this.parent.getColumns().filter(function (col) {\n          return col.visible && col.uid !== _this.column.uid;\n        });\n        var distributedCols = this.distributeColWidth(columns_2, mousemove, 0);\n        if (Math.round(distributedCols.usedWidth) !== Math.abs(mousemove)) {\n          finalColumns[0].width = prevWidth + distributedCols.usedWidth * Math.sign(mousemove);\n        }\n        finalColumns = finalColumns.concat(distributedCols.columns);\n      }\n      this.resizeProcess = true;\n      for (var _i = 0, finalColumns_1 = finalColumns; _i < finalColumns_1.length; _i++) {\n        var col = finalColumns_1[_i];\n        this.widthService.setColumnWidth(col, null, 'resize');\n      }\n      this.resizeProcess = false;\n      this.updateHelper();\n    }\n    if (this.parent.isFrozenGrid()) {\n      this.refreshResizefrzCols();\n    }\n    this.isDblClk = false;\n  };\n  Resize.prototype.distributeColWidth = function (columns, distributeWidth, usedWidth) {\n    var incDecWidth = distributeWidth / columns.length;\n    var absIncDecWidth = Math.abs(incDecWidth);\n    var appliedColumns = [];\n    var availableColumns = [];\n    var extraWidth = 0;\n    for (var _i = 0, columns_3 = columns; _i < columns_3.length; _i++) {\n      var col = columns_3[_i];\n      var afterIncDec = parseFloat(col.width.toString()) - incDecWidth;\n      if (col.minWidth && afterIncDec < parseInt(col.minWidth.toString(), 10)) {\n        var remainWidth = parseFloat((parseInt(col.minWidth.toString(), 10) - afterIncDec).toFixed(3));\n        extraWidth += remainWidth;\n        usedWidth += absIncDecWidth - remainWidth;\n        col.width = col.minWidth;\n        appliedColumns.push(col);\n      } else if (col.maxWidth && afterIncDec > parseInt(col.maxWidth.toString(), 10)) {\n        var remainWidth = parseFloat((afterIncDec - parseInt(col.maxWidth.toString(), 10)).toFixed(3));\n        extraWidth += remainWidth;\n        usedWidth += absIncDecWidth - remainWidth;\n        col.width = col.maxWidth;\n        appliedColumns.push(col);\n      } else {\n        usedWidth += absIncDecWidth;\n        col.width = afterIncDec;\n        availableColumns.push(col);\n      }\n    }\n    var distributedCols = extraWidth && availableColumns.length ? this.distributeColWidth(availableColumns, extraWidth * Math.sign(distributeWidth), usedWidth) : {\n      columns: availableColumns,\n      usedWidth: usedWidth\n    };\n    return {\n      columns: appliedColumns.concat(distributedCols.columns),\n      usedWidth: distributedCols.usedWidth\n    };\n  };\n  Resize.prototype.calulateColumnsWidth = function (columns, isUpdate, mousemove) {\n    var finalColumns = [];\n    for (var _i = 0, columns_4 = columns; _i < columns_4.length; _i++) {\n      var col = columns_4[_i];\n      var totalWidth = 0;\n      for (var i = 0; i < columns.length; i++) {\n        totalWidth += parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n      }\n      var colData = this.getColData(col, parseFloat(col.width) * mousemove / totalWidth);\n      var colWidth = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n      if (colWidth !== parseFloat(col.width.toString())) {\n        if (isUpdate) {\n          col.width = formatUnit(colWidth < 1 ? 1 : colWidth);\n        }\n        finalColumns.push(col);\n      }\n    }\n    return finalColumns;\n  };\n  Resize.prototype.getSubColumns = function (column, subColumns) {\n    for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n      var col = _a[_i];\n      if (col.visible !== false && col.allowResizing) {\n        if (col.columns) {\n          this.getSubColumns(col, subColumns);\n        } else {\n          subColumns.push(col);\n        }\n      }\n    }\n    return subColumns;\n  };\n  Resize.prototype.resizeEnd = function (e) {\n    if (!this.helper || this.parent.isDestroyed) {\n      return;\n    }\n    var gObj = this.parent;\n    if (gObj.isFrozenGrid()) {\n      this.refreshResizePosition();\n    }\n    EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n    if (Browser.isDevice) {\n      EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n      EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n    }\n    this.updateCursor('remove');\n    detach(this.helper);\n    var args = {\n      e: e,\n      column: this.column\n    };\n    var content = this.parent.getContent().querySelector('.' + literals.content);\n    var cTable = content;\n    if (cTable.scrollHeight > cTable.clientHeight) {\n      this.parent.scrollModule.setPadding();\n      cTable.style.overflowY = 'scroll';\n    }\n    this.parent.trigger(events.resizeStop, args);\n    closest(this.element, '.e-headercell').classList.add('e-resized');\n    this.isFrozenColResized = false;\n    if (this.parent.allowTextWrap) {\n      this.updateResizeEleHeight();\n      this.parent.notify(events.textWrapRefresh, {\n        case: 'textwrap'\n      });\n    }\n    var headerTable = gObj.getHeaderTable();\n    var contentTable = gObj.getContentTable();\n    var footerTable;\n    if (!isNullOrUndefined(gObj.getFooterContent())) {\n      footerTable = gObj.getFooterContentTable();\n    }\n    var tableWidth = headerTable.offsetWidth;\n    var contentwidth = gObj.getContent().scrollWidth;\n    if (contentwidth > tableWidth) {\n      if (!isNullOrUndefined(contentTable.querySelector('.e-emptyrow'))) {\n        addClass([headerTable], ['e-tableborder']);\n        removeClass([contentTable], ['e-tableborder']);\n      } else {\n        addClass([headerTable, contentTable], ['e-tableborder']);\n      }\n      removeClass([gObj.element], ['e-left-shadow', 'e-right-shadow']);\n    } else {\n      removeClass([headerTable, contentTable], ['e-tableborder']);\n      if (gObj.getVisibleFrozenRightCount()) {\n        addClass([gObj.element], 'e-right-shadow');\n      }\n    }\n    if (!isNullOrUndefined(footerTable)) {\n      footerTable.classList.add('e-tableborder');\n    }\n    this.refresh();\n    this.doubleTapEvent(e);\n    this.isDblClk = true;\n  };\n  Resize.prototype.getPointX = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageX;\n    } else {\n      return e.pageX;\n    }\n  };\n  Resize.prototype.refreshColumnWidth = function () {\n    var columns = this.parent.getColumns();\n    for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderContent().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n      var ele = _a[_i];\n      for (var _b = 0, columns_5 = columns; _b < columns_5.length; _b++) {\n        var column = columns_5[_b];\n        if (ele.querySelector('[e-mappinguid]') && ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n          column.width = ele.getBoundingClientRect().width;\n          break;\n        }\n      }\n    }\n    return columns;\n  };\n  Resize.prototype.refreshStackedColumnWidth = function () {\n    for (var _i = 0, _a = this.parent.getStackedColumns(this.parent.columns); _i < _a.length; _i++) {\n      var stackedColumn = _a[_i];\n      stackedColumn.width = this.getStackedWidth(stackedColumn, 0);\n    }\n  };\n  Resize.prototype.getStackedWidth = function (column, width) {\n    for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n      var col = _a[_i];\n      if (col.visible !== false) {\n        if (col.columns) {\n          width = this.getStackedWidth(col, width);\n        } else {\n          width += parseFloat(col.width.toString());\n        }\n      }\n    }\n    return width;\n  };\n  Resize.prototype.getTargetColumn = function (e) {\n    var cell = closest(e.target, resizeClassList.header);\n    cell = cell.querySelector('.e-headercelldiv') || cell.querySelector('.e-stackedheadercelldiv');\n    var uid = cell.getAttribute('e-mappinguid');\n    return this.parent.getColumnByUid(uid);\n  };\n  Resize.prototype.updateCursor = function (action) {\n    var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n    headerRows.push(this.parent.element);\n    for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n      var row = headerRows_1[_i];\n      row.classList[\"\" + action](resizeClassList.cursor);\n    }\n  };\n  Resize.prototype.refresh = function () {\n    this.column = null;\n    this.pageX = null;\n    this.element = null;\n    this.helper = null;\n  };\n  Resize.prototype.appendHelper = function () {\n    this.helper = this.parent.createElement('div', {\n      className: resizeClassList.helper\n    });\n    this.parent.element.appendChild(this.helper);\n    this.setHelperHeight();\n  };\n  Resize.prototype.setHelperHeight = function () {\n    var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n    var rect = closest(this.element, resizeClassList.header);\n    var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n    for (var i = tr.indexOf(rect.parentElement); i < tr.length && i > -1; i++) {\n      height += tr[parseInt(i.toString(), 10)].offsetHeight;\n    }\n    var pos = this.calcPos(rect);\n    pos.left += this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2;\n    this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n    if (this.parent.enableVirtualization) {\n      this.helper.classList.add('e-virtual-rhandler');\n    }\n  };\n  Resize.prototype.getScrollBarWidth = function (height) {\n    var ele = this.parent.getContent().firstChild;\n    return ele.scrollHeight > ele.clientHeight && height || ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n  };\n  Resize.prototype.removeHelper = function (e) {\n    var cls = e.target.classList;\n    if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n      EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n      EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n      detach(this.helper);\n      this.refresh();\n    }\n  };\n  Resize.prototype.updateHelper = function () {\n    var rect = closest(this.element, resizeClassList.header);\n    var left;\n    left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n    var borderWidth = 2; // to maintain the helper inside of grid element.\n    if (left > this.parentElementWidth) {\n      left = this.parentElementWidth - borderWidth;\n    }\n    this.helper.style.left = left + 'px';\n  };\n  Resize.prototype.calcPos = function (elem) {\n    var parentOffset = {\n      top: 0,\n      left: 0\n    };\n    var offset = elem.getBoundingClientRect();\n    var doc = elem.ownerDocument;\n    var offsetParent = parentsUntil(elem, 'e-grid') || doc.documentElement;\n    while (offsetParent && (offsetParent === doc.body || offsetParent === doc.documentElement) && offsetParent.style.position === 'static') {\n      offsetParent = offsetParent.parentNode;\n    }\n    if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n      parentOffset = offsetParent.getBoundingClientRect();\n    }\n    return {\n      top: offset.top - parentOffset.top,\n      left: offset.left - parentOffset.left\n    };\n  };\n  Resize.prototype.doubleTapEvent = function (e) {\n    var _this = this;\n    if (this.getUserAgent() && this.isDblClk) {\n      if (!this.tapped) {\n        this.tapped = setTimeout(function () {\n          _this.tapped = null;\n        }, 300);\n      } else {\n        clearTimeout(this.tapped);\n        this.callAutoFit(e);\n        this.tapped = null;\n      }\n    }\n  };\n  Resize.prototype.getUserAgent = function () {\n    var userAgent = Browser.userAgent.toLowerCase();\n    return /iphone|ipod|ipad/.test(userAgent);\n  };\n  Resize.prototype.timeoutHandler = function () {\n    this.tapped = null;\n  };\n  return Resize;\n}();\nexport { Resize };","map":{"version":3,"names":["EventHandler","detach","formatUnit","Browser","closest","Column","ColumnWidthService","events","getScrollBarWidth","parentsUntil","Global","frozenDirection","isChildColumn","applyStickyLeftRightPosition","groupCaptionRowLeftRightPos","addStickyColumnPosition","isNullOrUndefined","addClass","removeClass","literals","resizeClassList","root","suppress","icon","helper","header","cursor","Resize","parent","tapped","isDblClk","resizeProcess","isCancelAutoFit","isDestroyed","widthService","addEventListener","prototype","autoFitColumns","fName","startRowIndex","endRowIndex","_this","columnName","undefined","length","getColumns","map","x","autoFit","field","isAutoFitColumns","forEach","getColumnByField","trim","enableAdaptiveUI","element","classList","add","findColumn","cols","isMaxWidthCount","newarray","filter","c","maxWidth","headerText","preventAutoFit","contentTable","getContentTable","allowResizing","resizeSettings","mode","setWidthToTable","style","width","indexOf","getBoundingClientRect","parentElement","clientWidth","getHeaderTable","getCellElementsByColumnIndex","columnIndex","frozenRows","slice","call","querySelectorAll","concat","resizeColumn","index","id","gObj","tWidth","headerTable","footerTable","headerDivTag","contentDivTag","gridContent","footerDivTag","gridFooter","indentWidth","uid","getUidByColumnField","getNormalizedColumnIndex","headerTextClone","querySelector","cloneNode","contentTextClone","footerTextClone","columnIndexByField","getColumnIndexByField","getFooterContent","getFooterContentTable","indentWidthClone","getElementsByClassName","i","parseInt","toString","offsetWidth","detailsElement","detailTemplate","childGrid","contentText","footerText","wHeader","createTable","wFooter","wContent","getCurrentViewRecords","columnbyindex","Math","max","colMaxWidth","parseFloat","setColumnWidth","result","some","visible","groupSettings","columns","calcTableWidth","isFrozenGrid","enableColumnVirtualization","refreshFrozenScrollbar","tableWidth","contentwidth","scrollWidth","getVisibleFrozenRightCount","destroy","gridElement","gridHeader","unwireEvents","removeEventListener","getModuleName","fieldName","column","allowTextWrap","notify","freezeRender","case","isModeChg","refreshResizefrzCols","table","text","tag","myTableDiv","createElement","adaptiveClass","className","cssText","mySubDiv","myTable","attrs","role","myTr","tr","appendChild","document","body","offsetWidthValue","removeChild","ceil","on","headerRefreshed","refreshHeight","refreshResizePosition","initialEnd","wireEvents","contentReady","refreshHandlers","off","render","setHandlerHeight","getResizeHandlers","offsetHeight","height","getHeaderContent","touchStartEvent","touchResizeStart","dblclick","callAutoFit","remove","e","isDevice","preventDefault","target","contains","col","getTargetColumn","timer","setTimeout","resizeStart","clearTimeout","args","trigger","cancel","isEdit","cancelResizeAction","_i","_a","refreshColumnWidth","allowGrouping","isRowDragable","refreshStackedColumnWidth","parentElementWidth","appendHelper","pageX","getPointX","getFreezeTableName","frozenRight","enableRtl","minMove","minWidth","touchEndEvent","resizeEnd","touchMoveEvent","resizing","removeHelper","updateCursor","removeEvents","refresh","getWidth","updateResizeEleHeight","elements","getColData","mousemove","refreshResizeFixedCols","pos","translateX","th","getContent","node","getAttribute","getColumnByUid","getVisibleFrozenLeftCount","getIndentCount","getFrozenMode","j","freeze","isFrozen","colSpanwidth","colSpan","calculateColspanWidth","freezeRefresh","isAutoFitCol","width_1","frzHdrRefresh","cell","valueX","width_2","columns_1","columnsRight","_loop_1","this_1","aggregates","refreshGroupCaptionRow","capRow","_loop_2","this_2","getParticularCol","summarycell","summaryRows","row","push","w","k","_loop_3","this_3","setHelperHeight","prevWidth","colData","log","onResize","finalColumns","getSubColumns","calulateColumnsWidth","minMaxCols","columns_2","distributedCols","distributeColWidth","round","usedWidth","abs","sign","finalColumns_1","updateHelper","distributeWidth","incDecWidth","absIncDecWidth","appliedColumns","availableColumns","extraWidth","columns_3","afterIncDec","remainWidth","toFixed","isUpdate","columns_4","totalWidth","colWidth","subColumns","content","cTable","scrollHeight","clientHeight","scrollModule","setPadding","overflowY","resizeStop","isFrozenColResized","textWrapRefresh","doubleTapEvent","touches","apply","ele","_b","columns_5","getStackedColumns","stackedColumn","getStackedWidth","action","headerRows","headerRows_1","rect","calcPos","left","top","floor","enableVirtualization","firstChild","cls","borderWidth","elem","parentOffset","offset","doc","ownerDocument","offsetParent","documentElement","position","parentNode","nodeType","getUserAgent","userAgent","toLowerCase","test","timeoutHandler"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/resize.js"],"sourcesContent":["import { EventHandler, detach, formatUnit, Browser, closest } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil, Global, frozenDirection, isChildColumn, applyStickyLeftRightPosition, groupCaptionRowLeftRightPos, addStickyColumnPosition } from '../base/util';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n *\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        /** @hidden */\n        this.resizeProcess = false;\n        this.isCancelAutoFit = false;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     *\n     * @param  {string|string[]} fName - Defines the field name.\n     * @param  {number} startRowIndex - Specifies the start row index.\n     * @param  {number} endRowIndex - Specifies the end row index.\n     * @returns {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName, startRowIndex, endRowIndex) {\n        var _this = this;\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { x.autoFit = true; return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.parent.isAutoFitColumns = true;\n        if (!isNullOrUndefined(fName) && typeof fName === 'object' && fName.length !== 0) {\n            fName.forEach(function (field) {\n                if (_this.parent.getColumnByField(field)) {\n                    _this.parent.getColumnByField(field).autoFit = true;\n                }\n            });\n        }\n        else if (typeof fName === 'string' && fName.trim() !== '') {\n            this.parent.getColumnByField(fName).autoFit = true;\n        }\n        if (this.parent.enableAdaptiveUI) {\n            this.parent.element.classList.add('e-grid-autofit');\n        }\n        this.findColumn(columnName, startRowIndex, endRowIndex);\n    };\n    Resize.prototype.autoFit = function () {\n        var cols = this.parent.getColumns();\n        var isMaxWidthCount = 0;\n        var newarray = cols.filter(function (c) {\n            if (!isNullOrUndefined(c.maxWidth)) {\n                isMaxWidthCount++;\n            }\n            return c.autoFit === true;\n        }).map(function (c) { return c.field || c.headerText; });\n        if (newarray.length > 0 && !this.parent.preventAutoFit) {\n            this.autoFitColumns(newarray);\n        }\n        var contentTable = this.parent.getContentTable();\n        if (this.parent.allowResizing && isMaxWidthCount && (this.parent.resizeSettings.mode === 'Auto' ||\n            (this.parent.resizeSettings.mode === 'Normal' && !this.parent.autoFit && newarray.length === 0))) {\n            this.widthService.setWidthToTable(contentTable.style.width.indexOf('px') === -1);\n        }\n        else if (this.parent.autoFit && this.parent.resizeSettings.mode === 'Auto') {\n            this.widthService.setWidthToTable();\n        }\n        if (contentTable.style.width.indexOf('px') !== -1\n            && contentTable.getBoundingClientRect().width < contentTable.parentElement.clientWidth) {\n            addClass([this.parent.getHeaderTable(), contentTable], ['e-tableborder']);\n        }\n    };\n    Resize.prototype.getCellElementsByColumnIndex = function (columnIndex) {\n        if (this.parent.frozenRows) {\n            return [].slice.call(this.parent.getHeaderTable().querySelectorAll(\"td.e-rowcell:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption):not(.e-detailcell)\")).concat([].slice.call(this.parent.getContentTable().querySelectorAll(\"td.e-rowcell:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption):not(.e-detailcell)\")));\n        }\n        else {\n            return [].slice.call(this.parent.getContentTable().querySelectorAll(\"td.e-rowcell:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption):not(.e-detailcell)\"));\n        }\n    };\n    Resize.prototype.resizeColumn = function (fName, index, id, startRowIndex, endRowIndex) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable = gObj.getHeaderTable();\n        var contentTable = gObj.getContentTable();\n        var footerTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = literals.gridContent;\n        var footerDivTag = literals.gridFooter;\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n        var contentTextClone = this.getCellElementsByColumnIndex(columnIndex);\n        var footerTextClone;\n        var columnIndexByField = this.parent.getColumnIndexByField(fName);\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        if (footerTable) {\n            footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n        }\n        var indentWidthClone = [].slice.call(headerTable.querySelector('tr').getElementsByClassName('e-grouptopleftcell'));\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[parseInt(i.toString(), 10)].offsetWidth;\n            }\n        }\n        var detailsElement = contentTable.querySelector('.e-detailrowcollapse') ||\n            contentTable.querySelector('.e-detailrowexpand');\n        if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n            indentWidth += detailsElement.offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        var footerText = [];\n        if (footerTable) {\n            for (var i = 0; i < footerTextClone.length; i++) {\n                footerText[parseInt(i.toString(), 10)] = footerTextClone[parseInt(i.toString(), 10)].cloneNode(true);\n            }\n        }\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[parseInt(i.toString(), 10)] = contentTextClone[parseInt(i.toString(), 10)].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wFooter = null;\n        var wContent = null;\n        if (gObj.getCurrentViewRecords().length) {\n            wContent = this.createTable(contentTable, contentText, contentDivTag, startRowIndex, endRowIndex);\n        }\n        if (footerText.length) {\n            wFooter = this.createTable(footerTable, footerText, footerDivTag);\n        }\n        var columnbyindex = gObj.getColumns()[parseInt(columnIndexByField.toString(), 10)];\n        var width = columnbyindex.width = formatUnit(Math.max(wHeader, wContent, wFooter));\n        var colMaxWidth = columnbyindex.maxWidth && parseFloat(columnbyindex.maxWidth.toString());\n        if (parseInt(width, 10) > colMaxWidth) {\n            columnbyindex.width = colMaxWidth;\n        }\n        this.widthService.setColumnWidth(gObj.getColumns()[parseInt(columnIndexByField.toString(), 10)]);\n        var result = gObj.getColumns().some(function (x) { return (x.visible || gObj.groupSettings.columns.length) &&\n            (x.width === null || x.width === undefined || x.width.length <= 0); });\n        if (result === false) {\n            var element = gObj.getColumns();\n            for (var i = 0; i < element.length; i++) {\n                if (element[parseInt(i.toString(), 10)].visible) {\n                    tWidth = tWidth + parseFloat(element[parseInt(i.toString(), 10)].width);\n                }\n            }\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            if (this.parent.resizeSettings.mode === 'Auto') {\n                calcTableWidth = '100%';\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n            if (!isNullOrUndefined(footerTable)) {\n                footerTable.style.width = formatUnit(calcTableWidth);\n            }\n        }\n        if (gObj.isFrozenGrid() && gObj.enableColumnVirtualization) {\n            this.widthService.refreshFrozenScrollbar();\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = contentTable.parentElement.scrollWidth;\n        if (contentwidth > tableWidth) {\n            if (!isNullOrUndefined(contentTable.querySelector('.e-emptyrow'))) {\n                addClass([headerTable], ['e-tableborder']);\n                removeClass([contentTable], ['e-tableborder']);\n            }\n            else {\n                addClass([headerTable, contentTable], ['e-tableborder']);\n            }\n            removeClass([gObj.element], ['e-left-shadow', 'e-right-shadow']);\n        }\n        else {\n            removeClass([headerTable, contentTable], ['e-tableborder']);\n            if (gObj.getVisibleFrozenRightCount()) {\n                addClass([gObj.element], 'e-right-shadow');\n            }\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName, startRowIndex, endRowIndex) {\n        for (var i = 0; i < fName.length; i++) {\n            var fieldName = fName[parseInt(i.toString(), 10)];\n            var columnIndex = this.parent.getColumnIndexByField(fieldName);\n            var column = this.parent.getColumns()[parseInt(columnIndex.toString(), 10)];\n            if (columnIndex > -1 && !isNullOrUndefined(column) && column.visible === true) {\n                this.resizeColumn(fieldName, columnIndex, null, startRowIndex, endRowIndex);\n            }\n        }\n        if (this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'refreshHeight', isModeChg: true });\n        }\n        if (this.parent.isFrozenGrid()) {\n            this.refreshResizefrzCols(true, true);\n        }\n    };\n    /**\n     * To create table for autofit\n     *\n     * @param {Element} table - specifies the table\n     * @param {Element[]} text - specifies the text\n     * @param {string} tag - specifies the tag name\n     * @param  {number} startRowIndex - Specifies the start row index.\n     * @param  {number} endRowIndex - Specifies the end row index.\n     * @returns {number} returns the number\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag, startRowIndex, endRowIndex) {\n        if (startRowIndex === void 0) { startRowIndex = 1; }\n        if (endRowIndex === void 0) { endRowIndex = text.length; }\n        if (startRowIndex > endRowIndex) {\n            startRowIndex ^= endRowIndex;\n            endRowIndex ^= startRowIndex;\n            startRowIndex ^= endRowIndex;\n        }\n        var myTableDiv = this.parent.createElement('div');\n        var adaptiveClass = this.parent.enableAdaptiveUI ? ' e-bigger' : '';\n        myTableDiv.className = this.parent.element.className + adaptiveClass;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.parent.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.parent.createElement('table', { attrs: { role: 'grid' } });\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = this.parent.createElement('tr');\n        for (var i = (startRowIndex <= 0 ? 1 : startRowIndex); i <= (endRowIndex > text.length ? text.length : endRowIndex); i++) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(text[parseInt((i - 1).toString(), 10)]);\n            myTable.appendChild(tr);\n        }\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.refreshResizePosition, this.refreshResizePosition, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n        this.parent.on(events.contentReady, this.autoFit, this);\n        this.parent.on(events.refreshHandlers, this.refreshHeight, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.refreshResizePosition, this.refreshResizePosition);\n        this.parent.off(events.initialEnd, this.wireEvents);\n        this.parent.off(events.refreshHandlers, this.refreshHeight);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        if (this.parent.getHeaderTable()) {\n            var element = this.getResizeHandlers();\n            for (var i = 0; i < element.length; i++) {\n                if (element[parseInt(i.toString(), 10)].parentElement.offsetHeight > 0) {\n                    element[parseInt(i.toString(), 10)].style.height = '100%';\n                }\n            }\n            this.setHandlerHeight();\n        }\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        var element = [].slice.call(this.parent.getHeaderTable().getElementsByClassName(resizeClassList.suppress));\n        for (var i = 0; i < element.length; i++) {\n            element[parseInt(i.toString(), 10)].style.height = '100%';\n        }\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (Browser.isDevice && typeof e.preventDefault === 'function' && this.isDblClk) {\n            e.preventDefault();\n        }\n        if (e.target.classList.contains('e-rhandler') && !this.isCancelAutoFit) {\n            var col = this.getTargetColumn(e);\n            if (col.columns) {\n                return;\n            }\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            if (this.parent.isFrozenGrid()) {\n                this.refreshResizefrzCols(true, true);\n            }\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.touchResizeStart = function (e) {\n        if (!Global.timer) {\n            Global.timer = setTimeout(function () {\n                Global.timer = null;\n            }, 300);\n            return this.resizeStart(e);\n        }\n        else {\n            clearTimeout(Global.timer);\n            Global.timer = null;\n            this.callAutoFit(e);\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (e.target.classList.contains('e-rhandler')) {\n            this.isCancelAutoFit = false;\n            var args = { e: e, column: this.getTargetColumn(e) };\n            this.parent.trigger(events.resizeStart, args, function (args) {\n                if (args.cancel || _this.parent.isEdit) {\n                    _this.cancelResizeAction();\n                    _this.isCancelAutoFit = true;\n                    return;\n                }\n            });\n            if (!this.isCancelAutoFit) {\n                if (!this.helper) {\n                    if (this.getScrollBarWidth() === 0) {\n                        this.resizeProcess = true;\n                        for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                            var col = _a[_i];\n                            this.widthService.setColumnWidth(col);\n                        }\n                        if (this.parent.allowGrouping) {\n                            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                                this.widthService.setColumnWidth(new Column({ width: '30px' }), i);\n                            }\n                        }\n                        if (this.parent.isRowDragable()) {\n                            this.widthService.setColumnWidth(new Column({ width: '30px' }));\n                        }\n                        this.widthService.setWidthToTable();\n                        this.resizeProcess = false;\n                    }\n                    this.refreshStackedColumnWidth();\n                    this.element = e.target;\n                    this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                    this.appendHelper();\n                    this.column = this.getTargetColumn(e);\n                    this.pageX = this.getPointX(e);\n                    if (this.column.getFreezeTableName() === literals.frozenRight) {\n                        if (this.parent.enableRtl) {\n                            this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                                - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                        }\n                        else {\n                            this.minMove = parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString())\n                                - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                        }\n                    }\n                    else if (this.parent.enableRtl) {\n                        this.minMove = parseFloat(this.column.width.toString())\n                            - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                    }\n                    else {\n                        this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                            - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                    }\n                    this.minMove += this.pageX;\n                }\n                EventHandler.add(document, Browser.touchEndEvent, this.resizeEnd, this);\n                EventHandler.add(this.parent.element, Browser.touchMoveEvent, this.resizing, this);\n                if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                    this.helper.classList.add(resizeClassList.icon);\n                    EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                    EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n                }\n                else {\n                    this.updateCursor('add');\n                }\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice && !isNullOrUndefined(this.helper)) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        if (!isNullOrUndefined(this.helper)) {\n            detach(this.helper);\n        }\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.updateResizeEleHeight = function () {\n        var elements = [].slice.call(this.parent.getHeaderContent().getElementsByClassName('e-rhandler'));\n        for (var i = 0; i < elements.length; i++) {\n            elements[parseInt(i.toString(), 10)].style.height = this.element.parentElement.offsetHeight + 'px';\n        }\n    };\n    Resize.prototype.getColData = function (column, mousemove) {\n        return {\n            width: parseFloat(isNullOrUndefined(this.widthService.getWidth(column)) || this.widthService.getWidth(column) === 'auto' ? '0'\n                : this.widthService.getWidth(column).toString()) + mousemove,\n            minWidth: column.minWidth ? parseFloat(column.minWidth.toString()) : null,\n            maxWidth: column.maxWidth ? parseFloat(column.maxWidth.toString()) : null\n        };\n    };\n    Resize.prototype.refreshResizeFixedCols = function (pos) {\n        var cols = this.parent.getColumns();\n        var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n        var th = [].slice.call(this.parent.getHeaderContent().querySelector('tbody').querySelectorAll('.e-fixedfreeze')).concat([].slice.call(this.parent.getContent().querySelectorAll('.e-fixedfreeze')));\n        for (var i = 0; i < th.length; i++) {\n            var node = th[parseInt(i.toString(), 10)];\n            var column = void 0;\n            if (node.classList.contains('e-summarycell')) {\n                var uid = node.getAttribute('e-mappinguid');\n                column = this.parent.getColumnByUid(uid);\n            }\n            else {\n                var index = parseInt(node.getAttribute('aria-colindex'), 10) - 1;\n                column = cols[parseInt(index.toString(), 10)];\n            }\n            var width = 0;\n            if (pos === 'Left') {\n                if (this.parent.getVisibleFrozenLeftCount()) {\n                    width = this.parent.getIndentCount() * 30;\n                }\n                else if (this.parent.getFrozenMode() === 'Right') {\n                    width = this.parent.groupSettings.columns.length * 30;\n                }\n                for (var j = 0; j < cols.length; j++) {\n                    if (column.index > cols[parseInt(j.toString(), 10)].index) {\n                        if (column.uid === cols[parseInt(j.toString(), 10)].uid) {\n                            break;\n                        }\n                        if ((cols[parseInt(j.toString(), 10)].freeze === 'Left' || cols[parseInt(j.toString(), 10)].isFrozen) ||\n                            cols[parseInt(j.toString(), 10)].freeze === 'Fixed') {\n                            if (cols[parseInt(j.toString(), 10)].visible) {\n                                width += parseFloat(cols[parseInt(j.toString(), 10)].width.toString());\n                            }\n                        }\n                    }\n                }\n                applyStickyLeftRightPosition(node, ((width === 0 ? width : width - 1) - translateX), this.parent.enableRtl, 'Left');\n            }\n            if (pos === 'Right') {\n                width = this.parent.getFrozenMode() === 'Right' && this.parent.isRowDragable() ? 30 : 0;\n                for (var j = cols.length - 1; j >= 0; j--) {\n                    if (column.uid === cols[parseInt(j.toString(), 10)].uid) {\n                        break;\n                    }\n                    if (cols[parseInt(j.toString(), 10)].freeze === 'Right' || cols[parseInt(j.toString(), 10)].freeze === 'Fixed') {\n                        if (cols[parseInt(j.toString(), 10)].visible) {\n                            width += parseFloat(cols[parseInt(j.toString(), 10)].width.toString());\n                        }\n                    }\n                }\n                var colSpanwidth = 0;\n                if (node.colSpan > 1) {\n                    colSpanwidth = this.calculateColspanWidth(cols, node, column.index);\n                }\n                applyStickyLeftRightPosition(node, (width - colSpanwidth) + translateX, this.parent.enableRtl, 'Right');\n            }\n        }\n    };\n    Resize.prototype.calculateColspanWidth = function (cols, node, index) {\n        var width = 0;\n        for (var j = index + 1; j < index + node.colSpan; j++) {\n            width += parseInt(cols[parseInt(j.toString(), 10)].width.toString(), 10);\n        }\n        return width;\n    };\n    Resize.prototype.refreshResizePosition = function () {\n        this.refreshResizefrzCols(true);\n    };\n    Resize.prototype.refreshResizefrzCols = function (freezeRefresh, isAutoFitCol) {\n        var _this = this;\n        var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n        if (freezeRefresh || ((this.column.freeze === 'Left' || this.column.isFrozen) ||\n            (this.column.columns && frozenDirection(this.column) === 'Left'))) {\n            var width_1 = this.parent.getIndentCount() * 30;\n            var columns = this.parent.getColumns().filter(function (col) { return col.freeze === 'Left' || col.isFrozen; });\n            if (!freezeRefresh || isAutoFitCol) {\n                this.frzHdrRefresh('Left');\n            }\n            for (var i = 0; i < columns.length; i++) {\n                if (freezeRefresh || (columns[parseInt(i.toString(), 10)].index > this.column.index)) {\n                    var elements = [];\n                    if (this.parent.frozenRows) {\n                        elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]')).concat([].slice.call(this.parent.getContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]')));\n                    }\n                    else {\n                        elements = [].slice.call(this.parent.getContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]'));\n                    }\n                    elements.filter(function (cell) {\n                        applyStickyLeftRightPosition(cell, width_1 - translateX, _this.parent.enableRtl, 'Left');\n                    });\n                    if (this.parent.enableColumnVirtualization) {\n                        columns[parseInt(i.toString(), 10)].valueX = width_1;\n                    }\n                }\n                if (columns[parseInt(i.toString(), 10)].visible) {\n                    width_1 += parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n                }\n            }\n            this.refreshResizeFixedCols('Left');\n        }\n        if (freezeRefresh || (this.column.freeze === 'Right' || (this.column.columns && frozenDirection(this.column) === 'Right'))) {\n            var width_2 = this.parent.getFrozenMode() === 'Right' && this.parent.isRowDragable() ? 30 : 0;\n            var columns_1 = this.parent.getColumns();\n            if (!freezeRefresh || isAutoFitCol) {\n                this.frzHdrRefresh('Right');\n            }\n            var columnsRight = columns_1.filter(function (col) { return col.freeze === 'Right'; });\n            var _loop_1 = function (i) {\n                var elements = [];\n                if (this_1.parent.frozenRows) {\n                    elements = [].slice.call(this_1.parent.getHeaderContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]')).concat([].slice.call(this_1.parent.getContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]')));\n                }\n                else {\n                    elements = [].slice.call(this_1.parent.getContent().querySelectorAll('td[aria-colindex=\"' + (i + 1) + '\"]'));\n                }\n                elements.filter(function (cell) {\n                    var colSpanwidth = 0;\n                    if (cell.colSpan > 1) {\n                        colSpanwidth = _this.calculateColspanWidth(columns_1, cell, columns_1[parseInt(i.toString(), 10)].index);\n                    }\n                    applyStickyLeftRightPosition(cell, (width_2 - colSpanwidth) + translateX, _this.parent.enableRtl, 'Right');\n                });\n                if (this_1.parent.enableColumnVirtualization) {\n                    columns_1[parseInt(i.toString(), 10)].valueX = width_2;\n                }\n                if (columns_1[parseInt(i.toString(), 10)].visible) {\n                    width_2 = width_2 + parseFloat(columns_1[parseInt(i.toString(), 10)].width.toString());\n                }\n            };\n            var this_1 = this;\n            for (var i = columns_1.length - 1; i >= columns_1.length - columnsRight.length; i--) {\n                _loop_1(i);\n            }\n            this.refreshResizeFixedCols('Right');\n        }\n        if (this.column && (this.column.freeze === 'Fixed' || (this.column.columns && frozenDirection(this.column) === 'Fixed'))) {\n            this.refreshResizeFixedCols('Left');\n            this.refreshResizeFixedCols('Right');\n            this.frzHdrRefresh('Left');\n            this.frzHdrRefresh('Right');\n        }\n        if (this.parent.groupSettings.columns.length && this.parent.aggregates.length &&\n            this.parent.getContent().querySelector('.e-groupcaptionrow')) {\n            this.refreshGroupCaptionRow();\n        }\n    };\n    Resize.prototype.refreshGroupCaptionRow = function () {\n        var capRow = [].slice.call(this.parent.getContent().querySelectorAll('.e-groupcaptionrow'));\n        for (var i = 0; i < capRow.length; i++) {\n            var tr = capRow[parseInt(i.toString(), 10)];\n            if (tr.querySelector('.e-summarycell')) {\n                groupCaptionRowLeftRightPos(tr, this.parent);\n            }\n        }\n    };\n    Resize.prototype.frzHdrRefresh = function (pos) {\n        var _this = this;\n        var translateX = this.parent.enableColumnVirtualization ? this.parent.translateX : 0;\n        if (pos === 'Left') {\n            var tr = [].slice.call(this.parent.getHeaderContent().querySelector('thead').querySelectorAll('tr'));\n            for (var i = 0; i < tr.length; i++) {\n                var th = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-leftfreeze,.e-fixedfreeze'));\n                var _loop_2 = function (j) {\n                    var node = th[parseInt(j.toString(), 10)];\n                    if (node.classList.contains('e-rowdragheader') || node.classList.contains('e-dragheadercell') ||\n                        node.classList.contains('e-grouptopleftcell')) {\n                        return \"continue\";\n                    }\n                    var column = this_2.getParticularCol(node);\n                    var cols = this_2.parent.getColumns();\n                    var width = 0;\n                    var summarycell = [];\n                    if (this_2.parent.aggregates.length && this_2.parent.getFooterContent()) {\n                        if (this_2.parent.getContent().querySelectorAll('.e-summaryrow').length) {\n                            var summaryRows = [].slice.call(this_2.parent.getContent().querySelectorAll('.e-summaryrow'));\n                            summaryRows.filter(function (row) {\n                                summarycell.push(row.querySelector('[e-mappinguid=\"' + column.uid + '\"]'));\n                            });\n                        }\n                        summarycell = summarycell.concat([].slice.call(this_2.parent.getFooterContent().querySelectorAll('[e-mappinguid=\"' + column.uid + '\"]')));\n                    }\n                    if (node.classList.contains('e-fixedfreeze')) {\n                        if (this_2.parent.getVisibleFrozenLeftCount()) {\n                            width = this_2.parent.getIndentCount() * 30;\n                        }\n                        else if (this_2.parent.getFrozenMode() === 'Right') {\n                            width = this_2.parent.groupSettings.columns.length * 30;\n                        }\n                        for (var w = 0; w < cols.length; w++) {\n                            if (column.index > cols[parseInt(w.toString(), 10)].index) {\n                                if (column.uid === cols[parseInt(w.toString(), 10)].uid) {\n                                    break;\n                                }\n                                if ((cols[parseInt(w.toString(), 10)].freeze === 'Left' || cols[parseInt(w.toString(), 10)].isFrozen) ||\n                                    cols[parseInt(w.toString(), 10)].freeze === 'Fixed') {\n                                    if (cols[parseInt(w.toString(), 10)].visible) {\n                                        width += parseInt(cols[parseInt(w.toString(), 10)].width.toString(), 10);\n                                    }\n                                }\n                            }\n                        }\n                        if (summarycell && summarycell.length) {\n                            summarycell.filter(function (cell) {\n                                applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                            });\n                        }\n                        applyStickyLeftRightPosition(node, ((width === 0 ? width : width - 1) - translateX), this_2.parent.enableRtl, 'Left');\n                    }\n                    else {\n                        width = this_2.parent.getIndentCount() * 30;\n                        if (column.index === 0) {\n                            if (summarycell && summarycell.length) {\n                                summarycell.filter(function (cell) {\n                                    applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                                });\n                            }\n                            applyStickyLeftRightPosition(node, width - translateX, this_2.parent.enableRtl, 'Left');\n                            if (this_2.parent.enableColumnVirtualization) {\n                                column.valueX = width;\n                            }\n                        }\n                        else {\n                            for (var k = 0; k < cols.length; k++) {\n                                if (column.index < cols[parseInt(k.toString(), 10)].index ||\n                                    column.uid === cols[parseInt(k.toString(), 10)].uid) {\n                                    break;\n                                }\n                                if (cols[parseInt(k.toString(), 10)].visible) {\n                                    width += parseInt(cols[parseInt(k.toString(), 10)].width.toString(), 10);\n                                }\n                            }\n                            if (summarycell && summarycell.length) {\n                                summarycell.filter(function (cell) {\n                                    applyStickyLeftRightPosition(cell, width - translateX, _this.parent.enableRtl, 'Left');\n                                });\n                            }\n                            applyStickyLeftRightPosition(node, width - translateX, this_2.parent.enableRtl, 'Left');\n                            if (this_2.parent.enableColumnVirtualization) {\n                                column.valueX = width;\n                            }\n                        }\n                        addStickyColumnPosition(this_2.parent, column, node);\n                    }\n                };\n                var this_2 = this;\n                for (var j = 0; j < th.length; j++) {\n                    _loop_2(j);\n                }\n            }\n        }\n        if (pos === 'Right') {\n            var tr = [].slice.call(this.parent.getHeaderContent().querySelector('thead').querySelectorAll('tr'));\n            for (var i = 0; i < tr.length; i++) {\n                var th = [].slice.call(tr[parseInt(i.toString(), 10)].querySelectorAll('.e-rightfreeze, .e-fixedfreeze'));\n                var _loop_3 = function (j) {\n                    var node = th[parseInt(j.toString(), 10)];\n                    var column = this_3.getParticularCol(node);\n                    var cols = this_3.parent.getColumns();\n                    var width = 0;\n                    var summarycell = [];\n                    if (this_3.parent.aggregates.length && this_3.parent.getFooterContent()) {\n                        if (this_3.parent.getContent().querySelectorAll('.e-summaryrow').length) {\n                            var summaryRows = [].slice.call(this_3.parent.getContent().querySelectorAll('.e-summaryrow'));\n                            summaryRows.filter(function (row) {\n                                summarycell.push(row.querySelector('[e-mappinguid=\"' + column.uid + '\"]'));\n                            });\n                        }\n                        summarycell = summarycell.concat([].slice.call(this_3.parent.getFooterContent().querySelectorAll('[e-mappinguid=\"' + column.uid + '\"]')));\n                    }\n                    if (node.classList.contains('e-fixedfreeze')) {\n                        width = this_3.parent.getFrozenMode() === 'Right' && this_3.parent.isRowDragable() ? 30 : 0;\n                        for (var w = cols.length - 1; w >= 0; w--) {\n                            if (column.index < cols[parseInt(w.toString(), 10)].index) {\n                                if ((column.columns && isChildColumn(column, cols[parseInt(w.toString(), 10)].uid)) ||\n                                    column.index > cols[parseInt(w.toString(), 10)].index) {\n                                    break;\n                                }\n                                if (cols[parseInt(w.toString(), 10)].freeze === 'Right' ||\n                                    cols[parseInt(w.toString(), 10)].freeze === 'Fixed') {\n                                    if (cols[parseInt(w.toString(), 10)].visible) {\n                                        width += parseFloat(cols[parseInt(w.toString(), 10)].width.toString());\n                                    }\n                                }\n                            }\n                        }\n                        if (summarycell.length) {\n                            summarycell.filter(function (cell) {\n                                applyStickyLeftRightPosition(cell, width + translateX, _this.parent.enableRtl, 'Right');\n                            });\n                        }\n                        applyStickyLeftRightPosition(node, width + translateX, this_3.parent.enableRtl, 'Right');\n                    }\n                    else {\n                        width = this_3.parent.getFrozenMode() === 'Right' && this_3.parent.isRowDragable() ? 30 : 0;\n                        for (var k = cols.length - 1; k >= 0; k--) {\n                            if ((column.columns && isChildColumn(column, cols[parseInt(k.toString(), 10)].uid)) ||\n                                column.index > cols[parseInt(k.toString(), 10)].index ||\n                                column.uid === cols[parseInt(k.toString(), 10)].uid) {\n                                break;\n                            }\n                            if (cols[parseInt(k.toString(), 10)].visible) {\n                                width += parseInt(cols[parseInt(k.toString(), 10)].width.toString(), 10);\n                            }\n                        }\n                        if (summarycell.length) {\n                            summarycell.filter(function (cell) {\n                                applyStickyLeftRightPosition(cell, width + translateX, _this.parent.enableRtl, 'Right');\n                            });\n                        }\n                        applyStickyLeftRightPosition(node, width + translateX, this_3.parent.enableRtl, 'Right');\n                        if (this_3.parent.enableColumnVirtualization) {\n                            column.valueX = width;\n                        }\n                    }\n                };\n                var this_3 = this;\n                for (var j = th.length - 1; j >= 0; j--) {\n                    _loop_3(j);\n                }\n            }\n        }\n    };\n    Resize.prototype.getParticularCol = function (node) {\n        var uid = node.classList.contains('e-filterbarcell') ? node.getAttribute('e-mappinguid') :\n            node.querySelector('[e-mappinguid]').getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.resizing = function (e) {\n        var _this = this;\n        if (Browser.isDevice && typeof e.preventDefault === 'function') {\n            e.preventDefault();\n        }\n        if (isNullOrUndefined(this.column)) {\n            return;\n        }\n        var offsetWidth = 0;\n        if (isNullOrUndefined(this.column)) {\n            offsetWidth = parentsUntil(this.element, 'th').offsetWidth;\n        }\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var prevWidth = parseFloat(this.column.width.toString());\n        var colData = this.getColData(this.column, mousemove);\n        if (!colData.width) {\n            colData.width = closest(this.element, 'th').offsetWidth;\n        }\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        this.parent.log('resize_min_max', { column: this.column, width: width });\n        if (((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX))) {\n            width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseFloat(isNullOrUndefined(this.column.width) || this.column.width === 'auto' ?\n            offsetWidth.toString() : this.column.width.toString())) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            var columns = [this.column];\n            var finalColumns = [this.column];\n            if (this.column.columns) {\n                columns = this.getSubColumns(this.column, []);\n                columns = this.calulateColumnsWidth(columns, false, mousemove);\n                finalColumns = this.calulateColumnsWidth(columns, true, mousemove);\n            }\n            var minMaxCols = this.parent.getColumns().filter(function (col) { return col.visible && (col.maxWidth || col.minWidth); });\n            if (this.parent.resizeSettings.mode === 'Auto' && minMaxCols.length) {\n                var columns_2 = this.parent.getColumns().filter(function (col) { return col.visible && col.uid !== _this.column.uid; });\n                var distributedCols = this.distributeColWidth(columns_2, mousemove, 0);\n                if (Math.round(distributedCols.usedWidth) !== Math.abs(mousemove)) {\n                    finalColumns[0].width = prevWidth + (distributedCols.usedWidth * Math.sign(mousemove));\n                }\n                finalColumns = finalColumns.concat(distributedCols.columns);\n            }\n            this.resizeProcess = true;\n            for (var _i = 0, finalColumns_1 = finalColumns; _i < finalColumns_1.length; _i++) {\n                var col = finalColumns_1[_i];\n                this.widthService.setColumnWidth(col, null, 'resize');\n            }\n            this.resizeProcess = false;\n            this.updateHelper();\n        }\n        if (this.parent.isFrozenGrid()) {\n            this.refreshResizefrzCols();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.distributeColWidth = function (columns, distributeWidth, usedWidth) {\n        var incDecWidth = distributeWidth / columns.length;\n        var absIncDecWidth = Math.abs(incDecWidth);\n        var appliedColumns = [];\n        var availableColumns = [];\n        var extraWidth = 0;\n        for (var _i = 0, columns_3 = columns; _i < columns_3.length; _i++) {\n            var col = columns_3[_i];\n            var afterIncDec = parseFloat(col.width.toString()) - incDecWidth;\n            if (col.minWidth && afterIncDec < parseInt(col.minWidth.toString(), 10)) {\n                var remainWidth = parseFloat((parseInt(col.minWidth.toString(), 10) - afterIncDec).toFixed(3));\n                extraWidth += remainWidth;\n                usedWidth += (absIncDecWidth - remainWidth);\n                col.width = col.minWidth;\n                appliedColumns.push(col);\n            }\n            else if (col.maxWidth && afterIncDec > parseInt(col.maxWidth.toString(), 10)) {\n                var remainWidth = parseFloat((afterIncDec - parseInt(col.maxWidth.toString(), 10)).toFixed(3));\n                extraWidth += remainWidth;\n                usedWidth += (absIncDecWidth - remainWidth);\n                col.width = col.maxWidth;\n                appliedColumns.push(col);\n            }\n            else {\n                usedWidth += absIncDecWidth;\n                col.width = afterIncDec;\n                availableColumns.push(col);\n            }\n        }\n        var distributedCols = extraWidth && availableColumns.length\n            ? this.distributeColWidth(availableColumns, extraWidth * Math.sign(distributeWidth), usedWidth)\n            : { columns: availableColumns, usedWidth: usedWidth };\n        return { columns: appliedColumns.concat(distributedCols.columns), usedWidth: distributedCols.usedWidth };\n    };\n    Resize.prototype.calulateColumnsWidth = function (columns, isUpdate, mousemove) {\n        var finalColumns = [];\n        for (var _i = 0, columns_4 = columns; _i < columns_4.length; _i++) {\n            var col = columns_4[_i];\n            var totalWidth = 0;\n            for (var i = 0; i < columns.length; i++) {\n                totalWidth += parseFloat(columns[parseInt(i.toString(), 10)].width.toString());\n            }\n            var colData = this.getColData(col, (parseFloat(col.width)) * mousemove / totalWidth);\n            var colWidth = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n            if ((colWidth !== parseFloat(col.width.toString()))) {\n                if (isUpdate) {\n                    col.width = formatUnit(colWidth < 1 ? 1 : colWidth);\n                }\n                finalColumns.push(col);\n            }\n        }\n        return finalColumns;\n    };\n    Resize.prototype.getSubColumns = function (column, subColumns) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false && col.allowResizing) {\n                if (col.columns) {\n                    this.getSubColumns(col, subColumns);\n                }\n                else {\n                    subColumns.push(col);\n                }\n            }\n        }\n        return subColumns;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        var gObj = this.parent;\n        if (gObj.isFrozenGrid()) {\n            this.refreshResizePosition();\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args = { e: e, column: this.column };\n        var content = this.parent.getContent().querySelector('.' + literals.content);\n        var cTable = content;\n        if (cTable.scrollHeight > cTable.clientHeight) {\n            this.parent.scrollModule.setPadding();\n            cTable.style.overflowY = 'scroll';\n        }\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        this.isFrozenColResized = false;\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.parent.notify(events.textWrapRefresh, { case: 'textwrap' });\n        }\n        var headerTable = gObj.getHeaderTable();\n        var contentTable = gObj.getContentTable();\n        var footerTable;\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            if (!isNullOrUndefined(contentTable.querySelector('.e-emptyrow'))) {\n                addClass([headerTable], ['e-tableborder']);\n                removeClass([contentTable], ['e-tableborder']);\n            }\n            else {\n                addClass([headerTable, contentTable], ['e-tableborder']);\n            }\n            removeClass([gObj.element], ['e-left-shadow', 'e-right-shadow']);\n        }\n        else {\n            removeClass([headerTable, contentTable], ['e-tableborder']);\n            if (gObj.getVisibleFrozenRightCount()) {\n                addClass([gObj.element], 'e-right-shadow');\n            }\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderContent().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_5 = columns; _b < columns_5.length; _b++) {\n                var column = columns_5[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.refreshStackedColumnWidth = function () {\n        for (var _i = 0, _a = this.parent.getStackedColumns(this.parent.columns); _i < _a.length; _i++) {\n            var stackedColumn = _a[_i];\n            stackedColumn.width = this.getStackedWidth(stackedColumn, 0);\n        }\n    };\n    Resize.prototype.getStackedWidth = function (column, width) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false) {\n                if (col.columns) {\n                    width = this.getStackedWidth(col, width);\n                }\n                else {\n                    width += parseFloat(col.width.toString());\n                }\n            }\n        }\n        return width;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        cell = cell.querySelector('.e-headercelldiv') || cell.querySelector('.e-stackedheadercelldiv');\n        var uid = cell.getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[\"\" + action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length && i > -1; i++) {\n            height += tr[parseInt(i.toString(), 10)].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n        if (this.parent.enableVirtualization) {\n            this.helper.classList.add('e-virtual-rhandler');\n        }\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left;\n        left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = parentsUntil(elem, 'e-grid') || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        var _this = this;\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(function () {\n                    _this.tapped = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}