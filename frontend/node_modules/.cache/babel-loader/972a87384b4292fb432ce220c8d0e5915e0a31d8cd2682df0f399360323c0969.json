{"ast":null,"code":"import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * 'column menu module used to handle column menu actions'\n *\n * @hidden\n */\nvar ColumnMenu = /** @class */function () {\n  function ColumnMenu(parent, serviceLocator) {\n    this.defaultItems = {};\n    this.localeText = this.setLocaleKey();\n    this.disableItems = [];\n    this.hiddenItems = [];\n    this.isOpen = false;\n    // default class names\n    this.GROUP = 'e-icon-group';\n    this.UNGROUP = 'e-icon-ungroup';\n    this.ASCENDING = 'e-icon-ascending';\n    this.DESCENDING = 'e-icon-descending';\n    this.ROOT = 'e-columnmenu';\n    this.FILTER = 'e-icon-filter';\n    this.POP = 'e-filter-popup';\n    this.WRAP = 'e-col-menu';\n    this.COL_POP = 'e-colmenu-popup';\n    this.CHOOSER = '_chooser_';\n    this.AUTOFIT = 'e-icon-autofit';\n    this.AUTOFITALL = 'e-icon-autofitall';\n    this.COLUMNCHOOSER = 'e-icon-columnchooser';\n    this.parent = parent;\n    this.gridID = parent.element.id;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n    if (this.parent.enableAdaptiveUI) {\n      this.setFullScreenDialog();\n    }\n  }\n  ColumnMenu.prototype.wireEvents = function () {\n    if (!this.parent.enableAdaptiveUI) {\n      var elements = this.getColumnMenuHandlers();\n      for (var i = 0; i < elements.length; i++) {\n        EventHandler.add(elements[parseInt(i.toString(), 10)], 'mousedown', this.columnMenuHandlerDown, this);\n      }\n    }\n  };\n  ColumnMenu.prototype.unwireEvents = function () {\n    if (!this.parent.enableAdaptiveUI) {\n      var elements = this.getColumnMenuHandlers();\n      for (var i = 0; i < elements.length; i++) {\n        EventHandler.remove(elements[parseInt(i.toString(), 10)], 'mousedown', this.columnMenuHandlerDown);\n      }\n    }\n  };\n  ColumnMenu.prototype.setFullScreenDialog = function () {\n    if (this.serviceLocator) {\n      this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isColMenu);\n    }\n  };\n  /**\n   * To destroy the resize\n   *\n   * @returns {void}\n   * @hidden\n   */\n  ColumnMenu.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (!gridElement.querySelector('.' + literals.gridContent) && !gridElement.querySelector('.' + literals.gridHeader) || !gridElement) {\n      return;\n    }\n    if (this.columnMenu) {\n      this.columnMenu.destroy();\n    }\n    this.removeEventListener();\n    this.unwireFilterEvents();\n    this.unwireEvents();\n    if (!this.parent.enableAdaptiveUI && this.element.parentNode) {\n      remove(this.element);\n    }\n  };\n  ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n    if (e.target.classList.contains('e-columnmenu')) {\n      if (this.parent.enableAdaptiveUI) {\n        this.headerCell = this.getHeaderCell(e);\n        var col = this.getColumn();\n        this.responsiveDialogRenderer.isCustomDialog = true;\n        this.parent.notify(events.renderResponsiveChangeAction, {\n          action: 4\n        });\n        this.parent.notify(events.filterOpen, {\n          col: col,\n          target: e.target,\n          isClose: null,\n          id: null\n        });\n        this.responsiveDialogRenderer.showResponsiveDialog(null, col);\n      } else {\n        this.columnMenu.items = this.getItems();\n        this.columnMenu.dataBind();\n        if (this.isOpen && this.headerCell !== this.getHeaderCell(e) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n          this.columnMenu.close();\n          this.openColumnMenu(e);\n        } else if (!this.isOpen) {\n          this.openColumnMenu(e);\n        } else {\n          this.columnMenu.close();\n        }\n      }\n    }\n  };\n  /**\n   * @param {string} field - specifies the field name\n   * @returns {void}\n   * @hidden\n   */\n  ColumnMenu.prototype.openColumnMenuByField = function (field) {\n    this.openColumnMenu({\n      target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu')\n    });\n  };\n  ColumnMenu.prototype.afterFilterColumnMenuClose = function () {\n    if (this.columnMenu) {\n      this.columnMenu.items = this.getItems();\n      this.columnMenu.dataBind();\n      this.columnMenu.close();\n    }\n  };\n  ColumnMenu.prototype.openColumnMenu = function (e) {\n    var contentRect = this.parent.getContent().getClientRects()[0];\n    var headerEle = this.parent.getHeaderContent();\n    var headerElemCliRect = headerEle.getBoundingClientRect();\n    var pos = {\n      top: 0,\n      left: 0\n    };\n    this.element.style.cssText = 'display:block;visibility:hidden';\n    var elePos = this.element.getBoundingClientRect();\n    var gClient = this.parent.element.getBoundingClientRect();\n    this.element.style.cssText = 'display:none;visibility:visible';\n    this.headerCell = this.getHeaderCell(e);\n    if (this.parent.enableRtl) {\n      pos = this.parent.enableStickyHeader ? calculatePosition(this.headerCell, 'left', 'bottom', true) : calculatePosition(this.headerCell, 'left', 'bottom');\n    } else {\n      pos = this.parent.enableStickyHeader ? calculatePosition(this.headerCell, 'right', 'bottom', true) : calculatePosition(this.headerCell, 'right', 'bottom');\n      pos.left -= elePos.width;\n      if (headerEle.classList.contains('e-sticky')) {\n        pos.top = this.parent.element.offsetTop + headerElemCliRect.top + headerElemCliRect.height;\n        if (headerElemCliRect.top + headerElemCliRect.height > contentRect.top) {\n          pos.top += headerElemCliRect.top + headerElemCliRect.height - contentRect.top;\n        }\n      } else if (this.parent.enableStickyHeader) {\n        pos.top = this.parent.element.offsetTop + headerEle.offsetTop + headerElemCliRect.height;\n      }\n      if (pos.left + elePos.width + 1 >= gClient.right) {\n        pos.left -= 35;\n      }\n    }\n    this.columnMenu['open'](pos.top, pos.left);\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n    applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n  };\n  ColumnMenu.prototype.columnMenuHandlerDown = function () {\n    this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n  };\n  ColumnMenu.prototype.getColumnMenuHandlers = function () {\n    return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT));\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnMenu.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.headerRefreshed, this.wireEvents, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n    this.parent.on(events.initialEnd, this.render, this);\n    if (this.isFilterItemAdded()) {\n      this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n    }\n    this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n    this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n    this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnMenu.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.headerRefreshed, this.unwireEvents);\n    this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n    this.parent.off(events.initialEnd, this.render);\n    if (this.isFilterItemAdded()) {\n      this.parent.off(events.filterDialogCreated, this.filterPosition);\n    }\n    this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n    this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n    this.parent.off(events.click, this.columnMenuHandlerClick);\n    this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose);\n    this.parent.off(events.keyPressed, this.keyPressHandler);\n    this.parent.off(events.destroy, this.destroy);\n  };\n  ColumnMenu.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n    if (e.action === 'altDownArrow' && !this.parent.enableAdaptiveUI) {\n      var element = gObj.focusModule.currentInfo.element;\n      if (element && element.classList.contains('e-headercell')) {\n        var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n        this.openColumnMenuByField(column.field);\n      }\n    }\n  };\n  ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      if (this.columnMenu) {\n        this.columnMenu.destroy();\n        remove(this.element);\n      }\n      if (!this.parent.enableAdaptiveUI) {\n        this.render();\n      }\n    }\n  };\n  ColumnMenu.prototype.render = function () {\n    if (this.parent.enableAdaptiveUI) {\n      return;\n    }\n    this.l10n = this.serviceLocator.getService('localization');\n    this.element = this.parent.createElement('ul', {\n      id: this.gridID + '_columnmenu',\n      className: 'e-colmenu'\n    });\n    this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n    this.parent.element.appendChild(this.element);\n    this.columnMenu = new Menu({\n      cssClass: this.parent.cssClass ? 'e-grid-menu e-grid-column-menu' + ' ' + this.parent.cssClass : 'e-grid-menu e-grid-column-menu',\n      enableRtl: this.parent.enableRtl,\n      enablePersistence: this.parent.enablePersistence,\n      locale: this.parent.locale,\n      items: this.getItems(),\n      select: this.columnMenuItemClick.bind(this),\n      beforeOpen: this.columnMenuBeforeOpen.bind(this),\n      onOpen: this.columnMenuOnOpen.bind(this),\n      onClose: this.columnMenuOnClose.bind(this),\n      beforeItemRender: this.beforeMenuItemRender.bind(this),\n      beforeClose: this.columnMenuBeforeClose.bind(this)\n    });\n    if (this.element && parentsUntil(this.element, 'e-popup')) {\n      this.element.classList.add(this.COL_POP);\n    }\n    this.columnMenu.appendTo(this.element);\n    this.wireFilterEvents();\n  };\n  ColumnMenu.prototype.wireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded()) {\n      EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n    }\n  };\n  ColumnMenu.prototype.unwireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded() && !this.parent.enableAdaptiveUI) {\n      EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n    }\n  };\n  ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n    var _a;\n    if (this.isChooserItem(args.item)) {\n      var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n      var column = this.parent.columnModel.filter(function (col) {\n        return col.field === field_1;\n      });\n      var check = createCheckBox(this.parent.createElement, false, {\n        label: args.item.text,\n        checked: column[0].visible\n      });\n      if (this.parent.enableRtl) {\n        check.classList.add('e-rtl');\n      }\n      if (this.parent.cssClass) {\n        if (this.parent.cssClass.indexOf(' ') !== -1) {\n          (_a = check.classList).add.apply(_a, this.parent.cssClass.split(' '));\n        } else {\n          check.classList.add(this.parent.cssClass);\n        }\n      }\n      args.element.innerHTML = '';\n      args.element.appendChild(check);\n    } else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n      args.element.appendChild(this.parent.createElement('span', {\n        className: 'e-icons e-caret'\n      }));\n      args.element.className += 'e-filter-item e-menu-caret-icon';\n    }\n  };\n  ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n    if (args.event && args.event.target instanceof Document && args.event.type === 'scroll') {\n      if (!this.parent.enableStickyHeader) {\n        args.cancel = true;\n      }\n      return;\n    }\n    var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n    if (!isNullOrUndefined(args.parentItem) && this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' && colChooser && this.isChooserItem(colChooser)) {\n      args.cancel = args.event && args.event.code === 'Escape' ? false : true;\n    } else if (args.event && (closest(args.event.target, '.' + this.POP) || args.event.currentTarget && args.event.currentTarget.activeElement && parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup') || parentsUntil(args.event.target, 'e-popup') && parentsUntil(args.event.target, 'e-colmenu-popup') || parentsUntil(args.event.target, 'e-multiselect-flmenu') || parentsUntil(args.event.target, 'e-popup-wrapper')) && !Browser.isDevice) {\n      args.cancel = true;\n    } else if (args.event && args.event.target && args.event.target.classList.contains('e-filter-item') && args.event.key === 'Enter') {\n      args.cancel = true;\n    } else if (this.parent.isColumnMenuFilterClosing) {\n      this.parent.isColumnMenuFilterClosing = false;\n      args.cancel = true;\n    }\n  };\n  ColumnMenu.prototype.isChooserItem = function (item) {\n    return item.id && item.id.indexOf('_colmenu_') >= 0 && this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n  };\n  ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n    args.column = this.targetColumn = this.getColumn();\n    this.parent.trigger(events.columnMenuOpen, args);\n    for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      var key = this.getKeyFromId(item.id);\n      var dItem = this.defaultItems[\"\" + key];\n      if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n        this.disableItems.push(item.text);\n      }\n      if (item.hide) {\n        this.hiddenItems.push(item.text);\n      }\n    }\n    this.columnMenu.enableItems(this.disableItems, false);\n    this.columnMenu.hideItems(this.hiddenItems);\n  };\n  ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n    if (args.element.className === 'e-menu-parent e-ul ') {\n      if (args.element.offsetHeight > window.innerHeight || this.parent.element.offsetHeight > window.innerHeight) {\n        args.element.style.maxHeight = window.innerHeight * 0.8 + 'px';\n        args.element.style.overflowY = 'auto';\n        if (this.parent.enableStickyHeader) {\n          args.element.style.position = 'fixed';\n        }\n      }\n    }\n  };\n  ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n    var status = false;\n    switch (item) {\n      case 'Group':\n        if (!this.parent.allowGrouping || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 || this.targetColumn && !this.targetColumn.allowGrouping) {\n          status = true;\n        }\n        break;\n      case 'AutoFitAll':\n      case 'AutoFit':\n        status = !this.parent.ensureModuleInjected(Resize);\n        break;\n      case 'Ungroup':\n        if (!this.parent.ensureModuleInjected(Group) || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0) {\n          status = true;\n        }\n        break;\n      case 'SortDescending':\n      case 'SortAscending':\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n          var sortColumns = this.parent.sortSettings.columns;\n          for (var i = 0; i < sortColumns.length; i++) {\n            if (sortColumns[parseInt(i.toString(), 10)].field === this.targetColumn.field && sortColumns[parseInt(i.toString(), 10)].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n              status = true;\n            }\n          }\n        } else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) || this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n          status = true;\n        }\n        break;\n      case 'Filter':\n        if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n          status = false;\n        } else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n          status = true;\n        }\n    }\n    return status;\n  };\n  ColumnMenu.prototype.columnMenuItemClick = function (args) {\n    var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n    switch (item) {\n      case 'AutoFit':\n        this.parent.autoFitColumns(this.targetColumn.field);\n        break;\n      case 'AutoFitAll':\n        this.parent.autoFitColumns([]);\n        break;\n      case 'Ungroup':\n        this.parent.ungroupColumn(this.targetColumn.field);\n        break;\n      case 'Group':\n        this.parent.groupColumn(this.targetColumn.field);\n        break;\n      case 'SortAscending':\n        this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n        break;\n      case 'SortDescending':\n        this.parent.sortColumn(this.targetColumn.field, 'Descending');\n        break;\n      case 'ColumnChooser':\n        // eslint-disable-next-line no-case-declarations\n        var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n        // eslint-disable-next-line no-case-declarations\n        var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n        if (checkbox && checkbox.classList.contains('e-check')) {\n          checkbox.classList.remove('e-check');\n          this.parent.hideColumns(key, 'field');\n        } else if (checkbox) {\n          this.parent.showColumns(key, 'field');\n          checkbox.classList.add('e-check');\n        }\n        break;\n      case 'Filter':\n        this.getFilter(args.element, args.item.id);\n        break;\n    }\n    args.column = this.targetColumn;\n    this.parent.trigger(events.columnMenuClick, args);\n  };\n  ColumnMenu.prototype.columnMenuOnClose = function (args) {\n    var parent = 'parentObj';\n    if (args.items.length > 0 && args.items[0][\"\" + parent] instanceof Menu) {\n      this.columnMenu.enableItems(this.disableItems, false);\n      this.disableItems = [];\n      this.columnMenu.showItems(this.hiddenItems);\n      this.hiddenItems = [];\n      if (this.isFilterPopupOpen()) {\n        this.getFilter(args.element, args.element.id, true);\n      }\n    }\n    if (!isNullOrUndefined(args.parentItem) && this.getKeyFromId(args.parentItem.id) === 'ColumnChooser') {\n      if (this.columnMenu.element.querySelector('.e-selected')) {\n        this.columnMenu.element.querySelector('.e-selected').focus();\n      }\n    } else {\n      this.parent.notify(events.restoreFocus, {});\n    }\n  };\n  ColumnMenu.prototype.getDefaultItems = function () {\n    return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n  };\n  ColumnMenu.prototype.getItems = function () {\n    var items = [];\n    var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n    for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n      var item = defultItems_1[_i];\n      if (typeof item === 'string') {\n        if (item === 'ColumnChooser') {\n          var col = this.getDefaultItem(item);\n          col.items = this.createChooserItems();\n          items.push(col);\n        } else {\n          items.push(this.getDefaultItem(item));\n        }\n      } else {\n        items.push(item);\n      }\n    }\n    return items;\n  };\n  ColumnMenu.prototype.getDefaultItem = function (item) {\n    var menuItem = {};\n    switch (item) {\n      case 'SortAscending':\n        menuItem = {\n          iconCss: this.ASCENDING\n        };\n        break;\n      case 'SortDescending':\n        menuItem = {\n          iconCss: this.DESCENDING\n        };\n        break;\n      case 'Group':\n        menuItem = {\n          iconCss: this.GROUP\n        };\n        break;\n      case 'Ungroup':\n        menuItem = {\n          iconCss: this.UNGROUP\n        };\n        break;\n      case 'Filter':\n        menuItem = {\n          iconCss: this.FILTER\n        };\n        break;\n      case 'ColumnChooser':\n        menuItem = {\n          iconCss: this.COLUMNCHOOSER\n        };\n        break;\n      case 'AutoFit':\n        menuItem = {\n          iconCss: this.AUTOFIT\n        };\n        break;\n      case 'AutoFitAll':\n        menuItem = {\n          iconCss: this.AUTOFITALL\n        };\n        break;\n    }\n    this.defaultItems[\"\" + item] = {\n      text: this.getLocaleText(item),\n      id: this.generateID(item),\n      iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n    };\n    return this.defaultItems[\"\" + item];\n  };\n  ColumnMenu.prototype.getLocaleText = function (item) {\n    return this.l10n.getConstant(this.localeText[\"\" + item]);\n  };\n  ColumnMenu.prototype.generateID = function (item, append) {\n    return this.gridID + '_colmenu_' + (append ? append + item : item);\n  };\n  ColumnMenu.prototype.getKeyFromId = function (id, append) {\n    return id.indexOf('_colmenu_') > 0 && id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n  };\n  /**\n   * @returns {HTMLElement} returns the HTMLElement\n   * @hidden\n   */\n  ColumnMenu.prototype.getColumnMenu = function () {\n    return this.element;\n  };\n  ColumnMenu.prototype.getModuleName = function () {\n    return 'columnMenu';\n  };\n  ColumnMenu.prototype.setLocaleKey = function () {\n    var localeKeys = {\n      'AutoFitAll': 'autoFitAll',\n      'AutoFit': 'autoFit',\n      'Group': 'Group',\n      'Ungroup': 'Ungroup',\n      'SortAscending': 'SortAscending',\n      'SortDescending': 'SortDescending',\n      'ColumnChooser': 'Columnchooser',\n      'Filter': 'FilterMenu'\n    };\n    return localeKeys;\n  };\n  ColumnMenu.prototype.getHeaderCell = function (e) {\n    return closest(e.target, 'th.e-headercell');\n  };\n  ColumnMenu.prototype.getColumn = function () {\n    if (this.headerCell) {\n      var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n      return this.parent.getColumnByUid(uid);\n    }\n    return null;\n  };\n  ColumnMenu.prototype.createChooserItems = function () {\n    var items = [];\n    for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n      var col = _a[_i];\n      if (col.showInColumnChooser && col.field) {\n        items.push({\n          id: this.generateID(col.field, this.CHOOSER),\n          text: col.headerText ? col.headerText : col.field\n        });\n      }\n    }\n    return items;\n  };\n  ColumnMenu.prototype.appendFilter = function (e) {\n    var filter = 'Filter';\n    if (!this.defaultItems[\"\" + filter]) {\n      return;\n    } else {\n      var key = this.defaultItems[\"\" + filter].id;\n      if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key);\n      } else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key, true);\n      }\n    }\n  };\n  ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n    var filterPopup = this.getFilterPop();\n    if (filterPopup) {\n      filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n      if (filterPopup.style.display !== 'none') {\n        if (this.parent.filterSettings.type === 'Menu') {\n          if (filterPopup.querySelector('.e-flmenu-input')) {\n            filterPopup.querySelector('.e-flmenu-input').focus();\n          } else if (filterPopup.querySelector('.e-flmenu-valuediv')) {\n            var firstElementChild = filterPopup.querySelector('.e-flmenu-valuediv').firstElementChild;\n            if (!isNullOrUndefined(firstElementChild)) {\n              firstElementChild.focus();\n            }\n          }\n        } else if (this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n          if (filterPopup.querySelector('.e-searchinput')) {\n            filterPopup.querySelector('.e-searchinput').focus();\n          }\n        }\n      }\n    } else {\n      this.parent.notify(events.filterOpen, {\n        col: this.targetColumn,\n        target: target,\n        isClose: isClose,\n        id: id\n      });\n    }\n  };\n  ColumnMenu.prototype.setPosition = function (li, ul) {\n    var gridPos = this.parent.element.getBoundingClientRect();\n    var liPos = li.getBoundingClientRect();\n    var left = liPos.left - gridPos.left;\n    var top = liPos.top - gridPos.top;\n    if (gridPos.height < top) {\n      top = top - ul.offsetHeight + liPos.height;\n    } else if (gridPos.height < top + ul.offsetHeight) {\n      top = gridPos.height - ul.offsetHeight;\n    }\n    if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n      top = window.innerHeight - ul.offsetHeight - gridPos.top;\n    }\n    if (top + gridPos.top < 0) {\n      top = 0;\n    }\n    if (this.parent.enableStickyHeader && gridPos.top <= 0) {\n      top = liPos.top - gridPos.top;\n    }\n    left += this.parent.enableRtl ? -ul.offsetWidth : liPos.width;\n    if (gridPos.width <= left + ul.offsetWidth) {\n      left -= liPos.width + ul.offsetWidth;\n      if (liPos.left < ul.offsetWidth) {\n        left = liPos.left + ul.offsetWidth / 2;\n      }\n    } else if (left < 0) {\n      left += ul.offsetWidth + liPos.width;\n    }\n    ul.style.top = top + 'px';\n    ul.style.left = left + 'px';\n  };\n  ColumnMenu.prototype.filterPosition = function () {\n    var filterPopup = this.getFilterPop();\n    if (this.parent.enableAdaptiveUI) {\n      return;\n    }\n    filterPopup.classList.add(this.WRAP);\n    if (!Browser.isDevice) {\n      var disp = filterPopup.style.display;\n      filterPopup.style.cssText += 'display:block;visibility:hidden';\n      var li = this.element.querySelector('.' + this.FILTER);\n      if (li) {\n        this.setPosition(li.parentElement, filterPopup);\n        filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n      }\n    }\n  };\n  ColumnMenu.prototype.getDefault = function () {\n    var items = [];\n    if (this.parent.ensureModuleInjected(Resize)) {\n      items.push('AutoFitAll');\n      items.push('AutoFit');\n    }\n    if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n      items.push('Group');\n      items.push('Ungroup');\n    }\n    if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n      items.push('SortAscending');\n      items.push('SortDescending');\n    }\n    items.push('ColumnChooser');\n    if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter)) {\n      items.push('Filter');\n    }\n    return items;\n  };\n  ColumnMenu.prototype.isFilterPopupOpen = function () {\n    var filterPopup = this.getFilterPop();\n    return filterPopup && filterPopup.style.display !== 'none';\n  };\n  ColumnMenu.prototype.getFilterPop = function () {\n    if (!isNullOrUndefined(this.targetColumn) && this.parent.filterSettings.type === 'Menu' && Browser.isDevice) {\n      return document.getElementById(this.targetColumn.uid + '-flmdlg');\n    }\n    var popElement = this.parent.element.querySelector('.' + this.POP);\n    if (!popElement) {\n      var popupContainer = document.getElementById(this.parent.element.id + '_e-popup');\n      popElement = popupContainer ? popupContainer.querySelector('.' + this.POP) : null;\n    }\n    if (!popElement && this.parent.element.classList.contains('e-treelistgrid')) {\n      var ganttElement = closest(this.parent.element, '.e-gantt');\n      popElement = ganttElement ? ganttElement.querySelector('.' + this.POP) : null;\n    }\n    return popElement;\n  };\n  ColumnMenu.prototype.isFilterItemAdded = function () {\n    return this.parent.columnMenuItems && this.parent.columnMenuItems.indexOf('Filter') >= 0 || !this.parent.columnMenuItems;\n  };\n  ColumnMenu.prototype.renderResponsiveChangeAction = function (args) {\n    this.responsiveDialogRenderer.action = args.action;\n  };\n  return ColumnMenu;\n}();\nexport { ColumnMenu };","map":{"version":3,"names":["EventHandler","closest","Browser","isNullOrUndefined","remove","ContextMenu","Menu","parentsUntil","applyBiggerTheme","events","calculatePosition","createCheckBox","Group","Sort","Filter","Resize","ResponsiveDialogAction","literals","ColumnMenu","parent","serviceLocator","defaultItems","localeText","setLocaleKey","disableItems","hiddenItems","isOpen","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","COL_POP","CHOOSER","AUTOFIT","AUTOFITALL","COLUMNCHOOSER","gridID","element","id","addEventListener","enableAdaptiveUI","setFullScreenDialog","prototype","wireEvents","elements","getColumnMenuHandlers","i","length","add","parseInt","toString","columnMenuHandlerDown","unwireEvents","registerAdaptiveService","isColMenu","destroy","gridElement","querySelector","gridContent","gridHeader","columnMenu","removeEventListener","unwireFilterEvents","parentNode","columnMenuHandlerClick","e","target","classList","contains","headerCell","getHeaderCell","col","getColumn","responsiveDialogRenderer","isCustomDialog","notify","renderResponsiveChangeAction","action","filterOpen","isClose","showResponsiveDialog","items","getItems","dataBind","document","close","openColumnMenu","openColumnMenuByField","field","getColumnHeaderByField","afterFilterColumnMenuClose","contentRect","getContent","getClientRects","headerEle","getHeaderContent","headerElemCliRect","getBoundingClientRect","pos","top","left","style","cssText","elePos","gClient","enableRtl","enableStickyHeader","width","offsetTop","height","right","preventDefault","parentElement","display","slice","call","getHeaderTable","getElementsByClassName","isDestroyed","on","headerRefreshed","uiUpdate","enableAfterRenderMenu","initialEnd","render","isFilterItemAdded","filterDialogCreated","filterPosition","click","keyPressed","keyPressHandler","off","gObj","focusModule","currentInfo","column","getColumnByUid","firstElementChild","getAttribute","module","getModuleName","enable","l10n","getService","createElement","className","setAttribute","getConstant","appendChild","cssClass","enablePersistence","locale","select","columnMenuItemClick","bind","beforeOpen","columnMenuBeforeOpen","onOpen","columnMenuOnOpen","onClose","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","beforeClose","columnMenuBeforeClose","appendTo","wireFilterEvents","isDevice","appendFilter","args","_a","isChooserItem","item","field_1","getKeyFromId","columnModel","filter","check","label","text","checked","visible","indexOf","apply","split","innerHTML","event","Document","type","cancel","colChooser","parentItem","code","currentTarget","activeElement","key","isColumnMenuFilterClosing","targetColumn","trigger","columnMenuOpen","_i","dItem","getDefaultItems","ensureDisabledStatus","hide","push","enableItems","hideItems","offsetHeight","window","innerHeight","maxHeight","overflowY","position","status","allowGrouping","ensureModuleInjected","groupSettings","columns","allowSorting","sortSettings","sortColumns","direction","toLocaleLowerCase","replace","allowFiltering","filterSettings","autoFitColumns","ungroupColumn","groupColumn","sortColumn","checkbox","hideColumns","showColumns","getFilter","columnMenuClick","showItems","isFilterPopupOpen","focus","restoreFocus","defultItems","columnMenuItems","getDefault","defultItems_1","getDefaultItem","createChooserItems","menuItem","iconCss","getLocaleText","generateID","append","getColumnMenu","localeKeys","uid","showInColumnChooser","headerText","filterPopup","getFilterPop","setPosition","li","ul","gridPos","liPos","offsetWidth","disp","getElementById","popElement","popupContainer","ganttElement"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/column-menu.js"],"sourcesContent":["import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport * as literals from '../base/string-literals';\n/**\n * 'column menu module used to handle column menu actions'\n *\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.COL_POP = 'e-colmenu-popup';\n        this.CHOOSER = '_chooser_';\n        this.AUTOFIT = 'e-icon-autofit';\n        this.AUTOFITALL = 'e-icon-autofitall';\n        this.COLUMNCHOOSER = 'e-icon-columnchooser';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        if (this.parent.enableAdaptiveUI) {\n            this.setFullScreenDialog();\n        }\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        if (!this.parent.enableAdaptiveUI) {\n            var elements = this.getColumnMenuHandlers();\n            for (var i = 0; i < elements.length; i++) {\n                EventHandler.add(elements[parseInt(i.toString(), 10)], 'mousedown', this.columnMenuHandlerDown, this);\n            }\n        }\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        if (!this.parent.enableAdaptiveUI) {\n            var elements = this.getColumnMenuHandlers();\n            for (var i = 0; i < elements.length; i++) {\n                EventHandler.remove(elements[parseInt(i.toString(), 10)], 'mousedown', this.columnMenuHandlerDown);\n            }\n        }\n    };\n    ColumnMenu.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isColMenu);\n        }\n    };\n    /**\n     * To destroy the resize\n     *\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement.querySelector('.' + literals.gridContent) && (!gridElement.querySelector('.' + literals.gridHeader)) || !gridElement) {\n            return;\n        }\n        if (this.columnMenu) {\n            this.columnMenu.destroy();\n        }\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        if (!this.parent.enableAdaptiveUI && this.element.parentNode) {\n            remove(this.element);\n        }\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            if (this.parent.enableAdaptiveUI) {\n                this.headerCell = this.getHeaderCell(e);\n                var col = this.getColumn();\n                this.responsiveDialogRenderer.isCustomDialog = true;\n                this.parent.notify(events.renderResponsiveChangeAction, { action: 4 });\n                this.parent.notify(events.filterOpen, { col: col, target: e.target, isClose: null, id: null });\n                this.responsiveDialogRenderer.showResponsiveDialog(null, col);\n            }\n            else {\n                this.columnMenu.items = this.getItems();\n                this.columnMenu.dataBind();\n                if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) ||\n                    document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                    this.columnMenu.close();\n                    this.openColumnMenu(e);\n                }\n                else if (!this.isOpen) {\n                    this.openColumnMenu(e);\n                }\n                else {\n                    this.columnMenu.close();\n                }\n            }\n        }\n    };\n    /**\n     * @param {string} field - specifies the field name\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.openColumnMenuByField = function (field) {\n        this.openColumnMenu({ target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu') });\n    };\n    ColumnMenu.prototype.afterFilterColumnMenuClose = function () {\n        if (this.columnMenu) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            this.columnMenu.close();\n        }\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var contentRect = this.parent.getContent().getClientRects()[0];\n        var headerEle = this.parent.getHeaderContent();\n        var headerElemCliRect = headerEle.getBoundingClientRect();\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        var gClient = this.parent.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (this.parent.enableRtl) {\n            pos = this.parent.enableStickyHeader ? calculatePosition(this.headerCell, 'left', 'bottom', true) :\n                calculatePosition(this.headerCell, 'left', 'bottom');\n        }\n        else {\n            pos = this.parent.enableStickyHeader ? calculatePosition(this.headerCell, 'right', 'bottom', true) :\n                calculatePosition(this.headerCell, 'right', 'bottom');\n            pos.left -= elePos.width;\n            if (headerEle.classList.contains('e-sticky')) {\n                pos.top = this.parent.element.offsetTop + headerElemCliRect.top + headerElemCliRect.height;\n                if (headerElemCliRect.top + headerElemCliRect.height > contentRect.top) {\n                    pos.top += ((headerElemCliRect.top + headerElemCliRect.height) - contentRect.top);\n                }\n            }\n            else if (this.parent.enableStickyHeader) {\n                pos.top = this.parent.element.offsetTop + headerEle.offsetTop + headerElemCliRect.height;\n            }\n            if ((pos.left + elePos.width + 1) >= gClient.right) {\n                pos.left -= 35;\n            }\n        }\n        this.columnMenu['open'](pos.top, pos.left);\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function () {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT));\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n        this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n        this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n        this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n        this.parent.on(events.afterFilterColumnMenuClose, this.afterFilterColumnMenuClose);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    ColumnMenu.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action === 'altDownArrow' && !this.parent.enableAdaptiveUI) {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openColumnMenuByField(column.field);\n            }\n        }\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            if (!this.parent.enableAdaptiveUI) {\n                this.render();\n            }\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        if (this.parent.enableAdaptiveUI) {\n            return;\n        }\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: this.parent.cssClass ? 'e-grid-menu e-grid-column-menu' + ' ' + this.parent.cssClass : 'e-grid-menu e-grid-column-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        if (this.element && parentsUntil(this.element, 'e-popup')) {\n            this.element.classList.add(this.COL_POP);\n        }\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded() && !this.parent.enableAdaptiveUI) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        var _a;\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            if (this.parent.cssClass) {\n                if (this.parent.cssClass.indexOf(' ') !== -1) {\n                    (_a = check.classList).add.apply(_a, this.parent.cssClass.split(' '));\n                }\n                else {\n                    check.classList.add(this.parent.cssClass);\n                }\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        if (args.event && args.event.target instanceof Document && args.event.type === 'scroll') {\n            if (!this.parent.enableStickyHeader) {\n                args.cancel = true;\n            }\n            return;\n        }\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = args.event && args.event.code === 'Escape' ? false : true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || (parentsUntil(args.event.target, 'e-popup') && parentsUntil(args.event.target, 'e-colmenu-popup'))\n            || (parentsUntil(args.event.target, 'e-multiselect-flmenu'))\n            || (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n        else if (args.event && args.event.target && args.event.target.classList.contains('e-filter-item') && args.event.key === 'Enter') {\n            args.cancel = true;\n        }\n        else if (this.parent.isColumnMenuFilterClosing) {\n            this.parent.isColumnMenuFilterClosing = false;\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[\"\" + key];\n            if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n                this.disableItems.push(item.text);\n            }\n            if (item.hide) {\n                this.hiddenItems.push(item.text);\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight || this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n                if (this.parent.enableStickyHeader) {\n                    args.element.style.position = 'fixed';\n                }\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[parseInt(i.toString(), 10)].field === this.targetColumn.field\n                            && sortColumns[parseInt(i.toString(), 10)].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    }\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                // eslint-disable-next-line no-case-declarations\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                // eslint-disable-next-line no-case-declarations\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][\"\" + parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n        if (!isNullOrUndefined(args.parentItem) && this.getKeyFromId(args.parentItem.id) === 'ColumnChooser') {\n            if (this.columnMenu.element.querySelector('.e-selected')) {\n                this.columnMenu.element.querySelector('.e-selected').focus();\n            }\n        }\n        else {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n            case 'ColumnChooser':\n                menuItem = { iconCss: this.COLUMNCHOOSER };\n                break;\n            case 'AutoFit':\n                menuItem = { iconCss: this.AUTOFIT };\n                break;\n            case 'AutoFitAll':\n                menuItem = { iconCss: this.AUTOFITALL };\n                break;\n        }\n        this.defaultItems[\"\" + item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[\"\" + item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[\"\" + item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @returns {HTMLElement} returns the HTMLElement\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n        return localeKeys;\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[\"\" + filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[\"\" + filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n            if (filterPopup.style.display !== 'none') {\n                if (this.parent.filterSettings.type === 'Menu') {\n                    if (filterPopup.querySelector('.e-flmenu-input')) {\n                        filterPopup.querySelector('.e-flmenu-input').focus();\n                    }\n                    else if (filterPopup.querySelector('.e-flmenu-valuediv')) {\n                        var firstElementChild = filterPopup.querySelector('.e-flmenu-valuediv').firstElementChild;\n                        if (!isNullOrUndefined(firstElementChild)) {\n                            firstElementChild.focus();\n                        }\n                    }\n                }\n                else if (this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n                    if (filterPopup.querySelector('.e-searchinput')) {\n                        filterPopup.querySelector('.e-searchinput').focus();\n                    }\n                }\n            }\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        if (top + gridPos.top < 0) {\n            top = 0;\n        }\n        if (this.parent.enableStickyHeader && gridPos.top <= 0) {\n            top = liPos.top - gridPos.top;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n            if (liPos.left < ul.offsetWidth) {\n                left = liPos.left + ul.offsetWidth / 2;\n            }\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function () {\n        var filterPopup = this.getFilterPop();\n        if (this.parent.enableAdaptiveUI) {\n            return;\n        }\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (!isNullOrUndefined(this.targetColumn) && this.parent.filterSettings.type === 'Menu' && Browser.isDevice) {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        var popElement = this.parent.element.querySelector('.' + this.POP);\n        if (!popElement) {\n            var popupContainer = document.getElementById(this.parent.element.id + '_e-popup');\n            popElement = popupContainer ? popupContainer.querySelector('.' + this.POP) : null;\n        }\n        if (!popElement && this.parent.element.classList.contains('e-treelistgrid')) {\n            var ganttElement = closest(this.parent.element, '.e-gantt');\n            popElement = ganttElement ? ganttElement.querySelector('.' + this.POP) : null;\n        }\n        return popElement;\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    ColumnMenu.prototype.renderResponsiveChangeAction = function (args) {\n        this.responsiveDialogRenderer.action = args.action;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}