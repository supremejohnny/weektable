{"ast":null,"code":"import { ObjectStatus } from './../input-output/enum';\nimport { PdfDictionary } from './../primitives/pdf-dictionary';\nimport { DictionaryProperties } from './pdf-dictionary-properties';\nimport { Operators } from './pdf-operators';\nimport { Dictionary } from './../collections/dictionary';\nimport { PdfReference } from './../primitives/pdf-reference';\nimport { ObjectType } from './cross-table';\nimport { PdfStream } from './../primitives/pdf-stream';\nimport { PdfNumber } from './../primitives/pdf-number';\nimport { PdfCatalog } from './../document/pdf-catalog';\n/**\n * `PdfCrossTable` is responsible for intermediate level parsing\n * and savingof a PDF document.\n * @private\n */\nvar PdfCrossTable = /** @class */function () {\n  function PdfCrossTable() {\n    /**\n     * The modified `objects` that should be saved.\n     * @private\n     */\n    this.objects = new Dictionary();\n    /**\n     * Holds `maximal generation number` or offset to object.\n     * @default 0\n     * @private\n     */\n    this.maxGenNumIndex = 0;\n    /**\n     * The `number of the objects`.\n     * @default 0\n     * @private\n     */\n    this.objectCount = 0;\n    /**\n     * Internal variable for accessing fields from `DictionryProperties` class.\n     * @default new PdfDictionaryProperties()\n     * @private\n     */\n    this.dictionaryProperties = new DictionaryProperties();\n  }\n  Object.defineProperty(PdfCrossTable.prototype, \"isMerging\", {\n    //Properties\n    /**\n     * Gets or sets if the document `is merged`.\n     * @private\n     */\n    get: function () {\n      return this.merging;\n    },\n    set: function (value) {\n      this.merging = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfCrossTable.prototype, \"trailer\", {\n    /**\n     * Gets the `trailer`.\n     * @private\n     */\n    get: function () {\n      if (this.internalTrailer == null) {\n        this.internalTrailer = new PdfStream();\n      }\n      return this.internalTrailer;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfCrossTable.prototype, \"document\", {\n    /**\n     * Gets or sets the main `PdfDocument` class instance.\n     * @private\n     */\n    get: function () {\n      return this.pdfDocument;\n    },\n    set: function (value) {\n      this.pdfDocument = value;\n      this.items = this.pdfDocument.pdfObjects;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfCrossTable.prototype, \"pdfObjects\", {\n    /**\n     * Gets the catched `PDF object` main collection.\n     * @private\n     */\n    get: function () {\n      return this.items;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfCrossTable.prototype, \"objectCollection\", {\n    /**\n     * Gets the `object collection`.\n     * @private\n     */\n    get: function () {\n      return this.pdfDocument.pdfObjects;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfCrossTable.prototype, \"count\", {\n    /**\n     * Gets or sets the `number of the objects` within the document.\n     * @private\n     */\n    get: function () {\n      return this.objectCount;\n    },\n    set: function (value) {\n      this.objectCount = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfCrossTable.prototype, \"nextObjNumber\", {\n    /**\n     * Returns `next available object number`.\n     * @private\n     */\n    get: function () {\n      this.count = this.count + 1;\n      return this.count;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  PdfCrossTable.prototype.save = function (writer, filename) {\n    this._saveProcess(writer);\n    if (typeof filename === 'undefined') {\n      return writer.stream.buffer;\n    } else {\n      writer.stream.save(filename);\n    }\n  };\n  /**\n   * Saves the cross-reference table into the stream.\n   * @private\n   */\n  PdfCrossTable.prototype._saveProcess = function (writer) {\n    this.saveHead(writer);\n    this.mappedReferences = null;\n    this.objects.clear();\n    this.markTrailerReferences();\n    this.saveObjects(writer);\n    var saveCount = this.count;\n    var xrefPos = writer.position;\n    this.registerObject(0, new PdfReference(0, -1), true);\n    var prevXRef = 0;\n    writer.write(Operators.xref);\n    writer.write(Operators.newLine);\n    this.saveSections(writer);\n    this.saveTrailer(writer, this.count, prevXRef);\n    this.saveTheEndess(writer, xrefPos);\n    this.count = saveCount;\n    for (var i = 0; i < this.objectCollection.count; ++i) {\n      var oi = this.objectCollection.items(i);\n      oi.object.isSaving = false;\n    }\n  };\n  /**\n   * Saves the cross-reference table into the stream.\n   * @private\n   */\n  PdfCrossTable.prototype._save = function (writer) {\n    this._saveProcess(writer);\n    return new Uint8Array(writer.stream.buffer.buffer);\n  };\n  /**\n   * `Saves the endess` of the file.\n   * @private\n   */\n  PdfCrossTable.prototype.saveTheEndess = function (writer, xrefPos) {\n    writer.write(Operators.newLine + Operators.startxref + Operators.newLine);\n    writer.write(xrefPos.toString() + Operators.newLine);\n    writer.write(Operators.eof + Operators.newLine);\n  };\n  /**\n   * `Saves the new trailer` dictionary.\n   * @private\n   */\n  PdfCrossTable.prototype.saveTrailer = function (writer, count, prevXRef) {\n    writer.write(Operators.trailer + Operators.newLine);\n    // Save the dictionary.\n    var trailer = this.trailer;\n    trailer.items.setValue(this.dictionaryProperties.size, new PdfNumber(this.objectCount + 1));\n    trailer = new PdfDictionary(trailer); // Make it real dictionary.\n    trailer.setEncrypt(false);\n    trailer.save(writer);\n  };\n  /**\n   * `Saves the xref section`.\n   * @private\n   */\n  PdfCrossTable.prototype.saveSections = function (writer) {\n    var objectNum = 0;\n    var count = 0;\n    do {\n      count = this.prepareSubsection(objectNum);\n      this.saveSubsection(writer, objectNum, count);\n      objectNum += count;\n    } while (count !== 0);\n  };\n  /**\n   * `Saves a subsection`.\n   * @private\n   */\n  PdfCrossTable.prototype.saveSubsection = function (writer, objectNum, count) {\n    if (count <= 0 || objectNum >= this.count) {\n      return;\n    }\n    var subsectionHead = '{0} {1}{2}';\n    writer.write(objectNum + ' ' + (count + 1) + Operators.newLine);\n    for (var i = objectNum; i <= objectNum + count; ++i) {\n      var obj = this.objects.getValue(i);\n      var str = '';\n      if (obj.type === ObjectType.Free) {\n        str = this.getItem(obj.offset, 65535, true);\n      } else {\n        str = this.getItem(obj.offset, obj.generation, false);\n      }\n      writer.write(str);\n    }\n  };\n  /**\n   * Generates string for `xref table item`.\n   * @private\n   */\n  PdfCrossTable.prototype.getItem = function (offset, genNumber, isFree) {\n    var returnString = '';\n    var addOffsetLength = 10 - offset.toString().length;\n    if (genNumber <= 0) {\n      genNumber = 0;\n    }\n    var addGenNumberLength = 5 - genNumber.toString().length <= 0 ? 0 : 5 - genNumber.toString().length;\n    for (var index = 0; index < addOffsetLength; index++) {\n      returnString = returnString + '0';\n    }\n    returnString = returnString + offset.toString() + ' ';\n    for (var index = 0; index < addGenNumberLength; index++) {\n      returnString = returnString + '0';\n    }\n    returnString = returnString + genNumber.toString() + ' ';\n    returnString = returnString + (isFree ? Operators.f : Operators.n) + Operators.newLine;\n    return returnString;\n  };\n  /**\n   * `Prepares a subsection` of the current section within the cross-reference table.\n   * @private\n   */\n  PdfCrossTable.prototype.prepareSubsection = function (objectNum) {\n    var count = 0;\n    var i;\n    var total = this.count;\n    for (var k = 0; k < this.document.pdfObjects.count; k++) {\n      var reference = this.document.pdfObjects.items(k).reference;\n      var refString = reference.toString();\n      var refArray = refString.split(' ');\n    }\n    if (objectNum >= total) {\n      return count;\n    }\n    // search for first changed indirect object.\n    for (i = objectNum; i < total; ++i) {\n      break;\n    }\n    objectNum = i;\n    // look up for all indirect objects in one subsection.\n    for (; i < total; ++i) {\n      ++count;\n    }\n    return count;\n  };\n  /**\n   * `Marks the trailer references` being saved.\n   * @private\n   */\n  PdfCrossTable.prototype.markTrailerReferences = function () {\n    var tempArray;\n    var keys = this.trailer.items.keys();\n    var values = this.trailer.items.values();\n  };\n  /**\n   * `Saves the head`.\n   * @private\n   */\n  PdfCrossTable.prototype.saveHead = function (writer) {\n    var version = this.generateFileVersion(writer.document);\n    writer.write('%PDF-' + version);\n    writer.write(Operators.newLine);\n  };\n  /**\n   * Generates the `version` of the file.\n   * @private\n   */\n  PdfCrossTable.prototype.generateFileVersion = function (document) {\n    var iVersion = 4;\n    var version = '1.' + iVersion.toString();\n    return version;\n  };\n  PdfCrossTable.prototype.getReference = function (obj, bNew) {\n    if (typeof bNew === 'undefined') {\n      var wasNew = false;\n      return this.getReference(obj, wasNew);\n    } else {\n      //code splitted for reducing lines of code exceeds 100.\n      return this.getSubReference(obj, bNew);\n    }\n  };\n  /**\n   * Retrieves the `reference` of the object given.\n   * @private\n   */\n  PdfCrossTable.prototype.getSubReference = function (obj, bNew) {\n    var isNew = false;\n    var wasNew;\n    var reference = null;\n    // if (obj.IsSaving) {\n    if (this.items.count > 0 && obj.objectCollectionIndex > 0 && this.items.count > obj.objectCollectionIndex - 1) {\n      var tempObj = this.document.pdfObjects.getReference(obj, wasNew);\n      reference = tempObj.reference;\n      wasNew = tempObj.wasNew;\n    }\n    if (reference == null) {\n      if (obj.status === ObjectStatus.Registered) {\n        wasNew = false;\n      } else {\n        wasNew = true;\n      }\n    } else {\n      wasNew = false;\n    }\n    // need to add mapped reference code\n    if (reference == null) {\n      var objnumber = this.nextObjNumber;\n      reference = new PdfReference(objnumber, 0);\n      var found = void 0;\n      if (wasNew) {\n        this.document.pdfObjects.add(obj);\n        this.document.pdfObjects.trySetReference(obj, reference, found);\n        var tempIndex = this.document.pdfObjects.count - 1;\n        var tempkey = this.document.pdfObjects.objectCollections[tempIndex].reference.objNumber;\n        var tempvalue = this.document.pdfObjects.objectCollections[this.document.pdfObjects.count - 1];\n        this.document.pdfObjects.mainObjectCollection.setValue(tempkey, tempvalue);\n        obj.position = -1;\n      } else {\n        this.document.pdfObjects.trySetReference(obj, reference, found);\n      }\n      obj.objectCollectionIndex = reference.objNumber;\n      obj.status = ObjectStatus.None;\n      isNew = true;\n    }\n    bNew = isNew || this.bForceNew;\n    return reference;\n  };\n  /**\n   * `Saves all objects` in the collection.\n   * @private\n   */\n  PdfCrossTable.prototype.saveObjects = function (writer) {\n    var objectCollection = this.objectCollection;\n    for (var i = 0; i < objectCollection.count; ++i) {\n      var oi = objectCollection.items(i);\n      var obj = oi.object;\n      obj.isSaving = true;\n      this.saveIndirectObject(obj, writer);\n    }\n  };\n  /**\n   * `Saves indirect object`.\n   * @private\n   */\n  PdfCrossTable.prototype.saveIndirectObject = function (obj, writer) {\n    var reference = this.getReference(obj);\n    if (obj instanceof PdfCatalog) {\n      this.trailer.items.setValue(this.dictionaryProperties.root, reference);\n    }\n    // NOTE :  This is needed for correct string objects encryption.\n    this.pdfDocument.currentSavingObj = reference;\n    var tempArchive = false;\n    tempArchive = obj.getArchive();\n    var allowedType = !(obj instanceof PdfStream || !tempArchive || obj instanceof PdfCatalog);\n    var sigFlag = false;\n    this.registerObject(writer.position, reference);\n    this.doSaveObject(obj, reference, writer);\n  };\n  /**\n   * Performs `real saving` of the save object.\n   * @private\n   */\n  PdfCrossTable.prototype.doSaveObject = function (obj, reference, writer) {\n    writer.write(reference.objNumber.toString());\n    writer.write(Operators.whiteSpace);\n    writer.write(reference.genNumber.toString());\n    writer.write(Operators.whiteSpace);\n    writer.write(Operators.obj);\n    writer.write(Operators.newLine);\n    obj.save(writer);\n    writer.write(Operators.endObj);\n    writer.write(Operators.newLine);\n  };\n  PdfCrossTable.prototype.registerObject = function (offset, reference, free) {\n    if (typeof free === 'boolean') {\n      // Register the object by its number.\n      this.objects.setValue(reference.objNumber, new RegisteredObject(offset, reference, free));\n      this.maxGenNumIndex = Math.max(this.maxGenNumIndex, reference.genNumber);\n    } else if (typeof free === 'undefined') {\n      // Register the object by its number.\n      this.objects.setValue(reference.objNumber, new RegisteredObject(offset, reference));\n      this.maxGenNumIndex = Math.max(this.maxGenNumIndex, reference.genNumber);\n    }\n  };\n  /**\n   * `Dereferences` the specified primitive object.\n   * @private\n   */\n  PdfCrossTable.dereference = function (obj) {\n    var rh = obj;\n    if (rh != null) {\n      obj = rh.object;\n    }\n    return obj;\n  };\n  return PdfCrossTable;\n}();\nexport { PdfCrossTable };\nvar RegisteredObject = /** @class */function () {\n  function RegisteredObject(offset, reference, free) {\n    var tempOffset = offset;\n    this.offsetNumber = tempOffset;\n    var tempReference = reference;\n    this.generation = tempReference.genNumber;\n    this.object = tempReference.objNumber;\n    if (typeof free === 'undefined') {\n      this.type = ObjectType.Normal;\n    } else {\n      this.type = ObjectType.Free;\n    }\n  }\n  Object.defineProperty(RegisteredObject.prototype, \"objectNumber\", {\n    //Properties\n    /**\n     * Gets the `object number`.\n     * @private\n     */\n    get: function () {\n      return this.object;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(RegisteredObject.prototype, \"offset\", {\n    /**\n     * Gets the `offset`.\n     * @private\n     */\n    get: function () {\n      var result;\n      result = this.offsetNumber;\n      return result;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return RegisteredObject;\n}();\nexport { RegisteredObject };","map":{"version":3,"names":["ObjectStatus","PdfDictionary","DictionaryProperties","Operators","Dictionary","PdfReference","ObjectType","PdfStream","PdfNumber","PdfCatalog","PdfCrossTable","objects","maxGenNumIndex","objectCount","dictionaryProperties","Object","defineProperty","prototype","get","merging","set","value","enumerable","configurable","internalTrailer","pdfDocument","items","pdfObjects","count","save","writer","filename","_saveProcess","stream","buffer","saveHead","mappedReferences","clear","markTrailerReferences","saveObjects","saveCount","xrefPos","position","registerObject","prevXRef","write","xref","newLine","saveSections","saveTrailer","saveTheEndess","i","objectCollection","oi","object","isSaving","_save","Uint8Array","startxref","toString","eof","trailer","setValue","size","setEncrypt","objectNum","prepareSubsection","saveSubsection","subsectionHead","obj","getValue","str","type","Free","getItem","offset","generation","genNumber","isFree","returnString","addOffsetLength","length","addGenNumberLength","index","f","n","total","k","document","reference","refString","refArray","split","tempArray","keys","values","version","generateFileVersion","iVersion","getReference","bNew","wasNew","getSubReference","isNew","objectCollectionIndex","tempObj","status","Registered","objnumber","nextObjNumber","found","add","trySetReference","tempIndex","tempkey","objectCollections","objNumber","tempvalue","mainObjectCollection","None","bForceNew","saveIndirectObject","root","currentSavingObj","tempArchive","getArchive","allowedType","sigFlag","doSaveObject","whiteSpace","endObj","free","RegisteredObject","Math","max","dereference","rh","tempOffset","offsetNumber","tempReference","Normal","result"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-pdf-export/src/implementation/input-output/pdf-cross-table.js"],"sourcesContent":["import { ObjectStatus } from './../input-output/enum';\nimport { PdfDictionary } from './../primitives/pdf-dictionary';\nimport { DictionaryProperties } from './pdf-dictionary-properties';\nimport { Operators } from './pdf-operators';\nimport { Dictionary } from './../collections/dictionary';\nimport { PdfReference } from './../primitives/pdf-reference';\nimport { ObjectType } from './cross-table';\nimport { PdfStream } from './../primitives/pdf-stream';\nimport { PdfNumber } from './../primitives/pdf-number';\nimport { PdfCatalog } from './../document/pdf-catalog';\n/**\n * `PdfCrossTable` is responsible for intermediate level parsing\n * and savingof a PDF document.\n * @private\n */\nvar PdfCrossTable = /** @class */ (function () {\n    function PdfCrossTable() {\n        /**\n         * The modified `objects` that should be saved.\n         * @private\n         */\n        this.objects = new Dictionary();\n        /**\n         * Holds `maximal generation number` or offset to object.\n         * @default 0\n         * @private\n         */\n        this.maxGenNumIndex = 0;\n        /**\n         * The `number of the objects`.\n         * @default 0\n         * @private\n         */\n        this.objectCount = 0;\n        /**\n         * Internal variable for accessing fields from `DictionryProperties` class.\n         * @default new PdfDictionaryProperties()\n         * @private\n         */\n        this.dictionaryProperties = new DictionaryProperties();\n    }\n    Object.defineProperty(PdfCrossTable.prototype, \"isMerging\", {\n        //Properties\n        /**\n         * Gets or sets if the document `is merged`.\n         * @private\n         */\n        get: function () {\n            return this.merging;\n        },\n        set: function (value) {\n            this.merging = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfCrossTable.prototype, \"trailer\", {\n        /**\n         * Gets the `trailer`.\n         * @private\n         */\n        get: function () {\n            if (this.internalTrailer == null) {\n                this.internalTrailer = new PdfStream();\n            }\n            return this.internalTrailer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfCrossTable.prototype, \"document\", {\n        /**\n         * Gets or sets the main `PdfDocument` class instance.\n         * @private\n         */\n        get: function () {\n            return this.pdfDocument;\n        },\n        set: function (value) {\n            this.pdfDocument = value;\n            this.items = this.pdfDocument.pdfObjects;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfCrossTable.prototype, \"pdfObjects\", {\n        /**\n         * Gets the catched `PDF object` main collection.\n         * @private\n         */\n        get: function () {\n            return this.items;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfCrossTable.prototype, \"objectCollection\", {\n        /**\n         * Gets the `object collection`.\n         * @private\n         */\n        get: function () {\n            return this.pdfDocument.pdfObjects;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfCrossTable.prototype, \"count\", {\n        /**\n         * Gets or sets the `number of the objects` within the document.\n         * @private\n         */\n        get: function () {\n            return this.objectCount;\n        },\n        set: function (value) {\n            this.objectCount = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PdfCrossTable.prototype, \"nextObjNumber\", {\n        /**\n         * Returns `next available object number`.\n         * @private\n         */\n        get: function () {\n            this.count = this.count + 1;\n            return this.count;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PdfCrossTable.prototype.save = function (writer, filename) {\n        this._saveProcess(writer);\n        if (typeof filename === 'undefined') {\n            return writer.stream.buffer;\n        }\n        else {\n            writer.stream.save(filename);\n        }\n    };\n    /**\n     * Saves the cross-reference table into the stream.\n     * @private\n     */\n    PdfCrossTable.prototype._saveProcess = function (writer) {\n        this.saveHead(writer);\n        this.mappedReferences = null;\n        this.objects.clear();\n        this.markTrailerReferences();\n        this.saveObjects(writer);\n        var saveCount = this.count;\n        var xrefPos = writer.position;\n        this.registerObject(0, new PdfReference(0, -1), true);\n        var prevXRef = 0;\n        writer.write(Operators.xref);\n        writer.write(Operators.newLine);\n        this.saveSections(writer);\n        this.saveTrailer(writer, this.count, prevXRef);\n        this.saveTheEndess(writer, xrefPos);\n        this.count = saveCount;\n        for (var i = 0; i < this.objectCollection.count; ++i) {\n            var oi = this.objectCollection.items(i);\n            oi.object.isSaving = false;\n        }\n    };\n    /**\n     * Saves the cross-reference table into the stream.\n     * @private\n     */\n    PdfCrossTable.prototype._save = function (writer) {\n        this._saveProcess(writer);\n        return new Uint8Array(writer.stream.buffer.buffer);\n    };\n    /**\n     * `Saves the endess` of the file.\n     * @private\n     */\n    PdfCrossTable.prototype.saveTheEndess = function (writer, xrefPos) {\n        writer.write(Operators.newLine + Operators.startxref + Operators.newLine);\n        writer.write(xrefPos.toString() + Operators.newLine);\n        writer.write(Operators.eof + Operators.newLine);\n    };\n    /**\n     * `Saves the new trailer` dictionary.\n     * @private\n     */\n    PdfCrossTable.prototype.saveTrailer = function (writer, count, prevXRef) {\n        writer.write(Operators.trailer + Operators.newLine);\n        // Save the dictionary.\n        var trailer = this.trailer;\n        trailer.items.setValue(this.dictionaryProperties.size, new PdfNumber(this.objectCount + 1));\n        trailer = new PdfDictionary(trailer); // Make it real dictionary.\n        trailer.setEncrypt(false);\n        trailer.save(writer);\n    };\n    /**\n     * `Saves the xref section`.\n     * @private\n     */\n    PdfCrossTable.prototype.saveSections = function (writer) {\n        var objectNum = 0;\n        var count = 0;\n        do {\n            count = this.prepareSubsection(objectNum);\n            this.saveSubsection(writer, objectNum, count);\n            objectNum += count;\n        } while (count !== 0);\n    };\n    /**\n     * `Saves a subsection`.\n     * @private\n     */\n    PdfCrossTable.prototype.saveSubsection = function (writer, objectNum, count) {\n        if (count <= 0 || objectNum >= this.count) {\n            return;\n        }\n        var subsectionHead = '{0} {1}{2}';\n        writer.write(objectNum + ' ' + (count + 1) + Operators.newLine);\n        for (var i = objectNum; i <= objectNum + count; ++i) {\n            var obj = this.objects.getValue(i);\n            var str = '';\n            if (obj.type === ObjectType.Free) {\n                str = this.getItem(obj.offset, 65535, true);\n            }\n            else {\n                str = this.getItem(obj.offset, obj.generation, false);\n            }\n            writer.write(str);\n        }\n    };\n    /**\n     * Generates string for `xref table item`.\n     * @private\n     */\n    PdfCrossTable.prototype.getItem = function (offset, genNumber, isFree) {\n        var returnString = '';\n        var addOffsetLength = 10 - offset.toString().length;\n        if (genNumber <= 0) {\n            genNumber = 0;\n        }\n        var addGenNumberLength = (5 - genNumber.toString().length) <= 0 ? 0 : (5 - genNumber.toString().length);\n        for (var index = 0; index < addOffsetLength; index++) {\n            returnString = returnString + '0';\n        }\n        returnString = returnString + offset.toString() + ' ';\n        for (var index = 0; index < addGenNumberLength; index++) {\n            returnString = returnString + '0';\n        }\n        returnString = returnString + genNumber.toString() + ' ';\n        returnString = returnString + ((isFree) ? Operators.f : Operators.n) + Operators.newLine;\n        return returnString;\n    };\n    /**\n     * `Prepares a subsection` of the current section within the cross-reference table.\n     * @private\n     */\n    PdfCrossTable.prototype.prepareSubsection = function (objectNum) {\n        var count = 0;\n        var i;\n        var total = this.count;\n        for (var k = 0; k < this.document.pdfObjects.count; k++) {\n            var reference = this.document.pdfObjects.items(k).reference;\n            var refString = reference.toString();\n            var refArray = refString.split(' ');\n        }\n        if (objectNum >= total) {\n            return count;\n        }\n        // search for first changed indirect object.\n        for (i = objectNum; i < total; ++i) {\n            break;\n        }\n        objectNum = i;\n        // look up for all indirect objects in one subsection.\n        for (; i < total; ++i) {\n            ++count;\n        }\n        return count;\n    };\n    /**\n     * `Marks the trailer references` being saved.\n     * @private\n     */\n    PdfCrossTable.prototype.markTrailerReferences = function () {\n        var tempArray;\n        var keys = this.trailer.items.keys();\n        var values = this.trailer.items.values();\n    };\n    /**\n     * `Saves the head`.\n     * @private\n     */\n    PdfCrossTable.prototype.saveHead = function (writer) {\n        var version = this.generateFileVersion(writer.document);\n        writer.write('%PDF-' + version);\n        writer.write(Operators.newLine);\n    };\n    /**\n     * Generates the `version` of the file.\n     * @private\n     */\n    PdfCrossTable.prototype.generateFileVersion = function (document) {\n        var iVersion = 4;\n        var version = '1.' + iVersion.toString();\n        return version;\n    };\n    PdfCrossTable.prototype.getReference = function (obj, bNew) {\n        if (typeof bNew === 'undefined') {\n            var wasNew = false;\n            return this.getReference(obj, wasNew);\n        }\n        else {\n            //code splitted for reducing lines of code exceeds 100.\n            return this.getSubReference(obj, bNew);\n        }\n    };\n    /**\n     * Retrieves the `reference` of the object given.\n     * @private\n     */\n    PdfCrossTable.prototype.getSubReference = function (obj, bNew) {\n        var isNew = false;\n        var wasNew;\n        var reference = null;\n        // if (obj.IsSaving) {\n        if (this.items.count > 0 && obj.objectCollectionIndex > 0 && this.items.count > obj.objectCollectionIndex - 1) {\n            var tempObj = this.document.pdfObjects.getReference(obj, wasNew);\n            reference = tempObj.reference;\n            wasNew = tempObj.wasNew;\n        }\n        if (reference == null) {\n            if (obj.status === ObjectStatus.Registered) {\n                wasNew = false;\n            }\n            else {\n                wasNew = true;\n            }\n        }\n        else {\n            wasNew = false;\n        }\n        // need to add mapped reference code\n        if (reference == null) {\n            var objnumber = this.nextObjNumber;\n            reference = new PdfReference(objnumber, 0);\n            var found = void 0;\n            if (wasNew) {\n                this.document.pdfObjects.add(obj);\n                this.document.pdfObjects.trySetReference(obj, reference, found);\n                var tempIndex = this.document.pdfObjects.count - 1;\n                var tempkey = this.document.pdfObjects.objectCollections[tempIndex].reference.objNumber;\n                var tempvalue = this.document.pdfObjects.objectCollections[this.document.pdfObjects.count - 1];\n                this.document.pdfObjects.mainObjectCollection.setValue(tempkey, tempvalue);\n                obj.position = -1;\n            }\n            else {\n                this.document.pdfObjects.trySetReference(obj, reference, found);\n            }\n            obj.objectCollectionIndex = reference.objNumber;\n            obj.status = ObjectStatus.None;\n            isNew = true;\n        }\n        bNew = isNew || this.bForceNew;\n        return reference;\n    };\n    /**\n     * `Saves all objects` in the collection.\n     * @private\n     */\n    PdfCrossTable.prototype.saveObjects = function (writer) {\n        var objectCollection = this.objectCollection;\n        for (var i = 0; i < objectCollection.count; ++i) {\n            var oi = objectCollection.items(i);\n            var obj = oi.object;\n            obj.isSaving = true;\n            this.saveIndirectObject(obj, writer);\n        }\n    };\n    /**\n     * `Saves indirect object`.\n     * @private\n     */\n    PdfCrossTable.prototype.saveIndirectObject = function (obj, writer) {\n        var reference = this.getReference(obj);\n        if (obj instanceof PdfCatalog) {\n            this.trailer.items.setValue(this.dictionaryProperties.root, reference);\n        }\n        // NOTE :  This is needed for correct string objects encryption.\n        this.pdfDocument.currentSavingObj = reference;\n        var tempArchive = false;\n        tempArchive = obj.getArchive();\n        var allowedType = !((obj instanceof PdfStream) || !tempArchive || (obj instanceof PdfCatalog));\n        var sigFlag = false;\n        this.registerObject(writer.position, reference);\n        this.doSaveObject(obj, reference, writer);\n    };\n    /**\n     * Performs `real saving` of the save object.\n     * @private\n     */\n    PdfCrossTable.prototype.doSaveObject = function (obj, reference, writer) {\n        writer.write(reference.objNumber.toString());\n        writer.write(Operators.whiteSpace);\n        writer.write(reference.genNumber.toString());\n        writer.write(Operators.whiteSpace);\n        writer.write(Operators.obj);\n        writer.write(Operators.newLine);\n        obj.save(writer);\n        writer.write(Operators.endObj);\n        writer.write(Operators.newLine);\n    };\n    PdfCrossTable.prototype.registerObject = function (offset, reference, free) {\n        if (typeof free === 'boolean') {\n            // Register the object by its number.\n            this.objects.setValue(reference.objNumber, new RegisteredObject(offset, reference, free));\n            this.maxGenNumIndex = Math.max(this.maxGenNumIndex, reference.genNumber);\n        }\n        else if (typeof free === 'undefined') {\n            // Register the object by its number.\n            this.objects.setValue(reference.objNumber, new RegisteredObject(offset, reference));\n            this.maxGenNumIndex = Math.max(this.maxGenNumIndex, reference.genNumber);\n        }\n    };\n    /**\n     * `Dereferences` the specified primitive object.\n     * @private\n     */\n    PdfCrossTable.dereference = function (obj) {\n        var rh = obj;\n        if (rh != null) {\n            obj = rh.object;\n        }\n        return obj;\n    };\n    return PdfCrossTable;\n}());\nexport { PdfCrossTable };\nvar RegisteredObject = /** @class */ (function () {\n    function RegisteredObject(offset, reference, free) {\n        var tempOffset = offset;\n        this.offsetNumber = tempOffset;\n        var tempReference = reference;\n        this.generation = tempReference.genNumber;\n        this.object = tempReference.objNumber;\n        if (typeof free === 'undefined') {\n            this.type = ObjectType.Normal;\n        }\n        else {\n            this.type = ObjectType.Free;\n        }\n    }\n    Object.defineProperty(RegisteredObject.prototype, \"objectNumber\", {\n        //Properties\n        /**\n         * Gets the `object number`.\n         * @private\n         */\n        get: function () {\n            return this.object;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RegisteredObject.prototype, \"offset\", {\n        /**\n         * Gets the `offset`.\n         * @private\n         */\n        get: function () {\n            var result;\n            result = this.offsetNumber;\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RegisteredObject;\n}());\nexport { RegisteredObject };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}