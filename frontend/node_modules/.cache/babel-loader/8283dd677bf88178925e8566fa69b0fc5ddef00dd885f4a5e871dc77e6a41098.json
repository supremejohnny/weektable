{"ast":null,"code":"import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen, PdfPaddings, PdfGridLayoutFormat, PdfLayoutType, PdfLayoutBreakType } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush, PdfTextWebLink } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { PdfTrueTypeFont } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined, detach, extend } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\nimport { getUid, getPrintGridModel, measureColumnDepth, isExportColumns, updateColumnTypeForExportColumns, prepareColumns } from '../base/util';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n *\n * @hidden\n */\nvar PdfExport = /** @class */function () {\n  /**\n   * Constructor for the Grid PDF Export module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @hidden\n   */\n  function PdfExport(parent) {\n    this.hideColumnInclude = false;\n    this.currentViewData = false;\n    this.customDataSource = false;\n    this.isGrouping = false;\n    this.headerOnPages = [];\n    this.drawPosition = {\n      xPosition: 0,\n      yPosition: 0\n    };\n    this.parent = parent;\n    this.helper = new ExportHelper(parent);\n    this.gridPool = {};\n  }\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   */\n  PdfExport.prototype.getModuleName = function () {\n    return 'PdfExport';\n  };\n  PdfExport.prototype.init = function (parent) {\n    this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n    this.pdfDocument = undefined;\n    this.hideColumnInclude = false;\n    this.currentViewData = false;\n    this.parent = parent;\n    this.isGrouping = false;\n    this.isExporting = true;\n    parent.id = getUid('main-grid');\n    this.gridPool[parent.id] = false;\n    this.pdfPageSettings = new PdfPageSettings();\n  };\n  PdfExport.prototype.exportWithData = function (parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject) {\n    var _this = this;\n    this.init(parent);\n    if (!isNullOrUndefined(pdfDoc)) {\n      this.pdfDocument = pdfDoc;\n    } else {\n      this.pdfDocument = new PdfDocument();\n    }\n    this.processExport(parent, returnType, pdfExportProperties, isMultipleExport).then(function () {\n      _this.isExporting = false;\n      parent.trigger(events.pdfExportComplete, _this.isBlob ? {\n        promise: _this.blobPromise\n      } : {\n        gridInstance: _this.parent\n      });\n      _this.parent.log('exporting_complete', _this.getModuleName());\n      resolve(_this.pdfDocument);\n    }).catch(function (e) {\n      reject(_this.pdfDocument);\n      _this.parent.trigger(events.actionFailure, e);\n    });\n  };\n  /**\n   * Used to map the input data\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {PdfExportProperties} pdfExportProperties - specifies the PdfExportProperties\n   * @param {boolean} isMultipleExport - specifies the isMultipleExport\n   * @param {Object} pdfDoc - specifies the pdfDoc\n   * @param {boolean} isBlob - speciies whether it is Blob or not\n   * @returns {void}\n   */\n  PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n    var _this = this;\n    this.data = new Data(this.parent);\n    this.isBlob = isBlob;\n    this.gridPool = {};\n    var query = pdfExportProperties && pdfExportProperties.query ? pdfExportProperties.query : new Query();\n    if ((parent.childGrid || parent.detailTemplate) && !(!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.hierarchyExportMode === 'None')) {\n      parent.expandedRows = getPrintGridModel(parent).expandedRows;\n    }\n    var args = {\n      requestType: 'beforePdfExport',\n      cancel: false,\n      headerPageNumbers: [],\n      gridDrawPosition: {\n        xPosition: 0,\n        yPosition: 0\n      },\n      generateQuery: false\n    };\n    var gridObject = 'gridObject';\n    args[\"\" + gridObject] = parent;\n    var can = 'cancel';\n    var generateQuery = 'generateQuery';\n    var header = 'headerPageNumbers';\n    var drawPos = 'gridDrawPosition';\n    parent.trigger(events.beforePdfExport, args);\n    if (args[\"\" + can] === true) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      return new Promise(function (resolve, reject) {\n        return resolve();\n      });\n    }\n    if (isExportColumns(pdfExportProperties)) {\n      updateColumnTypeForExportColumns(pdfExportProperties, parent);\n    }\n    if (args[\"\" + generateQuery]) {\n      query = ExportHelper.getQuery(parent, this.data);\n    }\n    this.headerOnPages = args[\"\" + header];\n    this.drawPosition = args[\"\" + drawPos];\n    this.parent.log('exporting_begin', this.getModuleName());\n    if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource)) {\n      pdfExportProperties.dataSource = pdfExportProperties.dataSource instanceof DataManager ? pdfExportProperties.dataSource : new DataManager(pdfExportProperties.dataSource);\n      if (isNullOrUndefined(query.isCountRequired) || parent.aggregates) {\n        query.isCountRequired = true;\n      }\n      return new Promise(function (resolve, reject) {\n        pdfExportProperties.dataSource.executeQuery(query).then(function (returnType) {\n          _this.exportWithData(parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject);\n        });\n      });\n    } else if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType === 'CurrentPage' && !(this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length && !this.parent.getDataModule().isRemote())) {\n      return new Promise(function (resolve, reject) {\n        _this.exportWithData(parent, pdfDoc, resolve, _this.parent.getCurrentViewRecords(), pdfExportProperties, isMultipleExport, reject);\n      });\n    } else {\n      var allPromise_1 = [];\n      var query_1 = ExportHelper.getQuery(parent, this.data);\n      if (this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length && !this.parent.getDataModule().isRemote()) {\n        if (isNullOrUndefined(pdfExportProperties)) {\n          pdfExportProperties = {\n            hierarchyExportMode: 'All'\n          };\n        }\n        pdfExportProperties.hierarchyExportMode = pdfExportProperties.hierarchyExportMode === 'None' ? 'None' : 'All';\n        if (pdfExportProperties.hierarchyExportMode === 'All') {\n          query_1.lazyLoad = [];\n        }\n      }\n      allPromise_1.push(this.data.getData({}, query_1));\n      allPromise_1.push(this.helper.getColumnData(parent));\n      return new Promise(function (resolve, reject) {\n        Promise.all(allPromise_1).then(function (e) {\n          _this.init(parent);\n          if (!isNullOrUndefined(pdfDoc)) {\n            _this.pdfDocument = pdfDoc['document'];\n          } else {\n            _this.pdfDocument = new PdfDocument();\n          }\n          _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport, pdfDoc).then(function (results) {\n            _this.isExporting = false;\n            parent.trigger(events.pdfExportComplete, _this.isBlob ? {\n              promise: _this.blobPromise\n            } : {\n              gridInstance: _this.parent\n            });\n            _this.parent.log('exporting_complete', _this.getModuleName());\n            if (pdfExportProperties && pdfExportProperties.multipleExport && pdfExportProperties.multipleExport.type === 'AppendToPage') {\n              resolve(results);\n            } else {\n              resolve(_this.pdfDocument);\n            }\n          }).catch(function (e) {\n            reject(_this.pdfDocument);\n            _this.parent.trigger(events.actionFailure, e);\n          });\n        });\n      });\n    }\n  };\n  PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport, pdfDoc) {\n    var _this = this;\n    var section = !(pdfDoc && pdfExportProperties && pdfExportProperties.multipleExport && pdfExportProperties.multipleExport.type === 'AppendToPage') ? this.pdfDocument.sections.add() : null;\n    var pdfGrid;\n    this.processSectionExportProperties(section, pdfExportProperties);\n    var pdfPage = pdfDoc && pdfExportProperties && pdfExportProperties.multipleExport && pdfExportProperties.multipleExport.type === 'AppendToPage' ? pdfDoc['result'].page : section.pages.add();\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    return new Promise(function (resolve, reject) {\n      pdfGrid = _this.processGridExport(gObj, returnType, pdfExportProperties);\n      _this.globalResolve = resolve;\n      _this.gridPool[gObj.id] = true;\n      _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n    }).then(function () {\n      // draw the grid\n      var xPosition = _this.drawPosition['xPosition'];\n      var yPosition;\n      if (pdfDoc && pdfExportProperties && pdfExportProperties.multipleExport && pdfExportProperties.multipleExport.type === 'AppendToPage') {\n        yPosition = pdfDoc['result'].bounds.y + pdfDoc['result'].bounds.height;\n        if (pdfExportProperties.multipleExport.blankSpace) {\n          yPosition = pdfDoc['result'].bounds.y + pdfDoc['result'].bounds.height + pdfExportProperties.multipleExport.blankSpace;\n        }\n      } else {\n        yPosition = _this.drawPosition['yPosition'];\n      }\n      var result;\n      if (isMultipleExport) {\n        var layoutFormat = new PdfGridLayoutFormat();\n        layoutFormat.layout = PdfLayoutType.Paginate;\n        layoutFormat.break = PdfLayoutBreakType.FitPage;\n        //Set pagination bounds of PDF grid\n        layoutFormat.paginateBounds = new RectangleF(0, 0, pdfPage.getClientSize().width, pdfPage.getClientSize().height);\n        result = pdfGrid.draw(pdfPage, xPosition, yPosition, layoutFormat);\n      } else {\n        result = pdfGrid.draw(pdfPage, xPosition, yPosition);\n      }\n      _this.drawHeader(pdfExportProperties);\n      if (!isMultipleExport) {\n        // save the PDF\n        if (!_this.isBlob) {\n          if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n            _this.pdfDocument.save(pdfExportProperties.fileName);\n          } else {\n            _this.pdfDocument.save('Export.pdf');\n          }\n        } else {\n          _this.blobPromise = _this.pdfDocument.save();\n        }\n        _this.pdfDocument.destroy();\n        delete gObj.expandedRows;\n      }\n      if (pdfExportProperties && pdfExportProperties.multipleExport && pdfExportProperties.multipleExport.type === 'AppendToPage') {\n        return {\n          document: _this.pdfDocument,\n          result: result\n        };\n      } else {\n        return _this.pdfDocument;\n      }\n    });\n  };\n  PdfExport.prototype.processSectionExportProperties = function (section, pdfExportProperties) {\n    if (!isNullOrUndefined(section) && !isNullOrUndefined(pdfExportProperties) && (!isNullOrUndefined(pdfExportProperties.pageOrientation) || !isNullOrUndefined(pdfExportProperties.pageSize))) {\n      this.pdfPageSettings.orientation = pdfExportProperties.pageOrientation === 'Landscape' ? PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n      this.pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n      section.setPageSettings(this.pdfPageSettings);\n    }\n    return section;\n  };\n  PdfExport.prototype.processGridExport = function (gObj, returnType, pdfExportProperties) {\n    var allowHorizontalOverflow = true;\n    if (!isNullOrUndefined(pdfExportProperties)) {\n      this.gridTheme = pdfExportProperties.theme;\n      allowHorizontalOverflow = isNullOrUndefined(pdfExportProperties.allowHorizontalOverflow) ? true : pdfExportProperties.allowHorizontalOverflow;\n    }\n    var helper = new ExportHelper(gObj, this.helper.getForeignKeyData());\n    var dataSource = this.processExportProperties(pdfExportProperties, returnType.result);\n    var columns = isExportColumns(pdfExportProperties) ? prepareColumns(pdfExportProperties.columns, gObj.enableColumnVirtualization) : helper.getGridExportColumns(gObj.columns);\n    columns = columns.filter(function (columns) {\n      return isNullOrUndefined(columns.commands);\n    });\n    var isGrouping = false;\n    if (gObj.groupSettings.columns.length) {\n      isGrouping = true;\n    }\n    if ((gObj.childGrid || gObj.detailTemplate) && !isNullOrUndefined(pdfExportProperties)) {\n      gObj.hierarchyPrintMode = pdfExportProperties.hierarchyExportMode || 'Expanded';\n    }\n    // create a grid\n    var pdfGrid = new PdfGrid();\n    // get header theme style\n    var headerThemeStyle = this.getHeaderThemeStyle();\n    var border = headerThemeStyle.border;\n    var headerFont = headerThemeStyle.font;\n    var headerBrush = headerThemeStyle.brush;\n    var returnValue = helper.getHeaders(columns, this.hideColumnInclude);\n    // Column collection with respect to the records in the grid\n    var gridColumns = returnValue.columns;\n    // process grid header content\n    pdfGrid = this.processGridHeaders(gObj.groupSettings.columns.length, pdfGrid, returnValue.rows, gridColumns, border, headerFont, headerBrush, gObj, allowHorizontalOverflow, columns);\n    // set alignment, width and type of the values of the column\n    this.setColumnProperties(gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow);\n    var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n    if (!isNullOrUndefined(dataSource) && dataSource.length) {\n      if (isGrouping) {\n        if (!isNullOrUndefined(captionThemeStyle.border)) {\n          border = captionThemeStyle.border;\n        }\n        this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType, pdfExportProperties, helper, 0);\n      } else {\n        this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid, 0, pdfExportProperties, helper, 0);\n      }\n      if (!isNullOrUndefined(returnType.aggregates)) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        var sRows = void 0;\n        var column = summaryModel.getColumns();\n        column = column.filter(function (col) {\n          return isNullOrUndefined(col.commands) && col.type !== 'checkbox';\n        });\n        if (gObj.aggregates.length && this.parent !== gObj) {\n          gObj.aggregateModule.prepareSummaryInfo();\n        }\n        if (this.customDataSource) {\n          sRows = summaryModel.generateRows(dataSource, returnType.aggregates, null, null, column);\n        } else if (this.currentViewData) {\n          sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n        } else if (isGrouping) {\n          sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n        } else {\n          sRows = summaryModel.generateRows(returnType.result, returnType.aggregates, null, null, column);\n        }\n        this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false, null, null, null, isGrouping ? false : true);\n      }\n    } else {\n      var row = pdfGrid.rows.addRow();\n      row.style.setBorder(border);\n    }\n    return pdfGrid;\n  };\n  PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n    if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption)) {\n      var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n      var fontFamily = !isNullOrUndefined(this.gridTheme.caption.fontName) ? this.getFontFamily(this.gridTheme.caption.fontName) : PdfFontFamily.Helvetica;\n      var fontStyle = this.getFontStyle(this.gridTheme.caption);\n      var pdfColor = new PdfColor(0, 0, 0);\n      if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n        var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n        pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n      }\n      var borderCaption = this.gridTheme.caption.border ? this.getBorderStyle(this.gridTheme.caption.border) : null;\n      var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n      if (!isNullOrUndefined(this.gridTheme.caption.font)) {\n        font = this.gridTheme.caption.font;\n      }\n      return {\n        font: font,\n        brush: new PdfSolidBrush(pdfColor),\n        backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)),\n        border: borderCaption\n      };\n    } else {\n      //Material theme\n      return {\n        font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75),\n        brush: new PdfSolidBrush(new PdfColor(0, 0, 0)),\n        backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246))\n      };\n    }\n  };\n  PdfExport.prototype.getGridPdfFont = function (args) {\n    var fontFamily = 'fontFamily';\n    var fontSize = 'fontSize';\n    var fontStyle = 'fontStyle';\n    var isTrueType = 'isTrueType';\n    var style = 0;\n    if (args.header && args.header.font) {\n      var headerFont = args.header.font[\"\" + fontFamily];\n      var headerSize = args.header.font[\"\" + fontSize];\n      var headerStyle = args.header.font[\"\" + fontStyle];\n      style = isNullOrUndefined(PdfFontStyle[\"\" + headerStyle]) ? 0 : PdfFontStyle[\"\" + headerStyle];\n      if (args.header.font[\"\" + isTrueType]) {\n        args.header.font = new PdfTrueTypeFont(headerFont, headerSize, style);\n      } else {\n        var fontFamily_1 = !isNullOrUndefined(headerFont) ? this.getFontFamily(headerFont) : PdfFontFamily.Helvetica;\n        args.header.font = new PdfStandardFont(fontFamily_1, headerSize, style);\n      }\n    }\n    if (args.caption && args.caption.font) {\n      var captionFont = args.caption.font[\"\" + fontFamily];\n      var captionSize = args.caption.font[\"\" + fontSize];\n      var captionStyle = args.caption.font[\"\" + fontStyle];\n      style = isNullOrUndefined(PdfFontStyle[\"\" + captionStyle]) ? 0 : PdfFontStyle[\"\" + captionStyle];\n      if (args.caption.font[\"\" + isTrueType]) {\n        args.caption.font = new PdfTrueTypeFont(captionFont, captionSize, style);\n      } else {\n        var fontFamily_2 = !isNullOrUndefined(captionFont) ? this.getFontFamily(captionFont) : PdfFontFamily.Helvetica;\n        args.caption.font = new PdfStandardFont(fontFamily_2, captionSize, style);\n      }\n    }\n    if (args.record && args.record.font) {\n      var recordFont = args.record.font[\"\" + fontFamily];\n      var recordSize = args.record.font[\"\" + fontSize];\n      var recordStyle = args.record.font[\"\" + fontStyle];\n      style = isNullOrUndefined(PdfFontStyle[\"\" + recordStyle]) ? 0 : PdfFontStyle[\"\" + recordStyle];\n      if (args.record.font[\"\" + isTrueType]) {\n        args.record.font = new PdfTrueTypeFont(recordFont, recordSize, style);\n      } else {\n        var fontFamily_3 = !isNullOrUndefined(recordFont) ? this.getFontFamily(recordFont) : PdfFontFamily.Helvetica;\n        args.record.font = new PdfStandardFont(fontFamily_3, recordSize, style);\n      }\n    }\n  };\n  PdfExport.prototype.getHeaderThemeStyle = function () {\n    var border = new PdfBorders();\n    if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n      var fontFamily = !isNullOrUndefined(this.gridTheme.header.fontName) ? this.getFontFamily(this.gridTheme.header.fontName) : PdfFontFamily.Helvetica;\n      var fontStyle = this.getFontStyle(this.gridTheme.header);\n      var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n      var pdfColor = new PdfColor();\n      if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n        var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n        pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n      }\n      var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n      if (!isNullOrUndefined(this.gridTheme.header.font)) {\n        font = this.gridTheme.header.font;\n      }\n      return {\n        border: this.getBorderStyle(this.gridTheme.header.border),\n        font: font,\n        brush: new PdfSolidBrush(pdfColor)\n      };\n    } else {\n      //Material theme\n      border.all = new PdfPen(new PdfColor(234, 234, 234));\n      return {\n        border: border,\n        font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5),\n        brush: new PdfSolidBrush(new PdfColor(102, 102, 102))\n      };\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index) {\n    var _this = this;\n    var groupIndex = level;\n    var _loop_1 = function (dataSourceItems) {\n      var row = pdfGrid.rows.addRow();\n      var col = gObj.getColumnByField(dataSourceItems.field);\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var args = {\n        value: dataSourceItems.key,\n        column: col,\n        style: undefined,\n        isForeignKey: col.isForeignColumn()\n      };\n      var value = gObj.getColumnByField(dataSourceItems.field).headerText + ': ' + (!col.enableGroupByFormat ? this_1.exportValueFormatter.formatCellValue(args) : dataSourceItems.key) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n      var cArgs = {\n        captionText: value,\n        type: 'PDF',\n        data: dataSourceItems,\n        style: undefined\n      };\n      this_1.parent.trigger(events.exportGroupCaption, cArgs, function (cArgs) {\n        row.cells.getCell(groupIndex).value = cArgs.captionText;\n        row.cells.getCell(groupIndex).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n        row.style.setBorder(border);\n        row.style.setFont(font);\n        row.style.setTextBrush(brush);\n        row.style.setBackgroundBrush(backgroundBrush);\n        if (!isNullOrUndefined(cArgs.style)) {\n          _this.processCellStyle(row.cells.getCell(groupIndex), cArgs);\n        }\n        var sRows;\n        var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n        if (!isNullOrUndefined(dataSourceItems.items.records)) {\n          sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n        } else {\n          sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n        }\n        if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n          row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n        }\n        if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n          _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex, null, null, gObj);\n          _this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, groupIndex + 1, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index);\n          index = _this.rowIndex;\n          var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n          sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n          _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n        } else {\n          _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex, null, null, gObj);\n          index = _this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, groupIndex + 1, pdfExportProperties, helper, index);\n          var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n          sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n          var isGroupedFooter = true;\n          _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false, null, null, isGroupedFooter, null, gObj);\n        }\n      });\n    };\n    var this_1 = this;\n    for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n      var dataSourceItems = dataSource_1[_i];\n      _loop_1(dataSourceItems);\n    }\n  };\n  PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumn, border, headerFont, headerBrush, grid, allowHorizontalOverflow, eCols) {\n    var _this = this;\n    var columnCount = gridColumn.length + childLevels;\n    var depth = measureColumnDepth(eCols);\n    var cols = eCols;\n    var index = 0;\n    var rowNumber = [];\n    for (var i = 0; i < rows.length; i++) {\n      rowNumber[parseInt(i.toString(), 10)] = 0;\n    }\n    if (grid.groupSettings.columns.length) {\n      index = grid.groupSettings.columns.length - 1;\n      columnCount = columnCount - 1;\n    }\n    pdfGrid.columns.add(columnCount);\n    pdfGrid.style.cellPadding = new PdfPaddings(5.76, 5.76, 0.5, 0.5);\n    pdfGrid.headers.add(rows.length);\n    var applyTextAndSpan = function (rowIdx, colIdx, col, rowSpan, colSpan) {\n      var gridHeader = pdfGrid.headers.getHeader(rowIdx);\n      var pdfCell = gridHeader.cells.getCell(colIdx);\n      var cell = rows[parseInt(rowIdx.toString(), 10)].cells[grid.groupSettings.columns.length ? colIdx : rowNumber[parseInt(rowIdx.toString(), 10)]];\n      rowNumber[parseInt(rowIdx.toString(), 10)] = rowNumber[parseInt(rowIdx.toString(), 10)] + 1;\n      if (!isNullOrUndefined(col.headerTextAlign)) {\n        pdfCell.style.stringFormat = _this.getHorizontalAlignment(col.headerTextAlign);\n      }\n      if (rowSpan > 0) {\n        pdfCell.rowSpan = rowSpan;\n        pdfCell.style.stringFormat = _this.getVerticalAlignment('Bottom', pdfCell.style.stringFormat, col.textAlign);\n      }\n      if (colSpan > 0) {\n        pdfCell.columnSpan = colSpan;\n      }\n      gridHeader.style.setBorder(border);\n      gridHeader.style.setFont(headerFont);\n      gridHeader.style.setTextBrush(headerBrush);\n      pdfCell.value = col.headerText;\n      if (!isNullOrUndefined(cell) && (cell.cellType === CellType.HeaderIndent || cell.cellType === CellType.DetailHeader)) {\n        pdfCell.value = '';\n        pdfCell.width = 20;\n      }\n      var args = {\n        cell: pdfCell,\n        gridCell: cell,\n        style: pdfCell.style\n      };\n      _this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n      var evtArgs = args;\n      var setCellBorder = args.style.borders;\n      var setCellFont = args.style.font;\n      var setHeaderBrush = args.style.textBrush;\n      if (!isNullOrUndefined(setCellBorder)) {\n        gridHeader.style.setBorder(setCellBorder);\n      }\n      if (!isNullOrUndefined(setCellFont)) {\n        gridHeader.style.setFont(setCellFont);\n      }\n      if (!isNullOrUndefined(setHeaderBrush)) {\n        gridHeader.style.setTextBrush(setHeaderBrush);\n      }\n      if (!isNullOrUndefined(evtArgs.style.verticalAlignment)) {\n        pdfCell.style.stringFormat = _this.getVerticalAlignment(evtArgs.style.verticalAlignment, pdfCell.style.stringFormat);\n      }\n      if (!isNullOrUndefined(evtArgs.image)) {\n        pdfCell.value = new PdfBitmap(evtArgs.image.base64);\n      }\n      if (!isNullOrUndefined(evtArgs.hyperLink)) {\n        pdfCell.value = _this.setHyperLink(evtArgs);\n      }\n    };\n    var recuHeader = function (cols, depth, spanCnt, colIndex, rowIndex, isRoot) {\n      var cidx = 0;\n      for (var i = 0; i < cols.length; i++) {\n        if (isRoot) {\n          cidx = cidx + spanCnt + (i === 0 ? 0 : -1);\n          colIndex = cidx;\n          spanCnt = 0;\n        }\n        if (!isRoot && !cols[parseInt(i.toString(), 10)].visible) {\n          colIndex = colIndex - 1;\n        }\n        if (cols[parseInt(i.toString(), 10)].columns && cols[parseInt(i.toString(), 10)].columns.length) {\n          var newSpanCnt = recuHeader(cols[parseInt(i.toString(), 10)].columns, depth - 1, 0, i + colIndex, rowIndex + 1, false);\n          applyTextAndSpan(rowIndex, i + colIndex + index, cols[parseInt(i.toString(), 10)], 0, newSpanCnt);\n          spanCnt = spanCnt + newSpanCnt;\n          colIndex = colIndex + newSpanCnt - 1;\n        } else if (cols[parseInt(i.toString(), 10)].visible || _this.hideColumnInclude) {\n          spanCnt++;\n          applyTextAndSpan(rowIndex, i + colIndex + index, cols[parseInt(i.toString(), 10)], depth, 0);\n        }\n      }\n      return spanCnt;\n    };\n    recuHeader(cols, depth, 0, 0, 0, true);\n    if (pdfGrid.columns.count >= 6 && allowHorizontalOverflow) {\n      pdfGrid.style.allowHorizontalOverflow = true;\n    }\n    return pdfGrid;\n  };\n  PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource) {\n    if (!isNullOrUndefined(pdfExportProperties)) {\n      if (!isNullOrUndefined(pdfExportProperties.theme)) {\n        this.gridTheme = pdfExportProperties.theme;\n      }\n      var clientSize = this.pdfPageSettings.size;\n      this.drawHeader(pdfExportProperties);\n      if (!isNullOrUndefined(pdfExportProperties.footer)) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var footer = pdfExportProperties.footer;\n        var position = new PointF(0, clientSize.width - 80 - footer.fromBottom * 0.75);\n        var size = new SizeF(clientSize.width - 80, footer.height * 0.75);\n        var bounds = new RectangleF(position, size);\n        this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n      }\n      if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n        this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n      }\n      if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n        this.customDataSource = true;\n        this.currentViewData = false;\n      } else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n        if (pdfExportProperties.exportType === 'CurrentPage') {\n          dataSource = this.parent.groupSettings && this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length && !this.parent.getDataModule().isRemote() ? dataSource : this.parent.currentViewData;\n          this.currentViewData = true;\n          this.customDataSource = false;\n        } else {\n          this.currentViewData = false;\n          this.customDataSource = false;\n        }\n      } else {\n        this.currentViewData = false;\n        this.customDataSource = false;\n      }\n    } else {\n      this.currentViewData = false;\n      this.customDataSource = false;\n    }\n    return dataSource;\n  };\n  PdfExport.prototype.drawHeader = function (pdfExportProperties) {\n    var _this = this;\n    var clientSize = this.pdfPageSettings.size;\n    if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.header)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var header = pdfExportProperties.header;\n      var position = new PointF(0, header.fromTop);\n      var size = new SizeF(clientSize.width - 80, header.height * 0.75);\n      var bounds = new RectangleF(position, size);\n      if (!this.headerOnPages.length) {\n        this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n      } else {\n        var headerTemplate_1 = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n        this.headerOnPages.filter(function (index) {\n          if (index - 1 >= 0 && index - 1 <= _this.pdfDocument.pages.count - 1) {\n            _this.pdfDocument.pages.getPageByIndex(index - 1).graphics.drawPdfTemplate(headerTemplate_1.template, new PointF(0, 0));\n          }\n        });\n      }\n    }\n  };\n  PdfExport.prototype.drawPageTemplate = function (template, element) {\n    for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n      var content = _a[_i];\n      this.processContentValidation(content);\n      switch (content.type) {\n        case 'Text':\n          if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n            throw new Error('please enter the valid input value in text content...');\n          }\n          this.drawText(template, content);\n          break;\n        case 'PageNumber':\n          this.drawPageNumber(template, content);\n          break;\n        case 'Image':\n          if (content.src === undefined || content.src === null || content.src === '') {\n            throw new Error('please enter the valid base64 string in image content...');\n          }\n          this.drawImage(template, content);\n          break;\n        case 'Line':\n          this.drawLine(template, content);\n          break;\n        default:\n          throw new Error('Please set valid content type...');\n      }\n    }\n    return template;\n  };\n  PdfExport.prototype.processContentValidation = function (content) {\n    if (content.type === undefined || content.type === null) {\n      throw new Error('please set valid content type...');\n    } else {\n      if (content.type === 'Line') {\n        if (content.points === undefined || content.points === null) {\n          throw new Error('please enter valid points in ' + content.type + ' content...');\n        } else {\n          if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n            throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n          }\n          if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n            throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n          }\n          if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n            throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n          }\n          if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n            throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n          }\n        }\n      } else {\n        if (content.position === undefined || content.position === null) {\n          throw new Error('please enter valid position in ' + content.type + ' content...');\n        } else {\n          if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n            throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n          }\n          if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n            throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  PdfExport.prototype.drawText = function (pageTemplate, content) {\n    var font = this.getFont(content);\n    var brush = this.getBrushFromContent(content);\n    var pen = null;\n    if (!isNullOrUndefined(content.style.textPenColor)) {\n      var penColor = this.hexToRgb(content.style.textPenColor);\n      pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n    }\n    if (brush == null && pen == null) {\n      brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n    }\n    var value = content.value.toString();\n    var x = content.position.x * 0.75;\n    var y = content.position.y * 0.75;\n    var format = new PdfStringFormat();\n    if (!isNullOrUndefined(content.style.stringFormat)) {\n      format.alignment = content.style.stringFormat.alignment;\n    }\n    var result = this.setContentFormat(content, format);\n    if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n      pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n    } else {\n      pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n    var font = this.getFont(content);\n    var brush = null;\n    if (!isNullOrUndefined(content.style.textBrushColor)) {\n      var brushColor = this.hexToRgb(content.style.textBrushColor);\n      brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n    } else {\n      brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n    }\n    var pageNumber = new PdfPageNumberField(font, brush);\n    pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n    var compositeField;\n    var format;\n    if (!isNullOrUndefined(content.format)) {\n      var total = '$total';\n      var current = '$current';\n      if (content.format.indexOf(total) !== -1 && content.format.indexOf(current) !== -1) {\n        var pageCount = new PdfPageCountField(font);\n        pageCount.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        if (content.format.indexOf(total) > content.format.indexOf(current)) {\n          format = content.format.replace(current, '0');\n          format = format.replace(total, '1');\n        } else {\n          format = content.format.replace(current, '1');\n          format = format.replace(total, '0');\n        }\n        compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n      } else if (content.format.indexOf(current) !== -1 && content.format.indexOf(total) === -1) {\n        format = content.format.replace(current, '0');\n        compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n      } else {\n        var pageCount = new PdfPageCountField(font);\n        format = content.format.replace(total, '0');\n        compositeField = new PdfCompositeField(font, brush, format, pageCount);\n      }\n    } else {\n      format = '{0}';\n      compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n    }\n    var x = content.position.x * 0.75;\n    var y = content.position.y * 0.75;\n    var result = this.setContentFormat(content, compositeField.stringFormat);\n    if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n      compositeField.stringFormat = result.format;\n      compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n    }\n    compositeField.draw(documentHeader.graphics, x, y);\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  PdfExport.prototype.drawImage = function (documentHeader, content) {\n    var x = content.position.x * 0.75;\n    var y = content.position.y * 0.75;\n    var width = !isNullOrUndefined(content.size) ? content.size.width * 0.75 : undefined;\n    var height = !isNullOrUndefined(content.size) ? content.size.height * 0.75 : undefined;\n    var image = new PdfBitmap(content.src);\n    if (!isNullOrUndefined(width)) {\n      documentHeader.graphics.drawImage(image, x, y, width, height);\n    } else {\n      documentHeader.graphics.drawImage(image, x, y);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  PdfExport.prototype.drawLine = function (documentHeader, content) {\n    var x1 = content.points.x1 * 0.75;\n    var y1 = content.points.y1 * 0.75;\n    var x2 = content.points.x2 * 0.75;\n    var y2 = content.points.y2 * 0.75;\n    var pen = this.getPenFromContent(content);\n    if (!isNullOrUndefined(content.style) && content.style !== null) {\n      if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n        pen.width = content.style.penSize * 0.75;\n      }\n      pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n    }\n    documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n  };\n  PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex, isGroupedFooter, isAggregate, gObj) {\n    for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n      var row = sRows_1[_i];\n      var leastCaptionSummaryIndex = -1;\n      var index = 0;\n      var isEmpty = true;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var value = [];\n      var aggIdx = isAggregate ? 0 : 1;\n      var gridRow = void 0;\n      if (isNullOrUndefined(captionRow)) {\n        gridRow = pdfGrid.rows.addRow();\n        gridRow.style.setBorder(border);\n        gridRow.style.setFont(font);\n        gridRow.style.setTextBrush(brush);\n        gridRow.style.setBackgroundBrush(backgroundBrush);\n      }\n      for (var i = 0; i < pdfGrid.columns.count + aggIdx; i++) {\n        var cell = row.cells[parseInt(index.toString(), 10)];\n        if (cell.cellType === CellType.DetailFooterIntent) {\n          i--;\n          index++;\n          continue;\n        }\n        if (!this.hideColumnInclude) {\n          while (cell.visible === undefined) {\n            if (cell.cellType === CellType.DetailFooterIntent) {\n              continue;\n            }\n            if (!isNullOrUndefined(captionRow)) {\n              if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                value.push(captionRow.cells.getCell(i).value);\n                isEmpty = false;\n                if (!isCaption) {\n                  i += 1;\n                }\n              } else {\n                value.push('');\n              }\n            } else {\n              value.push('');\n            }\n            i += 1;\n            index = index + 1;\n            cell = row.cells[parseInt(index.toString(), 10)];\n          }\n          while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n            index = index + 1;\n            cell = row.cells[parseInt(index.toString(), 10)];\n          }\n        }\n        if (cell.isDataCell) {\n          var templateFn = {};\n          var footerTemplate = !isNullOrUndefined(cell.column.footerTemplate);\n          var groupFooterTemplate = !isNullOrUndefined(cell.column.groupFooterTemplate);\n          var groupCaptionTemplate = !isNullOrUndefined(cell.column.groupCaptionTemplate);\n          if (footerTemplate || groupCaptionTemplate || groupFooterTemplate) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell);\n            templateFn = result.templateFunction;\n            leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n            var txt = void 0;\n            var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n            if ((this.parent.isReact || this.parent.isVue || this.parent.isVue3 || this.parent.isAngular) && !(typeof cell.column.footerTemplate === 'string' || typeof cell.column.groupFooterTemplate === 'string' || typeof cell.column.groupCaptionTemplate === 'string')) {\n              txt = data[cell.column.type];\n              txt = !isNullOrUndefined(txt) ? txt : '';\n            } else {\n              txt = templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent);\n              txt = this.parent.isVue3 && !isNullOrUndefined(txt[1]) ? txt[1].textContent : !isNullOrUndefined(txt[0]) ? txt[0].textContent : '';\n            }\n            isEmpty = false;\n            var args = {\n              row: row,\n              type: footerTemplate ? 'Footer' : groupFooterTemplate ? 'GroupFooter' : 'GroupCaption',\n              style: isNullOrUndefined(captionRow) ? gridRow.cells : captionRow.cells,\n              cell: cell,\n              value: txt\n            };\n            this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n            value.push(args.value);\n          } else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n            if (!isNullOrUndefined(result)) {\n              value.push(result);\n            }\n          }\n        } else {\n          value.push('');\n        }\n        if (isEmpty && value[parseInt(i.toString(), 10)] !== '' && !isNullOrUndefined(value[parseInt(i.toString(), 10)]) && value[parseInt(i.toString(), 10)] !== null) {\n          isEmpty = false;\n        }\n        index += 1;\n      }\n      if (!isAggregate) {\n        if (!isCaption) {\n          value.splice(0, 1);\n        } else {\n          for (var i = gObj.groupSettings.columns.length; i < value.length - 1; i++) {\n            value[parseInt(i.toString(), 10)] = value[i + 1];\n            value[i + 1] = value[i + 2] ? value[i + 2] : '';\n          }\n        }\n      }\n      if (!isEmpty) {\n        if (!isCaption) {\n          for (var i = 0; i < pdfGrid.columns.count; i++) {\n            gridRow.cells.getCell(i).value = value[parseInt(i.toString(), 10)].toString();\n          }\n        } else {\n          for (var i = 0; i < pdfGrid.columns.count; i++) {\n            captionRow.cells.getCell(i).value = value[parseInt(i.toString(), 10)].toString();\n            if (i === groupIndex && leastCaptionSummaryIndex !== -1 && leastCaptionSummaryIndex !== 1) {\n              captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - 1 - groupIndex;\n            } else if (i === groupIndex && leastCaptionSummaryIndex === -1) {\n              captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - groupIndex;\n            }\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, cell) {\n    if (!isNullOrUndefined(cell.column.footerTemplate) && cell.cellType === CellType.Summary) {\n      templateFn[getEnumValue(CellType, CellType.Summary)] = compile(cell.column.footerTemplate);\n    } else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n      if (leastCaptionSummaryIndex === -1) {\n        leastCaptionSummaryIndex = index;\n      }\n      templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(cell.column.groupCaptionTemplate);\n    } else {\n      templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(cell.column.groupFooterTemplate);\n    }\n    return {\n      templateFunction: templateFn,\n      leastCaptionSummaryIndex: leastCaptionSummaryIndex\n    };\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n    if (!isNullOrUndefined(data.Sum)) {\n      return data.Sum;\n    } else if (!isNullOrUndefined(data.Average)) {\n      return data.Average;\n    } else if (!isNullOrUndefined(data.Max)) {\n      return data.Max;\n    } else if (!isNullOrUndefined(data.Min)) {\n      return data.Min;\n    } else if (!isNullOrUndefined(data.Count)) {\n      return data.Count;\n    } else if (!isNullOrUndefined(data.TrueCount)) {\n      return data.TrueCount;\n    } else if (!isNullOrUndefined(data.FalseCount)) {\n      return data.FalseCount;\n    } else if (!isNullOrUndefined(data.Custom)) {\n      return data.Custom;\n    }\n  };\n  /**\n   * Set alignment, width and type of the values of the column\n   *\n   * @param {Column[]} gridColumns - specifies the grid column\n   * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n   * @param {ExportHelper} helper - specifies the helper\n   * @param {IGrid} gObj - specifies the IGrid\n   * @param {boolean} allowHorizontalOverflow - specifies the allowHorizontalOverflow\n   * @returns {void}\n   */\n  PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow) {\n    var startIndex = gObj.groupSettings.columns.length ? gObj.groupSettings.columns.length - 1 : 0;\n    for (var i = 0; i < startIndex; i++) {\n      pdfGrid.columns.getColumn(i).width = 20;\n    }\n    for (var i = 0; i < gridColumns.length; i++) {\n      if (!isNullOrUndefined(gridColumns[parseInt(i.toString(), 10)].textAlign)) {\n        pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[parseInt(i.toString(), 10)].textAlign);\n      }\n      // Need to add width consideration with % value\n      if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[parseInt(i.toString(), 10)].width) && allowHorizontalOverflow) {\n        pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[parseInt(i.toString(), 10)].width === 'number' ? gridColumns[parseInt(i.toString(), 10)].width * 0.75 : helper.getConvertedWidth(gridColumns[parseInt(i.toString(), 10)].width) * 0.75;\n      }\n    }\n  };\n  /**\n   * set default style properties of each rows in exporting grid\n   *\n   * @param {PdfGridRow} row - specifies the PdfGridRow\n   * @param {PdfBorders} border - specifies the PdfBorders\n   * @returns {PdfGrid} returns the pdfgrid\n   * @private\n   */\n  PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n    if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record)) {\n      var fontFamily = !isNullOrUndefined(this.gridTheme.record.fontName) ? this.getFontFamily(this.gridTheme.record.fontName) : PdfFontFamily.Helvetica;\n      var fontSize = !isNullOrUndefined(this.gridTheme.record.fontSize) ? this.gridTheme.record.fontSize : 9.75;\n      var fontStyle = this.getFontStyle(this.gridTheme.record);\n      var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n      if (!isNullOrUndefined(this.gridTheme.record.font)) {\n        font = this.gridTheme.record.font;\n      }\n      row.style.setFont(font);\n      var pdfColor = new PdfColor();\n      if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n        var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n        pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n      }\n      row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n    } else {\n      row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n    }\n    var borderRecord = this.gridTheme && this.gridTheme.record && this.gridTheme.record.border ? this.getBorderStyle(this.gridTheme.record.border) : border;\n    row.style.setBorder(borderRecord);\n    return row;\n  };\n  /**\n   * generate the formatted cell values\n   *\n   * @param {PdfBorders} border - specifies the border\n   * @param {Column[]} columns - specifies the columns\n   * @param {IGrid} gObj - specifies the IGrid\n   * @param {Object[]} dataSource - specifies the datasource\n   * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n   * @param {number} startIndex - specifies the startindex\n   * @param {PdfExportProperties} pdfExportProperties - specifies the pdfExportProperties\n   * @param {ExportHelper} helper - specifies the helper\n   * @param {number} rowIndex - specifies the rowIndex\n   * @returns {number} returns the number of records\n   * @private\n   */\n  PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, startIndex, pdfExportProperties, helper, rowIndex) {\n    var rows = helper.getGridRowModel(columns, dataSource, gObj, rowIndex);\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      rowIndex++;\n      this.rowIndex = rowIndex;\n      // create a new row and set default style properties\n      var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n      var cellLength = row.cells.length;\n      for (var j = 0; j < cellLength; j++) {\n        var gridCell = row.cells[parseInt(j.toString(), 10)];\n        if (gridCell.cellType !== CellType.Data) {\n          continue;\n        }\n        var column = gridCell.column;\n        var field = column.field;\n        var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n        var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n        var foreignKeyData = void 0;\n        if (column.isForeignColumn && column.isForeignColumn()) {\n          foreignKeyData = helper.getFData(value, column);\n          value = getValue(column.foreignKeyValue, foreignKeyData);\n        }\n        var data = row.data;\n        var cell = gridRow.cells.getCell(j);\n        var args = {\n          data: data,\n          value: value,\n          column: column,\n          style: undefined,\n          colSpan: 1,\n          cell: cell\n        };\n        args.value = args.column.type === 'boolean' && typeof args.value === 'string' ? args.value : this.exportValueFormatter.formatCellValue(args);\n        this.parent.trigger(events.pdfQueryCellInfo, args);\n        if (!isNullOrUndefined(args.image)) {\n          args.value = new PdfBitmap(args.image.base64);\n          args.value.height = args.image.height || args.value.height;\n          args.value.width = args.image.width || args.value.width;\n        }\n        cell.value = args.value;\n        if (!isNullOrUndefined(args.hyperLink)) {\n          cell.value = this.setHyperLink(args);\n        }\n        if (!isNullOrUndefined(args.style)) {\n          this.processCellStyle(cell, args);\n        }\n        if (args.colSpan > 1) {\n          if (j + 1 + args.colSpan > gridRow.cells.count) {\n            args.colSpan = gridRow.cells.count - (j + 1);\n          }\n          cell.columnSpan = args.colSpan;\n          for (var i = 1; i < cell.columnSpan; i++) {\n            var spanCell = gridRow.cells.getCell(j + i);\n            spanCell.value = '';\n          }\n          j += args.colSpan - 1;\n        }\n      }\n      if (row.isExpand) {\n        var gridRow_1 = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n        var startIndexVal = this.parent.childGrid || this.parent.detailTemplate ? 0 : startIndex;\n        var cell = gridRow_1.cells.getCell(startIndexVal);\n        cell.columnSpan = gridRow_1.cells.count - startIndexVal;\n        cell.style.cellPadding = new PdfPaddings(10, 10, 10, 10);\n        if (this.parent.childGrid) {\n          gObj.isPrinting = true;\n          var exportType = !isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType ? pdfExportProperties.exportType : 'AllPages';\n          var returnValue = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n          var childGridObj = returnValue.childGrid;\n          var element = returnValue.element;\n          childGridObj.actionFailure = helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n          var childExportProperties = extend(pdfExportProperties, {\n            columns: null,\n            dataSource: null,\n            query: null\n          });\n          var args = {\n            childGrid: childGridObj,\n            row: row,\n            cell: cell,\n            exportProperties: childExportProperties\n          };\n          this.parent.trigger(events.exportDetailDataBound, args);\n          childGridObj.beforeDataBound = this.childGridCell(cell, childGridObj, childExportProperties);\n          childGridObj.appendTo(element);\n        } else if (this.parent.detailTemplate) {\n          var args = {\n            parentRow: row,\n            row: gridRow_1,\n            value: {},\n            action: 'pdfexport',\n            gridInstance: gObj\n          };\n          this.parent.trigger(events.exportDetailTemplate, args);\n          cell.value = this.processDetailTemplate(args);\n        }\n      }\n      this.parent.notify(events.exportRowDataBound, {\n        type: 'pdf',\n        rowObj: row\n      });\n    }\n    return rowIndex;\n  };\n  PdfExport.prototype.processDetailTemplate = function (templateData) {\n    var _this = this;\n    if (templateData.value.columnHeader || templateData.value.rows) {\n      // create a grid\n      var pdfGrid = new PdfGrid();\n      // get header theme style\n      var headerThemeStyle = this.getHeaderThemeStyle();\n      var border_1 = headerThemeStyle.border;\n      var headerFont_1 = headerThemeStyle.font;\n      var headerBrush_1 = headerThemeStyle.brush;\n      var processRow = function (row, gridRow, isHeader) {\n        if (isHeader) {\n          gridRow.style.setBorder(border_1);\n          gridRow.style.setFont(headerFont_1);\n          gridRow.style.setTextBrush(headerBrush_1);\n        }\n        for (var j = 0; j < row.cells.length; j++) {\n          var currentCell = row.cells[parseInt(j.toString(), 10)];\n          var pdfCell = gridRow.cells.getCell(currentCell.index ? currentCell.index : j);\n          if (currentCell.rowSpan > 0) {\n            pdfCell.rowSpan = currentCell.rowSpan;\n          }\n          if (currentCell.colSpan > 0) {\n            pdfCell.columnSpan = currentCell.colSpan;\n          }\n          pdfCell.value = currentCell.value;\n          if (!isNullOrUndefined(currentCell.image)) {\n            pdfCell.value = new PdfBitmap(currentCell.image.base64);\n            pdfCell.value.height = currentCell.image.height;\n            pdfCell.value.width = currentCell.image.width;\n          }\n          if (!isNullOrUndefined(currentCell.hyperLink)) {\n            pdfCell.value = _this.setHyperLink(currentCell);\n          }\n          if (!isNullOrUndefined(currentCell.style)) {\n            var cellStyle = {\n              style: {\n                backgroundColor: currentCell.style.backColor,\n                textAlignment: currentCell.style.pdfTextAlignment,\n                verticalAlignment: currentCell.style.pdfVerticalAlignment,\n                textBrushColor: currentCell.style.fontColor,\n                textPenColor: currentCell.style.pdfTextPenColor,\n                fontFamily: currentCell.style.pdfFontFamily,\n                fontSize: currentCell.style.fontSize,\n                bold: currentCell.style.bold,\n                italic: currentCell.style.italic,\n                underline: currentCell.style.underline,\n                strikeout: currentCell.style.strikeThrough,\n                border: currentCell.style.pdfBorder,\n                paragraphIndent: currentCell.style.pdfParagraphIndent,\n                cellPadding: currentCell.style.pdfCellPadding\n              }\n            };\n            _this.processCellStyle(pdfCell, cellStyle);\n          }\n        }\n      };\n      if (templateData.value.columnCount) {\n        pdfGrid.columns.add(templateData.value.columnCount);\n      } else {\n        if (templateData.value.columnHeader && templateData.value.columnHeader.length) {\n          pdfGrid.columns.add(templateData.value.columnHeader[0].cells.length);\n        } else if (templateData.value.rows && templateData.value.rows.length) {\n          pdfGrid.columns.add(templateData.value.rows[0].cells.length);\n        }\n      }\n      if (templateData.value.columnHeader) {\n        pdfGrid.headers.add(templateData.value.columnHeader.length);\n        for (var i = 0; i < templateData.value.columnHeader.length; i++) {\n          var gridHeader = pdfGrid.headers.getHeader(parseInt(i.toString(), 10));\n          processRow(templateData.value.columnHeader[parseInt(i.toString(), 10)], gridHeader, true);\n        }\n      }\n      if (templateData.value.rows) {\n        for (var _i = 0, _a = templateData.value.rows; _i < _a.length; _i++) {\n          var row = _a[_i];\n          // create a new row and set default style properties\n          var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border_1);\n          processRow(row, gridRow, false);\n        }\n      }\n      return pdfGrid;\n    } else if (templateData.value.image) {\n      return new PdfBitmap(templateData.value.image.base64);\n    } else if (templateData.value.text) {\n      return templateData.value.text;\n    } else if (templateData.value.hyperLink) {\n      return this.setHyperLink(templateData.value);\n    }\n    return '';\n  };\n  PdfExport.prototype.setHyperLink = function (args) {\n    // create the Text Web Link\n    var textLink = new PdfTextWebLink();\n    // set the hyperlink\n    textLink.url = args.hyperLink.target;\n    // set the link text\n    textLink.text = args.hyperLink.displayText || args.hyperLink.target;\n    // set the font\n    textLink.font = new PdfStandardFont(PdfFontFamily.Helvetica, 9.75);\n    // set the brush and pen for the text color\n    textLink.brush = new PdfSolidBrush(new PdfColor(51, 102, 187));\n    return textLink;\n  };\n  PdfExport.prototype.childGridCell = function (cell, childGridObj, pdfExportProperties) {\n    var _this = this;\n    return function (result) {\n      childGridObj.beforeDataBound = null;\n      result.cancel = true;\n      cell.value = _this.processGridExport(childGridObj, result, pdfExportProperties);\n      childGridObj.destroy();\n      detach(childGridObj.element);\n      _this.gridPool[childGridObj.id] = true;\n      _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n      return cell;\n    };\n  };\n  PdfExport.prototype.processCellStyle = function (cell, args) {\n    if (!isNullOrUndefined(args.style.backgroundColor)) {\n      var backColor = this.hexToRgb(args.style.backgroundColor);\n      cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n    }\n    if (!isNullOrUndefined(args.style.textAlignment)) {\n      cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n    }\n    if (!isNullOrUndefined(args.style.cellPadding)) {\n      cell.style.cellPadding = args.style.cellPadding;\n    }\n    if (!isNullOrUndefined(args.style.verticalAlignment)) {\n      cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n    }\n    if (!isNullOrUndefined(args.style.textBrushColor)) {\n      var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n      cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n    }\n    if (!isNullOrUndefined(args.style.textPenColor)) {\n      var textPenColor = this.hexToRgb(args.style.textPenColor);\n      cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n    }\n    if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) || !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n      cell.style.font = this.getFont(args);\n    }\n    if (!isNullOrUndefined(args.style.border)) {\n      var border = new PdfBorders();\n      var borderWidth = args.style.border.width;\n      // set border width\n      var width = !isNullOrUndefined(borderWidth) && typeof borderWidth === 'number' ? borderWidth * 0.75 : undefined;\n      // set border color\n      var color = new PdfColor(196, 196, 196);\n      if (!isNullOrUndefined(args.style.border.color)) {\n        var borderColor = this.hexToRgb(args.style.border.color);\n        color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n      }\n      var pen = new PdfPen(color, width);\n      // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n      if (!isNullOrUndefined(args.style.border.dashStyle)) {\n        pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n      }\n      border.all = pen;\n      cell.style.borders = border;\n    }\n    if (!isNullOrUndefined(args.style.paragraphIndent)) {\n      cell.style.stringFormat = new PdfStringFormat();\n      cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n    }\n  };\n  /**\n   * set text alignment of each columns in exporting grid\n   *\n   * @param {string} textAlign - specifies the textAlign\n   * @param {PdfStringFormat} format - specifies the PdfStringFormat\n   * @returns {PdfStringFormat} returns the PdfStringFormat\n   * @private\n   */\n  PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n    if (format === undefined) {\n      format = new PdfStringFormat();\n    }\n    switch (textAlign) {\n      case 'Right':\n        format.alignment = PdfTextAlignment.Right;\n        break;\n      case 'Center':\n        format.alignment = PdfTextAlignment.Center;\n        break;\n      case 'Justify':\n        format.alignment = PdfTextAlignment.Justify;\n        break;\n      case 'Left':\n        format.alignment = PdfTextAlignment.Left;\n        break;\n    }\n    return format;\n  };\n  /**\n   * set vertical alignment of each columns in exporting grid\n   *\n   * @param {string} verticalAlign - specifies the verticalAlign\n   * @param {PdfStringFormat} format - specifies the PdfStringFormat\n   * @param {string} textAlign - specifies the text align\n   * @returns {PdfStringFormat} returns the PdfStringFormat\n   * @private\n   */\n  PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n    if (format === undefined) {\n      format = new PdfStringFormat();\n      format = this.getHorizontalAlignment(textAlign, format);\n    }\n    switch (verticalAlign) {\n      case 'Bottom':\n        format.lineAlignment = PdfVerticalAlignment.Bottom;\n        break;\n      case 'Middle':\n        format.lineAlignment = PdfVerticalAlignment.Middle;\n        break;\n      case 'Top':\n        format.lineAlignment = PdfVerticalAlignment.Top;\n        break;\n    }\n    return format;\n  };\n  PdfExport.prototype.getFontFamily = function (fontFamily) {\n    switch (fontFamily) {\n      case 'TimesRoman':\n        return 2;\n      case 'Courier':\n        return 1;\n      case 'Symbol':\n        return 3;\n      case 'ZapfDingbats':\n        return 4;\n      default:\n        return 0;\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  PdfExport.prototype.getFont = function (content) {\n    if (content.font) {\n      return content.font;\n    }\n    var fontSize = !isNullOrUndefined(content.style.fontSize) ? content.style.fontSize * 0.75 : 9.75;\n    var fontFamily = !isNullOrUndefined(content.style.fontFamily) ? this.getFontFamily(content.style.fontFamily) : PdfFontFamily.TimesRoman;\n    var fontStyle = PdfFontStyle.Regular;\n    if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n      fontStyle |= PdfFontStyle.Bold;\n    }\n    if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n      fontStyle |= PdfFontStyle.Italic;\n    }\n    if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n      fontStyle |= PdfFontStyle.Underline;\n    }\n    if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n      fontStyle |= PdfFontStyle.Strikeout;\n    }\n    return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n  };\n  PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n    switch (pageNumberType) {\n      case 'LowerLatin':\n        return 2;\n      case 'LowerRoman':\n        return 3;\n      case 'UpperLatin':\n        return 4;\n      case 'UpperRoman':\n        return 5;\n      default:\n        return 1;\n    }\n  };\n  PdfExport.prototype.setContentFormat = function (content, format) {\n    if (!isNullOrUndefined(content.size)) {\n      var width = content.size.width * 0.75;\n      var height = content.size.height * 0.75;\n      format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n      if (!isNullOrUndefined(content.style.hAlign)) {\n        switch (content.style.hAlign) {\n          case 'Right':\n            format.alignment = PdfTextAlignment.Right;\n            break;\n          case 'Center':\n            format.alignment = PdfTextAlignment.Center;\n            break;\n          case 'Justify':\n            format.alignment = PdfTextAlignment.Justify;\n            break;\n          default:\n            format.alignment = PdfTextAlignment.Left;\n        }\n      }\n      if (!isNullOrUndefined(content.style.vAlign)) {\n        format = this.getVerticalAlignment(content.style.vAlign, format);\n      }\n      return {\n        format: format,\n        size: new SizeF(width, height)\n      };\n    }\n    return null;\n  };\n  PdfExport.prototype.getPageSize = function (pageSize) {\n    switch (pageSize) {\n      case 'Letter':\n        return new SizeF(612, 792);\n      case 'Note':\n        return new SizeF(540, 720);\n      case 'Legal':\n        return new SizeF(612, 1008);\n      case 'A0':\n        return new SizeF(2380, 3368);\n      case 'A1':\n        return new SizeF(1684, 2380);\n      case 'A2':\n        return new SizeF(1190, 1684);\n      case 'A3':\n        return new SizeF(842, 1190);\n      case 'A5':\n        return new SizeF(421, 595);\n      case 'A6':\n        return new SizeF(297, 421);\n      case 'A7':\n        return new SizeF(210, 297);\n      case 'A8':\n        return new SizeF(148, 210);\n      case 'A9':\n        return new SizeF(105, 148);\n      // case 'A10':\n      // return new SizeF(74, 105);\n      case 'B0':\n        return new SizeF(2836, 4008);\n      case 'B1':\n        return new SizeF(2004, 2836);\n      case 'B2':\n        return new SizeF(1418, 2004);\n      case 'B3':\n        return new SizeF(1002, 1418);\n      case 'B4':\n        return new SizeF(709, 1002);\n      case 'B5':\n        return new SizeF(501, 709);\n      case 'Archa':\n        return new SizeF(648, 864);\n      case 'Archb':\n        return new SizeF(864, 1296);\n      case 'Archc':\n        return new SizeF(1296, 1728);\n      case 'Archd':\n        return new SizeF(1728, 2592);\n      case 'Arche':\n        return new SizeF(2592, 3456);\n      case 'Flsa':\n        return new SizeF(612, 936);\n      case 'HalfLetter':\n        return new SizeF(396, 612);\n      case 'Letter11x17':\n        return new SizeF(792, 1224);\n      case 'Ledger':\n        return new SizeF(1224, 792);\n      default:\n        return new SizeF(595, 842);\n    }\n  };\n  PdfExport.prototype.getDashStyle = function (dashStyle) {\n    switch (dashStyle) {\n      case 'Dash':\n        return 1;\n      case 'Dot':\n        return 2;\n      case 'DashDot':\n        return 3;\n      case 'DashDotDot':\n        return 4;\n      default:\n        return 0;\n    }\n  };\n  PdfExport.prototype.getPenFromContent = function (content) {\n    var pen = new PdfPen(new PdfColor(0, 0, 0));\n    if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n      var penColor = this.hexToRgb(content.style.penColor);\n      pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n    }\n    return pen;\n  };\n  PdfExport.prototype.getBrushFromContent = function (content) {\n    var brush = null;\n    if (!isNullOrUndefined(content.style.textBrushColor)) {\n      /* tslint:disable-next-line:max-line-length */\n      var brushColor = this.hexToRgb(content.style.textBrushColor);\n      brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n    }\n    return brush;\n  };\n  PdfExport.prototype.hexToRgb = function (hex) {\n    if (hex === null || hex === '' || hex.length !== 7) {\n      throw new Error('please set valid hex value for color...');\n    }\n    hex = hex.substring(1);\n    var bigint = parseInt(hex, 16);\n    var r = bigint >> 16 & 255;\n    var g = bigint >> 8 & 255;\n    var b = bigint & 255;\n    return {\n      r: r,\n      g: g,\n      b: b\n    };\n  };\n  PdfExport.prototype.getFontStyle = function (theme) {\n    var fontStyle = PdfFontStyle.Regular;\n    if (!isNullOrUndefined(theme) && theme.bold) {\n      fontStyle |= PdfFontStyle.Bold;\n    }\n    if (!isNullOrUndefined(theme) && theme.italic) {\n      fontStyle |= PdfFontStyle.Italic;\n    }\n    if (!isNullOrUndefined(theme) && theme.underline) {\n      fontStyle |= PdfFontStyle.Underline;\n    }\n    if (!isNullOrUndefined(theme) && theme.strikeout) {\n      fontStyle |= PdfFontStyle.Strikeout;\n    }\n    return fontStyle;\n  };\n  PdfExport.prototype.getBorderStyle = function (border) {\n    var borders = new PdfBorders();\n    if (!isNullOrUndefined(border)) {\n      var borderWidth = border.width;\n      // set border width\n      var width = !isNullOrUndefined(borderWidth) && typeof borderWidth === 'number' ? borderWidth * 0.75 : undefined;\n      // set border color\n      var color = new PdfColor(196, 196, 196);\n      if (!isNullOrUndefined(border.color)) {\n        var borderColor = this.hexToRgb(border.color);\n        color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n      }\n      var pen = new PdfPen(color, width);\n      // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n      if (!isNullOrUndefined(border.dashStyle)) {\n        pen.dashStyle = this.getDashStyle(border.dashStyle);\n      }\n      borders.all = pen;\n    } else {\n      borders.all = new PdfPen(new PdfColor(234, 234, 234));\n    }\n    return borders;\n  };\n  PdfExport.prototype.destroy = function () {\n    //destroy for exporting\n  };\n  return PdfExport;\n}();\nexport { PdfExport };","map":{"version":3,"names":["events","PdfDocument","PdfGrid","PdfBorders","PdfPen","PdfPaddings","PdfGridLayoutFormat","PdfLayoutType","PdfLayoutBreakType","PdfStandardFont","PdfFontFamily","PdfFontStyle","PdfBitmap","PdfStringFormat","PdfTextAlignment","PdfColor","PdfSolidBrush","PdfTextWebLink","PdfVerticalAlignment","RectangleF","PdfPageTemplateElement","PointF","PdfPageNumberField","PdfCompositeField","PdfPageCountField","SizeF","PdfPageSettings","PdfPageOrientation","PdfTrueTypeFont","ExportHelper","ExportValueFormatter","Data","SummaryModelGenerator","GroupSummaryModelGenerator","CaptionSummaryModelGenerator","compile","getEnumValue","isNullOrUndefined","detach","extend","CellType","DataManager","Query","getValue","getUid","getPrintGridModel","measureColumnDepth","isExportColumns","updateColumnTypeForExportColumns","prepareColumns","PdfExport","parent","hideColumnInclude","currentViewData","customDataSource","isGrouping","headerOnPages","drawPosition","xPosition","yPosition","helper","gridPool","prototype","getModuleName","init","exportValueFormatter","locale","pdfDocument","undefined","isExporting","id","pdfPageSettings","exportWithData","pdfDoc","resolve","returnType","pdfExportProperties","isMultipleExport","reject","_this","processExport","then","trigger","pdfExportComplete","isBlob","promise","blobPromise","gridInstance","log","catch","e","actionFailure","Map","data","query","childGrid","detailTemplate","hierarchyExportMode","expandedRows","args","requestType","cancel","headerPageNumbers","gridDrawPosition","generateQuery","gridObject","can","header","drawPos","beforePdfExport","Promise","getQuery","dataSource","isCountRequired","aggregates","executeQuery","exportType","groupSettings","enableLazyLoading","columns","length","getDataModule","isRemote","getCurrentViewRecords","allPromise_1","query_1","lazyLoad","push","getData","getColumnData","all","results","multipleExport","type","gObj","section","sections","add","pdfGrid","processSectionExportProperties","pdfPage","page","pages","processGridExport","globalResolve","checkAndExport","bounds","y","height","blankSpace","result","layoutFormat","layout","Paginate","break","FitPage","paginateBounds","getClientSize","width","draw","drawHeader","fileName","save","destroy","document","pageOrientation","pageSize","orientation","Landscape","Portrait","size","getPageSize","setPageSettings","allowHorizontalOverflow","gridTheme","theme","getForeignKeyData","processExportProperties","enableColumnVirtualization","getGridExportColumns","filter","commands","hierarchyPrintMode","headerThemeStyle","getHeaderThemeStyle","border","headerFont","font","headerBrush","brush","returnValue","getHeaders","gridColumns","processGridHeaders","rows","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","summaryModel","sRows","column","getColumns","col","aggregateModule","prepareSummaryInfo","generateRows","records","processAggregates","row","addRow","style","setBorder","caption","fontSize","fontFamily","fontName","getFontFamily","Helvetica","fontStyle","getFontStyle","pdfColor","fontColor","penBrushColor","hexToRgb","r","g","b","borderCaption","getBorderStyle","getGridPdfFont","isTrueType","headerSize","headerStyle","fontFamily_1","captionFont","captionSize","captionStyle","fontFamily_2","record","recordFont","recordSize","recordStyle","fontFamily_3","level","index","groupIndex","_loop_1","dataSourceItems","getColumnByField","field","value","key","isForeignKey","isForeignColumn","headerText","enableGroupByFormat","this_1","formatCellValue","count","cArgs","captionText","exportGroupCaption","cells","getCell","stringFormat","Left","setFont","setTextBrush","setBackgroundBrush","processCellStyle","captionSummaryModel","items","columnSpan","childLevels","rowIndex","groupSummaryModel","isGroupedFooter","_i","dataSource_1","gridColumn","grid","eCols","columnCount","depth","cols","rowNumber","i","parseInt","toString","cellPadding","headers","applyTextAndSpan","rowIdx","colIdx","rowSpan","colSpan","gridHeader","getHeader","pdfCell","cell","headerTextAlign","getHorizontalAlignment","getVerticalAlignment","textAlign","cellType","HeaderIndent","DetailHeader","gridCell","pdfHeaderQueryCellInfo","evtArgs","setCellBorder","borders","setCellFont","setHeaderBrush","textBrush","verticalAlignment","image","base64","hyperLink","setHyperLink","recuHeader","spanCnt","colIndex","isRoot","cidx","visible","newSpanCnt","clientSize","footer","position","fromBottom","template","bottom","drawPageTemplate","includeHiddenColumn","fromTop","top","headerTemplate_1","getPageByIndex","graphics","drawPdfTemplate","element","_a","contents","content","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","x1","y1","x2","y2","x","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","format","alignment","setContentFormat","drawString","documentHeader","textBrushColor","brushColor","pageNumber","numberStyle","getPageNumberStyle","pageNumberType","compositeField","total","current","indexOf","pageCount","replace","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","isAggregate","sRows_1","leastCaptionSummaryIndex","isEmpty","aggIdx","gridRow","DetailFooterIntent","isDataCell","templateFn","footerTemplate","groupFooterTemplate","groupCaptionTemplate","getTemplateFunction","templateFunction","txt","columnName","isReact","isVue","isVue3","isAngular","textContent","pdfAggregateQueryCellInfo","getSummaryWithoutTemplate","splice","Summary","CaptionSummary","GroupSummary","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","startIndex","getColumn","getConvertedWidth","setRecordThemeStyle","borderRecord","getGridRowModel","rows_1","cellLength","j","cellValue","valueAccessor","foreignKeyData","getFData","foreignKeyValue","pdfQueryCellInfo","spanCell","isExpand","gridRow_1","startIndexVal","isPrinting","createChildGrid","childGridObj","failureHandler","childExportProperties","exportProperties","exportDetailDataBound","beforeDataBound","childGridCell","appendTo","parentRow","action","exportDetailTemplate","processDetailTemplate","notify","exportRowDataBound","rowObj","templateData","columnHeader","border_1","headerFont_1","headerBrush_1","processRow","isHeader","currentCell","cellStyle","backgroundColor","backColor","textAlignment","pdfTextAlignment","pdfVerticalAlignment","pdfTextPenColor","pdfFontFamily","bold","italic","underline","strikeout","strikeThrough","pdfBorder","paragraphIndent","pdfParagraphIndent","pdfCellPadding","text","textLink","url","target","displayText","textPen","borderWidth","color","borderColor","Right","Center","Justify","verticalAlign","lineAlignment","Bottom","Middle","Top","TimesRoman","Regular","Bold","Italic","Underline","Strikeout","hAlign","vAlign","hex","substring","bigint"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/pdf-export.js"],"sourcesContent":["import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen, PdfPaddings, PdfGridLayoutFormat, PdfLayoutType, PdfLayoutBreakType } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush, PdfTextWebLink } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { PdfTrueTypeFont } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined, detach, extend } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\nimport { getUid, getPrintGridModel, measureColumnDepth, isExportColumns, updateColumnTypeForExportColumns, prepareColumns } from '../base/util';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n *\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.headerOnPages = [];\n        this.drawPosition = { xPosition: 0, yPosition: 0 };\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.gridPool = {};\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        this.isGrouping = false;\n        this.isExporting = true;\n        parent.id = getUid('main-grid');\n        this.gridPool[parent.id] = false;\n        this.pdfPageSettings = new PdfPageSettings();\n    };\n    PdfExport.prototype.exportWithData = function (parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject) {\n        var _this = this;\n        this.init(parent);\n        if (!isNullOrUndefined(pdfDoc)) {\n            this.pdfDocument = pdfDoc;\n        }\n        else {\n            this.pdfDocument = new PdfDocument();\n        }\n        this.processExport(parent, returnType, pdfExportProperties, isMultipleExport).then(function () {\n            _this.isExporting = false;\n            parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : { gridInstance: _this.parent });\n            _this.parent.log('exporting_complete', _this.getModuleName());\n            resolve(_this.pdfDocument);\n        }).catch(function (e) {\n            reject(_this.pdfDocument);\n            _this.parent.trigger(events.actionFailure, e);\n        });\n    };\n    /**\n     * Used to map the input data\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {PdfExportProperties} pdfExportProperties - specifies the PdfExportProperties\n     * @param {boolean} isMultipleExport - specifies the isMultipleExport\n     * @param {Object} pdfDoc - specifies the pdfDoc\n     * @param {boolean} isBlob - speciies whether it is Blob or not\n     * @returns {void}\n     */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        this.gridPool = {};\n        var query = pdfExportProperties && pdfExportProperties.query ? pdfExportProperties.query : new Query();\n        if ((parent.childGrid || parent.detailTemplate) && !(!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.hierarchyExportMode === 'None')) {\n            parent.expandedRows = getPrintGridModel(parent).expandedRows;\n        }\n        var args = {\n            requestType: 'beforePdfExport', cancel: false,\n            headerPageNumbers: [], gridDrawPosition: { xPosition: 0, yPosition: 0 }, generateQuery: false\n        };\n        var gridObject = 'gridObject';\n        args[\"\" + gridObject] = parent;\n        var can = 'cancel';\n        var generateQuery = 'generateQuery';\n        var header = 'headerPageNumbers';\n        var drawPos = 'gridDrawPosition';\n        parent.trigger(events.beforePdfExport, args);\n        if (args[\"\" + can] === true) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        if (isExportColumns(pdfExportProperties)) {\n            updateColumnTypeForExportColumns(pdfExportProperties, parent);\n        }\n        if (args[\"\" + generateQuery]) {\n            query = ExportHelper.getQuery(parent, this.data);\n        }\n        this.headerOnPages = args[\"\" + header];\n        this.drawPosition = args[\"\" + drawPos];\n        this.parent.log('exporting_begin', this.getModuleName());\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource)) {\n            pdfExportProperties.dataSource = pdfExportProperties.dataSource instanceof DataManager ?\n                pdfExportProperties.dataSource : new DataManager(pdfExportProperties.dataSource);\n            if (isNullOrUndefined(query.isCountRequired) || parent.aggregates) {\n                query.isCountRequired = true;\n            }\n            return new Promise(function (resolve, reject) {\n                pdfExportProperties.dataSource.executeQuery(query).then(function (returnType) {\n                    _this.exportWithData(parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject);\n                });\n            });\n        }\n        else if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType === 'CurrentPage' &&\n            !(this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length\n                && !this.parent.getDataModule().isRemote())) {\n            return new Promise(function (resolve, reject) {\n                _this.exportWithData(parent, pdfDoc, resolve, _this.parent.getCurrentViewRecords(), pdfExportProperties, isMultipleExport, reject);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            var query_1 = ExportHelper.getQuery(parent, this.data);\n            if (this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length\n                && !this.parent.getDataModule().isRemote()) {\n                if (isNullOrUndefined(pdfExportProperties)) {\n                    pdfExportProperties = { hierarchyExportMode: 'All' };\n                }\n                pdfExportProperties.hierarchyExportMode = pdfExportProperties.hierarchyExportMode === 'None' ? 'None' : 'All';\n                if (pdfExportProperties.hierarchyExportMode === 'All') {\n                    query_1.lazyLoad = [];\n                }\n            }\n            allPromise_1.push(this.data.getData({}, query_1));\n            allPromise_1.push(this.helper.getColumnData(parent));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc['document'];\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport, pdfDoc).then(function (results) {\n                        _this.isExporting = false;\n                        parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise }\n                            : { gridInstance: _this.parent });\n                        _this.parent.log('exporting_complete', _this.getModuleName());\n                        if (pdfExportProperties && pdfExportProperties.multipleExport && pdfExportProperties.multipleExport.type === 'AppendToPage') {\n                            resolve(results);\n                        }\n                        else {\n                            resolve(_this.pdfDocument);\n                        }\n                    }).catch(function (e) {\n                        reject(_this.pdfDocument);\n                        _this.parent.trigger(events.actionFailure, e);\n                    });\n                });\n            });\n        }\n    };\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport, pdfDoc) {\n        var _this = this;\n        var section = !(pdfDoc && pdfExportProperties && pdfExportProperties.multipleExport &&\n            pdfExportProperties.multipleExport.type === 'AppendToPage') ? this.pdfDocument.sections.add() : null;\n        var pdfGrid;\n        this.processSectionExportProperties(section, pdfExportProperties);\n        var pdfPage = pdfDoc && pdfExportProperties && pdfExportProperties.multipleExport &&\n            pdfExportProperties.multipleExport.type === 'AppendToPage' ? pdfDoc['result'].page : section.pages.add();\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        return new Promise(function (resolve, reject) {\n            pdfGrid = _this.processGridExport(gObj, returnType, pdfExportProperties);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            // draw the grid\n            var xPosition = _this.drawPosition['xPosition'];\n            var yPosition;\n            if (pdfDoc && pdfExportProperties && pdfExportProperties.multipleExport && pdfExportProperties.multipleExport.type === 'AppendToPage') {\n                yPosition = pdfDoc['result'].bounds.y + pdfDoc['result'].bounds.height;\n                if (pdfExportProperties.multipleExport.blankSpace) {\n                    yPosition = pdfDoc['result'].bounds.y + pdfDoc['result'].bounds.height + pdfExportProperties.multipleExport.blankSpace;\n                }\n            }\n            else {\n                yPosition = _this.drawPosition['yPosition'];\n            }\n            var result;\n            if (isMultipleExport) {\n                var layoutFormat = new PdfGridLayoutFormat();\n                layoutFormat.layout = PdfLayoutType.Paginate;\n                layoutFormat.break = PdfLayoutBreakType.FitPage;\n                //Set pagination bounds of PDF grid\n                layoutFormat.paginateBounds = new RectangleF(0, 0, pdfPage.getClientSize().width, pdfPage.getClientSize().height);\n                result = pdfGrid.draw(pdfPage, xPosition, yPosition, layoutFormat);\n            }\n            else {\n                result = pdfGrid.draw(pdfPage, xPosition, yPosition);\n            }\n            _this.drawHeader(pdfExportProperties);\n            if (!isMultipleExport) {\n                // save the PDF\n                if (!_this.isBlob) {\n                    if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                        _this.pdfDocument.save(pdfExportProperties.fileName);\n                    }\n                    else {\n                        _this.pdfDocument.save('Export.pdf');\n                    }\n                }\n                else {\n                    _this.blobPromise = _this.pdfDocument.save();\n                }\n                _this.pdfDocument.destroy();\n                delete gObj.expandedRows;\n            }\n            if (pdfExportProperties && pdfExportProperties.multipleExport && pdfExportProperties.multipleExport.type === 'AppendToPage') {\n                return { document: _this.pdfDocument, result: result };\n            }\n            else {\n                return _this.pdfDocument;\n            }\n        });\n    };\n    PdfExport.prototype.processSectionExportProperties = function (section, pdfExportProperties) {\n        if (!isNullOrUndefined(section) && !isNullOrUndefined(pdfExportProperties)\n            && (!isNullOrUndefined(pdfExportProperties.pageOrientation) || !isNullOrUndefined(pdfExportProperties.pageSize))) {\n            this.pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ?\n                PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n            this.pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n            section.setPageSettings(this.pdfPageSettings);\n        }\n        return section;\n    };\n    PdfExport.prototype.processGridExport = function (gObj, returnType, pdfExportProperties) {\n        var allowHorizontalOverflow = true;\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n            allowHorizontalOverflow = isNullOrUndefined(pdfExportProperties.allowHorizontalOverflow) ?\n                true : pdfExportProperties.allowHorizontalOverflow;\n        }\n        var helper = new ExportHelper(gObj, this.helper.getForeignKeyData());\n        var dataSource = this.processExportProperties(pdfExportProperties, returnType.result);\n        var columns = isExportColumns(pdfExportProperties) ?\n            prepareColumns(pdfExportProperties.columns, gObj.enableColumnVirtualization) :\n            helper.getGridExportColumns(gObj.columns);\n        columns = columns.filter(function (columns) { return isNullOrUndefined(columns.commands); });\n        var isGrouping = false;\n        if (gObj.groupSettings.columns.length) {\n            isGrouping = true;\n        }\n        if ((gObj.childGrid || gObj.detailTemplate) && !isNullOrUndefined(pdfExportProperties)) {\n            gObj.hierarchyPrintMode = pdfExportProperties.hierarchyExportMode || 'Expanded';\n        }\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        var returnValue = helper.getHeaders(columns, this.hideColumnInclude);\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(gObj.groupSettings.columns.length, pdfGrid, returnValue.rows, gridColumns, border, headerFont, headerBrush, gObj, allowHorizontalOverflow, columns);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow);\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length) {\n            if (isGrouping) {\n                if (!isNullOrUndefined(captionThemeStyle.border)) {\n                    border = captionThemeStyle.border;\n                }\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.\n                    brush, captionThemeStyle.backgroundBrush, returnType, pdfExportProperties, helper, 0);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid, 0, pdfExportProperties, helper, 0);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                var column = summaryModel.getColumns();\n                column = column.filter(function (col) { return isNullOrUndefined(col.commands) && col.type !== 'checkbox'; });\n                if (gObj.aggregates.length && this.parent !== gObj) {\n                    gObj.aggregateModule.prepareSummaryInfo();\n                }\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates, null, null, column);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates, null, null, column);\n                }\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false, null, null, null, isGrouping ? false : true);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption)) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var fontFamily = !isNullOrUndefined(this.gridTheme.caption.fontName) ?\n                this.getFontFamily(this.gridTheme.caption.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.caption);\n            var pdfColor = new PdfColor(0, 0, 0);\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var borderCaption = this.gridTheme.caption.border ? this.getBorderStyle(this.gridTheme.caption.border) : null;\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.caption.font)) {\n                font = this.gridTheme.caption.font;\n            }\n            return { font: font, brush: new PdfSolidBrush(pdfColor), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)),\n                border: borderCaption };\n        }\n        else {\n            //Material theme\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)),\n                backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    PdfExport.prototype.getGridPdfFont = function (args) {\n        var fontFamily = 'fontFamily';\n        var fontSize = 'fontSize';\n        var fontStyle = 'fontStyle';\n        var isTrueType = 'isTrueType';\n        var style = 0;\n        if (args.header && args.header.font) {\n            var headerFont = args.header.font[\"\" + fontFamily];\n            var headerSize = args.header.font[\"\" + fontSize];\n            var headerStyle = args.header.font[\"\" + fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[\"\" + headerStyle]) ? 0 : PdfFontStyle[\"\" + headerStyle]);\n            if (args.header.font[\"\" + isTrueType]) {\n                args.header.font = new PdfTrueTypeFont(headerFont, headerSize, style);\n            }\n            else {\n                var fontFamily_1 = !isNullOrUndefined(headerFont) ?\n                    this.getFontFamily(headerFont) : PdfFontFamily.Helvetica;\n                args.header.font = new PdfStandardFont(fontFamily_1, headerSize, style);\n            }\n        }\n        if (args.caption && args.caption.font) {\n            var captionFont = args.caption.font[\"\" + fontFamily];\n            var captionSize = args.caption.font[\"\" + fontSize];\n            var captionStyle = args.caption.font[\"\" + fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[\"\" + captionStyle]) ? 0 : PdfFontStyle[\"\" + captionStyle]);\n            if (args.caption.font[\"\" + isTrueType]) {\n                args.caption.font = new PdfTrueTypeFont(captionFont, captionSize, style);\n            }\n            else {\n                var fontFamily_2 = !isNullOrUndefined(captionFont) ?\n                    this.getFontFamily(captionFont) : PdfFontFamily.Helvetica;\n                args.caption.font = new PdfStandardFont(fontFamily_2, captionSize, style);\n            }\n        }\n        if (args.record && args.record.font) {\n            var recordFont = args.record.font[\"\" + fontFamily];\n            var recordSize = args.record.font[\"\" + fontSize];\n            var recordStyle = args.record.font[\"\" + fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[\"\" + recordStyle]) ? 0 : PdfFontStyle[\"\" + recordStyle]);\n            if (args.record.font[\"\" + isTrueType]) {\n                args.record.font = new PdfTrueTypeFont(recordFont, recordSize, style);\n            }\n            else {\n                var fontFamily_3 = !isNullOrUndefined(recordFont) ?\n                    this.getFontFamily(recordFont) : PdfFontFamily.Helvetica;\n                args.record.font = new PdfStandardFont(fontFamily_3, recordSize, style);\n            }\n        }\n    };\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.header.fontName) ?\n                this.getFontFamily(this.gridTheme.header.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.header);\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.header.font)) {\n                font = this.gridTheme.header.font;\n            }\n            return { border: this.getBorderStyle(this.gridTheme.header.border), font: font, brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5),\n                brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index) {\n        var _this = this;\n        var groupIndex = level;\n        var _loop_1 = function (dataSourceItems) {\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn()\n            };\n            var value = gObj.getColumnByField(dataSourceItems.field).headerText + ': ' + (!col.enableGroupByFormat ? this_1.exportValueFormatter.formatCellValue(args) : dataSourceItems.key) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            var cArgs = { captionText: value, type: 'PDF', data: dataSourceItems, style: undefined };\n            this_1.parent.trigger(events.exportGroupCaption, cArgs, function (cArgs) {\n                row.cells.getCell(groupIndex).value = cArgs.captionText;\n                row.cells.getCell(groupIndex).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n                row.style.setBorder(border);\n                row.style.setFont(font);\n                row.style.setTextBrush(brush);\n                row.style.setBackgroundBrush(backgroundBrush);\n                if (!isNullOrUndefined(cArgs.style)) {\n                    _this.processCellStyle(row.cells.getCell(groupIndex), cArgs);\n                }\n                var sRows;\n                var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n                if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                }\n                else {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                }\n                if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                }\n                if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex, null, null, gObj);\n                    _this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index);\n                    index = _this.rowIndex;\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n                }\n                else {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex, null, null, gObj);\n                    index = _this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1), pdfExportProperties, helper, index);\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                    var isGroupedFooter = true;\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false, null, null, isGroupedFooter, null, gObj);\n                }\n            });\n        };\n        var this_1 = this;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            _loop_1(dataSourceItems);\n        }\n    };\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumn, border, headerFont, headerBrush, grid, allowHorizontalOverflow, eCols) {\n        var _this = this;\n        var columnCount = gridColumn.length + childLevels;\n        var depth = measureColumnDepth(eCols);\n        var cols = eCols;\n        var index = 0;\n        var rowNumber = [];\n        for (var i = 0; i < rows.length; i++) {\n            rowNumber[parseInt(i.toString(), 10)] = 0;\n        }\n        if (grid.groupSettings.columns.length) {\n            index = grid.groupSettings.columns.length - 1;\n            columnCount = columnCount - 1;\n        }\n        pdfGrid.columns.add(columnCount);\n        pdfGrid.style.cellPadding = new PdfPaddings(5.76, 5.76, 0.5, 0.5);\n        pdfGrid.headers.add(rows.length);\n        var applyTextAndSpan = function (rowIdx, colIdx, col, rowSpan, colSpan) {\n            var gridHeader = pdfGrid.headers.getHeader(rowIdx);\n            var pdfCell = gridHeader.cells.getCell(colIdx);\n            var cell = rows[parseInt(rowIdx.toString(), 10)].cells[grid.groupSettings.columns.length ?\n                colIdx : rowNumber[parseInt(rowIdx.toString(), 10)]];\n            rowNumber[parseInt(rowIdx.toString(), 10)] = rowNumber[parseInt(rowIdx.toString(), 10)] + 1;\n            if (!isNullOrUndefined(col.headerTextAlign)) {\n                pdfCell.style.stringFormat = _this.getHorizontalAlignment(col.headerTextAlign);\n            }\n            if (rowSpan > 0) {\n                pdfCell.rowSpan = rowSpan;\n                pdfCell.style.stringFormat = _this.getVerticalAlignment('Bottom', pdfCell.style.stringFormat, col.textAlign);\n            }\n            if (colSpan > 0) {\n                pdfCell.columnSpan = colSpan;\n            }\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            pdfCell.value = col.headerText;\n            if (!isNullOrUndefined(cell) && (cell.cellType === CellType.HeaderIndent || cell.cellType === CellType.DetailHeader)) {\n                pdfCell.value = '';\n                pdfCell.width = 20;\n            }\n            var args = {\n                cell: pdfCell,\n                gridCell: cell,\n                style: pdfCell.style\n            };\n            _this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n            var evtArgs = args;\n            var setCellBorder = args.style.borders;\n            var setCellFont = args.style.font;\n            var setHeaderBrush = args.style.textBrush;\n            if (!isNullOrUndefined(setCellBorder)) {\n                gridHeader.style.setBorder(setCellBorder);\n            }\n            if (!isNullOrUndefined(setCellFont)) {\n                gridHeader.style.setFont(setCellFont);\n            }\n            if (!isNullOrUndefined(setHeaderBrush)) {\n                gridHeader.style.setTextBrush(setHeaderBrush);\n            }\n            if (!isNullOrUndefined(evtArgs.style.verticalAlignment)) {\n                pdfCell.style.stringFormat = _this.getVerticalAlignment(evtArgs.style.verticalAlignment, pdfCell.style.stringFormat);\n            }\n            if (!isNullOrUndefined(evtArgs.image)) {\n                pdfCell.value = new PdfBitmap(evtArgs.image.base64);\n            }\n            if (!isNullOrUndefined(evtArgs.hyperLink)) {\n                pdfCell.value = _this.setHyperLink(evtArgs);\n            }\n        };\n        var recuHeader = function (cols, depth, spanCnt, colIndex, rowIndex, isRoot) {\n            var cidx = 0;\n            for (var i = 0; i < cols.length; i++) {\n                if (isRoot) {\n                    cidx = cidx + spanCnt + (i === 0 ? 0 : -1);\n                    colIndex = cidx;\n                    spanCnt = 0;\n                }\n                if (!isRoot && !cols[parseInt(i.toString(), 10)].visible) {\n                    colIndex = colIndex - 1;\n                }\n                if (cols[parseInt(i.toString(), 10)].columns && cols[parseInt(i.toString(), 10)].columns.length) {\n                    var newSpanCnt = recuHeader(cols[parseInt(i.toString(), 10)]\n                        .columns, depth - 1, 0, i + colIndex, rowIndex + 1, false);\n                    applyTextAndSpan(rowIndex, i + colIndex + index, cols[parseInt(i.toString(), 10)], 0, newSpanCnt);\n                    spanCnt = spanCnt + newSpanCnt;\n                    colIndex = colIndex + newSpanCnt - 1;\n                }\n                else if (cols[parseInt(i.toString(), 10)].visible || _this.hideColumnInclude) {\n                    spanCnt++;\n                    applyTextAndSpan(rowIndex, i + colIndex + index, cols[parseInt(i.toString(), 10)], depth, 0);\n                }\n            }\n            return spanCnt;\n        };\n        recuHeader(cols, depth, 0, 0, 0, true);\n        if (pdfGrid.columns.count >= 6 && allowHorizontalOverflow) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            var clientSize = this.pdfPageSettings.size;\n            this.drawHeader(pdfExportProperties);\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.groupSettings && this.parent.groupSettings.enableLazyLoading\n                        && this.parent.groupSettings.columns.length && !this.parent.getDataModule().isRemote() ? dataSource\n                        : this.parent.currentViewData;\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return dataSource;\n    };\n    PdfExport.prototype.drawHeader = function (pdfExportProperties) {\n        var _this = this;\n        var clientSize = this.pdfPageSettings.size;\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.header)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var header = pdfExportProperties.header;\n            var position = new PointF(0, header.fromTop);\n            var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n            var bounds = new RectangleF(position, size);\n            if (!this.headerOnPages.length) {\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            else {\n                var headerTemplate_1 = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n                this.headerOnPages.filter(function (index) {\n                    if (index - 1 >= 0 && index - 1 <= _this.pdfDocument.pages.count - 1) {\n                        _this.pdfDocument.pages.getPageByIndex(index - 1).graphics\n                            .drawPdfTemplate(headerTemplate_1.template, new PointF(0, 0));\n                    }\n                });\n            }\n        }\n    };\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format = new PdfStringFormat();\n        if (!isNullOrUndefined(content.style.stringFormat)) {\n            format.alignment = content.style.stringFormat.alignment;\n        }\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            var total = '$total';\n            var current = '$current';\n            if (content.format.indexOf(total) !== -1 && content.format.indexOf(current) !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                pageCount.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n                if (content.format.indexOf(total) > content.format.indexOf(current)) {\n                    format = content.format.replace(current, '0');\n                    format = format.replace(total, '1');\n                }\n                else {\n                    format = content.format.replace(current, '1');\n                    format = format.replace(total, '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf(current) !== -1 && content.format.indexOf(total) === -1) {\n                format = content.format.replace(current, '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace(total, '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex, isGroupedFooter, isAggregate, gObj) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var value = [];\n            var aggIdx = isAggregate ? 0 : 1;\n            var gridRow = void 0;\n            if (isNullOrUndefined(captionRow)) {\n                gridRow = pdfGrid.rows.addRow();\n                gridRow.style.setBorder(border);\n                gridRow.style.setFont(font);\n                gridRow.style.setTextBrush(brush);\n                gridRow.style.setBackgroundBrush(backgroundBrush);\n            }\n            for (var i = 0; i < pdfGrid.columns.count + aggIdx; i++) {\n                var cell = row.cells[parseInt(index.toString(), 10)];\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    i--;\n                    index++;\n                    continue;\n                }\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (cell.cellType === CellType.DetailFooterIntent) {\n                            continue;\n                        }\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                if (!isCaption) {\n                                    i += 1;\n                                }\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[parseInt(index.toString(), 10)];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[parseInt(index.toString(), 10)];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    var footerTemplate = !isNullOrUndefined(cell.column.footerTemplate);\n                    var groupFooterTemplate = !isNullOrUndefined(cell.column.groupFooterTemplate);\n                    var groupCaptionTemplate = !isNullOrUndefined(cell.column.groupCaptionTemplate);\n                    if (footerTemplate || groupCaptionTemplate || groupFooterTemplate) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        var txt = void 0;\n                        var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n                        if ((this.parent.isReact || this.parent.isVue || this.parent.isVue3 || this.parent.isAngular) &&\n                            !(typeof cell.column.footerTemplate === 'string' || typeof cell.column.groupFooterTemplate === 'string' || typeof cell.column.groupCaptionTemplate === 'string')) {\n                            txt = data[(cell.column.type)];\n                            txt = !isNullOrUndefined(txt) ? txt : '';\n                        }\n                        else {\n                            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent));\n                            txt = this.parent.isVue3 && !isNullOrUndefined(txt[1]) ? txt[1].textContent\n                                : !isNullOrUndefined(txt[0]) ? txt[0].textContent : '';\n                        }\n                        isEmpty = false;\n                        var args = {\n                            row: row,\n                            type: footerTemplate ? 'Footer' : groupFooterTemplate ? 'GroupFooter' : 'GroupCaption',\n                            style: isNullOrUndefined(captionRow) ? gridRow.cells : captionRow.cells,\n                            cell: cell,\n                            value: txt\n                        };\n                        this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                        value.push(args.value);\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[parseInt(i.toString(), 10)] !== '' && !isNullOrUndefined(value[parseInt(i.toString(), 10)]) && value[parseInt(i.toString(), 10)] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (!isAggregate) {\n                if (!isCaption) {\n                    value.splice(0, 1);\n                }\n                else {\n                    for (var i = gObj.groupSettings.columns.length; i < value.length - 1; i++) {\n                        value[parseInt(i.toString(), 10)] = value[i + 1];\n                        value[i + 1] = value[i + 2] ? value[i + 2] : '';\n                    }\n                }\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[parseInt(i.toString(), 10)].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[parseInt(i.toString(), 10)].toString();\n                        if (i === groupIndex && leastCaptionSummaryIndex !== -1 && leastCaptionSummaryIndex !== 1) {\n                            captionRow.cells.getCell(i).columnSpan = (leastCaptionSummaryIndex - 1) - groupIndex;\n                        }\n                        else if (i === groupIndex && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - groupIndex;\n                        }\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, cell) {\n        if (!isNullOrUndefined(cell.column.footerTemplate) && cell.cellType === CellType.Summary) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(cell.column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(cell.column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(cell.column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    /**\n     * Set alignment, width and type of the values of the column\n     *\n     * @param {Column[]} gridColumns - specifies the grid column\n     * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n     * @param {ExportHelper} helper - specifies the helper\n     * @param {IGrid} gObj - specifies the IGrid\n     * @param {boolean} allowHorizontalOverflow - specifies the allowHorizontalOverflow\n     * @returns {void}\n     */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow) {\n        var startIndex = gObj.groupSettings.columns.length ? gObj.groupSettings.columns.length - 1 : 0;\n        for (var i = 0; i < startIndex; i++) {\n            pdfGrid.columns.getColumn(i).width = 20;\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[parseInt(i.toString(), 10)].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this\n                    .getHorizontalAlignment(gridColumns[parseInt(i.toString(), 10)].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[parseInt(i.toString(), 10)].width)\n                && allowHorizontalOverflow) {\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[parseInt(i.toString(), 10)].width === 'number' ?\n                    gridColumns[parseInt(i.toString(), 10)].width * 0.75 :\n                    helper.getConvertedWidth(gridColumns[parseInt(i.toString(), 10)].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     *\n     * @param {PdfGridRow} row - specifies the PdfGridRow\n     * @param {PdfBorders} border - specifies the PdfBorders\n     * @returns {PdfGrid} returns the pdfgrid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.record.fontName) ?\n                this.getFontFamily(this.gridTheme.record.fontName) : PdfFontFamily.Helvetica;\n            var fontSize = !isNullOrUndefined(this.gridTheme.record.fontSize) ? this.gridTheme.record.fontSize : 9.75;\n            var fontStyle = this.getFontStyle(this.gridTheme.record);\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.record.font)) {\n                font = this.gridTheme.record.font;\n            }\n            row.style.setFont(font);\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        var borderRecord = this.gridTheme && this.gridTheme.record &&\n            this.gridTheme.record.border ? this.getBorderStyle(this.gridTheme.record.border) : border;\n        row.style.setBorder(borderRecord);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     *\n     * @param {PdfBorders} border - specifies the border\n     * @param {Column[]} columns - specifies the columns\n     * @param {IGrid} gObj - specifies the IGrid\n     * @param {Object[]} dataSource - specifies the datasource\n     * @param {PdfGrid} pdfGrid - specifies the pdfGrid\n     * @param {number} startIndex - specifies the startindex\n     * @param {PdfExportProperties} pdfExportProperties - specifies the pdfExportProperties\n     * @param {ExportHelper} helper - specifies the helper\n     * @param {number} rowIndex - specifies the rowIndex\n     * @returns {number} returns the number of records\n     * @private\n     */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, startIndex, pdfExportProperties, helper, rowIndex) {\n        var rows = helper.getGridRowModel(columns, dataSource, gObj, rowIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            rowIndex++;\n            this.rowIndex = rowIndex;\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            var cellLength = row.cells.length;\n            for (var j = 0; j < cellLength; j++) {\n                var gridCell = row.cells[parseInt(j.toString(), 10)];\n                if (gridCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gridCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = row.data;\n                var cell = gridRow.cells.getCell(j);\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1,\n                    cell: cell\n                };\n                args.value = args.column.type === 'boolean' && typeof args.value === 'string' ? args.value :\n                    this.exportValueFormatter.formatCellValue(args);\n                this.parent.trigger(events.pdfQueryCellInfo, args);\n                if (!isNullOrUndefined(args.image)) {\n                    args.value = new PdfBitmap(args.image.base64);\n                    args.value.height = args.image.height || args.value.height;\n                    args.value.width = args.image.width || args.value.width;\n                }\n                cell.value = args.value;\n                if (!isNullOrUndefined(args.hyperLink)) {\n                    cell.value = this.setHyperLink(args);\n                }\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n            if (row.isExpand) {\n                var gridRow_1 = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n                var startIndexVal = (this.parent.childGrid || this.parent.detailTemplate) ? 0 : startIndex;\n                var cell = gridRow_1.cells.getCell(startIndexVal);\n                cell.columnSpan = gridRow_1.cells.count - (startIndexVal);\n                cell.style.cellPadding = new PdfPaddings(10, 10, 10, 10);\n                if (this.parent.childGrid) {\n                    gObj.isPrinting = true;\n                    var exportType = (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType) ?\n                        pdfExportProperties.exportType : 'AllPages';\n                    var returnValue = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                    var childGridObj = returnValue.childGrid;\n                    var element = returnValue.element;\n                    childGridObj.actionFailure =\n                        helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                    var childExportProperties = extend(pdfExportProperties, {\n                        columns: null,\n                        dataSource: null,\n                        query: null\n                    });\n                    var args = {\n                        childGrid: childGridObj, row: row, cell: cell, exportProperties: childExportProperties\n                    };\n                    this.parent.trigger(events.exportDetailDataBound, args);\n                    childGridObj.beforeDataBound = this.childGridCell(cell, childGridObj, childExportProperties);\n                    childGridObj.appendTo(element);\n                }\n                else if (this.parent.detailTemplate) {\n                    var args = { parentRow: row, row: gridRow_1, value: {}, action: 'pdfexport', gridInstance: gObj };\n                    this.parent.trigger(events.exportDetailTemplate, args);\n                    cell.value = this.processDetailTemplate(args);\n                }\n            }\n            this.parent.notify(events.exportRowDataBound, { type: 'pdf', rowObj: row });\n        }\n        return rowIndex;\n    };\n    PdfExport.prototype.processDetailTemplate = function (templateData) {\n        var _this = this;\n        if (templateData.value.columnHeader || templateData.value.rows) {\n            // create a grid\n            var pdfGrid = new PdfGrid();\n            // get header theme style\n            var headerThemeStyle = this.getHeaderThemeStyle();\n            var border_1 = headerThemeStyle.border;\n            var headerFont_1 = headerThemeStyle.font;\n            var headerBrush_1 = headerThemeStyle.brush;\n            var processRow = function (row, gridRow, isHeader) {\n                if (isHeader) {\n                    gridRow.style.setBorder(border_1);\n                    gridRow.style.setFont(headerFont_1);\n                    gridRow.style.setTextBrush(headerBrush_1);\n                }\n                for (var j = 0; j < row.cells.length; j++) {\n                    var currentCell = row.cells[parseInt(j.toString(), 10)];\n                    var pdfCell = gridRow.cells.getCell(currentCell.index ? currentCell.index : j);\n                    if (currentCell.rowSpan > 0) {\n                        pdfCell.rowSpan = currentCell.rowSpan;\n                    }\n                    if (currentCell.colSpan > 0) {\n                        pdfCell.columnSpan = currentCell.colSpan;\n                    }\n                    pdfCell.value = currentCell.value;\n                    if (!isNullOrUndefined(currentCell.image)) {\n                        pdfCell.value = new PdfBitmap(currentCell.image.base64);\n                        pdfCell.value.height = currentCell.image.height;\n                        pdfCell.value.width = currentCell.image.width;\n                    }\n                    if (!isNullOrUndefined(currentCell.hyperLink)) {\n                        pdfCell.value = _this.setHyperLink(currentCell);\n                    }\n                    if (!isNullOrUndefined(currentCell.style)) {\n                        var cellStyle = {\n                            style: {\n                                backgroundColor: currentCell.style.backColor,\n                                textAlignment: currentCell.style.pdfTextAlignment,\n                                verticalAlignment: currentCell.style.pdfVerticalAlignment,\n                                textBrushColor: currentCell.style.fontColor,\n                                textPenColor: currentCell.style.pdfTextPenColor,\n                                fontFamily: currentCell.style.pdfFontFamily,\n                                fontSize: currentCell.style.fontSize,\n                                bold: currentCell.style.bold,\n                                italic: currentCell.style.italic,\n                                underline: currentCell.style.underline,\n                                strikeout: currentCell.style.strikeThrough,\n                                border: currentCell.style.pdfBorder,\n                                paragraphIndent: currentCell.style.pdfParagraphIndent,\n                                cellPadding: currentCell.style.pdfCellPadding\n                            }\n                        };\n                        _this.processCellStyle(pdfCell, cellStyle);\n                    }\n                }\n            };\n            if (templateData.value.columnCount) {\n                pdfGrid.columns.add(templateData.value.columnCount);\n            }\n            else {\n                if (templateData.value.columnHeader && templateData.value.columnHeader.length) {\n                    pdfGrid.columns.add(templateData.value.columnHeader[0].cells.length);\n                }\n                else if (templateData.value.rows && templateData.value.rows.length) {\n                    pdfGrid.columns.add(templateData.value.rows[0].cells.length);\n                }\n            }\n            if (templateData.value.columnHeader) {\n                pdfGrid.headers.add(templateData.value.columnHeader.length);\n                for (var i = 0; i < templateData.value.columnHeader.length; i++) {\n                    var gridHeader = pdfGrid.headers.getHeader(parseInt(i.toString(), 10));\n                    processRow(templateData.value.columnHeader[parseInt(i.toString(), 10)], gridHeader, true);\n                }\n            }\n            if (templateData.value.rows) {\n                for (var _i = 0, _a = templateData.value.rows; _i < _a.length; _i++) {\n                    var row = _a[_i];\n                    // create a new row and set default style properties\n                    var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border_1);\n                    processRow(row, gridRow, false);\n                }\n            }\n            return pdfGrid;\n        }\n        else if (templateData.value.image) {\n            return new PdfBitmap(templateData.value.image.base64);\n        }\n        else if (templateData.value.text) {\n            return templateData.value.text;\n        }\n        else if (templateData.value.hyperLink) {\n            return this.setHyperLink(templateData.value);\n        }\n        return '';\n    };\n    PdfExport.prototype.setHyperLink = function (args) {\n        // create the Text Web Link\n        var textLink = new PdfTextWebLink();\n        // set the hyperlink\n        textLink.url = args.hyperLink.target;\n        // set the link text\n        textLink.text = args.hyperLink.displayText || args.hyperLink.target;\n        // set the font\n        textLink.font = new PdfStandardFont(PdfFontFamily.Helvetica, 9.75);\n        // set the brush and pen for the text color\n        textLink.brush = new PdfSolidBrush(new PdfColor(51, 102, 187));\n        return textLink;\n    };\n    PdfExport.prototype.childGridCell = function (cell, childGridObj, pdfExportProperties) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            cell.value = _this.processGridExport(childGridObj, result, pdfExportProperties);\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return cell;\n        };\n    };\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.cellPadding)) {\n            cell.style.cellPadding = args.style.cellPadding;\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) ||\n            !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     *\n     * @param {string} textAlign - specifies the textAlign\n     * @param {PdfStringFormat} format - specifies the PdfStringFormat\n     * @returns {PdfStringFormat} returns the PdfStringFormat\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     *\n     * @param {string} verticalAlign - specifies the verticalAlign\n     * @param {PdfStringFormat} format - specifies the PdfStringFormat\n     * @param {string} textAlign - specifies the text align\n     * @returns {PdfStringFormat} returns the PdfStringFormat\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    PdfExport.prototype.getFont = function (content) {\n        if (content.font) {\n            return content.font;\n        }\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ?\n            (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.TimesRoman;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            // return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    PdfExport.prototype.getFontStyle = function (theme) {\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(theme) && theme.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(theme) && theme.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(theme) && theme.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(theme) && theme.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return fontStyle;\n    };\n    PdfExport.prototype.getBorderStyle = function (border) {\n        var borders = new PdfBorders();\n        if (!isNullOrUndefined(border)) {\n            var borderWidth = border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? borderWidth * 0.75 : undefined;\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(border.color)) {\n                var borderColor = this.hexToRgb(border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(border.dashStyle);\n            }\n            borders.all = pen;\n        }\n        else {\n            borders.all = new PdfPen(new PdfColor(234, 234, 234));\n        }\n        return borders;\n    };\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}