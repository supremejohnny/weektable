{"ast":null,"code":"import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, matches } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType, ResponsiveDialogAction } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil, addFixedColumnBorder, applyStickyLeftRightPosition } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\nimport * as literals from '../base/string-literals';\nimport { Input } from '@syncfusion/ej2-inputs';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */function () {\n  /**\n   * Constructor for Grid filtering module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {FilterSettings} filterSettings - specifies the filterSettings\n   * @param {ServiceLocator} serviceLocator - specifes the serviceLocator\n   * @hidden\n   */\n  function Filter(parent, filterSettings, serviceLocator) {\n    this.predicate = 'and';\n    this.contentRefresh = true;\n    this.filterByMethod = true;\n    this.refresh = true;\n    this.values = {};\n    this.operators = {};\n    this.cellText = {};\n    this.nextFlMenuOpen = '';\n    this.type = {\n      'Menu': FilterMenuRenderer,\n      'CheckBox': CheckBoxFilter,\n      'Excel': ExcelFilter\n    };\n    /** @hidden */\n    this.filterOperators = {\n      contains: 'contains',\n      endsWith: 'endswith',\n      equal: 'equal',\n      greaterThan: 'greaterthan',\n      greaterThanOrEqual: 'greaterthanorequal',\n      lessThan: 'lessthan',\n      lessThanOrEqual: 'lessthanorequal',\n      notEqual: 'notequal',\n      startsWith: 'startswith',\n      wildCard: 'wildcard',\n      isNull: 'isnull',\n      notNull: 'notnull',\n      like: 'like'\n    };\n    this.fltrDlgDetails = {\n      field: '',\n      isOpen: false\n    };\n    /** @hidden */\n    this.skipNumberInput = ['=', ' ', '!'];\n    this.skipStringInput = ['>', '<', '='];\n    this.actualPredicate = {};\n    /** @hidden */\n    this.inputList = [];\n    this.parent = parent;\n    this.filterSettings = filterSettings;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n    this.setFullScreenDialog();\n  }\n  /**\n   * To render filter bar when filtering enabled.\n   *\n   * @param {NotifyArgs} e - specifies the NotifyArgs\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.render = function (e) {\n    if (DataUtil.getObject('args.isFrozen', e)) {\n      return;\n    }\n    var gObj = this.parent;\n    this.l10n = this.serviceLocator.getService('localization');\n    this.getLocalizedCustomOperators();\n    if (this.parent.filterSettings.type === 'FilterBar') {\n      if (gObj.columns.length) {\n        var fltrElem = this.parent.element.querySelector('.e-filterbar');\n        if (fltrElem) {\n          remove(fltrElem);\n        }\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n        var cellrender = this.serviceLocator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n        this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n        rowRenderer.element = this.parent.createElement('tr', {\n          className: 'e-filterbar',\n          attrs: {\n            role: 'row'\n          }\n        });\n        var row = this.generateRow();\n        row.data = this.values;\n        this.parent.getHeaderContent().querySelector('thead:not(.e-masked-thead)').appendChild(rowRenderer.element);\n        var rowdrag = this.parent.element.querySelector('.e-rowdragheader');\n        this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n        if (this.element.querySelectorAll('.e-leftfreeze').length && (this.element.querySelectorAll('.e-indentcell').length || this.element.querySelectorAll('.e-grouptopleftcell').length)) {\n          var td = this.element.querySelectorAll('.e-indentcell, .e-grouptopleftcell');\n          for (var i = 0; i < td.length; i++) {\n            td[parseInt(i.toString(), 10)].classList.add('e-leftfreeze');\n            applyStickyLeftRightPosition(td[parseInt(i.toString(), 10)], i * 30, this.parent.enableRtl, 'Left');\n          }\n        }\n        addFixedColumnBorder(this.element);\n        var detail = this.element.querySelector('.e-detailheadercell');\n        if (detail) {\n          detail.className = 'e-filterbarcell e-mastercell';\n        }\n        if (rowdrag) {\n          if (rowdrag.classList.contains('e-leftfreeze')) {\n            rowdrag.className = 'e-dragheadercell e-mastercell e-leftfreeze';\n          } else {\n            rowdrag.className = 'e-filterbarcell e-mastercell';\n          }\n        }\n        var gCells = [].slice.call(this.element.getElementsByClassName('e-grouptopleftcell'));\n        if (gCells.length) {\n          gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n        }\n        this.wireEvents();\n        this.parent.notify(events.freezeRender, {\n          case: 'filter'\n        });\n      }\n    }\n  };\n  /**\n   * To show the responsive custom filter dialog\n   *\n   * @param {boolean} enable - specifes dialog open\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.showCustomFilter = function (enable) {\n    this.responsiveDialogRenderer.isCustomDialog = enable;\n    this.responsiveDialogRenderer.showResponsiveDialog(this.column);\n  };\n  Filter.prototype.renderResponsiveChangeAction = function (args) {\n    this.responsiveDialogRenderer.action = args.action;\n  };\n  /**\n   * To create the filter module.\n   *\n   * @param {Column} col - specifies the filtering column name\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.setFilterModel = function (col) {\n    var type = col.filter.type || this.parent.filterSettings.type;\n    this.filterModule = new this.type[\"\" + type](this.parent, this.parent.filterSettings, this.serviceLocator, this.customOperators, this);\n  };\n  /**\n   * To destroy the filter bar.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n    if (this.filterModule) {\n      this.filterModule.destroy();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.parent.refreshing && (this.parent.isDestroyed || !this.parent.allowFiltering)) {\n      this.filterSettings.columns = [];\n    }\n    this.updateFilterMsg();\n    this.removeEventListener();\n    this.unWireEvents();\n    if (this.filterSettings.type === 'FilterBar' && !this.parent.isDestroyed) {\n      if (this.filterSettings.showFilterBarOperator) {\n        var dropdownlist = [].slice.call(this.element.getElementsByClassName('e-filterbaroperator'));\n        for (var i = 0; i < dropdownlist.length; i++) {\n          if (dropdownlist[parseInt(i.toString(), 10)].ej2_instances[0]) {\n            dropdownlist[parseInt(i.toString(), 10)].ej2_instances[0].destroy();\n          }\n        }\n      }\n      this.parent.getColumns().map(function (column) {\n        if (column.filterBarTemplate && !isNullOrUndefined(column.filterBarTemplate.destroy)) {\n          var destroyFn = column.filterBarTemplate.destroy;\n          if (typeof destroyFn === 'string') {\n            destroyFn = getValue(destroyFn, window);\n          }\n          destroyFn();\n        }\n      });\n    }\n    if (this.element) {\n      if (this.element.parentElement) {\n        for (var i = 0; i < this.inputList.length; i++) {\n          Input.destroy(this.inputList[parseInt(i.toString(), 10)], this.inputList[parseInt(i.toString(), 10)].element.nextElementSibling);\n          remove(this.inputList[parseInt(i.toString(), 10)].element);\n        }\n        this.inputList = [];\n        remove(this.element);\n        this.element = null;\n      }\n      var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n      if (filterBarElement) {\n        remove(filterBarElement);\n      }\n    }\n  };\n  Filter.prototype.setFullScreenDialog = function () {\n    if (this.serviceLocator) {\n      this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isFilter);\n    }\n  };\n  Filter.prototype.generateRow = function () {\n    var options = {};\n    var row = new Row(options);\n    row.cells = this.generateCells();\n    return row;\n  };\n  Filter.prototype.generateCells = function () {\n    //TODO: generate dummy column for group, detail, stacked row here for filtering;\n    var cells = [];\n    if (this.parent.allowGrouping) {\n      for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n        cells.push(this.generateCell({}, CellType.HeaderIndent));\n      }\n    }\n    if (this.parent.detailTemplate || this.parent.childGrid) {\n      cells.push(this.generateCell({}, CellType.DetailHeader));\n    }\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n      cells.push(this.generateCell({}, CellType.RowDragHIcon));\n    }\n    for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n      var dummy = _a[_i];\n      cells.push(this.generateCell(dummy));\n    }\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n      cells.push(this.generateCell({}, CellType.RowDragHIcon));\n    }\n    return cells;\n  };\n  Filter.prototype.generateCell = function (column, cellType) {\n    var opt = {\n      'visible': column.visible,\n      'isDataCell': false,\n      'rowId': '',\n      'column': column,\n      'cellType': cellType ? cellType : CellType.Filter,\n      'attributes': {\n        title: this.l10n.getConstant('FilterbarTitle')\n      }\n    };\n    return new Cell(opt);\n  };\n  /**\n   * To update filterSettings when applying filter.\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.updateModel = function () {\n    var col = this.column.isForeignColumn() || this.parent.enableColumnVirtualization ? this.parent.getColumnByUid(this.column.uid, true) : this.parent.getColumnByField(this.fieldName);\n    this.filterObjIndex = this.getFilteredColsIndexByField(col);\n    this.prevFilterObject = this.filterSettings.columns[this.filterObjIndex];\n    var arrayVal = Array.isArray(this.value) && this.value.length ? this.value : [this.value];\n    var moduleName = this.parent.dataSource.adaptor && this.parent.dataSource.adaptor.getModuleName ? this.parent.dataSource.adaptor.getModuleName() : undefined;\n    for (var i = 0, len = arrayVal.length; i < len; i++) {\n      var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n      var isMenuNotEqual = this.operator === 'notequal';\n      if (this.operator === 'in' || this.operator === 'notin') {\n        if (this.parent.getDataModule().isRemote() && (col.type === 'date' || col.type === 'dateonly' || col.type === 'datetime')) {\n          arrayVal = DataUtil.parse.arrayReplacer(arrayVal);\n        }\n        this.currentFilterObject = {\n          field: field,\n          uid: col.uid,\n          isForeignKey: col.isForeignColumn(),\n          operator: this.operator,\n          value: arrayVal,\n          predicate: this.predicate,\n          matchCase: this.matchCase,\n          ignoreAccent: this.ignoreAccent,\n          actualFilterValue: {},\n          actualOperator: {}\n        };\n        len = 0;\n      } else {\n        this.currentFilterObject = {\n          field: field,\n          uid: col.uid,\n          isForeignKey: col.isForeignColumn(),\n          operator: this.operator,\n          value: arrayVal[parseInt(i.toString(), 10)],\n          predicate: this.predicate,\n          matchCase: this.matchCase,\n          ignoreAccent: this.ignoreAccent,\n          actualFilterValue: {},\n          actualOperator: {}\n        };\n      }\n      var index = this.getFilteredColsIndexByField(col);\n      if (index > -1 && (!Array.isArray(this.value) || Array.isArray(this.value) && (this.operator === 'in' || this.operator === 'notin'))) {\n        this.filterSettings.columns[parseInt(index.toString(), 10)] = this.currentFilterObject;\n      } else {\n        this.filterSettings.columns.push(this.currentFilterObject);\n      }\n      if (!this.column.isForeignColumn() && this.prevFilterObject && (isNullOrUndefined(this.prevFilterObject.value) || this.prevFilterObject.value === '') && (this.prevFilterObject.operator === 'equal' || this.prevFilterObject.operator === 'notequal') && moduleName !== 'ODataAdaptor' && moduleName !== 'ODataV4Adaptor') {\n        this.handleExistingFilterCleanup(field);\n      }\n      if (!this.column.isForeignColumn() && isNullOrUndefined(this.value) && (this.operator === 'equal' || this.operator === 'notequal') && moduleName !== 'ODataAdaptor' && moduleName !== 'ODataV4Adaptor') {\n        this.handleExistingFilterCleanup(field);\n        if (col.type === 'string') {\n          this.filterSettings.columns.push({\n            field: field,\n            ignoreAccent: this.ignoreAccent,\n            matchCase: this.matchCase,\n            operator: this.operator,\n            predicate: isMenuNotEqual ? 'and' : 'or',\n            value: ''\n          });\n        }\n        this.filterSettings.columns.push({\n          field: field,\n          ignoreAccent: this.ignoreAccent,\n          matchCase: this.matchCase,\n          operator: this.operator,\n          predicate: isMenuNotEqual ? 'and' : 'or',\n          value: undefined\n        });\n        this.filterSettings.columns.push({\n          field: field,\n          ignoreAccent: this.ignoreAccent,\n          matchCase: this.matchCase,\n          operator: this.operator,\n          predicate: isMenuNotEqual ? 'and' : 'or',\n          value: null\n        });\n      }\n    }\n    // eslint-disable-next-line no-self-assign\n    this.filterSettings.columns = this.filterSettings.columns;\n    this.parent.dataBind();\n  };\n  Filter.prototype.handleExistingFilterCleanup = function (field) {\n    for (var i = 0; i < this.filterSettings.columns.length; i++) {\n      if (this.filterSettings.columns[\"\" + i].field === field && (this.filterSettings.columns[\"\" + i].operator === 'equal' || this.filterSettings.columns[\"\" + i].operator === 'notequal') && isNullOrUndefined(this.filterSettings.columns[\"\" + i].value)) {\n        this.filterSettings.columns.splice(i, 1);\n        i = i - 1;\n      }\n    }\n  };\n  Filter.prototype.getFilteredColsIndexByField = function (col) {\n    var cols = this.filterSettings.columns;\n    for (var i = 0, len = cols.length; i < len; i++) {\n      if (cols[parseInt(i.toString(), 10)].uid === col.uid || col.isForeignColumn() && this.parent.getColumnByUid(col.uid).field === col.foreignKeyValue) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  /**\n   * To trigger action complete event.\n   *\n   * @param {NotifyArgs} e - specifies the NotifyArgs\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.onActionComplete = function (e) {\n    var args = !this.isRemove ? {\n      currentFilterObject: this.currentFilterObject,\n      /* tslint:disable:no-string-literal */\n      currentFilteringColumn: !isNullOrUndefined(this.column) ? this.column.field : undefined,\n      /* tslint:enable:no-string-literal */\n      columns: this.filterSettings.columns,\n      requestType: 'filtering',\n      type: events.actionComplete\n    } : {\n      requestType: 'filtering',\n      type: events.actionComplete\n    };\n    this.parent.trigger(events.actionComplete, extend(e, args));\n    this.isRemove = false;\n  };\n  Filter.prototype.wireEvents = function () {\n    EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate, this);\n  };\n  Filter.prototype.unWireEvents = function () {\n    EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate);\n  };\n  Filter.prototype.enableAfterRender = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      this.parent.getHeaderTable().classList.add('e-sortfilter');\n      this.render();\n    }\n  };\n  Filter.prototype.refreshFilterValue = function () {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!isNullOrUndefined(this.parent.modelObserver.boundedEvents)) {\n      this.parent.removeEventListener(events.beforeDataBound, this.refreshFilterValueFn);\n    }\n    if ((this.filterSettings.type === 'FilterBar' || this.filterSettings.type === 'Excel') && this.filterSettings.columns.length && !this.parent.getCurrentViewRecords().length) {\n      this.initialEnd();\n    }\n  };\n  Filter.prototype.initialEnd = function () {\n    this.parent.off(events.contentReady, this.initialEnd);\n    if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n      var gObj = this.parent;\n      this.contentRefresh = false;\n      this.initialLoad = true;\n      for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n        var col = _a[_i];\n        this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator, col.isForeignKey);\n      }\n      this.initialLoad = false;\n      this.updateFilterMsg();\n      this.contentRefresh = true;\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    this.parent.on(events.filterComplete, this.onActionComplete, this);\n    this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.keyPressed, this.keyUpHandler, this);\n    this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n    this.parent.on(events.headerRefreshed, this.render, this);\n    this.parent.on(events.contentReady, this.initialEnd, this);\n    this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n    this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n    this.docClickHandler = this.clickHandler.bind(this);\n    EventHandler.add(document, 'click', this.docClickHandler, this);\n    EventHandler.add(this.parent.element, 'mousedown', this.refreshClearIcon, this);\n    this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n    this.parent.on(events.click, this.filterIconClickHandler, this);\n    this.parent.on('persist-data-changed', this.initialEnd, this);\n    this.parent.on(events.closeFilterDialog, this.clickHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.refreshFilterValueFn = this.refreshFilterValue.bind(this);\n    this.parent.addEventListener(events.beforeDataBound, this.refreshFilterValueFn);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.removeEventListener = function () {\n    EventHandler.remove(document, 'click', this.docClickHandler);\n    EventHandler.remove(this.parent.element, 'mousedown', this.refreshClearIcon);\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n    this.parent.off(events.uiUpdate, this.enableAfterRender);\n    this.parent.off(events.filterComplete, this.onActionComplete);\n    this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n    this.parent.off(events.keyPressed, this.keyUpHandler);\n    this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n    this.parent.off(events.headerRefreshed, this.render);\n    this.parent.off(events.filterOpen, this.columnMenuFilter);\n    this.parent.off(events.filterMenuClose, this.filterMenuClose);\n    this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n    this.parent.off(events.click, this.filterIconClickHandler);\n    this.parent.off(events.closeFilterDialog, this.clickHandler);\n    this.parent.off(events.destroy, this.destroy);\n  };\n  Filter.prototype.refreshClearIcon = function (e) {\n    if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' && e.target.closest('th') && e.target.closest('th').classList.contains('e-filterbarcell') && e.target.classList.contains('e-clear-icon')) {\n      var targetText = e.target.previousElementSibling;\n      Input.setValue(null, targetText, 'Never', true);\n      if (this.filterSettings.mode === 'Immediate') {\n        this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n      }\n    }\n  };\n  Filter.prototype.filterMenuClose = function () {\n    this.fltrDlgDetails.isOpen = false;\n  };\n  /**\n   * Filters the Grid row by fieldName, filterOperator, and filterValue.\n   *\n   * @param  {string} fieldName - Defines the field name of the filter column.\n   * @param  {string} filterOperator - Defines the operator to filter records.\n   * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n   * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n   * @param  {boolean} matchCase - If match case is set to true, then the filter records\n   * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n   * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n   * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n   * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n   * @param  {boolean} isForeignColumn - Defines whether it is a foreign key column.\n   * @returns {void}\n   */\n  Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator, isForeignColumn) {\n    var _this = this;\n    var gObj = this.parent;\n    var filterCell;\n    if (typeof filterValue === 'string') {\n      filterValue = this.parent.sanitize(filterValue);\n    }\n    this.column = gObj.grabColumnByFieldFromAllCols(fieldName, isForeignColumn);\n    if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator && isNullOrUndefined(this.column.filterBarTemplate) && isNullOrUndefined(this.column.filterTemplate)) {\n      filterOperator = this.getOperatorName(fieldName);\n    }\n    if (filterOperator === 'like' && filterValue && filterValue.indexOf('%') === -1) {\n      filterValue = '%' + filterValue + '%';\n    }\n    if (!this.column) {\n      return;\n    }\n    if (this.filterSettings.type === 'FilterBar') {\n      filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n    }\n    if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n      this.parent.log('action_disabled_column', {\n        moduleName: this.getModuleName(),\n        columnName: this.column.headerText\n      });\n      return;\n    }\n    if (isActionPrevent(gObj)) {\n      gObj.notify(events.preventBatch, {\n        instance: this,\n        handler: this.filterByColumn,\n        arg1: fieldName,\n        arg2: filterOperator,\n        arg3: filterValue,\n        arg4: predicate,\n        arg5: matchCase,\n        arg6: ignoreAccent,\n        arg7: actualFilterValue,\n        arg8: actualOperator\n      });\n      return;\n    }\n    this.predicate = predicate ? predicate : Array.isArray(filterValue) ? 'or' : 'and';\n    this.value = filterValue;\n    this.matchCase = matchCase || false;\n    this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n    this.fieldName = fieldName;\n    this.operator = filterOperator;\n    filterValue = !isNullOrUndefined(filterValue) ? filterValue.toString() : filterValue;\n    if (filterValue === '') {\n      filterValue = null;\n    }\n    if (this.column.type === 'number' || this.column.type === 'date') {\n      this.matchCase = true;\n    }\n    if (filterCell && this.filterSettings.type === 'FilterBar') {\n      if (filterValue && filterValue.length < 1 || !this.filterByMethod && this.checkForSkipInput(this.column, filterValue)) {\n        this.filterStatusMsg = filterValue && filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n        this.updateFilterMsg();\n        return;\n      }\n      if (filterCell.value !== filterValue) {\n        filterCell.value = filterValue;\n      }\n    }\n    if (!isNullOrUndefined(this.column.format)) {\n      this.applyColumnFormat(filterValue);\n      if (this.initialLoad && this.filterSettings.type === 'FilterBar') {\n        filterCell.value = this.values[this.column.field];\n      }\n    } else {\n      this.values[this.column.field] = filterValue; //this line should be above updateModel\n    }\n    var predObj = {\n      field: this.fieldName,\n      predicate: predicate,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent,\n      operator: this.operator,\n      value: this.value,\n      type: this.column.type\n    };\n    var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n      return fColumn.field === _this.fieldName;\n    });\n    if (filterColumn.length > 1 && !isNullOrUndefined(this.actualPredicate[this.fieldName])) {\n      this.actualPredicate[this.fieldName].push(predObj);\n    } else {\n      this.actualPredicate[this.fieldName] = [predObj];\n    }\n    if (this.checkAlreadyColFiltered(this.column.field)) {\n      return;\n    }\n    this.updateModel();\n  };\n  Filter.prototype.applyColumnFormat = function (filterValue) {\n    var _this = this;\n    var getFlvalue = this.column.type === 'date' || this.column.type === 'datetime' || this.column.type === 'dateonly' ? new Date(filterValue) : parseFloat(filterValue);\n    if ((this.column.type === 'date' || this.column.type === 'datetime' || this.column.type === 'dateonly') && filterValue && Array.isArray(this.value) && filterValue.split(',').length > 1) {\n      this.values[this.column.field] = filterValue.split(',').map(function (val) {\n        if (val === '') {\n          val = null;\n        }\n        return _this.setFormatForFlColumn(new Date(val), _this.column);\n      });\n    } else {\n      this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n    }\n  };\n  // To skip the second time request to server while applying initial filtering - EJ2-44361\n  Filter.prototype.skipUid = function (col) {\n    var flag = true;\n    var colLen = Object.keys(col);\n    for (var i = 0; i < colLen.length; i++) {\n      var key = Object.keys(col[colLen[parseInt(i.toString(), 10)]]);\n      if (key.length === 1 && key[0] === 'uid') {\n        flag = false;\n      }\n    }\n    return flag;\n  };\n  Filter.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n    for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'columns':\n          // eslint-disable-next-line no-case-declarations\n          var col = 'columns';\n          // eslint-disable-next-line no-case-declarations\n          var args = {\n            currentFilterObject: this.currentFilterObject,\n            currentFilteringColumn: this.column ? this.column.field : undefined,\n            action: 'filter',\n            columns: this.filterSettings.columns,\n            requestType: 'filtering',\n            type: events.actionBegin,\n            cancel: false\n          };\n          if (this.contentRefresh && this.skipUid(e.properties[\"\" + col])) {\n            this.parent.notify(events.modelChanged, args);\n            if (args.cancel) {\n              if (this.filterSettings.type === 'CheckBox' || this.filterSettings.type === 'Excel') {\n                this.filterSettings.columns = this.actualData.length <= 1 ? this.checkboxPrevFilterObject : this.checkboxFilterObject;\n                this.actualPredicate[this.column.field] = this.filterSettings.columns;\n                var col_1 = this.parent.getColumnByField(this.column.field);\n                var iconClass = this.parent.showColumnMenu && col_1.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                var filterIconElement = this.parent.getColumnHeaderByField(this.column.field).querySelector(iconClass);\n                if (this.checkboxPrevFilterObject.length === 0) {\n                  filterIconElement.classList.remove('e-filtered');\n                } else {\n                  filterIconElement.classList.add('e-filtered');\n                }\n              } else {\n                if (isNullOrUndefined(this.prevFilterObject)) {\n                  this.filterSettings.columns.splice(this.filterSettings.columns.length - 1, 1);\n                } else {\n                  this.filterSettings.columns[this.filterObjIndex] = this.prevFilterObject;\n                }\n              }\n              return;\n            }\n            this.updateFilterIcon();\n            this.refreshFilterSettings();\n            this.updateFilterMsg();\n            this.updateFilter();\n          }\n          break;\n        case 'showFilterBarStatus':\n          if (e.properties[\"\" + prop]) {\n            this.updateFilterMsg();\n          } else if (this.parent.allowPaging) {\n            this.parent.updateExternalMessage('');\n          }\n          break;\n        case 'showFilterBarOperator':\n        case 'type':\n          this.parent.refreshHeader();\n          this.refreshFilterSettings();\n          if (this.parent.height === '100%') {\n            this.parent.scrollModule.refresh();\n          }\n          break;\n      }\n    }\n  };\n  Filter.prototype.refreshFilterSettings = function () {\n    if (this.filterSettings.type === 'FilterBar') {\n      for (var i = 0; i < this.filterSettings.columns.length; i++) {\n        this.column = this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[parseInt(i.toString(), 10)].uid);\n        var filterValue = this.filterSettings.columns[parseInt(i.toString(), 10)].value;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (!isNullOrUndefined(this.column.format)) {\n          this.applyColumnFormat(filterValue);\n        } else {\n          var key = this.filterSettings.columns[parseInt(i.toString(), 10)].field;\n          this.values[\"\" + key] = this.filterSettings.columns[parseInt(i.toString(), 10)].value;\n        }\n        var filterElement = this.getFilterBarElement(this.column.field);\n        if (filterElement) {\n          if (this.cellText[this.filterSettings.columns[parseInt(i.toString(), 10)].field] !== '' && !isNullOrUndefined(this.cellText[this.filterSettings.columns[parseInt(i.toString(), 10)].field])) {\n            filterElement.value = this.cellText[this.column.field];\n          } else {\n            filterElement.value = this.filterSettings.columns[parseInt(i.toString(), 10)].value;\n          }\n        }\n      }\n      if (this.filterSettings.columns.length === 0) {\n        var col = this.parent.getColumns();\n        for (var i = 0; i < col.length; i++) {\n          var filterElement = this.getFilterBarElement(col[parseInt(i.toString(), 10)].field);\n          if (filterElement && filterElement.value !== '') {\n            filterElement.value = '';\n            delete this.values[col[parseInt(i.toString(), 10)].field];\n          }\n        }\n      }\n    }\n  };\n  Filter.prototype.updateFilterIcon = function () {\n    if (this.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n      var fltrIconElement = [].slice.call(this.parent.element.getElementsByClassName('e-filtered'));\n      for (var i = 0, len = fltrIconElement.length; i < len; i++) {\n        fltrIconElement[parseInt(i.toString(), 10)].classList.remove('e-filtered');\n      }\n    }\n  };\n  Filter.prototype.getFilterBarElement = function (col) {\n    var selector = '[id=\\'' + col + '_filterBarcell\\']';\n    var filterElement;\n    if (selector && !isNullOrUndefined(this.element)) {\n      filterElement = this.element.querySelector(selector);\n    }\n    return filterElement;\n  };\n  /**\n   * @private\n   * @returns {void}\n   */\n  Filter.prototype.refreshFilter = function () {\n    this.refreshFilterSettings();\n    this.updateFilterMsg();\n  };\n  /**\n   * Clears all the filtered rows of the Grid.\n   *\n   * @param {string[]} fields - returns the fields\n   * @returns {void}\n   */\n  Filter.prototype.clearFiltering = function (fields) {\n    var _this = this;\n    var cols = getActualPropFromColl(this.filterSettings.columns);\n    if (!isNullOrUndefined(fields)) {\n      this.refresh = false;\n      fields.forEach(function (field) {\n        _this.removeFilteredColsByField(field, false);\n      });\n      this.parent.setProperties({\n        filterSettings: {\n          columns: this.filterSettings.columns\n        }\n      }, true);\n      this.parent.renderModule.refresh();\n      this.refresh = true;\n      return;\n    }\n    if (isActionPrevent(this.parent)) {\n      this.parent.notify(events.preventBatch, {\n        instance: this,\n        handler: this.clearFiltering\n      });\n      return;\n    }\n    for (var i = 0; i < cols.length; i++) {\n      cols[parseInt(i.toString(), 10)].uid = cols[parseInt(i.toString(), 10)].uid || this.parent.getColumnByField(cols[parseInt(i.toString(), 10)].field).uid;\n    }\n    var colUid = cols.map(function (f) {\n      return f.uid;\n    });\n    var filteredcols = colUid.filter(function (item, pos) {\n      return colUid.indexOf(item) === pos;\n    });\n    this.refresh = false;\n    for (var i = 0, len = filteredcols.length; i < len; i++) {\n      this.removeFilteredColsByField(this.parent.getColumnByUid(filteredcols[parseInt(i.toString(), 10)]).field, false);\n    }\n    this.refresh = true;\n    if (filteredcols.length) {\n      this.parent.renderModule.refresh();\n    }\n    if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n      var fltrElement = [].slice.call(this.parent.element.getElementsByClassName('e-filtered'));\n      for (var i = 0, len = fltrElement.length; i < len; i++) {\n        fltrElement[0].classList.remove('e-filtered');\n      }\n    }\n    this.isRemove = true;\n    this.filterStatusMsg = '';\n    this.updateFilterMsg();\n  };\n  Filter.prototype.checkAlreadyColFiltered = function (field) {\n    var columns = this.filterSettings.columns;\n    for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n      var col = columns_1[_i];\n      if (col.field === field && this.parent.filterSettings.type === 'Menu' && (col.type === 'date' || col.type === 'datetime')) {\n        return this.checkDateColumnValue(col.value, this.value) && col.operator === this.operator && col.predicate === this.predicate;\n      } else if (col.field === field && col.value === this.value && col.operator === this.operator && col.predicate === this.predicate) {\n        return true;\n      }\n    }\n    return false;\n  };\n  Filter.prototype.checkDateColumnValue = function (colDate, filterDate) {\n    if (isNullOrUndefined(colDate) && isNullOrUndefined(filterDate)) {\n      return true;\n    } else if (colDate instanceof Date && filterDate instanceof Date) {\n      return colDate.getTime() === filterDate.getTime();\n    }\n    return false;\n  };\n  Filter.prototype.columnMenuFilter = function (args) {\n    this.column = args.col;\n    var ele = closest(args.target, '#' + args.id);\n    if (args.isClose && !ele) {\n      this.filterModule.closeDialog();\n    } else if (ele) {\n      this.filterDialogOpen(this.column, args.target);\n    }\n  };\n  Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n    if (this.filterModule) {\n      this.filterModule.isresetFocus = false;\n      this.filterModule.closeDialog();\n    }\n    this.setFilterModel(col);\n    this.filterModule.openDialog(this.createOptions(col, target, left, top));\n  };\n  /**\n   * Create filter dialog options\n   *\n   * @param  {Column} col - Filtering column detail.\n   * @param  {Element} target -  Filter dialog target.\n   * @param  {number} left -  Filter dialog left position.\n   * @param  {number} top -  Filter dialog top position.\n   * @returns {Object} returns the created dialog options\n   * @hidden\n   */\n  Filter.prototype.createOptions = function (col, target, left, top) {\n    var gObj = this.parent;\n    var dataSource = col.filter.dataSource || gObj.dataSource && 'result' in gObj.dataSource ? gObj.dataSource : gObj.getDataModule().dataManager;\n    var type = col.filter.type || this.parent.filterSettings.type;\n    var options = {\n      type: col.type,\n      field: col.field,\n      displayName: col.headerText,\n      dataSource: dataSource,\n      format: col.format,\n      height: 800,\n      columns: gObj.getColumns(),\n      filteredColumns: gObj.filterSettings.columns,\n      target: target,\n      dataManager: gObj.getDataModule().dataManager,\n      formatFn: col.getFormatter(),\n      ignoreAccent: gObj.filterSettings.ignoreAccent,\n      parserFn: col.getParser(),\n      query: gObj.query,\n      template: col.getFilterItemTemplate(),\n      hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n      handler: this.filterHandler.bind(this),\n      localizedStrings: gObj.getLocaleConstants(),\n      position: {\n        X: left,\n        Y: top\n      },\n      column: col,\n      foreignKeyValue: col.foreignKeyValue,\n      actualPredicate: this.actualPredicate,\n      localeObj: gObj.localeObj,\n      isRemote: gObj.getDataModule().isRemote(),\n      allowCaseSensitive: this.filterSettings.enableCaseSensitivity,\n      isResponsiveFilter: this.parent.enableAdaptiveUI,\n      operator: this.actualPredicate[col.field] && type === 'Menu' ? this.actualPredicate[col.field][0].operator : 'equal',\n      parentTotalDataCount: gObj.getDataModule().isRemote() && gObj.allowPaging ? gObj.pagerModule.pagerObj.totalRecordsCount : gObj.getDataModule().isRemote() ? gObj.totalDataRecordsCount : gObj.getFilteredRecords().length,\n      parentCurrentViewDataCount: gObj.currentViewData.length,\n      parentFilteredLocalRecords: !gObj.getDataModule().isRemote() ? gObj.getFilteredRecords() : []\n    };\n    return options;\n  };\n  /**\n   * Removes filtered column by field name.\n   *\n   * @param  {string} field - Defines column field name to remove filter.\n   * @param  {boolean} isClearFilterBar - Specifies whether the filter bar value needs to be cleared.\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n    var fCell;\n    var cols = this.filterSettings.columns;\n    if (isActionPrevent(this.parent)) {\n      var args = {\n        instance: this,\n        handler: this.removeFilteredColsByField,\n        arg1: field,\n        arg2: isClearFilterBar\n      };\n      this.parent.notify(events.preventBatch, args);\n      return;\n    }\n    var colUid = cols.map(function (f) {\n      return f.uid;\n    });\n    var filteredColsUid = colUid.filter(function (item, pos) {\n      return colUid.indexOf(item) === pos;\n    });\n    if (!isNullOrUndefined(this.column)) {\n      var col = this.column.isForeignColumn() ? this.parent.getColumnByUid(this.column.uid) : this.parent.getColumnByField(field);\n      this.filterObjIndex = this.getFilteredColsIndexByField(col);\n      this.prevFilterObject = this.filterSettings.columns[this.filterObjIndex];\n    }\n    var _loop_1 = function (i, len) {\n      cols[parseInt(i.toString(), 10)].uid = cols[parseInt(i.toString(), 10)].uid || this_1.parent.getColumnByField(cols[parseInt(i.toString(), 10)].field).uid;\n      var len_1 = cols.length;\n      var column = this_1.parent.grabColumnByUidFromAllCols(filteredColsUid[parseInt(i.toString(), 10)]);\n      if (column.field === field || column.field === column.foreignKeyValue && column.isForeignColumn()) {\n        var currentPred = this_1.filterSettings.columns.filter(function (e) {\n          return e.uid === column.uid;\n        })[0];\n        if (this_1.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n          var selector = '[id=\\'' + column.field + '_filterBarcell\\']';\n          fCell = this_1.parent.getHeaderContent().querySelector(selector);\n          if (fCell) {\n            fCell.value = '';\n            delete this_1.values[\"\" + field];\n          }\n        }\n        while (len_1--) {\n          if (cols[parseInt(len_1.toString(), 10)].uid === column.uid) {\n            cols.splice(len_1, 1);\n          }\n        }\n        var fltrElement = this_1.parent.getColumnHeaderByField(column.field);\n        if (this_1.filterSettings.type !== 'FilterBar' || this_1.parent.showColumnMenu) {\n          var iconClass = this_1.parent.showColumnMenu && column.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n          fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n        }\n        this_1.isRemove = true;\n        if (this_1.actualPredicate[\"\" + field]) {\n          delete this_1.actualPredicate[\"\" + field];\n        }\n        if (this_1.values[\"\" + field]) {\n          delete this_1.values[\"\" + field];\n        }\n        if (this_1.refresh) {\n          this_1.parent.notify(events.modelChanged, {\n            requestType: 'filtering',\n            type: events.actionBegin,\n            currentFilterObject: currentPred,\n            currentFilterColumn: column,\n            action: 'clearFilter'\n          });\n        }\n        return \"break\";\n      }\n    };\n    var this_1 = this;\n    for (var i = 0, len = filteredColsUid.length; i < len; i++) {\n      var state_1 = _loop_1(i, len);\n      if (state_1 === \"break\") break;\n    }\n    this.updateFilterMsg();\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   * @private\n   */\n  Filter.prototype.getModuleName = function () {\n    return 'filter';\n  };\n  Filter.prototype.keyUpHandlerImmediate = function (e) {\n    if (e.keyCode !== 13) {\n      this.keyUpHandler(e);\n    }\n  };\n  Filter.prototype.keyUpHandler = function (e) {\n    var gObj = this.parent;\n    var target = e.target;\n    if (target && matches(target, '.e-filterbar input')) {\n      var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n      this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n      if (!this.column) {\n        return;\n      }\n      if (e.action === 'altDownArrow' && this.parent.filterSettings.showFilterBarOperator) {\n        var dropDownListInput = closest(target, 'span').querySelector('.e-filterbaroperator');\n        dropDownListInput.ej2_instances[0].showPopup();\n        dropDownListInput.focus();\n      }\n      if ((this.filterSettings.mode === 'Immediate' || e.keyCode === 13 && !e.target.classList.contains('e-filterbaroperator')) && e.keyCode !== 9 && !this.column.filterTemplate) {\n        this.value = target.value.trim();\n        this.processFilter(e);\n      }\n    }\n    if (e.action === 'altDownArrow' && this.filterSettings.type !== 'FilterBar' && !parentsUntil(e.target, 'e-toolbar') && isNullOrUndefined(this.parent.element.querySelector('.e-filter-popup')) && !this.parent.enableAdaptiveUI) {\n      var element = gObj.focusModule.currentInfo.element;\n      if (element && element.classList.contains('e-headercell') && !element.classList.contains('e-stackedheadercell')) {\n        var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n        this.openMenuByField(column.field);\n        this.parent.focusModule.clearIndicator();\n      }\n    }\n    if (e.action === 'escape' && this.filterSettings.type === 'Menu' && this.filterModule) {\n      if (this.parent.showColumnMenu && this.filterModule.isDialogOpen) {\n        this.parent.isColumnMenuFilterClosing = true;\n      }\n      this.filterModule.closeDialog();\n      gObj.notify(events.restoreFocus, {});\n      if (!this.parent.showColumnMenu) {\n        gObj.notify(events.restoreFocus, {});\n      }\n    }\n  };\n  Filter.prototype.updateCrossIcon = function (element) {\n    if (element.value.length) {\n      element.nextElementSibling.classList.remove('e-hide');\n    }\n  };\n  Filter.prototype.updateFilterMsg = function () {\n    if (this.filterSettings.type === 'FilterBar') {\n      var gObj = this.parent;\n      var getFormatFlValue = void 0;\n      var columns = this.filterSettings.columns;\n      var column = void 0;\n      if (!this.filterSettings.showFilterBarStatus) {\n        return;\n      }\n      if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n        this.filterStatusMsg = '';\n        for (var index = 0; index < columns.length; index++) {\n          column = gObj.grabColumnByUidFromAllCols(columns[parseInt(index.toString(), 10)].uid) || gObj.grabColumnByFieldFromAllCols(columns[parseInt(index.toString(), 10)].field, columns[parseInt(index.toString(), 10)].isForeignKey);\n          if (index) {\n            this.filterStatusMsg += ' && ';\n          }\n          if (!isNullOrUndefined(column.format)) {\n            var flValue = column.type === 'date' || column.type === 'datetime' || column.type === 'dateonly' ? this.valueFormatter.fromView(this.values[column.field], column.getParser(), column.type === 'dateonly' ? 'date' : column.type) : this.values[column.field];\n            if (!(column.type === 'date' || column.type === 'datetime' || column.type === 'dateonly')) {\n              var formater = this.serviceLocator.getService('valueFormatter');\n              getFormatFlValue = formater.toView(flValue, column.getParser()).toString();\n            } else {\n              getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n            }\n            this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n          } else {\n            this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n          }\n        }\n      }\n      if (gObj.allowPaging) {\n        gObj.updateExternalMessage(this.filterStatusMsg);\n        if (this.parent.height === '100%') {\n          this.parent.scrollModule.refresh();\n        }\n      }\n      //TODO: virtual paging\n      this.filterStatusMsg = '';\n    }\n  };\n  Filter.prototype.setFormatForFlColumn = function (value, column) {\n    var formater = this.serviceLocator.getService('valueFormatter');\n    var formatValue = formater.toView(value, column.getFormatter());\n    return isNullOrUndefined(formatValue) ? formatValue : formatValue.toString();\n  };\n  Filter.prototype.checkForSkipInput = function (column, value) {\n    var isSkip;\n    if (column.type === 'number') {\n      if (DataUtil.operatorSymbols[\"\" + value] || this.skipNumberInput.indexOf(value) > -1) {\n        isSkip = true;\n      }\n    } else if (column.type === 'string') {\n      for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n        var val = value_1[_i];\n        if (this.skipStringInput.indexOf(val) > -1) {\n          isSkip = true;\n        }\n      }\n    }\n    return isSkip;\n  };\n  Filter.prototype.processFilter = function (e) {\n    this.stopTimer();\n    this.startTimer(e);\n  };\n  Filter.prototype.startTimer = function (e) {\n    var _this = this;\n    this.timer = window.setInterval(function () {\n      _this.onTimerTick();\n    }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n  };\n  Filter.prototype.stopTimer = function () {\n    window.clearInterval(this.timer);\n  };\n  Filter.prototype.onTimerTick = function () {\n    var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n    var filterElement = this.element.querySelector(selector);\n    if (!filterElement) {\n      filterElement = this.parent.getHeaderContent().querySelector(selector);\n    }\n    var filterValue;\n    this.cellText[this.column.field] = filterElement.value;\n    this.stopTimer();\n    if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n      var templateRead = this.column.filterBarTemplate.read;\n      if (typeof templateRead === 'string') {\n        templateRead = getValue(templateRead, window);\n      }\n      if (!isNullOrUndefined(templateRead)) {\n        this.value = templateRead.call(this, filterElement);\n      }\n    } else {\n      filterValue = JSON.parse(JSON.stringify(filterElement.value));\n    }\n    if (isNullOrUndefined(this.value) || this.value === '') {\n      this.removeFilteredColsByField(this.column.field);\n      return;\n    }\n    this.validateFilterValue(this.value);\n    this.filterByMethod = false;\n    this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.filterSettings.enableCaseSensitivity, this.ignoreAccent, this.column.isForeignColumn());\n    this.filterByMethod = true;\n    filterElement.value = filterValue;\n    this.updateFilterMsg();\n  };\n  Filter.prototype.validateFilterValue = function (value) {\n    var skipInput;\n    var index;\n    this.matchCase = this.filterSettings.enableCaseSensitivity;\n    switch (this.column.type) {\n      case 'number':\n        if (this.column.filter.operator) {\n          this.operator = this.column.filter.operator;\n        } else {\n          this.operator = this.filterOperators.equal;\n        }\n        skipInput = ['>', '<', '=', '!'];\n        for (var i = 0; i < value.length; i++) {\n          if (skipInput.indexOf(value[parseInt(i.toString(), 10)]) > -1) {\n            index = i;\n            break;\n          }\n        }\n        this.getOperator(value.substring(index));\n        if (index !== 0) {\n          this.value = value.substring(0, index);\n        }\n        if (this.value !== '' && value.length >= 1) {\n          this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n        }\n        if (isNaN(this.value)) {\n          this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n        }\n        break;\n      case 'date':\n      case 'datetime':\n        this.operator = this.filterOperators.equal;\n        if (this.value !== '' && !(this.value instanceof Date)) {\n          this.getOperator(value);\n          this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n          if (isNullOrUndefined(this.value)) {\n            this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n          }\n        }\n        break;\n      case 'string':\n        this.matchCase = false;\n        if (this.column.filter.operator) {\n          this.operator = this.column.filter.operator;\n        } else {\n          if (value.indexOf('*') !== -1 || value.indexOf('?') !== -1 || value.indexOf('%3f') !== -1) {\n            this.operator = this.filterOperators.wildCard;\n          } else if (value.indexOf('%') !== -1) {\n            this.operator = this.filterOperators.like;\n          } else {\n            this.operator = this.filterOperators.startsWith;\n          }\n        }\n        break;\n      case 'boolean':\n        if (value.toLowerCase() === 'true' || value === '1') {\n          this.value = true;\n        } else if (value.toLowerCase() === 'false' || value === '0') {\n          this.value = false;\n        } else if (value.length) {\n          this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n        }\n        this.operator = this.filterOperators.equal;\n        break;\n      default:\n        if (this.column.filter.operator) {\n          this.operator = this.column.filter.operator;\n        } else {\n          this.operator = this.filterOperators.equal;\n        }\n    }\n  };\n  Filter.prototype.getOperator = function (value) {\n    var singleOp = value.charAt(0);\n    var multipleOp = value.slice(0, 2);\n    var operators = extend({\n      '=': this.filterOperators.equal,\n      '!': this.filterOperators.notEqual\n    }, DataUtil.operatorSymbols);\n    // eslint-disable-next-line no-prototype-builtins\n    if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n      this.operator = operators[\"\" + singleOp];\n      this.value = value.substring(1);\n      if (!this.operator) {\n        this.operator = operators[\"\" + multipleOp];\n        this.value = value.substring(2);\n      }\n    }\n    if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n      if (this.value.charAt(0) === '=') {\n        this.operator = this.operator + 'orequal';\n        this.value = this.value.substring(1);\n      }\n    }\n  };\n  Filter.prototype.columnPositionChanged = function () {\n    if (this.parent.filterSettings.type !== 'FilterBar') {\n      return;\n    }\n  };\n  Filter.prototype.getLocalizedCustomOperators = function () {\n    var numOptr = [{\n      value: 'equal',\n      text: this.l10n.getConstant('Equal')\n    }, {\n      value: 'greaterthan',\n      text: this.l10n.getConstant('GreaterThan')\n    }, {\n      value: 'greaterthanorequal',\n      text: this.l10n.getConstant('GreaterThanOrEqual')\n    }, {\n      value: 'lessthan',\n      text: this.l10n.getConstant('LessThan')\n    }, {\n      value: 'lessthanorequal',\n      text: this.l10n.getConstant('LessThanOrEqual')\n    }, {\n      value: 'notequal',\n      text: this.l10n.getConstant('NotEqual')\n    }, {\n      value: 'isnull',\n      text: this.l10n.getConstant('IsNull')\n    }, {\n      value: 'isnotnull',\n      text: this.l10n.getConstant('NotNull')\n    }];\n    this.customOperators = {\n      stringOperator: [{\n        value: 'startswith',\n        text: this.l10n.getConstant('StartsWith')\n      }, {\n        value: 'endswith',\n        text: this.l10n.getConstant('EndsWith')\n      }, {\n        value: 'contains',\n        text: this.l10n.getConstant('Contains')\n      }, {\n        value: 'equal',\n        text: this.l10n.getConstant('Equal')\n      }, {\n        value: 'isempty',\n        text: this.l10n.getConstant('IsEmpty')\n      }, {\n        value: 'doesnotstartwith',\n        text: this.l10n.getConstant('NotStartsWith')\n      }, {\n        value: 'doesnotendwith',\n        text: this.l10n.getConstant('NotEndsWith')\n      }, {\n        value: 'doesnotcontain',\n        text: this.l10n.getConstant('NotContains')\n      }, {\n        value: 'notequal',\n        text: this.l10n.getConstant('NotEqual')\n      }, {\n        value: 'isnotempty',\n        text: this.l10n.getConstant('IsNotEmpty')\n      }, {\n        value: 'like',\n        text: this.l10n.getConstant('Like')\n      }],\n      numberOperator: numOptr,\n      dateOperator: [{\n        value: 'equal',\n        text: this.l10n.getConstant('Equal')\n      }, {\n        value: 'greaterthan',\n        text: this.l10n.getConstant('GreaterThan')\n      }, {\n        value: 'greaterthanorequal',\n        text: this.l10n.getConstant('GreaterThanOrEqual')\n      }, {\n        value: 'lessthan',\n        text: this.l10n.getConstant('LessThan')\n      }, {\n        value: 'lessthanorequal',\n        text: this.l10n.getConstant('LessThanOrEqual')\n      }, {\n        value: 'notequal',\n        text: this.l10n.getConstant('NotEqual')\n      }, {\n        value: 'isnull',\n        text: this.l10n.getConstant('IsNull')\n      }, {\n        value: 'isnotnull',\n        text: this.l10n.getConstant('NotNull')\n      }],\n      datetimeOperator: [{\n        value: 'equal',\n        text: this.l10n.getConstant('Equal')\n      }, {\n        value: 'greaterthan',\n        text: this.l10n.getConstant('GreaterThan')\n      }, {\n        value: 'greaterthanorequal',\n        text: this.l10n.getConstant('GreaterThanOrEqual')\n      }, {\n        value: 'lessthan',\n        text: this.l10n.getConstant('LessThan')\n      }, {\n        value: 'lessthanorequal',\n        text: this.l10n.getConstant('LessThanOrEqual')\n      }, {\n        value: 'notequal',\n        text: this.l10n.getConstant('NotEqual')\n      }, {\n        value: 'isnull',\n        text: this.l10n.getConstant('IsNull')\n      }, {\n        value: 'isnotnull',\n        text: this.l10n.getConstant('NotNull')\n      }],\n      dateonlyOperator: [{\n        value: 'equal',\n        text: this.l10n.getConstant('Equal')\n      }, {\n        value: 'greaterthan',\n        text: this.l10n.getConstant('GreaterThan')\n      }, {\n        value: 'greaterthanorequal',\n        text: this.l10n.getConstant('GreaterThanOrEqual')\n      }, {\n        value: 'lessthan',\n        text: this.l10n.getConstant('LessThan')\n      }, {\n        value: 'lessthanorequal',\n        text: this.l10n.getConstant('LessThanOrEqual')\n      }, {\n        value: 'notequal',\n        text: this.l10n.getConstant('NotEqual')\n      }, {\n        value: 'isnull',\n        text: this.l10n.getConstant('IsNull')\n      }, {\n        value: 'isnotnull',\n        text: this.l10n.getConstant('NotNull')\n      }],\n      booleanOperator: [{\n        value: 'equal',\n        text: this.l10n.getConstant('Equal')\n      }, {\n        value: 'notequal',\n        text: this.l10n.getConstant('NotEqual')\n      }]\n    };\n    if (this.filterSettings.type === 'Menu') {\n      this.customOperators.stringOperator.push({\n        value: 'in',\n        text: this.l10n.getConstant('In')\n      }, {\n        value: 'notin',\n        text: this.l10n.getConstant('NotIn')\n      });\n      this.customOperators.booleanOperator.push({\n        value: 'in',\n        text: this.l10n.getConstant('In')\n      }, {\n        value: 'notin',\n        text: this.l10n.getConstant('NotIn')\n      });\n      this.customOperators.numberOperator.push({\n        value: 'in',\n        text: this.l10n.getConstant('In')\n      }, {\n        value: 'notin',\n        text: this.l10n.getConstant('NotIn')\n      });\n    }\n  };\n  /**\n   * @param {string} field - specifies the field name\n   * @returns {void}\n   * @hidden\n   */\n  Filter.prototype.openMenuByField = function (field) {\n    var gObj = this.parent;\n    if (gObj.enableAdaptiveUI) {\n      this.showCustomFilter(false);\n      return;\n    }\n    var column = gObj.getColumnByField(field);\n    var header = gObj.getColumnHeaderByField(field);\n    var target = header.querySelector('.e-filtermenudiv');\n    if (!target) {\n      return;\n    }\n    var gClient = gObj.element.getBoundingClientRect();\n    var fClient = target.getBoundingClientRect();\n    this.filterDialogOpen(column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n  };\n  Filter.prototype.filterIconClickHandler = function (e) {\n    var target = e.target;\n    if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' || this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n      var gObj = this.parent;\n      var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n      this.column = col;\n      if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n        return;\n      }\n      if (this.filterModule) {\n        this.filterModule.closeDialog();\n      }\n      this.fltrDlgDetails = {\n        field: col.field,\n        isOpen: true\n      };\n      this.openMenuByField(col.field);\n    }\n  };\n  Filter.prototype.clickHandler = function (e) {\n    if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n      if (parentsUntil(e.target, 'e-filterbarcell') && e.target.classList.contains('e-input-group-icon')) {\n        var filterOperatorElement = closest(e.target, 'div').querySelector('.e-filterbaroperator');\n        if (filterOperatorElement) {\n          filterOperatorElement.focus();\n        } else {\n          e.target.focus();\n        }\n      }\n      if (e.target.classList.contains('e-list-item')) {\n        var inputId = document.querySelector('.e-popup-open').getAttribute('id').replace('_popup', '');\n        if (inputId.indexOf('grid-column') !== -1) {\n          closest(document.getElementById(inputId), 'div').querySelector('.e-filtertext').focus();\n        }\n      }\n    }\n    if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' || this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n      var target = e.target;\n      var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n      var dialog = parentsUntil(this.parent.element, 'e-dialog');\n      var hasDialog = false;\n      var popupEle = parentsUntil(target, 'e-popup');\n      var filterPopup = document.getElementById(this.parent.element.id + '_e-popup');\n      var hasDialogClosed = this.parent.element.classList.contains('e-device') ? document.querySelector('.e-filter-popup') : filterPopup && filterPopup.querySelector('.e-filter-popup') ? filterPopup.querySelector('.e-filter-popup') : this.parent.element.querySelector('.e-filter-popup');\n      if (dialog && popupEle) {\n        hasDialog = dialog.id === popupEle.id;\n      }\n      if (this.filterModule && hasDialogClosed && (parentsUntil(target, 'e-excel-ascending') || parentsUntil(target, 'e-excel-descending'))) {\n        this.filterModule.closeDialog(target);\n      }\n      if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n        return;\n      } else if (this.filterModule && !parentsUntil(target, 'e-date-overflow') && !parentsUntil(target, 'e-popup-wrapper') && !closest(target, '.e-filter-item.e-menu-item') && !datepickerEle && !(parentsUntil(target, 'e-search-wrapper') && !hasDialogClosed)) {\n        if (hasDialog && !parentsUntil(target, 'e-filter-popup') && !parentsUntil(target, 'e-popup-flmenu') || !popupEle && hasDialogClosed) {\n          this.filterModule.isresetFocus = parentsUntil(target, 'e-grid') && parentsUntil(target, 'e-grid').id === this.parent.element.id && !(parentsUntil(target, 'e-search-wrapper') && hasDialogClosed);\n          this.filterModule.closeDialog(target);\n        }\n      }\n    }\n  };\n  Filter.prototype.filterHandler = function (args) {\n    this.actualPredicate[args.field] = args.actualPredicate;\n    this.actualData = Object.keys(this.actualPredicate);\n    var dataManager = new DataManager(this.filterSettings.columns);\n    var query = new Query().where('field', this.filterOperators.equal, args.field);\n    this.checkboxFilterObject = dataManager.dataSource.json;\n    this.checkboxPrevFilterObject = dataManager.executeLocal(query);\n    for (var i = 0; i < this.checkboxPrevFilterObject.length; i++) {\n      var index = -1;\n      for (var j = 0; j < this.filterSettings.columns.length; j++) {\n        if (this.checkboxPrevFilterObject[parseInt(i.toString(), 10)].field === this.filterSettings.columns[parseInt(j.toString(), 10)].field) {\n          index = j;\n          break;\n        }\n      }\n      if (index !== -1) {\n        this.filterSettings.columns.splice(index, 1);\n      }\n    }\n    if (this.values[args.field]) {\n      delete this.values[args.field];\n    }\n    var col = this.parent.getColumnByField(args.field);\n    var iconClass = this.parent.showColumnMenu && col.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n    var filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n    if (args.action === 'filtering') {\n      this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n      if (this.filterSettings.columns.length && filterIconElement) {\n        filterIconElement.classList.add('e-filtered');\n      }\n    } else {\n      if (filterIconElement) {\n        filterIconElement.classList.remove('e-filtered');\n      }\n      args.requestType = 'filtering';\n      this.parent.renderModule.refresh(args); //hot-fix onpropertychanged not working for object { array }\n    }\n    this.parent.dataBind();\n  };\n  Filter.prototype.updateFilter = function () {\n    var cols = this.filterSettings.columns;\n    this.actualPredicate = {};\n    for (var i = 0; i < cols.length; i++) {\n      this.column = this.parent.getColumnByField(cols[parseInt(i.toString(), 10)].field) || getColumnByForeignKeyValue(cols[parseInt(i.toString(), 10)].field, this.parent.getForeignKeyColumns());\n      var fieldName = cols[parseInt(i.toString(), 10)].field;\n      if (!this.parent.getColumnByField(cols[parseInt(i.toString(), 10)].field)) {\n        fieldName = getColumnByForeignKeyValue(cols[parseInt(i.toString(), 10)].field, this.parent.getForeignKeyColumns()).field;\n      }\n      this.refreshFilterIcon(fieldName, cols[parseInt(i.toString(), 10)].operator, cols[parseInt(i.toString(), 10)].value, cols[parseInt(i.toString(), 10)].type, cols[parseInt(i.toString(), 10)].predicate, cols[parseInt(i.toString(), 10)].matchCase, cols[parseInt(i.toString(), 10)].ignoreAccent, cols[parseInt(i.toString(), 10)].uid);\n    }\n  };\n  Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent, uid) {\n    var obj = {\n      field: fieldName,\n      predicate: predicate,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent,\n      operator: operator,\n      value: value,\n      type: type\n    };\n    if (this.actualPredicate[\"\" + fieldName]) {\n      this.actualPredicate[\"\" + fieldName].push(obj);\n    } else {\n      this.actualPredicate[\"\" + fieldName] = [obj];\n    }\n    var field = uid ? this.parent.grabColumnByUidFromAllCols(uid).field : fieldName;\n    this.addFilteredClass(field);\n  };\n  Filter.prototype.addFilteredClass = function (fieldName) {\n    var filterIconElement;\n    var col = this.parent.getColumnByField(fieldName);\n    if (this.parent.showColumnMenu && col.showColumnMenu) {\n      filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-columnmenu');\n    } else if (col) {\n      filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n    }\n    if (filterIconElement) {\n      filterIconElement.classList.add('e-filtered');\n    }\n  };\n  /**\n   * @hidden\n   * @returns {FilterUI} returns the FilterUI\n   */\n  Filter.prototype.getFilterUIInfo = function () {\n    return this.filterModule ? this.filterModule.getFilterUIInfo() : {};\n  };\n  /**\n   * @param {string} field - specifies the field name\n   * @returns {string} returns the operator name\n   * @hidden\n   */\n  Filter.prototype.getOperatorName = function (field) {\n    return document.getElementById(this.parent.getColumnByField(field).uid).ej2_instances[0].value;\n  };\n  /**\n   * Renders checkbox items in Menu filter dialog.\n   *\n   * @returns {void}\n   */\n  Filter.prototype.renderCheckboxOnFilterMenu = function () {\n    return this.filterModule.renderCheckBoxMenu();\n  };\n  return Filter;\n}();\nexport { Filter };","map":{"version":3,"names":["EventHandler","isNullOrUndefined","extend","closest","getValue","getActualPropFromColl","isActionPrevent","getColumnByForeignKeyValue","remove","matches","DataUtil","Query","DataManager","events","CellType","ResponsiveDialogAction","RowRenderer","Cell","Row","FilterCellRenderer","parentsUntil","addFixedColumnBorder","applyStickyLeftRightPosition","FilterMenuRenderer","CheckBoxFilter","ExcelFilter","literals","Input","Filter","parent","filterSettings","serviceLocator","predicate","contentRefresh","filterByMethod","refresh","values","operators","cellText","nextFlMenuOpen","type","filterOperators","contains","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","wildCard","isNull","notNull","like","fltrDlgDetails","field","isOpen","skipNumberInput","skipStringInput","actualPredicate","inputList","addEventListener","setFullScreenDialog","prototype","render","e","getObject","gObj","l10n","getService","getLocalizedCustomOperators","columns","length","fltrElem","element","querySelector","rowRenderer","cellrender","addCellRenderer","valueFormatter","createElement","className","attrs","role","row","generateRow","data","getHeaderContent","appendChild","rowdrag","getColumns","querySelectorAll","td","i","parseInt","toString","classList","add","enableRtl","detail","gCells","slice","call","getElementsByClassName","wireEvents","notify","freezeRender","case","showCustomFilter","enable","responsiveDialogRenderer","isCustomDialog","showResponsiveDialog","column","renderResponsiveChangeAction","args","action","setFilterModel","col","filter","filterModule","customOperators","destroy","gridElement","gridHeader","gridContent","refreshing","isDestroyed","allowFiltering","updateFilterMsg","removeEventListener","unWireEvents","showFilterBarOperator","dropdownlist","ej2_instances","map","filterBarTemplate","destroyFn","window","parentElement","nextElementSibling","filterBarElement","registerAdaptiveService","enableAdaptiveUI","isFilter","options","cells","generateCells","allowGrouping","c","len","groupSettings","push","generateCell","HeaderIndent","detailTemplate","childGrid","DetailHeader","isRowDragable","getFrozenMode","RowDragHIcon","_i","_a","dummy","cellType","opt","visible","title","getConstant","updateModel","isForeignColumn","enableColumnVirtualization","getColumnByUid","uid","getColumnByField","fieldName","filterObjIndex","getFilteredColsIndexByField","prevFilterObject","arrayVal","Array","isArray","value","moduleName","dataSource","adaptor","getModuleName","undefined","foreignKeyValue","isMenuNotEqual","operator","getDataModule","isRemote","parse","arrayReplacer","currentFilterObject","isForeignKey","matchCase","ignoreAccent","actualFilterValue","actualOperator","index","handleExistingFilterCleanup","dataBind","splice","cols","onActionComplete","isRemove","currentFilteringColumn","requestType","actionComplete","trigger","keyUpHandlerImmediate","enableAfterRender","module","getHeaderTable","refreshFilterValue","modelObserver","boundedEvents","beforeDataBound","refreshFilterValueFn","getCurrentViewRecords","initialEnd","off","contentReady","initialLoad","filterByColumn","on","uiUpdate","filterComplete","inBoundModelChanged","onPropertyChanged","keyPressed","keyUpHandler","columnPositionChanged","headerRefreshed","filterMenuClose","docClickHandler","clickHandler","bind","document","refreshClearIcon","filterOpen","columnMenuFilter","click","filterIconClickHandler","closeFilterDialog","target","targetText","previousElementSibling","setValue","mode","removeFilteredColsByField","id","filterOperator","filterValue","_this","filterCell","sanitize","grabColumnByFieldFromAllCols","filterTemplate","getOperatorName","indexOf","log","columnName","headerText","preventBatch","instance","handler","arg1","arg2","arg3","arg4","arg5","arg6","arg7","arg8","checkForSkipInput","filterStatusMsg","format","applyColumnFormat","predObj","filterColumn","fColumn","checkAlreadyColFiltered","getFlvalue","Date","parseFloat","split","val","setFormatForFlColumn","skipUid","flag","colLen","Object","keys","key","properties","prop","actionBegin","cancel","modelChanged","actualData","checkboxPrevFilterObject","checkboxFilterObject","col_1","iconClass","showColumnMenu","filterIconElement","getColumnHeaderByField","updateFilterIcon","refreshFilterSettings","updateFilter","allowPaging","updateExternalMessage","refreshHeader","height","scrollModule","grabColumnByUidFromAllCols","filterElement","getFilterBarElement","fltrIconElement","selector","refreshFilter","clearFiltering","fields","forEach","setProperties","renderModule","colUid","f","filteredcols","item","pos","fltrElement","columns_1","checkDateColumnValue","colDate","filterDate","getTime","ele","isClose","closeDialog","filterDialogOpen","left","top","isresetFocus","openDialog","createOptions","dataManager","displayName","filteredColumns","formatFn","getFormatter","parserFn","getParser","query","template","getFilterItemTemplate","hideSearchbox","filterHandler","localizedStrings","getLocaleConstants","position","X","Y","localeObj","allowCaseSensitive","enableCaseSensitivity","isResponsiveFilter","parentTotalDataCount","pagerModule","pagerObj","totalRecordsCount","totalDataRecordsCount","getFilteredRecords","parentCurrentViewDataCount","currentViewData","parentFilteredLocalRecords","isClearFilterBar","fCell","filteredColsUid","_loop_1","this_1","len_1","currentPred","currentFilterColumn","state_1","keyCode","closeHeaderEle","getAttribute","dropDownListInput","showPopup","focus","trim","processFilter","focusModule","currentInfo","firstElementChild","openMenuByField","clearIndicator","isDialogOpen","isColumnMenuFilterClosing","restoreFocus","updateCrossIcon","getFormatFlValue","showFilterBarStatus","flValue","fromView","formater","toView","formatValue","isSkip","operatorSymbols","value_1","stopTimer","startTimer","timer","setInterval","onTimerTick","immediateModeDelay","clearInterval","templateRead","read","JSON","stringify","validateFilterValue","skipInput","getOperator","substring","isNaN","toLowerCase","singleOp","charAt","multipleOp","hasOwnProperty","numOptr","text","stringOperator","numberOperator","dateOperator","datetimeOperator","dateonlyOperator","booleanOperator","header","gClient","getBoundingClientRect","fClient","right","bottom","filterOperatorElement","inputId","replace","getElementById","datepickerEle","dialog","hasDialog","popupEle","filterPopup","hasDialogClosed","where","json","executeLocal","j","concat","filterCollection","getForeignKeyColumns","refreshFilterIcon","obj","addFilteredClass","getFilterUIInfo","renderCheckboxOnFilterMenu","renderCheckBoxMenu"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/filter.js"],"sourcesContent":["import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, matches } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType, ResponsiveDialogAction } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil, addFixedColumnBorder, applyStickyLeftRightPosition } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\nimport * as literals from '../base/string-literals';\nimport { Input } from '@syncfusion/ej2-inputs';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {FilterSettings} filterSettings - specifies the filterSettings\n     * @param {ServiceLocator} serviceLocator - specifes the serviceLocator\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.filterByMethod = true;\n        this.refresh = true;\n        this.values = {};\n        this.operators = {};\n        this.cellText = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'Menu': FilterMenuRenderer, 'CheckBox': CheckBoxFilter, 'Excel': ExcelFilter };\n        /** @hidden */\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith', wildCard: 'wildcard',\n            isNull: 'isnull', notNull: 'notnull', like: 'like'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        /** @hidden */\n        this.skipNumberInput = ['=', ' ', '!'];\n        this.skipStringInput = ['>', '<', '='];\n        this.actualPredicate = {};\n        /** @hidden */\n        this.inputList = [];\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.setFullScreenDialog();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.render = function (e) {\n        if (DataUtil.getObject('args.isFrozen', e)) {\n            return;\n        }\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'FilterBar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = this.parent.createElement('tr', { className: 'e-filterbar', attrs: { role: 'row' } });\n                var row = this.generateRow();\n                row.data = this.values;\n                this.parent.getHeaderContent().querySelector('thead:not(.e-masked-thead)').appendChild(rowRenderer.element);\n                var rowdrag = this.parent.element.querySelector('.e-rowdragheader');\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                if (this.element.querySelectorAll('.e-leftfreeze').length &&\n                    (this.element.querySelectorAll('.e-indentcell').length || this.element.querySelectorAll('.e-grouptopleftcell').length)) {\n                    var td = this.element.querySelectorAll('.e-indentcell, .e-grouptopleftcell');\n                    for (var i = 0; i < td.length; i++) {\n                        td[parseInt(i.toString(), 10)].classList.add('e-leftfreeze');\n                        applyStickyLeftRightPosition(td[parseInt(i.toString(), 10)], i * 30, this.parent.enableRtl, 'Left');\n                    }\n                }\n                addFixedColumnBorder(this.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                if (rowdrag) {\n                    if (rowdrag.classList.contains('e-leftfreeze')) {\n                        rowdrag.className = 'e-dragheadercell e-mastercell e-leftfreeze';\n                    }\n                    else {\n                        rowdrag.className = 'e-filterbarcell e-mastercell';\n                    }\n                }\n                var gCells = [].slice.call(this.element.getElementsByClassName('e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To show the responsive custom filter dialog\n     *\n     * @param {boolean} enable - specifes dialog open\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.showCustomFilter = function (enable) {\n        this.responsiveDialogRenderer.isCustomDialog = enable;\n        this.responsiveDialogRenderer.showResponsiveDialog(this.column);\n    };\n    Filter.prototype.renderResponsiveChangeAction = function (args) {\n        this.responsiveDialogRenderer.action = args.action;\n    };\n    /**\n     * To create the filter module.\n     *\n     * @param {Column} col - specifies the filtering column name\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.setFilterModel = function (col) {\n        var type = col.filter.type || this.parent.filterSettings.type;\n        this.filterModule = new this.type[\"\" + type](this.parent, this.parent.filterSettings, this.serviceLocator, this.customOperators, this);\n    };\n    /**\n     * To destroy the filter bar.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.parent.refreshing && (this.parent.isDestroyed || !this.parent.allowFiltering)) {\n            this.filterSettings.columns = [];\n        }\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.filterSettings.type === 'FilterBar' && !this.parent.isDestroyed) {\n            if (this.filterSettings.showFilterBarOperator) {\n                var dropdownlist = [].slice.call(this.element.getElementsByClassName('e-filterbaroperator'));\n                for (var i = 0; i < dropdownlist.length; i++) {\n                    if (dropdownlist[parseInt(i.toString(), 10)].ej2_instances[0]) {\n                        dropdownlist[parseInt(i.toString(), 10)].ej2_instances[0].destroy();\n                    }\n                }\n            }\n            this.parent.getColumns().map(function (column) {\n                if (column.filterBarTemplate && !isNullOrUndefined(column.filterBarTemplate.destroy)) {\n                    var destroyFn = column.filterBarTemplate.destroy;\n                    if (typeof destroyFn === 'string') {\n                        destroyFn = getValue(destroyFn, window);\n                    }\n                    destroyFn();\n                }\n            });\n        }\n        if (this.element) {\n            if (this.element.parentElement) {\n                for (var i = 0; i < this.inputList.length; i++) {\n                    Input.destroy(this.inputList[parseInt(i.toString(), 10)], this.inputList[parseInt(i.toString(), 10)].element.nextElementSibling);\n                    remove(this.inputList[parseInt(i.toString(), 10)].element);\n                }\n                this.inputList = [];\n                remove(this.element);\n                this.element = null;\n            }\n            var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n            if (filterBarElement) {\n                remove(filterBarElement);\n            }\n        }\n    };\n    Filter.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isFilter);\n        }\n    };\n    Filter.prototype.generateRow = function () {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            cells.push(this.generateCell({}, CellType.RowDragHIcon));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            cells.push(this.generateCell({}, CellType.RowDragHIcon));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        var col = this.column.isForeignColumn() || this.parent.enableColumnVirtualization ?\n            this.parent.getColumnByUid(this.column.uid, true) : this.parent.getColumnByField(this.fieldName);\n        this.filterObjIndex = this.getFilteredColsIndexByField(col);\n        this.prevFilterObject = this.filterSettings.columns[this.filterObjIndex];\n        var arrayVal = Array.isArray(this.value) && this.value.length ? this.value : [this.value];\n        var moduleName = this.parent.dataSource.adaptor && this.parent.dataSource.adaptor.getModuleName ? this.parent.dataSource.adaptor.getModuleName() : undefined;\n        for (var i = 0, len = arrayVal.length; i < len; i++) {\n            var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n            var isMenuNotEqual = this.operator === 'notequal';\n            if (this.operator === 'in' || this.operator === 'notin') {\n                if (this.parent.getDataModule().isRemote() && (col.type === 'date' || col.type === 'dateonly' || col.type === 'datetime')) {\n                    arrayVal = DataUtil.parse.arrayReplacer(arrayVal);\n                }\n                this.currentFilterObject = {\n                    field: field, uid: col.uid, isForeignKey: col.isForeignColumn(), operator: this.operator,\n                    value: arrayVal, predicate: this.predicate,\n                    matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n                };\n                len = 0;\n            }\n            else {\n                this.currentFilterObject = {\n                    field: field, uid: col.uid, isForeignKey: col.isForeignColumn(), operator: this.operator,\n                    value: arrayVal[parseInt(i.toString(), 10)], predicate: this.predicate,\n                    matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n                };\n            }\n            var index = this.getFilteredColsIndexByField(col);\n            if (index > -1 && (!Array.isArray(this.value) || (Array.isArray(this.value) && (this.operator === 'in' || this.operator === 'notin')))) {\n                this.filterSettings.columns[parseInt(index.toString(), 10)] = this.currentFilterObject;\n            }\n            else {\n                this.filterSettings.columns.push(this.currentFilterObject);\n            }\n            if (!this.column.isForeignColumn() && (this.prevFilterObject && (isNullOrUndefined(this.prevFilterObject.value)\n                || this.prevFilterObject.value === '') && (this.prevFilterObject.operator === 'equal'\n                || this.prevFilterObject.operator === 'notequal')) && (moduleName !== 'ODataAdaptor' && moduleName !== 'ODataV4Adaptor')) {\n                this.handleExistingFilterCleanup(field);\n            }\n            if (!this.column.isForeignColumn() && isNullOrUndefined(this.value) && (this.operator === 'equal' ||\n                this.operator === 'notequal') && (moduleName !== 'ODataAdaptor' && moduleName !== 'ODataV4Adaptor')) {\n                this.handleExistingFilterCleanup(field);\n                if (col.type === 'string') {\n                    this.filterSettings.columns.push({\n                        field: field, ignoreAccent: this.ignoreAccent, matchCase: this.matchCase,\n                        operator: this.operator, predicate: isMenuNotEqual ? 'and' : 'or', value: ''\n                    });\n                }\n                this.filterSettings.columns.push({\n                    field: field, ignoreAccent: this.ignoreAccent, matchCase: this.matchCase,\n                    operator: this.operator, predicate: isMenuNotEqual ? 'and' : 'or', value: undefined\n                });\n                this.filterSettings.columns.push({\n                    field: field, ignoreAccent: this.ignoreAccent, matchCase: this.matchCase,\n                    operator: this.operator, predicate: isMenuNotEqual ? 'and' : 'or', value: null\n                });\n            }\n        }\n        // eslint-disable-next-line no-self-assign\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.handleExistingFilterCleanup = function (field) {\n        for (var i = 0; i < this.filterSettings.columns.length; i++) {\n            if (this.filterSettings.columns[\"\" + i].field === field &&\n                (this.filterSettings.columns[\"\" + i].operator === 'equal' ||\n                    this.filterSettings.columns[\"\" + i].operator === 'notequal') &&\n                isNullOrUndefined(this.filterSettings.columns[\"\" + i].value)) {\n                this.filterSettings.columns.splice(i, 1);\n                i = i - 1;\n            }\n        }\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (col) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[parseInt(i.toString(), 10)].uid === col.uid || (col.isForeignColumn()\n                && this.parent.getColumnByUid(col.uid).field === col.foreignKeyValue)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject,\n            /* tslint:disable:no-string-literal */\n            currentFilteringColumn: !isNullOrUndefined(this.column) ? this.column.field : undefined,\n            /* tslint:enable:no-string-literal */\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.parent.getHeaderTable().classList.add('e-sortfilter');\n            this.render();\n        }\n    };\n    Filter.prototype.refreshFilterValue = function () {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!isNullOrUndefined(this.parent.modelObserver.boundedEvents)) {\n            this.parent.removeEventListener(events.beforeDataBound, this.refreshFilterValueFn);\n        }\n        if ((this.filterSettings.type === 'FilterBar' || this.filterSettings.type === 'Excel') && this.filterSettings.columns.length &&\n            !this.parent.getCurrentViewRecords().length) {\n            this.initialEnd();\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.initialLoad = true;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator, col.isForeignKey);\n            }\n            this.initialLoad = false;\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.headerRefreshed, this.render, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n        this.docClickHandler = this.clickHandler.bind(this);\n        EventHandler.add(document, 'click', this.docClickHandler, this);\n        EventHandler.add(this.parent.element, 'mousedown', this.refreshClearIcon, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n        this.parent.on('persist-data-changed', this.initialEnd, this);\n        this.parent.on(events.closeFilterDialog, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.refreshFilterValueFn = this.refreshFilterValue.bind(this);\n        this.parent.addEventListener(events.beforeDataBound, this.refreshFilterValueFn);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.docClickHandler);\n        EventHandler.remove(this.parent.element, 'mousedown', this.refreshClearIcon);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n        this.parent.off(events.click, this.filterIconClickHandler);\n        this.parent.off(events.closeFilterDialog, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    Filter.prototype.refreshClearIcon = function (e) {\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' &&\n            e.target.closest('th') && e.target.closest('th').classList.contains('e-filterbarcell') &&\n            e.target.classList.contains('e-clear-icon')) {\n            var targetText = e.target.previousElementSibling;\n            Input.setValue(null, targetText, 'Never', true);\n            if (this.filterSettings.mode === 'Immediate') {\n                this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n            }\n        }\n    };\n    Filter.prototype.filterMenuClose = function () {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters the Grid row by fieldName, filterOperator, and filterValue.\n     *\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, then the filter records\n     * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @param  {boolean} isForeignColumn - Defines whether it is a foreign key column.\n     * @returns {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator, isForeignColumn) {\n        var _this = this;\n        var gObj = this.parent;\n        var filterCell;\n        if (typeof filterValue === 'string') {\n            filterValue = this.parent.sanitize(filterValue);\n        }\n        this.column = gObj.grabColumnByFieldFromAllCols(fieldName, isForeignColumn);\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator\n            && isNullOrUndefined(this.column.filterBarTemplate) && isNullOrUndefined(this.column.filterTemplate)) {\n            filterOperator = this.getOperatorName(fieldName);\n        }\n        if (filterOperator === 'like' && filterValue && filterValue.indexOf('%') === -1) {\n            filterValue = '%' + filterValue + '%';\n        }\n        if (!this.column) {\n            return;\n        }\n        if (this.filterSettings.type === 'FilterBar') {\n            filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: this.column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: actualFilterValue, arg8: actualOperator\n            });\n            return;\n        }\n        this.predicate = predicate ? predicate : Array.isArray(filterValue) ? 'or' : 'and';\n        this.value = filterValue;\n        this.matchCase = matchCase || false;\n        this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n        this.fieldName = fieldName;\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) ? filterValue.toString() : filterValue;\n        if (filterValue === '') {\n            filterValue = null;\n        }\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        if (filterCell && this.filterSettings.type === 'FilterBar') {\n            if ((filterValue && filterValue.length < 1) || (!this.filterByMethod &&\n                this.checkForSkipInput(this.column, filterValue))) {\n                this.filterStatusMsg = (filterValue && filterValue.length < 1) ? '' : this.l10n.getConstant('InvalidFilterMessage');\n                this.updateFilterMsg();\n                return;\n            }\n            if (filterCell.value !== filterValue) {\n                filterCell.value = filterValue;\n            }\n        }\n        if (!isNullOrUndefined(this.column.format)) {\n            this.applyColumnFormat(filterValue);\n            if (this.initialLoad && this.filterSettings.type === 'FilterBar') {\n                filterCell.value = this.values[this.column.field];\n            }\n        }\n        else {\n            this.values[this.column.field] = filterValue; //this line should be above updateModel\n        }\n        var predObj = {\n            field: this.fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: this.operator,\n            value: this.value,\n            type: this.column.type\n        };\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === _this.fieldName);\n        });\n        if (filterColumn.length > 1 && !isNullOrUndefined(this.actualPredicate[this.fieldName])) {\n            this.actualPredicate[this.fieldName].push(predObj);\n        }\n        else {\n            this.actualPredicate[this.fieldName] = [predObj];\n        }\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.applyColumnFormat = function (filterValue) {\n        var _this = this;\n        var getFlvalue = (this.column.type === 'date' || this.column.type === 'datetime' || this.column.type === 'dateonly') ?\n            new Date(filterValue) : parseFloat(filterValue);\n        if ((this.column.type === 'date' || this.column.type === 'datetime' || this.column.type === 'dateonly') && filterValue &&\n            Array.isArray(this.value) && filterValue.split(',').length > 1) {\n            this.values[this.column.field] = ((filterValue).split(',')).map(function (val) {\n                if (val === '') {\n                    val = null;\n                }\n                return _this.setFormatForFlColumn(new Date(val), _this.column);\n            });\n        }\n        else {\n            this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n        }\n    };\n    // To skip the second time request to server while applying initial filtering - EJ2-44361\n    Filter.prototype.skipUid = function (col) {\n        var flag = true;\n        var colLen = Object.keys((col));\n        for (var i = 0; i < colLen.length; i++) {\n            var key = Object.keys(col[colLen[parseInt(i.toString(), 10)]]);\n            if (key.length === 1 && key[0] === 'uid') {\n                flag = false;\n            }\n        }\n        return flag;\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    // eslint-disable-next-line no-case-declarations\n                    var col = 'columns';\n                    // eslint-disable-next-line no-case-declarations\n                    var args = {\n                        currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                            this.column.field : undefined, action: 'filter', columns: this.filterSettings.columns,\n                        requestType: 'filtering', type: events.actionBegin, cancel: false\n                    };\n                    if (this.contentRefresh && this.skipUid(e.properties[\"\" + col])) {\n                        this.parent.notify(events.modelChanged, args);\n                        if (args.cancel) {\n                            if ((this.filterSettings.type === 'CheckBox' || this.filterSettings.type === 'Excel')) {\n                                this.filterSettings.columns = (this.actualData.length <= 1) ? this.checkboxPrevFilterObject :\n                                    this.checkboxFilterObject;\n                                this.actualPredicate[this.column.field] = this.filterSettings.columns;\n                                var col_1 = this.parent.getColumnByField(this.column.field);\n                                var iconClass = this.parent.showColumnMenu && col_1.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                                var filterIconElement = this.parent.getColumnHeaderByField(this.column.field)\n                                    .querySelector(iconClass);\n                                if (this.checkboxPrevFilterObject.length === 0) {\n                                    filterIconElement.classList.remove('e-filtered');\n                                }\n                                else {\n                                    filterIconElement.classList.add('e-filtered');\n                                }\n                            }\n                            else {\n                                if (isNullOrUndefined(this.prevFilterObject)) {\n                                    this.filterSettings.columns.splice(this.filterSettings.columns.length - 1, 1);\n                                }\n                                else {\n                                    this.filterSettings.columns[this.filterObjIndex] = this.prevFilterObject;\n                                }\n                            }\n                            return;\n                        }\n                        this.updateFilterIcon();\n                        this.refreshFilterSettings();\n                        this.updateFilterMsg();\n                        this.updateFilter();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[\"\" + prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n                case 'showFilterBarOperator':\n                case 'type':\n                    this.parent.refreshHeader();\n                    this.refreshFilterSettings();\n                    if (this.parent.height === '100%') {\n                        this.parent.scrollModule.refresh();\n                    }\n                    break;\n            }\n        }\n    };\n    Filter.prototype.refreshFilterSettings = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            for (var i = 0; i < this.filterSettings.columns.length; i++) {\n                this.column = this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[parseInt(i.toString(), 10)].uid);\n                var filterValue = this.filterSettings.columns[parseInt(i.toString(), 10)].value;\n                filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n                if (!isNullOrUndefined(this.column.format)) {\n                    this.applyColumnFormat(filterValue);\n                }\n                else {\n                    var key = this.filterSettings.columns[parseInt(i.toString(), 10)].field;\n                    this.values[\"\" + key] = this.filterSettings.columns[parseInt(i.toString(), 10)].value;\n                }\n                var filterElement = this.getFilterBarElement(this.column.field);\n                if (filterElement) {\n                    if (this.cellText[this.filterSettings.columns[parseInt(i.toString(), 10)].field] !== ''\n                        && !isNullOrUndefined(this.cellText[this.filterSettings.columns[parseInt(i.toString(), 10)].field])) {\n                        filterElement.value = this.cellText[this.column.field];\n                    }\n                    else {\n                        filterElement.value = this.filterSettings.columns[parseInt(i.toString(), 10)].value;\n                    }\n                }\n            }\n            if (this.filterSettings.columns.length === 0) {\n                var col = this.parent.getColumns();\n                for (var i = 0; i < col.length; i++) {\n                    var filterElement = this.getFilterBarElement(col[parseInt(i.toString(), 10)].field);\n                    if (filterElement && filterElement.value !== '') {\n                        filterElement.value = '';\n                        delete this.values[col[parseInt(i.toString(), 10)].field];\n                    }\n                }\n            }\n        }\n    };\n    Filter.prototype.updateFilterIcon = function () {\n        if (this.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrIconElement = [].slice.call(this.parent.element.getElementsByClassName('e-filtered'));\n            for (var i = 0, len = fltrIconElement.length; i < len; i++) {\n                fltrIconElement[parseInt(i.toString(), 10)].classList.remove('e-filtered');\n            }\n        }\n    };\n    Filter.prototype.getFilterBarElement = function (col) {\n        var selector = '[id=\\'' + col + '_filterBarcell\\']';\n        var filterElement;\n        if (selector && !isNullOrUndefined(this.element)) {\n            filterElement = this.element.querySelector(selector);\n        }\n        return filterElement;\n    };\n    /**\n     * @private\n     * @returns {void}\n     */\n    Filter.prototype.refreshFilter = function () {\n        this.refreshFilterSettings();\n        this.updateFilterMsg();\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     *\n     * @param {string[]} fields - returns the fields\n     * @returns {void}\n     */\n    Filter.prototype.clearFiltering = function (fields) {\n        var _this = this;\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (!isNullOrUndefined(fields)) {\n            this.refresh = false;\n            fields.forEach(function (field) { _this.removeFilteredColsByField(field, false); });\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n            this.parent.renderModule.refresh();\n            this.refresh = true;\n            return;\n        }\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        for (var i = 0; i < cols.length; i++) {\n            cols[parseInt(i.toString(), 10)].uid = cols[parseInt(i.toString(), 10)].uid\n                || this.parent.getColumnByField(cols[parseInt(i.toString(), 10)].field).uid;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredcols = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        this.refresh = false;\n        for (var i = 0, len = filteredcols.length; i < len; i++) {\n            this.removeFilteredColsByField(this.parent.getColumnByUid(filteredcols[parseInt(i.toString(), 10)]).field, false);\n        }\n        this.refresh = true;\n        if (filteredcols.length) {\n            this.parent.renderModule.refresh();\n        }\n        if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrElement = [].slice.call(this.parent.element.getElementsByClassName('e-filtered'));\n            for (var i = 0, len = fltrElement.length; i < len; i++) {\n                fltrElement[0].classList.remove('e-filtered');\n            }\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && this.parent.filterSettings.type === 'Menu' &&\n                (col.type === 'date' || col.type === 'datetime')) {\n                return (this.checkDateColumnValue(col.value, this.value) &&\n                    col.operator === this.operator && col.predicate === this.predicate);\n            }\n            else if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.checkDateColumnValue = function (colDate, filterDate) {\n        if (isNullOrUndefined(colDate) && isNullOrUndefined(filterDate)) {\n            return true;\n        }\n        else if (colDate instanceof Date && filterDate instanceof Date) {\n            return colDate.getTime() === filterDate.getTime();\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        if (this.filterModule) {\n            this.filterModule.isresetFocus = false;\n            this.filterModule.closeDialog();\n        }\n        this.setFilterModel(col);\n        this.filterModule.openDialog(this.createOptions(col, target, left, top));\n    };\n    /**\n     * Create filter dialog options\n     *\n     * @param  {Column} col - Filtering column detail.\n     * @param  {Element} target -  Filter dialog target.\n     * @param  {number} left -  Filter dialog left position.\n     * @param  {number} top -  Filter dialog top position.\n     * @returns {Object} returns the created dialog options\n     * @hidden\n     */\n    Filter.prototype.createOptions = function (col, target, left, top) {\n        var gObj = this.parent;\n        var dataSource = col.filter.dataSource || gObj.dataSource && 'result' in gObj.dataSource ? gObj.dataSource :\n            gObj.getDataModule().dataManager;\n        var type = col.filter.type || this.parent.filterSettings.type;\n        var options = {\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: dataSource, format: col.format, height: 800, columns: gObj.getColumns(),\n            filteredColumns: gObj.filterSettings.columns, target: target, dataManager: gObj.getDataModule().dataManager,\n            formatFn: col.getFormatter(), ignoreAccent: gObj.filterSettings.ignoreAccent,\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }, column: col, foreignKeyValue: col.foreignKeyValue,\n            actualPredicate: this.actualPredicate, localeObj: gObj.localeObj,\n            isRemote: gObj.getDataModule().isRemote(), allowCaseSensitive: this.filterSettings.enableCaseSensitivity,\n            isResponsiveFilter: this.parent.enableAdaptiveUI,\n            operator: this.actualPredicate[col.field] && type === 'Menu' ? this.actualPredicate[col.field][0].operator : 'equal',\n            parentTotalDataCount: gObj.getDataModule().isRemote() && gObj.allowPaging ? gObj.pagerModule.pagerObj.totalRecordsCount :\n                gObj.getDataModule().isRemote() ? gObj.totalDataRecordsCount : gObj.getFilteredRecords().length,\n            parentCurrentViewDataCount: gObj.currentViewData.length,\n            parentFilteredLocalRecords: !gObj.getDataModule().isRemote() ? gObj.getFilteredRecords() : []\n        };\n        return options;\n    };\n    /**\n     * Removes filtered column by field name.\n     *\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar - Specifies whether the filter bar value needs to be cleared.\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            var args = { instance: this, handler: this.removeFilteredColsByField, arg1: field, arg2: isClearFilterBar };\n            this.parent.notify(events.preventBatch, args);\n            return;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredColsUid = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        if (!isNullOrUndefined(this.column)) {\n            var col = this.column.isForeignColumn() ? this.parent.getColumnByUid(this.column.uid) :\n                this.parent.getColumnByField(field);\n            this.filterObjIndex = this.getFilteredColsIndexByField(col);\n            this.prevFilterObject = this.filterSettings.columns[this.filterObjIndex];\n        }\n        var _loop_1 = function (i, len) {\n            cols[parseInt(i.toString(), 10)].uid = cols[parseInt(i.toString(), 10)].uid\n                || this_1.parent.getColumnByField(cols[parseInt(i.toString(), 10)].field).uid;\n            var len_1 = cols.length;\n            var column = this_1.parent.grabColumnByUidFromAllCols(filteredColsUid[parseInt(i.toString(), 10)]);\n            if (column.field === field || (column.field === column.foreignKeyValue && column.isForeignColumn())) {\n                var currentPred = this_1.filterSettings.columns.filter(function (e) {\n                    return e.uid === column.uid;\n                })[0];\n                if (this_1.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n                    var selector = '[id=\\'' + column.field + '_filterBarcell\\']';\n                    fCell = this_1.parent.getHeaderContent().querySelector(selector);\n                    if (fCell) {\n                        fCell.value = '';\n                        delete this_1.values[\"\" + field];\n                    }\n                }\n                while (len_1--) {\n                    if (cols[parseInt(len_1.toString(), 10)].uid === column.uid) {\n                        cols.splice(len_1, 1);\n                    }\n                }\n                var fltrElement = this_1.parent.getColumnHeaderByField(column.field);\n                if (this_1.filterSettings.type !== 'FilterBar' || this_1.parent.showColumnMenu) {\n                    var iconClass = this_1.parent.showColumnMenu && column.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n                }\n                this_1.isRemove = true;\n                if (this_1.actualPredicate[\"\" + field]) {\n                    delete this_1.actualPredicate[\"\" + field];\n                }\n                if (this_1.values[\"\" + field]) {\n                    delete this_1.values[\"\" + field];\n                }\n                if (this_1.refresh) {\n                    this_1.parent.notify(events.modelChanged, {\n                        requestType: 'filtering', type: events.actionBegin, currentFilterObject: currentPred,\n                        currentFilterColumn: column, action: 'clearFilter'\n                    });\n                }\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = filteredColsUid.length; i < len; i++) {\n            var state_1 = _loop_1(i, len);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandlerImmediate = function (e) {\n        if (e.keyCode !== 13) {\n            this.keyUpHandler(e);\n        }\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n            this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n            if (!this.column) {\n                return;\n            }\n            if (e.action === 'altDownArrow' && this.parent.filterSettings.showFilterBarOperator) {\n                var dropDownListInput = closest(target, 'span').querySelector('.e-filterbaroperator');\n                dropDownListInput.ej2_instances[0].showPopup();\n                dropDownListInput.focus();\n            }\n            if ((this.filterSettings.mode === 'Immediate' || (e.keyCode === 13 &&\n                !e.target.classList.contains('e-filterbaroperator')))\n                && e.keyCode !== 9 && !this.column.filterTemplate) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n        if (e.action === 'altDownArrow' && this.filterSettings.type !== 'FilterBar' && !parentsUntil(e.target, 'e-toolbar')\n            && isNullOrUndefined(this.parent.element.querySelector('.e-filter-popup')) && !this.parent.enableAdaptiveUI) {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell') && !element.classList.contains('e-stackedheadercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openMenuByField(column.field);\n                this.parent.focusModule.clearIndicator();\n            }\n        }\n        if (e.action === 'escape' && this.filterSettings.type === 'Menu' && this.filterModule) {\n            if (this.parent.showColumnMenu && this.filterModule.isDialogOpen) {\n                this.parent.isColumnMenuFilterClosing = true;\n            }\n            this.filterModule.closeDialog();\n            gObj.notify(events.restoreFocus, {});\n            if (!this.parent.showColumnMenu) {\n                gObj.notify(events.restoreFocus, {});\n            }\n        }\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            var gObj = this.parent;\n            var getFormatFlValue = void 0;\n            var columns = this.filterSettings.columns;\n            var column = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.grabColumnByUidFromAllCols(columns[parseInt(index.toString(), 10)].uid)\n                        || gObj.grabColumnByFieldFromAllCols(columns[parseInt(index.toString(), 10)]\n                            .field, columns[parseInt(index.toString(), 10)].isForeignKey);\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    if (!isNullOrUndefined(column.format)) {\n                        var flValue = (column.type === 'date' || column.type === 'datetime' || column.type === 'dateonly') ?\n                            this.valueFormatter.fromView(this.values[column.field], column.getParser(), (column.type === 'dateonly' ? 'date' : column.type)) :\n                            this.values[column.field];\n                        if (!(column.type === 'date' || column.type === 'datetime' || column.type === 'dateonly')) {\n                            var formater = this.serviceLocator.getService('valueFormatter');\n                            getFormatFlValue = formater.toView(flValue, column.getParser()).toString();\n                        }\n                        else {\n                            getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n                        }\n                        this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n                    }\n                    else {\n                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                    }\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n                if (this.parent.height === '100%') {\n                    this.parent.scrollModule.refresh();\n                }\n            }\n            //TODO: virtual paging\n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.setFormatForFlColumn = function (value, column) {\n        var formater = this.serviceLocator.getService('valueFormatter');\n        var formatValue = formater.toView(value, column.getFormatter());\n        return isNullOrUndefined(formatValue) ? formatValue : formatValue.toString();\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        if (column.type === 'number') {\n            if (DataUtil.operatorSymbols[\"\" + value] || this.skipNumberInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (this.skipStringInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n        var filterElement = this.element.querySelector(selector);\n        if (!filterElement) {\n            filterElement = this.parent.getHeaderContent().querySelector(selector);\n        }\n        var filterValue;\n        this.cellText[this.column.field] = filterElement.value;\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            if (!isNullOrUndefined(templateRead)) {\n                this.value = templateRead.call(this, filterElement);\n            }\n        }\n        else {\n            filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        }\n        if (isNullOrUndefined(this.value) || this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByMethod = false;\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.filterSettings.enableCaseSensitivity, this.ignoreAccent, this.column.isForeignColumn());\n        this.filterByMethod = true;\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var skipInput;\n        var index;\n        this.matchCase = this.filterSettings.enableCaseSensitivity;\n        switch (this.column.type) {\n            case 'number':\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[parseInt(i.toString(), 10)]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                if (this.value !== '' && !(this.value instanceof Date)) {\n                    this.getOperator(value);\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    if (value.indexOf('*') !== -1 || value.indexOf('?') !== -1 || value.indexOf('%3f') !== -1) {\n                        this.operator = this.filterOperators.wildCard;\n                    }\n                    else if (value.indexOf('%') !== -1) {\n                        this.operator = this.filterOperators.like;\n                    }\n                    else {\n                        this.operator = this.filterOperators.startsWith;\n                    }\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        // eslint-disable-next-line no-prototype-builtins\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[\"\" + singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[\"\" + multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function () {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            return;\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notequal', text: this.l10n.getConstant('NotEqual') },\n            { value: 'isnull', text: this.l10n.getConstant('IsNull') },\n            { value: 'isnotnull', text: this.l10n.getConstant('NotNull') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startswith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endswith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'isempty', text: this.l10n.getConstant('IsEmpty') },\n                { value: 'doesnotstartwith', text: this.l10n.getConstant('NotStartsWith') },\n                { value: 'doesnotendwith', text: this.l10n.getConstant('NotEndsWith') },\n                { value: 'doesnotcontain', text: this.l10n.getConstant('NotContains') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') },\n                { value: 'isnotempty', text: this.l10n.getConstant('IsNotEmpty') },\n                { value: 'like', text: this.l10n.getConstant('Like') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n                { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n                { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n                { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') },\n                { value: 'isnull', text: this.l10n.getConstant('IsNull') },\n                { value: 'isnotnull', text: this.l10n.getConstant('NotNull') }\n            ],\n            datetimeOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n                { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n                { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n                { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') },\n                { value: 'isnull', text: this.l10n.getConstant('IsNull') },\n                { value: 'isnotnull', text: this.l10n.getConstant('NotNull') }\n            ],\n            dateonlyOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n                { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n                { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n                { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') },\n                { value: 'isnull', text: this.l10n.getConstant('IsNull') },\n                { value: 'isnotnull', text: this.l10n.getConstant('NotNull') }\n            ],\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n        if (this.filterSettings.type === 'Menu') {\n            this.customOperators.stringOperator.push({ value: 'in', text: this.l10n.getConstant('In') }, { value: 'notin', text: this.l10n.getConstant('NotIn') });\n            this.customOperators.booleanOperator.push({ value: 'in', text: this.l10n.getConstant('In') }, { value: 'notin', text: this.l10n.getConstant('NotIn') });\n            this.customOperators.numberOperator.push({ value: 'in', text: this.l10n.getConstant('In') }, { value: 'notin', text: this.l10n.getConstant('NotIn') });\n        }\n    };\n    /**\n     * @param {string} field - specifies the field name\n     * @returns {void}\n     * @hidden\n     */\n    Filter.prototype.openMenuByField = function (field) {\n        var gObj = this.parent;\n        if (gObj.enableAdaptiveUI) {\n            this.showCustomFilter(false);\n            return;\n        }\n        var column = gObj.getColumnByField(field);\n        var header = gObj.getColumnHeaderByField(field);\n        var target = header.querySelector('.e-filtermenudiv');\n        if (!target) {\n            return;\n        }\n        var gClient = gObj.element.getBoundingClientRect();\n        var fClient = target.getBoundingClientRect();\n        this.filterDialogOpen(column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n    };\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.openMenuByField(col.field);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            if (parentsUntil(e.target, 'e-filterbarcell') &&\n                e.target.classList.contains('e-input-group-icon')) {\n                var filterOperatorElement = closest(e.target, 'div').\n                    querySelector('.e-filterbaroperator');\n                if (filterOperatorElement) {\n                    filterOperatorElement.focus();\n                }\n                else {\n                    e.target.focus();\n                }\n            }\n            if (e.target.classList.contains('e-list-item')) {\n                var inputId = document.querySelector('.e-popup-open').getAttribute('id').replace('_popup', '');\n                if (inputId.indexOf('grid-column') !== -1) {\n                    closest(document.getElementById(inputId), 'div').querySelector('.e-filtertext').focus();\n                }\n            }\n        }\n        if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            var dialog = parentsUntil(this.parent.element, 'e-dialog');\n            var hasDialog = false;\n            var popupEle = parentsUntil(target, 'e-popup');\n            var filterPopup = document.getElementById(this.parent.element.id + '_e-popup');\n            var hasDialogClosed = this.parent.element.classList.contains('e-device') ?\n                document.querySelector('.e-filter-popup') : filterPopup && filterPopup.querySelector('.e-filter-popup') ?\n                filterPopup.querySelector('.e-filter-popup') : this.parent.element.querySelector('.e-filter-popup');\n            if (dialog && popupEle) {\n                hasDialog = dialog.id === popupEle.id;\n            }\n            if ((this.filterModule && hasDialogClosed && (parentsUntil(target, 'e-excel-ascending') ||\n                parentsUntil(target, 'e-excel-descending')))) {\n                this.filterModule.closeDialog(target);\n            }\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule && !parentsUntil(target, 'e-date-overflow') && (!parentsUntil(target, 'e-popup-wrapper')\n                && (!closest(target, '.e-filter-item.e-menu-item'))) && !datepickerEle\n                && !(parentsUntil(target, 'e-search-wrapper') && !hasDialogClosed)) {\n                if ((hasDialog && (!parentsUntil(target, 'e-filter-popup'))\n                    && (!parentsUntil(target, 'e-popup-flmenu'))) || (!popupEle && hasDialogClosed)) {\n                    this.filterModule.isresetFocus = parentsUntil(target, 'e-grid') &&\n                        parentsUntil(target, 'e-grid').id === this.parent.element.id && !(parentsUntil(target, 'e-search-wrapper')\n                        && hasDialogClosed);\n                    this.filterModule.closeDialog(target);\n                }\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        this.actualPredicate[args.field] = args.actualPredicate;\n        this.actualData = Object.keys(this.actualPredicate);\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        this.checkboxFilterObject = dataManager.dataSource.json;\n        this.checkboxPrevFilterObject = dataManager.executeLocal(query);\n        for (var i = 0; i < this.checkboxPrevFilterObject.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (this.checkboxPrevFilterObject[parseInt(i.toString(), 10)].field ===\n                    this.filterSettings.columns[parseInt(j.toString(), 10)].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        if (this.values[args.field]) {\n            delete this.values[args.field];\n        }\n        var col = this.parent.getColumnByField(args.field);\n        var iconClass = this.parent.showColumnMenu && col.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            args.requestType = 'filtering';\n            this.parent.renderModule.refresh(args); //hot-fix onpropertychanged not working for object { array }\n        }\n        this.parent.dataBind();\n    };\n    Filter.prototype.updateFilter = function () {\n        var cols = this.filterSettings.columns;\n        this.actualPredicate = {};\n        for (var i = 0; i < cols.length; i++) {\n            this.column = this.parent.getColumnByField(cols[parseInt(i.toString(), 10)].field) ||\n                getColumnByForeignKeyValue(cols[parseInt(i.toString(), 10)].field, this.parent.getForeignKeyColumns());\n            var fieldName = cols[parseInt(i.toString(), 10)].field;\n            if (!this.parent.getColumnByField(cols[parseInt(i.toString(), 10)].field)) {\n                fieldName = getColumnByForeignKeyValue(cols[parseInt(i.toString(), 10)].field, this.parent.getForeignKeyColumns()).field;\n            }\n            this.refreshFilterIcon(fieldName, cols[parseInt(i.toString(), 10)].operator, cols[parseInt(i.toString(), 10)].value, cols[parseInt(i.toString(), 10)].type, cols[parseInt(i.toString(), 10)].predicate, cols[parseInt(i.toString(), 10)].matchCase, cols[parseInt(i.toString(), 10)].ignoreAccent, cols[parseInt(i.toString(), 10)].uid);\n        }\n    };\n    Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent, uid) {\n        var obj = {\n            field: fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: operator,\n            value: value,\n            type: type\n        };\n        if (this.actualPredicate[\"\" + fieldName]) {\n            this.actualPredicate[\"\" + fieldName].push(obj);\n        }\n        else {\n            this.actualPredicate[\"\" + fieldName] = [obj];\n        }\n        var field = uid ? this.parent.grabColumnByUidFromAllCols(uid).field : fieldName;\n        this.addFilteredClass(field);\n    };\n    Filter.prototype.addFilteredClass = function (fieldName) {\n        var filterIconElement;\n        var col = this.parent.getColumnByField(fieldName);\n        if (this.parent.showColumnMenu && col.showColumnMenu) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-columnmenu');\n        }\n        else if (col) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n        }\n        if (filterIconElement) {\n            filterIconElement.classList.add('e-filtered');\n        }\n    };\n    /**\n     * @hidden\n     * @returns {FilterUI} returns the FilterUI\n     */\n    Filter.prototype.getFilterUIInfo = function () {\n        return this.filterModule ? this.filterModule.getFilterUIInfo() : {};\n    };\n    /**\n     * @param {string} field - specifies the field name\n     * @returns {string} returns the operator name\n     * @hidden\n     */\n    Filter.prototype.getOperatorName = function (field) {\n        return document.getElementById(this.parent.getColumnByField(field).uid).ej2_instances[0].value;\n    };\n    /**\n     * Renders checkbox items in Menu filter dialog.\n     *\n     * @returns {void}\n     */\n    Filter.prototype.renderCheckboxOnFilterMenu = function () {\n        return this.filterModule.renderCheckBoxMenu();\n    };\n    return Filter;\n}());\nexport { Filter };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}