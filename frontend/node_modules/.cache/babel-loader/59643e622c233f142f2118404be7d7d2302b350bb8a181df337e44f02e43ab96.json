{"ast":null,"code":"import { classList, addClass, removeClass, isNullOrUndefined, Browser, updateCSSText, remove } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses, setChecked, resetDialogAppend, Global, appendChildren, getListHeight, infiniteRemoveElements, infiniteAppendElements, clearReactVueTemplates, getObject } from '../base/util';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\nimport * as literals from '../base/string-literals';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */function () {\n  /**\n   * Constructor for the Grid ColumnChooser module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   * @hidden\n   */\n  function ColumnChooser(parent, serviceLocator) {\n    this.filterColumns = [];\n    this.showColumn = [];\n    this.hideColumn = [];\n    this.changedColumns = [];\n    this.unchangedColumns = [];\n    this.infiniteLoadedElement = [];\n    this.isDlgOpen = false;\n    this.isColumnChooserOpen = false;\n    this.initialOpenDlg = true;\n    this.stateChangeColumns = [];\n    this.changedStateColumns = [];\n    this.isInitialOpen = false;\n    this.isCustomizeOpenCC = false;\n    this.searchOperator = 'startswith';\n    this.itemsCount = 50;\n    this.infiniteSkipCount = 0;\n    this.infiniteColumns = [];\n    this.infiniteInitialLoad = false;\n    this.prevInfiniteScrollDirection = '';\n    this.prevShowedCols = [];\n    this.hideDialogFunction = this.hideDialog.bind(this);\n    this.infiniteRenderMode = false;\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.infiniteRenderMode = this.parent.enableColumnVirtualization ? true : false;\n    this.addEventListener();\n    this.cBoxTrue = createCheckBox(this.parent.createElement, false, {\n      checked: true,\n      label: ' '\n    });\n    this.cBoxFalse = createCheckBox(this.parent.createElement, false, {\n      checked: false,\n      label: ' '\n    });\n    this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden e-cc e-cc-chbox',\n      attrs: {\n        type: 'checkbox'\n      }\n    }), this.cBoxTrue.firstChild);\n    this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden e-cc e-cc-chbox',\n      attrs: {\n        'type': 'checkbox'\n      }\n    }), this.cBoxFalse.firstChild);\n    this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n    if (this.parent.enableRtl) {\n      addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n    }\n    if (this.parent.cssClass) {\n      if (this.parent.cssClass.indexOf(' ') !== -1) {\n        addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n      } else {\n        addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n      }\n    }\n    if (this.parent.enableAdaptiveUI) {\n      this.setFullScreenDialog();\n    }\n  }\n  ColumnChooser.prototype.destroy = function () {\n    var _this = this;\n    var gridElement = this.parent.element;\n    if (!gridElement.querySelector('.' + literals.gridContent) && !gridElement.querySelector('.' + literals.gridHeader) || !gridElement) {\n      return;\n    }\n    this.removeEventListener();\n    this.unWireEvents();\n    this.infiniteLoadedElement = null;\n    this.infiniteDiv = null;\n    if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n      if (this.parent.isReact && this.parent.columnChooserSettings.template) {\n        if (!Global.timer) {\n          Global.timer = setTimeout(function () {\n            if (!isNullOrUndefined(_this.dlgObj) && _this.dlgObj.element && !_this.dlgObj.isDestroyed) {\n              _this.dlgObj.destroy();\n            }\n          }, 0);\n        } else {\n          clearTimeout(Global.timer);\n          Global.timer = null;\n        }\n      } else {\n        this.dlgObj.destroy();\n      }\n      var gridPopup = document.getElementById(this.parent.element.id + '_e-popup');\n      if (!isNullOrUndefined(gridPopup)) {\n        remove(gridPopup);\n        gridPopup = null;\n      }\n    }\n  };\n  ColumnChooser.prototype.setFullScreenDialog = function () {\n    if (this.serviceLocator) {\n      this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isColumnChooser);\n    }\n    if (this.parent.enableAdaptiveUI) {\n      this.parent.on(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv, this);\n      this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n    }\n  };\n  ColumnChooser.prototype.rtlUpdate = function () {\n    if (!isNullOrUndefined(this.innerDiv)) {\n      if (this.parent.enableRtl) {\n        addClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n      } else {\n        removeClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n      }\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    EventHandler.add(document, 'click', this.clickHandler, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n    this.parent.on(events.initialEnd, this.render, this);\n    this.parent.addEventListener(events.dataBound, this.hideDialogFunction);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n    this.parent.on(events.resetColumns, this.onResetColumns, this);\n    this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n    if (this.parent.enableAdaptiveUI) {\n      this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n    }\n    if (this.infiniteRenderMode || this.parent.enableAdaptiveUI) {\n      this.parent.on(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv, this);\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    EventHandler.remove(document, 'click', this.clickHandler);\n    this.parent.off(events.initialEnd, this.render);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n    this.parent.off(events.rtlUpdated, this.rtlUpdate);\n    this.parent.off(events.resetColumns, this.onResetColumns);\n    this.parent.removeEventListener(events.dataBound, this.hideDialogFunction);\n    this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n    if (this.infiniteDiv) {\n      EventHandler.remove(this.infiniteDiv, 'scroll', this.infiniteScrollHandler);\n      EventHandler.remove(this.infiniteDiv, 'mouseup', this.infiniteScrollMouseKeyUpHandler);\n      EventHandler.remove(this.infiniteDiv, 'mousedown', this.infiniteScrollMouseKeyDownHandler);\n    }\n    if (this.parent.enableAdaptiveUI) {\n      this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n      this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n    }\n    if (this.infiniteRenderMode || this.parent.enableAdaptiveUI) {\n      this.parent.off(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv);\n    }\n  };\n  ColumnChooser.prototype.render = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n    if (!this.parent.enableAdaptiveUI) {\n      this.renderDlgContent();\n    }\n    this.getShowHideService = this.serviceLocator.getService('showHideService');\n  };\n  ColumnChooser.prototype.clickHandler = function (e) {\n    var targetElement = e.target;\n    if (!this.isCustomizeOpenCC) {\n      if (!isNullOrUndefined(closest(targetElement, '.e-cc-toolbar')) || !isNullOrUndefined(closest(targetElement, '.e-cc'))) {\n        if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n          if (this.initialOpenDlg && this.dlgObj.visible || !this.isDlgOpen) {\n            this.isDlgOpen = true;\n            return;\n          }\n        } else if (targetElement.classList.contains('e-cc-cancel')) {\n          targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n          this.columnChooserSearch('', false);\n          this.removeCancelIcon();\n          this.refreshCheckboxButton();\n        }\n      } else {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n          this.dlgObj.hide();\n          this.clearActions();\n          this.refreshCheckboxState();\n          // this.unWireEvents();\n          this.isDlgOpen = false;\n        }\n      }\n      if (this.parent.detailTemplate || this.parent.childGrid) {\n        this.targetdlg = e.target;\n      }\n    }\n    if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n      this.refreshCheckboxState();\n    }\n    if (!this.parent.enableAdaptiveUI) {\n      this.rtlUpdate();\n    } else {\n      if (this.parent.enableRtl) {\n        addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n      }\n    }\n  };\n  ColumnChooser.prototype.hideDialog = function () {\n    if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n      if (this.parent.enableAdaptiveUI) {\n        this.responsiveDialogRenderer.hideResponsiveColumnChooser();\n      } else {\n        this.dlgObj.hide();\n        // this.unWireEvents();\n        this.isDlgOpen = false;\n      }\n    }\n  };\n  /**\n   * To render columnChooser when showColumnChooser enabled.\n   *\n   * @param {number} x - specifies the position x\n   * @param {number} y - specifies the position y\n   * @param {Element} target - specifies the target\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n    if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n      this.hideOpenedDialog();\n    }\n    if (!this.dlgObj.visible) {\n      var args = this.beforeOpenColumnChooserEvent();\n      if (args.cancel) {\n        return;\n      }\n      args.columns = null;\n      if (target) {\n        this.targetdlg = target;\n      }\n      if (this.infiniteRenderMode) {\n        this.dlgObj.show();\n      }\n      this.refreshCheckboxState();\n      this.dlgObj.dataBind();\n      this.dlgObj.element.style.maxHeight = '430px';\n      var elementVisible = this.dlgObj.element.style.display;\n      if (!this.parent.columnChooserSettings.enableSearching) {\n        var contentElement = this.dlgObj.element.querySelector('.e-dlg-content');\n        contentElement.style.margin = '0px';\n      }\n      this.dlgObj.element.style.display = 'block';\n      var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n      var toolbarItem = closest(target, '.e-toolbar-item');\n      var newpos = void 0;\n      if (document.getElementById(this.parent.element.id + '_e-popup') && document.getElementById(this.parent.element.id + '_e-popup').querySelector('.e-ccdlg')) {\n        this.parent.element.appendChild(this.dlgObj.element);\n      }\n      if (isSticky) {\n        newpos = toolbarItem.getBoundingClientRect();\n        this.dlgObj.element.classList.add('e-sticky');\n      } else {\n        this.dlgObj.element.classList.remove('e-sticky');\n        newpos = calculateRelativeBasedPosition(toolbarItem, this.dlgObj.element);\n      }\n      this.dlgObj.element.style.display = elementVisible;\n      this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n      var dlgWidth = 250;\n      if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n        this.dlgObj.width = 258;\n      }\n      if (Browser.isDevice) {\n        this.dlgObj.position = {\n          X: 'center',\n          Y: 'center'\n        };\n        this.dlgObj.refreshPosition();\n        this.dlgObj.open = this.mOpenDlg.bind(this);\n      } else {\n        if (this.parent.enableRtl) {\n          this.dlgObj.element.style.left = target.offsetLeft + 'px';\n        } else {\n          this.dlgObj.element.style.left = newpos.left - dlgWidth + closest(target, '.e-cc-toolbar').clientWidth + 2 + 'px';\n        }\n      }\n      this.removeCancelIcon();\n      if (!this.infiniteRenderMode) {\n        this.dlgObj.show();\n      }\n      if (this.parent.getContent().firstElementChild.offsetHeight < this.dlgObj.element.offsetHeight && !this.parent.element.classList.contains('e-drillthrough-grid')) {\n        resetDialogAppend(this.parent, this.dlgObj);\n        if (this.dlgObj.element.querySelector('.e-ccsearch')) {\n          this.dlgObj.element.querySelector('.e-ccsearch').select();\n        }\n      }\n      this.parent.notify(events.columnChooserOpened, {\n        dialog: this.dlgObj\n      });\n    } else {\n      // this.unWireEvents();\n      this.hideDialog();\n      this.addcancelIcon();\n      this.clearActions();\n      this.refreshCheckboxState();\n    }\n    this.rtlUpdate();\n  };\n  /**\n   * Column chooser can be displayed on screen by given position(X and Y axis).\n   *\n   * @param  {number} X - Defines the X axis.\n   * @param  {number} Y - Defines the Y axis.\n   * @return {void}\n   */\n  ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n    this.isCustomizeOpenCC = true;\n    if (this.parent.enableAdaptiveUI) {\n      if (!this.isColumnChooserOpen) {\n        this.parent.showResponsiveCustomColumnChooser();\n        return;\n      }\n      this.isColumnChooserOpen = false;\n      this.renderDlgContent();\n    }\n    if (this.dlgObj.visible) {\n      this.hideDialog();\n      return;\n    }\n    var args = this.beforeOpenColumnChooserEvent();\n    if (args.cancel) {\n      return;\n    }\n    args.columns = null;\n    if (this.infiniteRenderMode) {\n      this.dlgObj.show();\n    }\n    if (!this.isInitialOpen) {\n      this.dlgObj.content = this.renderChooserList();\n      if (!this.parent.columnChooserSettings.template) {\n        this.updateIntermediateBtn();\n      }\n    } else {\n      this.refreshCheckboxState();\n    }\n    this.dlgObj.dataBind();\n    if (this.infiniteRenderMode) {\n      this.refreshCheckboxState();\n    }\n    this.dlgObj.position = {\n      X: 'center',\n      Y: 'center'\n    };\n    if (isNullOrUndefined(X)) {\n      if (this.parent.enableAdaptiveUI) {\n        this.dlgObj.position = {\n          X: '',\n          Y: ''\n        };\n      }\n      this.dlgObj.refreshPosition();\n    } else {\n      this.dlgObj.element.style.top = '';\n      this.dlgObj.element.style.left = '';\n      this.dlgObj.element.style.top = Y + 'px';\n      this.dlgObj.element.style.left = X + 'px';\n    }\n    if (!this.parent.columnChooserSettings.enableSearching) {\n      var contentElement = this.dlgObj.element.querySelector('.e-dlg-content');\n      contentElement.style.margin = '0px';\n    }\n    this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n    if (!this.infiniteRenderMode) {\n      this.dlgObj.show();\n    }\n    if (this.parent.getContent().firstElementChild.offsetHeight < this.dlgObj.element.offsetHeight && !this.parent.element.classList.contains('e-drillthrough-grid')) {\n      resetDialogAppend(this.parent, this.dlgObj);\n    }\n    this.isInitialOpen = true;\n    this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n  };\n  ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      this.render();\n    }\n  };\n  ColumnChooser.prototype.keyUpHandler = function (e) {\n    if (e.key === 'Escape') {\n      this.resetColumnState();\n    }\n    if (e && e.target && !isNullOrUndefined(closest(e.target, '.e-grid-popup'))) {\n      this.parent.trigger('keyPressed', e);\n    }\n    this.setFocus(parentsUntil(e.target, 'e-cclist'));\n  };\n  ColumnChooser.prototype.setFocus = function (elem) {\n    var prevElem = this.dlgDiv.querySelector('.e-colfocus');\n    if (prevElem) {\n      prevElem.classList.remove('e-colfocus');\n    }\n    if (elem) {\n      elem.classList.add('e-colfocus');\n    }\n  };\n  ColumnChooser.prototype.customDialogOpen = function () {\n    var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n    EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n  };\n  ColumnChooser.prototype.customDialogClose = function () {\n    var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n    EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n  };\n  ColumnChooser.prototype.getColumns = function () {\n    var columns = (this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns()).filter(function (column) {\n      return column.type !== 'checkbox' && column.showInColumnChooser === true || column.type === 'checkbox' && column.field !== undefined;\n    });\n    return columns;\n  };\n  ColumnChooser.prototype.renderDlgContent = function () {\n    var isAdaptive = this.parent.enableAdaptiveUI;\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-ccdlg e-cc',\n      id: this.parent.element.id + '_ccdlg'\n    });\n    if (!isAdaptive) {\n      this.parent.element.appendChild(this.dlgDiv);\n    }\n    this.dlgObj = new Dialog({\n      header: this.parent.enableAdaptiveUI ? null : this.renderHeader(),\n      showCloseIcon: false,\n      closeOnEscape: false,\n      locale: this.parent.locale,\n      visible: false,\n      enableRtl: this.parent.enableRtl,\n      target: document.getElementById(this.parent.element.id),\n      content: this.renderChooserList(),\n      width: 250,\n      cssClass: this.parent.cssClass ? 'e-cc' + ' ' + this.parent.cssClass : 'e-cc',\n      animationSettings: {\n        effect: 'None'\n      },\n      footerTemplate: this.parent.enableAdaptiveUI ? null : this.renderFooter()\n    });\n    if (!isAdaptive && (this.infiniteRenderMode || !this.parent.columnChooserSettings.footerTemplate)) {\n      this.dlgObj.buttons = [{\n        click: this.confirmDlgBtnClick.bind(this),\n        buttonModel: {\n          content: this.l10n.getConstant('OKButton'),\n          isPrimary: true,\n          cssClass: this.parent.cssClass ? 'e-cc e-cc_okbtn' + ' ' + this.parent.cssClass : 'e-cc e-cc_okbtn'\n        }\n      }, {\n        click: this.clearBtnClick.bind(this),\n        buttonModel: {\n          cssClass: this.parent.cssClass ? 'e-flat e-cc e-cc-cnbtn' + ' ' + this.parent.cssClass : 'e-flat e-cc e-cc-cnbtn',\n          content: this.l10n.getConstant('CancelButton')\n        }\n      }];\n    }\n    var isStringTemplate = 'isStringTemplate';\n    this.dlgObj[\"\" + isStringTemplate] = true;\n    this.dlgObj.appendTo(this.dlgDiv);\n    if (isAdaptive) {\n      var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n      if (responsiveCnt) {\n        responsiveCnt.appendChild(this.dlgDiv);\n      }\n      this.dlgObj.open = this.mOpenDlg.bind(this);\n      this.dlgObj.target = document.querySelector('.e-rescolumnchooser > .e-dlg-content > .e-mainfilterdiv');\n    }\n    this.wireEvents();\n  };\n  /**\n   * To render the header template for the column chooser.\n   * @returns {HTMLElement | string} This method return HTMLElement or string.\n   * @hidden\n   */\n  ColumnChooser.prototype.renderHeader = function () {\n    var gridInstance = this.parent;\n    if (gridInstance.columnChooserSettings.headerTemplate && !this.infiniteRenderMode) {\n      var templateDiv = this.parent.createElement('div', {\n        className: 'e-columnChooserHeaderTemplate'\n      });\n      var templateID = this.parent.element.id + 'columnChooserHeaderTemplate';\n      if (this.parent.isReact) {\n        this.parent.getColumnChooserHeaderTemplate()(null, this.parent, 'columnChooserHeaderTemplate', templateID, null, null, templateDiv);\n        this.parent.renderTemplates();\n      } else {\n        appendChildren(templateDiv, this.parent.getColumnChooserHeaderTemplate()(null, this.parent, 'columnChooserHeaderTemplate', templateID));\n      }\n      return templateDiv;\n    }\n    return this.l10n.getConstant('ChooseColumns');\n  };\n  /**\n   * To render the footer template for the column chooser.\n   * @returns {HTMLElement | string} This method return HTMLElement or string.\n   */\n  ColumnChooser.prototype.renderFooter = function () {\n    var gridInstance = this.parent;\n    if (gridInstance.columnChooserSettings.footerTemplate && !this.infiniteRenderMode) {\n      var templateDiv = this.parent.createElement('div', {\n        className: 'e-columnChooserFooterTemplate'\n      });\n      var templateID = this.parent.element.id + 'columnChooserFooterTemplate';\n      if (this.parent.isReact) {\n        this.parent.getColumnChooserFooterTemplate()(null, this.parent, 'columnChooserFooterTemplate', templateID, null, null, templateDiv);\n        this.parent.renderTemplates();\n      } else {\n        appendChildren(templateDiv, this.parent.getColumnChooserFooterTemplate()(null, this.parent, 'columnChooserFooterTemplate', templateID));\n      }\n      return templateDiv;\n    }\n    return null;\n  };\n  ColumnChooser.prototype.renderChooserList = function () {\n    this.mainDiv = this.parent.createElement('div', {\n      className: 'e-main-div e-cc'\n    });\n    var searchDiv = this.parent.createElement('div', {\n      className: 'e-cc-searchdiv e-cc e-input-group'\n    });\n    var ccsearchele = this.parent.createElement('input', {\n      className: 'e-ccsearch e-cc e-input',\n      attrs: {\n        placeholder: this.l10n.getConstant('Search'),\n        cssClass: this.parent.cssClass\n      }\n    });\n    var ccsearchicon = this.parent.createElement('span', {\n      className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n      attrs: {\n        title: this.l10n.getConstant('Search')\n      }\n    });\n    var conDiv = this.parent.createElement('div', {\n      className: 'e-cc-contentdiv'\n    });\n    this.innerDiv = this.parent.createElement('div', {\n      className: 'e-innerdiv e-cc'\n    });\n    searchDiv.appendChild(ccsearchele);\n    searchDiv.appendChild(ccsearchicon);\n    this.searchBoxObj = new SearchBox(ccsearchele, this.serviceLocator);\n    var columns = this.getColumns();\n    var showColumns = [];\n    var hideColumns = [];\n    columns.forEach(function (column) {\n      if (column.visible) {\n        showColumns.push(column.headerText);\n      } else {\n        hideColumns.push(column.headerText);\n      }\n    });\n    if (this.infiniteRenderMode && !this.isInitialOpen) {\n      columns = this.parent.columns;\n      for (var i = 0; i < columns.length; i++) {\n        if (columns[parseInt(i.toString(), 10)].showInColumnChooser) {\n          this.infiniteColumns.push(columns[parseInt(i.toString(), 10)]);\n        }\n      }\n    }\n    if (this.parent.columnChooserSettings.template && !this.infiniteRenderMode) {\n      var templateDiv = this.parent.createElement('div', {\n        className: 'e-columnChooserTemplate'\n      });\n      templateDiv.style.cssText = this.parent.enableAdaptiveUI ? 'height: 90%; min-height: 160px; overflow-y: auto;' : 'height: 196px; overflow-y: auto;';\n      var TemplateID = this.parent.element.id + 'columnChooserTemplate';\n      var argsData = {\n        columns: columns,\n        hideColumns: hideColumns,\n        showColumns: showColumns\n      };\n      if (this.parent.isReact) {\n        this.parent.getColumnChooserTemplate()(argsData, this.parent, 'columnChooserTemplate', TemplateID, null, null, templateDiv);\n        this.parent.renderTemplates();\n      } else {\n        appendChildren(templateDiv, this.parent.getColumnChooserTemplate()(argsData, this.parent, 'columnChooserTemplate', TemplateID, null, null, null, this.parent.root));\n      }\n      if (this.parent.columnChooserSettings.renderCustomColumnChooser) {\n        if (typeof this.parent.columnChooserSettings.renderCustomColumnChooser === 'function') {\n          this.parent.columnChooserSettings.renderCustomColumnChooser(templateDiv, columns);\n        } else if (typeof this.parent.columnChooserSettings.renderCustomColumnChooser === 'string') {\n          this.parent.columnChooserSettings.renderCustomColumnChooser = getObject(this.parent.columnChooserSettings.renderCustomColumnChooser, window);\n          this.parent.columnChooserSettings.renderCustomColumnChooser(templateDiv, columns);\n        }\n      }\n      this.mainDiv.appendChild(searchDiv);\n      this.mainDiv.appendChild(templateDiv);\n    } else {\n      var innerDivContent = this.refreshCheckboxList(columns);\n      this.innerDiv.appendChild(innerDivContent);\n      conDiv.appendChild(this.innerDiv);\n      if (this.parent.enableAdaptiveUI) {\n        var searchBoxDiv = this.parent.createElement('div', {\n          className: 'e-cc-searchBox'\n        });\n        searchBoxDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(searchBoxDiv);\n      } else {\n        this.mainDiv.appendChild(searchDiv);\n      }\n      this.mainDiv.appendChild(conDiv);\n    }\n    if (!this.parent.columnChooserSettings.enableSearching) {\n      searchDiv.style.display = 'none';\n    }\n    return this.mainDiv;\n  };\n  ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n    var onActionBeginArgs = {\n      requestType: 'columnVisibilityUpdate',\n      columns: this.getColumns(),\n      cancel: false\n    };\n    this.parent.trigger(events.actionBegin, onActionBeginArgs);\n    if (onActionBeginArgs.cancel) {\n      return;\n    }\n    this.stateChangeColumns = [];\n    this.changedStateColumns = [];\n    var columns = this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns();\n    this.changedColumns = this.changedColumns.length > 0 ? this.changedColumns : this.unchangedColumns;\n    this.changedColumnState(this.changedColumns);\n    var uncheckedLength = this.infiniteRenderMode ? this.infiniteLoadedElement.filter(function (arr) {\n      return arr.querySelector('.e-uncheck');\n    }).length : this.ulElement && this.ulElement.querySelector('.e-uncheck') && this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n    if (!isNullOrUndefined(args)) {\n      if (uncheckedLength < columns.length) {\n        this.changeColumnVisibility({\n          visibleColumns: this.showColumn,\n          hiddenColumns: this.hideColumn\n        }, 'uid');\n        if (this.parent.getCurrentViewRecords().length === 0) {\n          var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n          emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n        }\n      }\n      if (this.parent.enableAdaptiveUI && this.parent.scrollModule) {\n        this.parent.scrollModule.refresh();\n      }\n      if (this.parent.editSettings.showAddNewRow) {\n        this.parent.notify(events.showAddNewRowFocus, {});\n      }\n    }\n    var onActionCompleteArgs = {\n      requestType: 'columnVisibilityUpdate',\n      columns: this.getColumns(),\n      cancel: false\n    };\n    this.parent.trigger(events.actionComplete, onActionCompleteArgs);\n  };\n  /**\n   * Toggles the visibility of specified columns in the grid.\n   * @param {Object} columns - An object specifying the columns to show or hide.\n   * @param {string[]} columns.visibleColumns - An array of column identifiers specifying the columns to show.\n   * @param {string[]} columns.hiddenColumns - An array of column identifiers specifying the columns to hide.\n   * @param {string} columnKey - Defines the column key as a UID, field name, or header text.\n   * @returns {void}\n   * The 'columns' object contains the properties 'visibleColumns' and 'hiddenColumns' as arrays of column identifiers.\n   */\n  ColumnChooser.prototype.changeColumnVisibility = function (columns, columnKey) {\n    columnKey = columnKey ? columnKey : 'headerText';\n    if (columnKey !== 'uid') {\n      if (columns.visibleColumns || columns.hiddenColumns) {\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        var columnChooserColumns = this.getColumns();\n        columns.hiddenColumns = columnChooserColumns.filter(function (column) {\n          return columns.hiddenColumns.indexOf(column[columnKey]) !== -1;\n        }).map(function (column) {\n          return column.uid;\n        });\n        columns.visibleColumns = columnChooserColumns.filter(function (column) {\n          return columns.visibleColumns.indexOf(column[columnKey]) !== -1;\n        }).map(function (column) {\n          return column.uid;\n        });\n      }\n    }\n    if (columns.hiddenColumns.length) {\n      this.columnStateChange(columns.hiddenColumns, false);\n    }\n    if (columns.visibleColumns.length) {\n      this.columnStateChange(columns.visibleColumns, true);\n    }\n    this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n    this.clearActions();\n    this.parent.notify(events.tooltipDestroy, {\n      module: 'edit'\n    });\n  };\n  ColumnChooser.prototype.onResetColumns = function (e) {\n    if (e.requestType === 'columnstate') {\n      this.resetColumnState();\n      return;\n    }\n  };\n  ColumnChooser.prototype.renderResponsiveColumnChooserDiv = function (args) {\n    if (args.action === 'open') {\n      this.isColumnChooserOpen = true;\n      this.openColumnChooser();\n    } else if (args.action === 'clear') {\n      this.clearBtnClick();\n    } else if (args.action === 'confirm') {\n      this.confirmDlgBtnClick(true);\n    }\n  };\n  ColumnChooser.prototype.resetColumnState = function () {\n    this.showColumn = [];\n    this.hideColumn = [];\n    this.changedColumns = [];\n    this.filterColumns = [];\n    this.searchValue = '';\n    if (this.infiniteRenderMode) {\n      var focusListElement = this.dlgDiv.querySelector('.e-cclist.e-cc-selectall.e-colfocus');\n      if (focusListElement) {\n        focusListElement.classList.remove('e-colfocus');\n      }\n    }\n    this.hideDialog();\n  };\n  ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n    for (var index = 0; index < changedColumns.length; index++) {\n      var colUid = changedColumns[parseInt(index.toString(), 10)];\n      var currentColumn = this.parent.getColumnByUid(colUid, this.infiniteRenderMode);\n      this.changedStateColumns.push(currentColumn);\n    }\n  };\n  ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n    for (var index = 0; index < stateColumns.length; index++) {\n      var colUid = stateColumns[parseInt(index.toString(), 10)];\n      var currentColumn = this.parent.getColumnByUid(colUid, this.infiniteRenderMode);\n      if (currentColumn) {\n        if (currentColumn.type !== 'checkbox') {\n          currentColumn.visible = state;\n        }\n        this.stateChangeColumns.push(currentColumn);\n      }\n    }\n  };\n  ColumnChooser.prototype.clearActions = function () {\n    this.resetColumnState();\n    this.addcancelIcon();\n  };\n  ColumnChooser.prototype.clearBtnClick = function () {\n    var onActionBeginArgs = {\n      requestType: 'columnChooserClose',\n      cancel: false\n    };\n    this.parent.trigger(events.actionBegin, onActionBeginArgs);\n    if (onActionBeginArgs.cancel) {\n      return;\n    }\n    this.clearActions();\n    this.parent.notify(events.columnChooserCancelBtnClick, {\n      dialog: this.dlgObj\n    });\n    var onActionCompleteArgs = {\n      requestType: 'columnChooserClose',\n      cancel: false\n    };\n    this.parent.trigger(events.actionComplete, onActionCompleteArgs);\n  };\n  ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n    if (selectAll === void 0) {\n      selectAll = false;\n    }\n    var currentColumn = this.parent.getColumnByUid(coluid, this.infiniteRenderMode);\n    if (isChecked) {\n      if (this.hideColumn.indexOf(coluid) !== -1) {\n        this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n      }\n      if (this.showColumn.indexOf(coluid) === -1 && !(currentColumn && currentColumn.visible)) {\n        this.showColumn.push(coluid);\n      }\n    } else {\n      if (this.showColumn.indexOf(coluid) !== -1) {\n        this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n      }\n      if (this.hideColumn.indexOf(coluid) === -1 && currentColumn && currentColumn.visible) {\n        this.hideColumn.push(coluid);\n      }\n    }\n    if (selectAll) {\n      if (!isChecked) {\n        this.changedColumns.push(coluid);\n      } else {\n        this.unchangedColumns.push(coluid);\n      }\n    } else if (this.changedColumns.indexOf(coluid) !== -1) {\n      this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n    } else {\n      this.changedColumns.push(coluid);\n    }\n  };\n  ColumnChooser.prototype.columnChooserSearch = function (searchVal, check) {\n    if (check) {\n      var onActionBeginArgs = {\n        requestType: 'columnChooserSearch',\n        columns: this.getColumns(),\n        cancel: false\n      };\n      this.parent.trigger(events.actionBegin, onActionBeginArgs);\n      if (onActionBeginArgs.cancel) {\n        return;\n      }\n    }\n    var clearSearch = false;\n    var okButton;\n    var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n    var selectedCheckbox = this.ulElement && this.ulElement.querySelector('.e-check') && this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n    if (this.infiniteRenderMode) {\n      selectedCheckbox = this.infiniteLoadedElement.filter(function (arr) {\n        return arr.querySelector('.e-check');\n      }).length;\n    }\n    this.isInitialOpen = true;\n    if (buttonEle && buttonEle.querySelector('.e-btn')) {\n      okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n    }\n    if (searchVal === '') {\n      this.removeCancelIcon();\n      this.filterColumns = this.getColumns();\n      clearSearch = true;\n    } else {\n      this.filterColumns = new DataManager(this.getColumns()).executeLocal(new Query().where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n    }\n    if (this.infiniteRenderMode) {\n      this.updateIfiniteSelectAll();\n    }\n    if (this.parent.columnChooserSettings.template && !this.infiniteRenderMode) {\n      var TemplateElement = void 0;\n      var isReactCompiler = this.parent.isReact;\n      if (isReactCompiler) {\n        clearReactVueTemplates(this.parent, ['columnChooserTemplate']);\n        TemplateElement = this.mainDiv.querySelector('.e-columnChooserTemplate');\n      } else {\n        this.mainDiv.querySelector('.e-columnChooserTemplate').remove();\n        TemplateElement = this.parent.createElement('div', {\n          className: 'e-columnChooserTemplate'\n        });\n        TemplateElement.style.cssText = this.parent.enableAdaptiveUI ? 'height: 90%; min-height: 160px; overflow-y: auto;' : 'height: 196px; overflow-y: auto;';\n      }\n      var TemplateID = this.parent.element.id + 'columnChooserTemplate';\n      var chooserColumns = this.filterColumns;\n      var searchedValue = searchVal;\n      var showColumns_1 = [];\n      var hideColumns_1 = [];\n      chooserColumns.forEach(function (column) {\n        if (column.visible) {\n          showColumns_1.push(column.headerText);\n        } else {\n          hideColumns_1.push(column.headerText);\n        }\n      });\n      var argsData = {\n        columns: chooserColumns,\n        hideColumns: hideColumns_1,\n        showColumns: showColumns_1,\n        searchValue: searchedValue\n      };\n      if (isReactCompiler) {\n        this.parent.getColumnChooserTemplate()(argsData, this.parent, 'columnChooserTemplate', TemplateID, null, null, TemplateElement);\n        this.parent.renderTemplates();\n      } else {\n        appendChildren(TemplateElement, this.parent.getColumnChooserTemplate()(argsData, this.parent, 'columnChooserTemplate', TemplateID, null, null, null, this.parent.root));\n      }\n      if (this.parent.columnChooserSettings.renderCustomColumnChooser) {\n        if (typeof this.parent.columnChooserSettings.renderCustomColumnChooser === 'function') {\n          this.parent.columnChooserSettings.renderCustomColumnChooser(TemplateElement, this.filterColumns);\n        } else if (typeof this.parent.columnChooserSettings.renderCustomColumnChooser === 'string') {\n          this.parent.columnChooserSettings.renderCustomColumnChooser = getObject(this.parent.columnChooserSettings.renderCustomColumnChooser, window);\n          this.parent.columnChooserSettings.renderCustomColumnChooser(TemplateElement, this.filterColumns);\n        }\n      }\n      this.mainDiv.appendChild(TemplateElement);\n    } else if (this.filterColumns.length) {\n      this.innerDiv.innerHTML = ' ';\n      this.innerDiv.classList.remove('e-ccnmdiv');\n      this.infiniteInitialLoad = true;\n      this.infiniteLoadedElement = [];\n      this.innerDiv.appendChild(this.refreshCheckboxList(this.filterColumns));\n      if (this.infiniteRenderMode) {\n        this.mainDiv.querySelector('.e-ccheck .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n        this.updateIntermediateBtn();\n      }\n      if (!clearSearch) {\n        this.addcancelIcon();\n        this.refreshCheckboxButton();\n      } else {\n        if (okButton && selectedCheckbox) {\n          okButton.disabled = false;\n        }\n        if (selectedCheckbox && this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n          this.parent.notify(events.refreshCustomFilterOkBtn, {\n            disabled: false\n          });\n        }\n      }\n    } else {\n      var nMatchele = this.parent.createElement('span', {\n        className: 'e-cc e-nmatch'\n      });\n      nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n      this.innerDiv.innerHTML = ' ';\n      if (this.infiniteRenderMode) {\n        removeClass([this.mainDiv.querySelector('.e-frame.e-selectall')], ['e-check', 'e-stop', 'e-uncheck']);\n        this.mainDiv.querySelector('.e-ccheck .e-selectall').parentElement.classList.add('e-checkbox-disabled');\n      }\n      this.innerDiv.appendChild(nMatchele);\n      this.innerDiv.classList.add('e-ccnmdiv');\n      if (okButton) {\n        okButton.disabled = true;\n      }\n      if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n        this.parent.notify(events.refreshCustomFilterOkBtn, {\n          disabled: true\n        });\n      }\n    }\n    this.flag = true;\n    this.stopTimer();\n    if (check) {\n      var onActionCompleteArgs = {\n        requestType: 'columnChooserSearch',\n        columns: this.getColumns(),\n        cancel: false\n      };\n      this.parent.trigger(events.actionComplete, onActionCompleteArgs);\n    }\n  };\n  ColumnChooser.prototype.updateIfiniteSelectAll = function () {\n    this.changedColumns = [];\n    this.hideColumn = [];\n    this.showColumn = [];\n    var unCheckItem = this.infiniteLoadedElement.filter(function (arr) {\n      return arr.querySelector('.e-uncheck');\n    });\n    for (var i = 0; i < unCheckItem.length; i++) {\n      this.checkState(unCheckItem[parseInt(i.toString(), 10)].querySelector('.e-frame'), true);\n    }\n  };\n  ColumnChooser.prototype.wireEvents = function () {\n    EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n    EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n    EventHandler.add(this.dlgObj.element, 'keyup', this.keyUpHandler, this);\n    this.searchBoxObj.wireEvent();\n  };\n  ColumnChooser.prototype.unWireEvents = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    if (this.dlgObj && this.dlgObj.element) {\n      EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n      EventHandler.remove(this.dlgObj.element, 'keyup', this.keyUpHandler);\n    }\n    if (this.searchBoxObj) {\n      EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n      this.searchBoxObj.unWireEvent();\n    }\n  };\n  ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n    if (this.parent.columnChooserSettings.template && !this.infiniteRenderMode) {\n      return;\n    }\n    var checkstate;\n    var selectAllElement = parentsUntil(e.target, 'e-checkbox-wrapper');\n    var columns = this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns();\n    if (selectAllElement) {\n      var selectAll = selectAllElement.querySelector('.e-selectall');\n      if (selectAll) {\n        this.updateSelectAll(!selectAllElement.querySelector('.e-check'));\n      } else {\n        toogleCheckbox(selectAllElement.parentElement);\n      }\n      selectAllElement.querySelector('.e-chk-hidden').focus();\n      if (selectAllElement.querySelector('.e-check')) {\n        checkstate = true;\n      } else if (selectAllElement.querySelector('.e-uncheck')) {\n        checkstate = false;\n      }\n      if (!this.infiniteRenderMode) {\n        this.updateIntermediateBtn();\n      }\n      var columnUid = parentsUntil(selectAllElement, 'e-ccheck').getAttribute('uid');\n      var column = this.searchValue && this.searchValue.length ? this.filterColumns : columns;\n      if (columnUid === this.parent.element.id + '-selectAll') {\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        for (var i = 0; i < column.length; i++) {\n          if (column[parseInt(i.toString(), 10)].showInColumnChooser) {\n            this.checkstatecolumn(checkstate, column[parseInt(i.toString(), 10)].uid, true);\n          }\n        }\n      } else {\n        this.checkstatecolumn(checkstate, columnUid);\n      }\n      var isSelectAll = this.infiniteRenderMode && selectAllElement.querySelector('.e-selectall') && selectAllElement.querySelector('.e-uncheck') ? true : false;\n      if (!this.parent.columnChooserSettings.footerTemplate) {\n        this.refreshCheckboxButton(isSelectAll);\n      }\n      this.setFocus(parentsUntil(e.target, 'e-cclist'));\n      if (this.infiniteRenderMode) {\n        this.updateIntermediateBtn();\n      }\n    }\n  };\n  ColumnChooser.prototype.updateIntermediateBtn = function () {\n    var count = this.infiniteRenderMode ? this.infiniteLoadedElement.length : this.ulElement.children.length - 1;\n    var className = [];\n    var hideColumnsCount = 0;\n    var showColumnsCount = 0;\n    (this.searchValue && this.searchValue.length ? this.filterColumns : this.infiniteColumns).filter(function (column) {\n      if (column.visible === false) {\n        hideColumnsCount++;\n      } else {\n        showColumnsCount++;\n      }\n    });\n    var selectAllElement = (this.infiniteRenderMode && this.mainDiv.querySelector('.e-cc-selectall') ? this.mainDiv.querySelector('.e-cc-selectall') : this.ulElement.children[0]).querySelector('.e-frame');\n    var selected = this.infiniteRenderMode ? this.infiniteLoadedElement.filter(function (arr) {\n      return arr.querySelector('.e-check');\n    }).length : this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n    var btn;\n    if (!this.parent.enableAdaptiveUI && !this.parent.columnChooserSettings.footerTemplate) {\n      btn = this.dlgObj.btnObj[0];\n      btn.disabled = false;\n    } else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n      this.parent.notify(events.refreshCustomFilterOkBtn, {\n        disabled: false\n      });\n    }\n    var inputElem = selectAllElement.parentElement.querySelector('input');\n    if (count === selected && (!this.infiniteRenderMode || this.infiniteRenderMode && hideColumnsCount === this.showColumn.length)) {\n      className = ['e-check'];\n      setChecked(inputElem, true);\n    } else if (selected || this.infiniteRenderMode && !selected && showColumnsCount !== this.hideColumn.length) {\n      className = ['e-stop'];\n      inputElem.indeterminate = true;\n    } else {\n      className = ['e-uncheck'];\n      setChecked(inputElem, false);\n      if (btn && !this.parent.enableAdaptiveUI) {\n        btn.disabled = true;\n      } else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n        this.parent.notify(events.refreshCustomFilterOkBtn, {\n          disabled: true\n        });\n      }\n    }\n    if (btn && !this.parent.enableAdaptiveUI) {\n      btn.dataBind();\n    }\n    removeClass([selectAllElement], ['e-check', 'e-stop', 'e-uncheck']);\n    addClass([selectAllElement], className);\n  };\n  ColumnChooser.prototype.updateSelectAll = function (checked) {\n    var checkBoxItems = [].slice.call(this.ulElement.getElementsByClassName('e-frame'));\n    if (this.infiniteRenderMode) {\n      checkBoxItems = [];\n      this.infiniteLoadedElement.map(function (arr) {\n        return checkBoxItems.push(arr.querySelector('.e-frame'));\n      });\n      checkBoxItems.unshift(this.mainDiv.querySelector('.e-cc-selectall').querySelector('.e-frame'));\n    }\n    for (var _i = 0, checkBoxItems_1 = checkBoxItems; _i < checkBoxItems_1.length; _i++) {\n      var checkBoxItem = checkBoxItems_1[_i];\n      removeAddCboxClasses(checkBoxItem, checked);\n      var cBoxInput = checkBoxItem.parentElement.querySelector('input');\n      if (checkBoxItem.classList.contains('e-check')) {\n        setChecked(cBoxInput, true);\n      } else if (checkBoxItem.classList.contains('e-uncheck')) {\n        setChecked(cBoxInput, false);\n      }\n    }\n  };\n  ColumnChooser.prototype.refreshCheckboxButton = function (checkstate) {\n    var visibleCols = this.parent.getVisibleColumns();\n    for (var i = 0; i < visibleCols.length; i++) {\n      var columnUID = visibleCols[parseInt(i.toString(), 10)].uid;\n      if (this.prevShowedCols.indexOf(columnUID) === -1 && visibleCols[parseInt(i.toString(), 10)].type !== 'checkbox') {\n        this.prevShowedCols.push(columnUID);\n      }\n    }\n    for (var i = 0; i < this.hideColumn.length; i++) {\n      var index = this.prevShowedCols.indexOf(this.hideColumn[parseInt(i.toString(), 10)]);\n      if (index !== -1) {\n        this.prevShowedCols.splice(index, 1);\n      }\n    }\n    var selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n    if (this.infiniteRenderMode) {\n      selected = this.infiniteLoadedElement.filter(function (arr) {\n        return arr.querySelector('.e-uncheck');\n      }).length;\n    }\n    var btn;\n    if (!this.parent.enableAdaptiveUI) {\n      btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n      btn.disabled = false;\n    } else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n      this.parent.notify(events.refreshCustomFilterOkBtn, {\n        disabled: false\n      });\n    }\n    var sreachShowColumns = [];\n    var searchData = [].slice.call(document.getElementsByClassName('e-cc-chbox'));\n    for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n      var element = searchData[parseInt(i.toString(), 10)];\n      if (this.infiniteRenderMode && element.classList.contains('e-selectall')) {\n        continue;\n      }\n      var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n      sreachShowColumns.push(columnUID);\n    }\n    var hideColumns = this.showColumn.filter(function (column) {\n      return sreachShowColumns.indexOf(column) !== -1;\n    });\n    if (this.infiniteRenderMode && (checkstate || sreachShowColumns.length === selected) || !this.infiniteRenderMode && selected === 0 && hideColumns.length === 0) {\n      if (!this.parent.enableAdaptiveUI) {\n        btn.disabled = true;\n      } else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n        this.parent.notify(events.refreshCustomFilterOkBtn, {\n          disabled: true\n        });\n      }\n    }\n    if (!this.parent.enableAdaptiveUI) {\n      btn.dataBind();\n    }\n  };\n  ColumnChooser.prototype.refreshCheckboxList = function (chooserColumns) {\n    this.ulElement = this.parent.createElement('ul', {\n      className: 'e-ccul-ele e-cc'\n    });\n    var selectAllValue = this.l10n.getConstant('SelectAll');\n    var columnChooserList = this.parent.createElement('li', {\n      className: 'e-cclist e-cc e-cc-selectall'\n    });\n    updateCSSText(columnChooserList, this.infiniteRenderMode ? 'list-style: None;' : '');\n    var selectAll = this.createCheckBox(selectAllValue, false, this.parent.element.id + '-selectAll');\n    if (chooserColumns.length) {\n      selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n      selectAll.querySelector('.e-frame').classList.add('e-selectall');\n      this.checkState(selectAll.querySelector('.e-icons'), true);\n      columnChooserList.appendChild(selectAll);\n      if (this.infiniteRenderMode) {\n        if (this.mainDiv.querySelector('.e-cc-contentdiv') && !this.mainDiv.querySelector('.e-cc-selectall')) {\n          this.infiniteDiv = this.mainDiv.querySelector('.e-cc-contentdiv');\n          this.mainDiv.insertBefore(columnChooserList, this.infiniteDiv);\n          this.infiniteDiv.classList.add('e-checkbox-infinitescroll');\n          EventHandler.add(this.infiniteDiv, 'scroll', this.infiniteScrollHandler, this);\n          EventHandler.add(this.infiniteDiv, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n          EventHandler.add(this.infiniteDiv, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n        }\n      } else {\n        this.ulElement.appendChild(columnChooserList);\n      }\n    }\n    if (this.parent.cssClass) {\n      if (this.parent.cssClass.indexOf(' ') !== -1) {\n        addClass([selectAll], this.parent.cssClass.split(' '));\n      } else {\n        addClass([selectAll], [this.parent.cssClass]);\n      }\n    }\n    if (this.infiniteRenderMode && chooserColumns.length > this.itemsCount * 3) {\n      this.infiniteSkipCount = this.itemsCount * 2;\n    }\n    this.renderCheckbox(chooserColumns.slice(0, this.infiniteRenderMode ? this.itemsCount * 3 : chooserColumns.length));\n    return this.ulElement;\n  };\n  ColumnChooser.prototype.infiniteScrollMouseKeyDownHandler = function () {\n    EventHandler.remove(this.infiniteDiv, 'scroll', this.infiniteScrollHandler);\n  };\n  ColumnChooser.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n    var _this = this;\n    EventHandler.add(this.infiniteDiv, 'scroll', this.infiniteScrollHandler, this);\n    var target = this.infiniteDiv;\n    if (this.ulElement.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight || target.scrollTop <= 0)) {\n      this.infiniteScrollHandler();\n    }\n    Global.timer = setTimeout(function () {\n      _this.clickHandler(e);\n      Global.timer = null;\n    }, 0);\n  };\n  ColumnChooser.prototype.infiniteScrollHandler = function () {\n    var target = this.infiniteDiv;\n    var columns = this.searchValue && this.searchValue.length ? this.filterColumns : this.infiniteColumns;\n    if (target.scrollTop >= target.scrollHeight - target.offsetHeight && this.infiniteLoadedElement.length <= this.infiniteSkipCount + this.itemsCount && this.ulElement.children.length === this.itemsCount * 3 && (!columns.length || columns.length > this.infiniteSkipCount + this.itemsCount)) {\n      var diffcount = columns.length - (this.infiniteSkipCount + this.itemsCount);\n      var count = 0;\n      if (diffcount < this.itemsCount) {\n        count = diffcount;\n      }\n      infiniteRemoveElements([].slice.call(this.ulElement.children).splice(0, this.itemsCount));\n      this.infiniteInitialLoad = true;\n      this.infiniteSkipCount += this.itemsCount;\n      this.renderCheckbox(columns.slice(this.infiniteSkipCount, this.infiniteSkipCount + (count + this.itemsCount)));\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && this.infiniteLoadedElement.length > this.infiniteSkipCount + this.itemsCount && this.ulElement.children.length === this.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.ulElement.children).splice(0, this.itemsCount));\n      this.infiniteSkipCount += this.prevInfiniteScrollDirection === 'down' ? this.itemsCount : this.itemsCount * 3;\n      appendChildren(this.ulElement, this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.itemsCount + this.infiniteSkipCount));\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && this.infiniteSkipCount && this.infiniteLoadedElement.length && this.infiniteLoadedElement.length > this.itemsCount * 3 && this.ulElement.children.length === this.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.ulElement.children).splice(this.itemsCount * 2, this.itemsCount));\n      this.infiniteSkipCount -= this.prevInfiniteScrollDirection === 'up' ? this.itemsCount : this.itemsCount * 3;\n      infiniteAppendElements([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.infiniteSkipCount + this.itemsCount)), this.ulElement);\n      this.prevInfiniteScrollDirection = 'up';\n      this.infiniteDiv.scrollTop = this.infiniteScrollAppendDiff;\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && this.infiniteSkipCount && this.infiniteSkipCount > this.itemsCount * 2 && this.infiniteLoadedElement.length && this.ulElement.children.length < this.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.ulElement.children).splice(this.itemsCount * 2, columns.length % this.itemsCount));\n      this.infiniteSkipCount = (Math.floor(columns.length / this.itemsCount) - 3) * this.itemsCount;\n      infiniteAppendElements([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.infiniteSkipCount + this.itemsCount)), this.ulElement);\n      this.infiniteDiv.scrollTop = this.infiniteScrollAppendDiff;\n      this.prevInfiniteScrollDirection = 'up';\n    }\n  };\n  ColumnChooser.prototype.refreshCheckboxState = function () {\n    if (!this.parent.columnChooserSettings.enableSearching) {\n      return;\n    }\n    this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n    this.columnChooserSearch('', false);\n    var gridObject = this.parent;\n    var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n    for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n      var element = currentCheckBoxColls[parseInt(i.toString(), 10)];\n      var columnUID = void 0;\n      if (this.parent.childGrid || this.parent.detailTemplate) {\n        columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[parseInt(i.toString(), 10)], 'e-ccheck').getAttribute('uid');\n      } else {\n        columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n      }\n      var column = gridObject.getColumnByUid(columnUID, this.infiniteRenderMode);\n      var uncheck = [].slice.call(element.parentElement.getElementsByClassName('e-uncheck'));\n      if (column.visible && !uncheck.length) {\n        element.checked = true;\n        this.checkState(element.parentElement.querySelector('.e-icons'), true);\n      } else {\n        element.checked = false;\n        this.checkState(element.parentElement.querySelector('.e-icons'), false);\n      }\n    }\n  };\n  ColumnChooser.prototype.checkState = function (element, state) {\n    if (state) {\n      classList(element, ['e-check'], ['e-uncheck']);\n    } else {\n      classList(element, ['e-uncheck'], ['e-check']);\n    }\n  };\n  ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n    var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n    if (!this.parent.enableAdaptiveUI && this.parent.enableRtl && !cbox.classList.contains('e-rtl')) {\n      cbox.classList.add('e-rtl');\n    }\n    var cboxLabel = cbox.querySelector('.e-label');\n    var inputcbox = cbox.querySelector('input');\n    setChecked(inputcbox, checked);\n    cboxLabel.setAttribute('id', uid + 'label');\n    cboxLabel.innerHTML = label;\n    inputcbox.setAttribute('aria-labelledby', cboxLabel.id);\n    return createCboxWithWrap(uid, cbox, 'e-ccheck');\n  };\n  ColumnChooser.prototype.renderCheckbox = function (columns) {\n    var _a;\n    var checkBoxItems = this.parent.createElement('div');\n    var offsetHeight = this.ulElement.offsetHeight;\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[parseInt(i.toString(), 10)];\n      if (column.showInColumnChooser) {\n        var columnChooserList = this.parent.createElement('li', {\n          className: 'e-cclist e-cc',\n          id: 'e-ccli_' + column.uid\n        });\n        columnChooserList.style.listStyle = 'none';\n        var hideColumnState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n        var showColumnState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n        var columnchooserccheckboxlist = this.createCheckBox(column.headerText, column.visible && !hideColumnState || showColumnState, column.uid);\n        columnChooserList.appendChild(columnchooserccheckboxlist);\n        if (this.parent.cssClass) {\n          if (this.parent.cssClass.indexOf(' ') !== -1) {\n            addClass([columnchooserccheckboxlist], this.parent.cssClass.split(' '));\n          } else {\n            addClass([columnchooserccheckboxlist], [this.parent.cssClass]);\n          }\n        }\n        if (this.infiniteRenderMode && this.infiniteDiv) {\n          columnChooserList.style.height = getListHeight(this.infiniteDiv, true) + 'px';\n        }\n        checkBoxItems.appendChild(columnChooserList);\n      }\n    }\n    if (this.infiniteRenderMode && this.infiniteInitialLoad) {\n      (_a = this.infiniteLoadedElement).push.apply(_a, [].slice.call(checkBoxItems.children));\n      this.infiniteInitialLoad = false;\n    }\n    appendChildren(this.ulElement, [].slice.call(checkBoxItems.children));\n    if (this.infiniteRenderMode && !this.infiniteScrollAppendDiff) {\n      this.infiniteScrollAppendDiff = this.ulElement.offsetHeight - offsetHeight;\n    }\n    if (this.isInitialOpen) {\n      this.updateIntermediateBtn();\n    }\n  };\n  ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n    this.addcancelIcon();\n    this.searchValue = e.target.value;\n    this.stopTimer();\n    this.startTimer(e);\n  };\n  ColumnChooser.prototype.startTimer = function (e) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var proxy = this;\n    var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n    this.timer = window.setInterval(function () {\n      proxy.columnChooserSearch(proxy.searchValue, true);\n    }, interval);\n  };\n  ColumnChooser.prototype.stopTimer = function () {\n    window.clearInterval(this.timer);\n  };\n  ColumnChooser.prototype.addcancelIcon = function () {\n    if (this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon')) {\n      this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n      this.dlgDiv.querySelector('.e-cc-cancel').setAttribute('title', this.l10n.getConstant('Clear'));\n    }\n  };\n  ColumnChooser.prototype.removeCancelIcon = function () {\n    if (this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon')) {\n      this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n      this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').setAttribute('title', this.l10n.getConstant('Search'));\n    }\n  };\n  ColumnChooser.prototype.mOpenDlg = function () {\n    if (Browser.isDevice) {\n      if (this.dlgObj.element.querySelector('.e-cc-searchdiv')) {\n        this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n      }\n      if (this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0]) {\n        this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n      }\n    }\n    if (this.parent.enableAdaptiveUI) {\n      if (this.dlgObj.element.querySelector('.e-cc-searchdiv')) {\n        this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.add('e-input-focus');\n      }\n    }\n  };\n  // internally use\n  ColumnChooser.prototype.getModuleName = function () {\n    return 'columnChooser';\n  };\n  ColumnChooser.prototype.hideOpenedDialog = function () {\n    var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n      return dlgEle.classList.contains('e-popup-open');\n    });\n    for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n      if (this.parent.element.id + '_ccdlg' !== openCC[parseInt(i.toString(), 10)].id || openCC[parseInt(i.toString(), 10)].classList.contains('e-dialog')) {\n        openCC[parseInt(i.toString(), 10)].ej2_instances[0].hide();\n      }\n    }\n  };\n  ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n    var args1 = {\n      requestType: 'beforeOpenColumnChooser',\n      element: this.parent.element,\n      columns: this.getColumns(),\n      cancel: false,\n      searchOperator: this.parent.columnChooserSettings.operator\n    };\n    this.parent.trigger(events.beforeOpenColumnChooser, args1);\n    this.searchOperator = args1.searchOperator;\n    return args1;\n  };\n  ColumnChooser.prototype.renderResponsiveChangeAction = function (args) {\n    this.responsiveDialogRenderer.action = args.action;\n  };\n  /**\n   * To show the responsive custom sort dialog\n   *\n   * @param {boolean} enable - specifes dialog open\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.showCustomColumnChooser = function (enable) {\n    this.responsiveDialogRenderer.isCustomDialog = enable;\n    this.responsiveDialogRenderer.showResponsiveDialog();\n  };\n  return ColumnChooser;\n}();\nexport { ColumnChooser };","map":{"version":3,"names":["classList","addClass","removeClass","isNullOrUndefined","Browser","updateCSSText","remove","Query","DataManager","EventHandler","closest","events","Dialog","calculateRelativeBasedPosition","createCboxWithWrap","toogleCheckbox","parentsUntil","removeAddCboxClasses","setChecked","resetDialogAppend","Global","appendChildren","getListHeight","infiniteRemoveElements","infiniteAppendElements","clearReactVueTemplates","getObject","ResponsiveDialogAction","createCheckBox","SearchBox","literals","ColumnChooser","parent","serviceLocator","filterColumns","showColumn","hideColumn","changedColumns","unchangedColumns","infiniteLoadedElement","isDlgOpen","isColumnChooserOpen","initialOpenDlg","stateChangeColumns","changedStateColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","itemsCount","infiniteSkipCount","infiniteColumns","infiniteInitialLoad","prevInfiniteScrollDirection","prevShowedCols","hideDialogFunction","hideDialog","bind","infiniteRenderMode","enableColumnVirtualization","addEventListener","cBoxTrue","createElement","checked","label","cBoxFalse","insertBefore","className","attrs","type","firstChild","querySelector","add","enableRtl","cssClass","indexOf","split","enableAdaptiveUI","setFullScreenDialog","prototype","destroy","_this","gridElement","element","gridContent","gridHeader","removeEventListener","unWireEvents","infiniteDiv","dlgObj","isDestroyed","isReact","columnChooserSettings","template","timer","setTimeout","clearTimeout","gridPopup","document","getElementById","id","registerAdaptiveService","isColumnChooser","on","renderResponsiveColumnChooserDiv","renderResponsiveChangeAction","rtlUpdate","innerDiv","slice","call","getElementsByClassName","clickHandler","uiUpdate","enableAfterRenderEle","initialEnd","render","dataBound","rtlUpdated","resetColumns","onResetColumns","off","infiniteScrollHandler","infiniteScrollMouseKeyUpHandler","infiniteScrollMouseKeyDownHandler","l10n","getService","renderDlgContent","getShowHideService","e","targetElement","target","contains","visible","parentElement","value","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","hide","clearActions","refreshCheckboxState","detailTemplate","childGrid","targetdlg","responsiveDialogRenderer","hideResponsiveColumnChooser","renderColumnChooser","x","y","hideOpenedDialog","args","beforeOpenColumnChooserEvent","cancel","columns","show","dataBind","style","maxHeight","elementVisible","display","enableSearching","contentElement","margin","isSticky","getHeaderContent","toolbarItem","newpos","appendChild","getBoundingClientRect","top","height","dlgWidth","width","isDevice","position","X","Y","refreshPosition","open","mOpenDlg","left","offsetLeft","clientWidth","getContent","firstElementChild","offsetHeight","select","notify","columnChooserOpened","dialog","addcancelIcon","openColumnChooser","showResponsiveCustomColumnChooser","content","renderChooserList","updateIntermediateBtn","beforeOpen","customDialogOpen","beforeClose","customDialogClose","module","getModuleName","enable","keyUpHandler","key","resetColumnState","trigger","setFocus","elem","prevElem","dlgDiv","searchElement","columnChooserManualSearch","getColumns","filter","column","showInColumnChooser","field","undefined","isAdaptive","header","renderHeader","showCloseIcon","closeOnEscape","locale","animationSettings","effect","footerTemplate","renderFooter","buttons","click","confirmDlgBtnClick","buttonModel","getConstant","isPrimary","clearBtnClick","isStringTemplate","appendTo","responsiveCnt","wireEvents","gridInstance","headerTemplate","templateDiv","templateID","getColumnChooserHeaderTemplate","renderTemplates","getColumnChooserFooterTemplate","mainDiv","searchDiv","ccsearchele","placeholder","ccsearchicon","title","conDiv","searchBoxObj","showColumns","hideColumns","forEach","push","headerText","i","length","parseInt","toString","cssText","TemplateID","argsData","getColumnChooserTemplate","root","renderCustomColumnChooser","window","innerDivContent","refreshCheckboxList","searchBoxDiv","onActionBeginArgs","requestType","actionBegin","changedColumnState","uncheckedLength","arr","ulElement","querySelectorAll","changeColumnVisibility","visibleColumns","hiddenColumns","getCurrentViewRecords","emptyRowCell","setAttribute","getVisibleColumns","scrollModule","refresh","editSettings","showAddNewRow","showAddNewRowFocus","onActionCompleteArgs","actionComplete","columnKey","columnChooserColumns","map","uid","columnStateChange","setVisible","tooltipDestroy","action","searchValue","focusListElement","index","colUid","currentColumn","getColumnByUid","stateColumns","state","columnChooserCancelBtnClick","checkstatecolumn","isChecked","coluid","selectAll","splice","searchVal","check","clearSearch","okButton","buttonEle","selectedCheckbox","ej2_instances","executeLocal","where","ignoreAccent","updateIfiniteSelectAll","TemplateElement","isReactCompiler","chooserColumns","searchedValue","showColumns_1","hideColumns_1","innerHTML","disabled","refreshCustomFilterOkBtn","nMatchele","flag","stopTimer","unCheckItem","checkState","checkBoxClickHandler","searchBox","wireEvent","unWireEvent","checkstate","selectAllElement","updateSelectAll","focus","columnUid","getAttribute","isSelectAll","count","children","hideColumnsCount","showColumnsCount","selected","btn","btnObj","inputElem","indeterminate","checkBoxItems","unshift","_i","checkBoxItems_1","checkBoxItem","cBoxInput","visibleCols","columnUID","sreachShowColumns","searchData","itemsLen","selectAllValue","columnChooserList","renderCheckbox","scrollTop","scrollHeight","diffcount","infiniteScrollAppendDiff","Math","floor","gridObject","currentCheckBoxColls","itemLen","uncheck","cbox","cloneNode","cboxLabel","inputcbox","_a","listStyle","hideColumnState","showColumnState","columnchooserccheckboxlist","apply","startTimer","proxy","interval","keyCode","setInterval","clearInterval","openCC","dlgEle","dlgLen","args1","operator","beforeOpenColumnChooser","showCustomColumnChooser","isCustomDialog","showResponsiveDialog"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/actions/column-chooser.js"],"sourcesContent":["import { classList, addClass, removeClass, isNullOrUndefined, Browser, updateCSSText, remove } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses, setChecked, resetDialogAppend, Global, appendChildren, getListHeight, infiniteRemoveElements, infiniteAppendElements, clearReactVueTemplates, getObject } from '../base/util';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\nimport * as literals from '../base/string-literals';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.filterColumns = [];\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        this.infiniteLoadedElement = [];\n        this.isDlgOpen = false;\n        this.isColumnChooserOpen = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.itemsCount = 50;\n        this.infiniteSkipCount = 0;\n        this.infiniteColumns = [];\n        this.infiniteInitialLoad = false;\n        this.prevInfiniteScrollDirection = '';\n        this.prevShowedCols = [];\n        this.hideDialogFunction = this.hideDialog.bind(this);\n        this.infiniteRenderMode = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.infiniteRenderMode = this.parent.enableColumnVirtualization ? true : false;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n        if (this.parent.cssClass) {\n            if (this.parent.cssClass.indexOf(' ') !== -1) {\n                addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n            }\n            else {\n                addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n            }\n        }\n        if (this.parent.enableAdaptiveUI) {\n            this.setFullScreenDialog();\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var _this = this;\n        var gridElement = this.parent.element;\n        if (!gridElement.querySelector('.' + literals.gridContent) && (!gridElement.querySelector('.' + literals.gridHeader)) || !gridElement) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        this.infiniteLoadedElement = null;\n        this.infiniteDiv = null;\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            if (this.parent.isReact && this.parent.columnChooserSettings.template) {\n                if (!Global.timer) {\n                    Global.timer = (setTimeout(function () {\n                        if (!isNullOrUndefined(_this.dlgObj) && _this.dlgObj.element && !_this.dlgObj.isDestroyed) {\n                            _this.dlgObj.destroy();\n                        }\n                    }, 0));\n                }\n                else {\n                    clearTimeout(Global.timer);\n                    Global.timer = null;\n                }\n            }\n            else {\n                this.dlgObj.destroy();\n            }\n            var gridPopup = document.getElementById(this.parent.element.id + '_e-popup');\n            if (!isNullOrUndefined(gridPopup)) {\n                remove(gridPopup);\n                gridPopup = null;\n            }\n        }\n    };\n    ColumnChooser.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isColumnChooser);\n        }\n        if (this.parent.enableAdaptiveUI) {\n            this.parent.on(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv, this);\n            this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (!isNullOrUndefined(this.innerDiv)) {\n            if (this.parent.enableRtl) {\n                addClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n            }\n            else {\n                removeClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n            }\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialogFunction);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n        this.parent.on(events.resetColumns, this.onResetColumns, this);\n        this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n        if (this.parent.enableAdaptiveUI) {\n            this.parent.on(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction, this);\n        }\n        if (this.infiniteRenderMode || this.parent.enableAdaptiveUI) {\n            this.parent.on(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv, this);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(document, 'click', this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n        this.parent.off(events.resetColumns, this.onResetColumns);\n        this.parent.removeEventListener(events.dataBound, this.hideDialogFunction);\n        this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n        if (this.infiniteDiv) {\n            EventHandler.remove(this.infiniteDiv, 'scroll', this.infiniteScrollHandler);\n            EventHandler.remove(this.infiniteDiv, 'mouseup', this.infiniteScrollMouseKeyUpHandler);\n            EventHandler.remove(this.infiniteDiv, 'mousedown', this.infiniteScrollMouseKeyDownHandler);\n        }\n        if (this.parent.enableAdaptiveUI) {\n            this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n            this.parent.off(events.renderResponsiveChangeAction, this.renderResponsiveChangeAction);\n        }\n        if (this.infiniteRenderMode || this.parent.enableAdaptiveUI) {\n            this.parent.off(events.renderResponsiveColumnChooserDiv, this.renderResponsiveColumnChooserDiv);\n        }\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        if (!this.parent.enableAdaptiveUI) {\n            this.renderDlgContent();\n        }\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc-toolbar')) || !isNullOrUndefined(closest(targetElement, '.e-cc'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('', false);\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        if (!this.parent.enableAdaptiveUI) {\n            this.rtlUpdate();\n        }\n        else {\n            if (this.parent.enableRtl) {\n                addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n            }\n        }\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            if (this.parent.enableAdaptiveUI) {\n                this.responsiveDialogRenderer.hideResponsiveColumnChooser();\n            }\n            else {\n                this.dlgObj.hide();\n                // this.unWireEvents();\n                this.isDlgOpen = false;\n            }\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     *\n     * @param {number} x - specifies the position x\n     * @param {number} y - specifies the position y\n     * @param {Element} target - specifies the target\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var args = this.beforeOpenColumnChooserEvent();\n            if (args.cancel) {\n                return;\n            }\n            args.columns = null;\n            if (target) {\n                this.targetdlg = target;\n            }\n            if (this.infiniteRenderMode) {\n                this.dlgObj.show();\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            if (!this.parent.columnChooserSettings.enableSearching) {\n                var contentElement = this.dlgObj.element.querySelector('.e-dlg-content');\n                contentElement.style.margin = '0px';\n            }\n            this.dlgObj.element.style.display = 'block';\n            var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n            var toolbarItem = closest(target, '.e-toolbar-item');\n            var newpos = void 0;\n            if (document.getElementById(this.parent.element.id + '_e-popup') && document.getElementById(this.parent.element.id + '_e-popup').querySelector('.e-ccdlg')) {\n                this.parent.element.appendChild(this.dlgObj.element);\n            }\n            if (isSticky) {\n                newpos = toolbarItem.getBoundingClientRect();\n                this.dlgObj.element.classList.add('e-sticky');\n            }\n            else {\n                this.dlgObj.element.classList.remove('e-sticky');\n                newpos = calculateRelativeBasedPosition(toolbarItem, this.dlgObj.element);\n            }\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            if (!this.infiniteRenderMode) {\n                this.dlgObj.show();\n            }\n            if (this.parent.getContent().firstElementChild.offsetHeight < this.dlgObj.element.offsetHeight &&\n                !this.parent.element.classList.contains('e-drillthrough-grid')) {\n                resetDialogAppend(this.parent, this.dlgObj);\n                if (this.dlgObj.element.querySelector('.e-ccsearch')) {\n                    this.dlgObj.element.querySelector('.e-ccsearch').select();\n                }\n            }\n            this.parent.notify(events.columnChooserOpened, { dialog: this.dlgObj });\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n            this.clearActions();\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     *\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.parent.enableAdaptiveUI) {\n            if (!this.isColumnChooserOpen) {\n                this.parent.showResponsiveCustomColumnChooser();\n                return;\n            }\n            this.isColumnChooserOpen = false;\n            this.renderDlgContent();\n        }\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        var args = this.beforeOpenColumnChooserEvent();\n        if (args.cancel) {\n            return;\n        }\n        args.columns = null;\n        if (this.infiniteRenderMode) {\n            this.dlgObj.show();\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n            if (!this.parent.columnChooserSettings.template) {\n                this.updateIntermediateBtn();\n            }\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        if (this.infiniteRenderMode) {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            if (this.parent.enableAdaptiveUI) {\n                this.dlgObj.position = { X: '', Y: '' };\n            }\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        if (!this.parent.columnChooserSettings.enableSearching) {\n            var contentElement = this.dlgObj.element.querySelector('.e-dlg-content');\n            contentElement.style.margin = '0px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        if (!this.infiniteRenderMode) {\n            this.dlgObj.show();\n        }\n        if (this.parent.getContent().firstElementChild.offsetHeight < this.dlgObj.element.offsetHeight &&\n            !this.parent.element.classList.contains('e-drillthrough-grid')) {\n            resetDialogAppend(this.parent, this.dlgObj);\n        }\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.keyUpHandler = function (e) {\n        if (e.key === 'Escape') {\n            this.resetColumnState();\n        }\n        if (e && e.target && !isNullOrUndefined(closest(e.target, '.e-grid-popup'))) {\n            this.parent.trigger('keyPressed', e);\n        }\n        this.setFocus(parentsUntil(e.target, 'e-cclist'));\n    };\n    ColumnChooser.prototype.setFocus = function (elem) {\n        var prevElem = this.dlgDiv.querySelector('.e-colfocus');\n        if (prevElem) {\n            prevElem.classList.remove('e-colfocus');\n        }\n        if (elem) {\n            elem.classList.add('e-colfocus');\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = (this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns()).filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var isAdaptive = this.parent.enableAdaptiveUI;\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        if (!isAdaptive) {\n            this.parent.element.appendChild(this.dlgDiv);\n        }\n        this.dlgObj = new Dialog({\n            header: this.parent.enableAdaptiveUI ? null : this.renderHeader(),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: this.parent.cssClass ? 'e-cc' + ' ' + this.parent.cssClass : 'e-cc',\n            animationSettings: { effect: 'None' },\n            footerTemplate: this.parent.enableAdaptiveUI ? null : this.renderFooter()\n        });\n        if (!isAdaptive && (this.infiniteRenderMode || !this.parent.columnChooserSettings.footerTemplate)) {\n            this.dlgObj.buttons = [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: this.parent.cssClass ? 'e-cc e-cc_okbtn' + ' ' + this.parent.cssClass : 'e-cc e-cc_okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this),\n                    buttonModel: {\n                        cssClass: this.parent.cssClass ?\n                            'e-flat e-cc e-cc-cnbtn' + ' ' + this.parent.cssClass : 'e-flat e-cc e-cc-cnbtn',\n                        content: this.l10n.getConstant('CancelButton')\n                    }\n                }];\n        }\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[\"\" + isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n        if (isAdaptive) {\n            var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n            if (responsiveCnt) {\n                responsiveCnt.appendChild(this.dlgDiv);\n            }\n            this.dlgObj.open = this.mOpenDlg.bind(this);\n            this.dlgObj.target = document.querySelector('.e-rescolumnchooser > .e-dlg-content > .e-mainfilterdiv');\n        }\n        this.wireEvents();\n    };\n    /**\n     * To render the header template for the column chooser.\n     * @returns {HTMLElement | string} This method return HTMLElement or string.\n     * @hidden\n     */\n    ColumnChooser.prototype.renderHeader = function () {\n        var gridInstance = this.parent;\n        if (gridInstance.columnChooserSettings.headerTemplate && !this.infiniteRenderMode) {\n            var templateDiv = this.parent.createElement('div', { className: 'e-columnChooserHeaderTemplate' });\n            var templateID = this.parent.element.id + 'columnChooserHeaderTemplate';\n            if (this.parent.isReact) {\n                this.parent.getColumnChooserHeaderTemplate()(null, this.parent, 'columnChooserHeaderTemplate', templateID, null, null, templateDiv);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(templateDiv, this.parent.getColumnChooserHeaderTemplate()(null, this.parent, 'columnChooserHeaderTemplate', templateID));\n            }\n            return templateDiv;\n        }\n        return this.l10n.getConstant('ChooseColumns');\n    };\n    /**\n     * To render the footer template for the column chooser.\n     * @returns {HTMLElement | string} This method return HTMLElement or string.\n     */\n    ColumnChooser.prototype.renderFooter = function () {\n        var gridInstance = this.parent;\n        if (gridInstance.columnChooserSettings.footerTemplate && !this.infiniteRenderMode) {\n            var templateDiv = this.parent.createElement('div', { className: 'e-columnChooserFooterTemplate' });\n            var templateID = this.parent.element.id + 'columnChooserFooterTemplate';\n            if (this.parent.isReact) {\n                this.parent.getColumnChooserFooterTemplate()(null, this.parent, 'columnChooserFooterTemplate', templateID, null, null, templateDiv);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(templateDiv, this.parent.getColumnChooserFooterTemplate()(null, this.parent, 'columnChooserFooterTemplate', templateID));\n            }\n            return templateDiv;\n        }\n        return null;\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search'), cssClass: this.parent.cssClass }\n        });\n        var ccsearchicon = this.parent.createElement('span', {\n            className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') }\n        });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele, this.serviceLocator);\n        var columns = this.getColumns();\n        var showColumns = [];\n        var hideColumns = [];\n        columns.forEach(function (column) {\n            if (column.visible) {\n                showColumns.push(column.headerText);\n            }\n            else {\n                hideColumns.push(column.headerText);\n            }\n        });\n        if (this.infiniteRenderMode && !this.isInitialOpen) {\n            columns = this.parent.columns;\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[parseInt(i.toString(), 10)].showInColumnChooser) {\n                    this.infiniteColumns.push(columns[parseInt(i.toString(), 10)]);\n                }\n            }\n        }\n        if (this.parent.columnChooserSettings.template && !this.infiniteRenderMode) {\n            var templateDiv = this.parent.createElement('div', { className: 'e-columnChooserTemplate' });\n            templateDiv.style.cssText = this.parent.enableAdaptiveUI ?\n                'height: 90%; min-height: 160px; overflow-y: auto;' : 'height: 196px; overflow-y: auto;';\n            var TemplateID = this.parent.element.id + 'columnChooserTemplate';\n            var argsData = { columns: columns, hideColumns: hideColumns, showColumns: showColumns };\n            if (this.parent.isReact) {\n                this.parent.getColumnChooserTemplate()(argsData, this.parent, 'columnChooserTemplate', TemplateID, null, null, templateDiv);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(templateDiv, this.parent.getColumnChooserTemplate()(argsData, this.parent, 'columnChooserTemplate', TemplateID, null, null, null, this.parent.root));\n            }\n            if (this.parent.columnChooserSettings.renderCustomColumnChooser) {\n                if (typeof this.parent.columnChooserSettings.renderCustomColumnChooser === 'function') {\n                    this.parent.columnChooserSettings.renderCustomColumnChooser(templateDiv, columns);\n                }\n                else if (typeof this.parent.columnChooserSettings.renderCustomColumnChooser === 'string') {\n                    this.parent.columnChooserSettings.renderCustomColumnChooser =\n                        getObject(this.parent.columnChooserSettings.renderCustomColumnChooser, window);\n                    this.parent.columnChooserSettings.renderCustomColumnChooser(templateDiv, columns);\n                }\n            }\n            this.mainDiv.appendChild(searchDiv);\n            this.mainDiv.appendChild(templateDiv);\n        }\n        else {\n            var innerDivContent = this.refreshCheckboxList(columns);\n            this.innerDiv.appendChild(innerDivContent);\n            conDiv.appendChild(this.innerDiv);\n            if (this.parent.enableAdaptiveUI) {\n                var searchBoxDiv = this.parent.createElement('div', { className: 'e-cc-searchBox' });\n                searchBoxDiv.appendChild(searchDiv);\n                this.mainDiv.appendChild(searchBoxDiv);\n            }\n            else {\n                this.mainDiv.appendChild(searchDiv);\n            }\n            this.mainDiv.appendChild(conDiv);\n        }\n        if (!this.parent.columnChooserSettings.enableSearching) {\n            searchDiv.style.display = 'none';\n        }\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        var onActionBeginArgs = {\n            requestType: 'columnVisibilityUpdate',\n            columns: this.getColumns(),\n            cancel: false\n        };\n        this.parent.trigger(events.actionBegin, onActionBeginArgs);\n        if (onActionBeginArgs.cancel) {\n            return;\n        }\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        var columns = this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns();\n        this.changedColumns = (this.changedColumns.length > 0) ? this.changedColumns : this.unchangedColumns;\n        this.changedColumnState(this.changedColumns);\n        var uncheckedLength = this.infiniteRenderMode ? this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-uncheck'); }).length : this.ulElement &&\n            this.ulElement.querySelector('.e-uncheck') && this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n        if (!isNullOrUndefined(args)) {\n            if (uncheckedLength < columns.length) {\n                this.changeColumnVisibility({ visibleColumns: this.showColumn, hiddenColumns: this.hideColumn }, 'uid');\n                if (this.parent.getCurrentViewRecords().length === 0) {\n                    var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n                    emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n                }\n            }\n            if (this.parent.enableAdaptiveUI && this.parent.scrollModule) {\n                this.parent.scrollModule.refresh();\n            }\n            if (this.parent.editSettings.showAddNewRow) {\n                this.parent.notify(events.showAddNewRowFocus, {});\n            }\n        }\n        var onActionCompleteArgs = {\n            requestType: 'columnVisibilityUpdate',\n            columns: this.getColumns(),\n            cancel: false\n        };\n        this.parent.trigger(events.actionComplete, onActionCompleteArgs);\n    };\n    /**\n     * Toggles the visibility of specified columns in the grid.\n     * @param {Object} columns - An object specifying the columns to show or hide.\n     * @param {string[]} columns.visibleColumns - An array of column identifiers specifying the columns to show.\n     * @param {string[]} columns.hiddenColumns - An array of column identifiers specifying the columns to hide.\n     * @param {string} columnKey - Defines the column key as a UID, field name, or header text.\n     * @returns {void}\n     * The 'columns' object contains the properties 'visibleColumns' and 'hiddenColumns' as arrays of column identifiers.\n     */\n    ColumnChooser.prototype.changeColumnVisibility = function (columns, columnKey) {\n        columnKey = columnKey ? columnKey : 'headerText';\n        if (columnKey !== 'uid') {\n            if (columns.visibleColumns || columns.hiddenColumns) {\n                this.stateChangeColumns = [];\n                this.changedStateColumns = [];\n                var columnChooserColumns = this.getColumns();\n                columns.hiddenColumns = columnChooserColumns.filter(function (column) {\n                    return columns.hiddenColumns.indexOf(column[columnKey]) !== -1;\n                }).map(function (column) { return column.uid; });\n                columns.visibleColumns = columnChooserColumns.filter(function (column) {\n                    return columns.visibleColumns.indexOf(column[columnKey]) !== -1;\n                }).map(function (column) { return column.uid; });\n            }\n        }\n        if (columns.hiddenColumns.length) {\n            this.columnStateChange(columns.hiddenColumns, false);\n        }\n        if (columns.visibleColumns.length) {\n            this.columnStateChange(columns.visibleColumns, true);\n        }\n        this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n        this.clearActions();\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n    };\n    ColumnChooser.prototype.onResetColumns = function (e) {\n        if (e.requestType === 'columnstate') {\n            this.resetColumnState();\n            return;\n        }\n    };\n    ColumnChooser.prototype.renderResponsiveColumnChooserDiv = function (args) {\n        if (args.action === 'open') {\n            this.isColumnChooserOpen = true;\n            this.openColumnChooser();\n        }\n        else if (args.action === 'clear') {\n            this.clearBtnClick();\n        }\n        else if (args.action === 'confirm') {\n            this.confirmDlgBtnClick(true);\n        }\n    };\n    ColumnChooser.prototype.resetColumnState = function () {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.changedColumns = [];\n        this.filterColumns = [];\n        this.searchValue = '';\n        if (this.infiniteRenderMode) {\n            var focusListElement = this.dlgDiv.querySelector('.e-cclist.e-cc-selectall.e-colfocus');\n            if (focusListElement) {\n                focusListElement.classList.remove('e-colfocus');\n            }\n        }\n        this.hideDialog();\n    };\n    ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n        for (var index = 0; index < changedColumns.length; index++) {\n            var colUid = changedColumns[parseInt(index.toString(), 10)];\n            var currentColumn = this.parent.getColumnByUid(colUid, this.infiniteRenderMode);\n            this.changedStateColumns.push(currentColumn);\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[parseInt(index.toString(), 10)];\n            var currentColumn = this.parent.getColumnByUid(colUid, this.infiniteRenderMode);\n            if (currentColumn) {\n                if (currentColumn.type !== 'checkbox') {\n                    currentColumn.visible = state;\n                }\n                this.stateChangeColumns.push(currentColumn);\n            }\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.resetColumnState();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.clearBtnClick = function () {\n        var onActionBeginArgs = {\n            requestType: 'columnChooserClose',\n            cancel: false\n        };\n        this.parent.trigger(events.actionBegin, onActionBeginArgs);\n        if (onActionBeginArgs.cancel) {\n            return;\n        }\n        this.clearActions();\n        this.parent.notify(events.columnChooserCancelBtnClick, { dialog: this.dlgObj });\n        var onActionCompleteArgs = {\n            requestType: 'columnChooserClose',\n            cancel: false\n        };\n        this.parent.trigger(events.actionComplete, onActionCompleteArgs);\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n        if (selectAll === void 0) { selectAll = false; }\n        var currentColumn = this.parent.getColumnByUid(coluid, this.infiniteRenderMode);\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1 && !(currentColumn && currentColumn.visible)) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1 && (currentColumn && currentColumn.visible)) {\n                this.hideColumn.push(coluid);\n            }\n        }\n        if (selectAll) {\n            if (!isChecked) {\n                this.changedColumns.push(coluid);\n            }\n            else {\n                this.unchangedColumns.push(coluid);\n            }\n        }\n        else if (this.changedColumns.indexOf(coluid) !== -1) {\n            this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n        }\n        else {\n            this.changedColumns.push(coluid);\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal, check) {\n        if (check) {\n            var onActionBeginArgs = {\n                requestType: 'columnChooserSearch',\n                columns: this.getColumns(),\n                cancel: false\n            };\n            this.parent.trigger(events.actionBegin, onActionBeginArgs);\n            if (onActionBeginArgs.cancel) {\n                return;\n            }\n        }\n        var clearSearch = false;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        var selectedCheckbox = this.ulElement && this.ulElement.querySelector('.e-check') &&\n            this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        if (this.infiniteRenderMode) {\n            selectedCheckbox = this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-check'); }).length;\n        }\n        this.isInitialOpen = true;\n        if (buttonEle && buttonEle.querySelector('.e-btn')) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            this.filterColumns = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            this.filterColumns = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n        }\n        if (this.infiniteRenderMode) {\n            this.updateIfiniteSelectAll();\n        }\n        if (this.parent.columnChooserSettings.template && !this.infiniteRenderMode) {\n            var TemplateElement = void 0;\n            var isReactCompiler = this.parent.isReact;\n            if (isReactCompiler) {\n                clearReactVueTemplates(this.parent, ['columnChooserTemplate']);\n                TemplateElement = this.mainDiv.querySelector('.e-columnChooserTemplate');\n            }\n            else {\n                this.mainDiv.querySelector('.e-columnChooserTemplate').remove();\n                TemplateElement = this.parent.createElement('div', { className: 'e-columnChooserTemplate' });\n                TemplateElement.style.cssText = this.parent.enableAdaptiveUI ?\n                    'height: 90%; min-height: 160px; overflow-y: auto;' : 'height: 196px; overflow-y: auto;';\n            }\n            var TemplateID = this.parent.element.id + 'columnChooserTemplate';\n            var chooserColumns = this.filterColumns;\n            var searchedValue = searchVal;\n            var showColumns_1 = [];\n            var hideColumns_1 = [];\n            chooserColumns.forEach(function (column) {\n                if (column.visible) {\n                    showColumns_1.push(column.headerText);\n                }\n                else {\n                    hideColumns_1.push(column.headerText);\n                }\n            });\n            var argsData = {\n                columns: chooserColumns,\n                hideColumns: hideColumns_1,\n                showColumns: showColumns_1,\n                searchValue: searchedValue\n            };\n            if (isReactCompiler) {\n                this.parent.getColumnChooserTemplate()(argsData, this.parent, 'columnChooserTemplate', TemplateID, null, null, TemplateElement);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(TemplateElement, this.parent.getColumnChooserTemplate()(argsData, this.parent, 'columnChooserTemplate', TemplateID, null, null, null, this.parent.root));\n            }\n            if (this.parent.columnChooserSettings.renderCustomColumnChooser) {\n                if (typeof this.parent.columnChooserSettings.renderCustomColumnChooser === 'function') {\n                    this.parent.columnChooserSettings.renderCustomColumnChooser(TemplateElement, this.filterColumns);\n                }\n                else if (typeof this.parent.columnChooserSettings.renderCustomColumnChooser === 'string') {\n                    this.parent.columnChooserSettings.renderCustomColumnChooser =\n                        getObject(this.parent.columnChooserSettings.renderCustomColumnChooser, window);\n                    this.parent.columnChooserSettings.renderCustomColumnChooser(TemplateElement, this.filterColumns);\n                }\n            }\n            this.mainDiv.appendChild(TemplateElement);\n        }\n        else if (this.filterColumns.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.infiniteInitialLoad = true;\n            this.infiniteLoadedElement = [];\n            this.innerDiv.appendChild(this.refreshCheckboxList(this.filterColumns));\n            if (this.infiniteRenderMode) {\n                this.mainDiv.querySelector('.e-ccheck .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n                this.updateIntermediateBtn();\n            }\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton && selectedCheckbox) {\n                    okButton.disabled = false;\n                }\n                if (selectedCheckbox && this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n                    this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: false });\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            if (this.infiniteRenderMode) {\n                removeClass([this.mainDiv.querySelector('.e-frame.e-selectall')], ['e-check', 'e-stop', 'e-uncheck']);\n                this.mainDiv.querySelector('.e-ccheck .e-selectall').parentElement.classList.add('e-checkbox-disabled');\n            }\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n            if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n                this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: true });\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n        if (check) {\n            var onActionCompleteArgs = {\n                requestType: 'columnChooserSearch',\n                columns: this.getColumns(),\n                cancel: false\n            };\n            this.parent.trigger(events.actionComplete, onActionCompleteArgs);\n        }\n    };\n    ColumnChooser.prototype.updateIfiniteSelectAll = function () {\n        this.changedColumns = [];\n        this.hideColumn = [];\n        this.showColumn = [];\n        var unCheckItem = this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-uncheck'); });\n        for (var i = 0; i < unCheckItem.length; i++) {\n            this.checkState(unCheckItem[parseInt(i.toString(), 10)].querySelector('.e-frame'), true);\n        }\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        EventHandler.add(this.dlgObj.element, 'keyup', this.keyUpHandler, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj && this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n            EventHandler.remove(this.dlgObj.element, 'keyup', this.keyUpHandler);\n        }\n        if (this.searchBoxObj) {\n            EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        if (this.parent.columnChooserSettings.template && !this.infiniteRenderMode) {\n            return;\n        }\n        var checkstate;\n        var selectAllElement = parentsUntil(e.target, 'e-checkbox-wrapper');\n        var columns = this.infiniteRenderMode ? this.infiniteColumns : this.parent.getColumns();\n        if (selectAllElement) {\n            var selectAll = selectAllElement.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateSelectAll(!selectAllElement.querySelector('.e-check'));\n            }\n            else {\n                toogleCheckbox(selectAllElement.parentElement);\n            }\n            selectAllElement.querySelector('.e-chk-hidden').focus();\n            if (selectAllElement.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (selectAllElement.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            if (!this.infiniteRenderMode) {\n                this.updateIntermediateBtn();\n            }\n            var columnUid = parentsUntil(selectAllElement, 'e-ccheck').getAttribute('uid');\n            var column = (this.searchValue && this.searchValue.length) ? this.filterColumns : columns;\n            if (columnUid === this.parent.element.id + '-selectAll') {\n                this.changedColumns = [];\n                this.unchangedColumns = [];\n                for (var i = 0; i < column.length; i++) {\n                    if (column[parseInt(i.toString(), 10)].showInColumnChooser) {\n                        this.checkstatecolumn(checkstate, column[parseInt(i.toString(), 10)].uid, true);\n                    }\n                }\n            }\n            else {\n                this.checkstatecolumn(checkstate, columnUid);\n            }\n            var isSelectAll = this.infiniteRenderMode && selectAllElement.querySelector('.e-selectall') &&\n                selectAllElement.querySelector('.e-uncheck') ? true : false;\n            if (!this.parent.columnChooserSettings.footerTemplate) {\n                this.refreshCheckboxButton(isSelectAll);\n            }\n            this.setFocus(parentsUntil(e.target, 'e-cclist'));\n            if (this.infiniteRenderMode) {\n                this.updateIntermediateBtn();\n            }\n        }\n    };\n    ColumnChooser.prototype.updateIntermediateBtn = function () {\n        var count = this.infiniteRenderMode ? this.infiniteLoadedElement.length : this.ulElement.children.length - 1;\n        var className = [];\n        var hideColumnsCount = 0;\n        var showColumnsCount = 0;\n        (this.searchValue && this.searchValue.length ? this.filterColumns : this.infiniteColumns).filter(function (column) {\n            if (column.visible === false) {\n                hideColumnsCount++;\n            }\n            else {\n                showColumnsCount++;\n            }\n        });\n        var selectAllElement = (this.infiniteRenderMode && this.mainDiv.querySelector('.e-cc-selectall') ?\n            this.mainDiv.querySelector('.e-cc-selectall') : this.ulElement.children[0]).querySelector('.e-frame');\n        var selected = this.infiniteRenderMode ? this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-check'); }).length : this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn;\n        if (!this.parent.enableAdaptiveUI && !this.parent.columnChooserSettings.footerTemplate) {\n            btn = this.dlgObj.btnObj[0];\n            btn.disabled = false;\n        }\n        else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n            this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: false });\n        }\n        var inputElem = selectAllElement.parentElement.querySelector('input');\n        if (count === selected && (!this.infiniteRenderMode || (this.infiniteRenderMode &&\n            hideColumnsCount === this.showColumn.length))) {\n            className = ['e-check'];\n            setChecked(inputElem, true);\n        }\n        else if (selected || (this.infiniteRenderMode && !selected && showColumnsCount !== this.hideColumn.length)) {\n            className = ['e-stop'];\n            inputElem.indeterminate = true;\n        }\n        else {\n            className = ['e-uncheck'];\n            setChecked(inputElem, false);\n            if (btn && !this.parent.enableAdaptiveUI) {\n                btn.disabled = true;\n            }\n            else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n                this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: true });\n            }\n        }\n        if (btn && !this.parent.enableAdaptiveUI) {\n            btn.dataBind();\n        }\n        removeClass([selectAllElement], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([selectAllElement], className);\n    };\n    ColumnChooser.prototype.updateSelectAll = function (checked) {\n        var checkBoxItems = [].slice.call(this.ulElement.getElementsByClassName('e-frame'));\n        if (this.infiniteRenderMode) {\n            checkBoxItems = [];\n            this.infiniteLoadedElement.map(function (arr) { return checkBoxItems.push(arr.querySelector('.e-frame')); });\n            checkBoxItems.unshift(this.mainDiv.querySelector('.e-cc-selectall').querySelector('.e-frame'));\n        }\n        for (var _i = 0, checkBoxItems_1 = checkBoxItems; _i < checkBoxItems_1.length; _i++) {\n            var checkBoxItem = checkBoxItems_1[_i];\n            removeAddCboxClasses(checkBoxItem, checked);\n            var cBoxInput = checkBoxItem.parentElement.querySelector('input');\n            if (checkBoxItem.classList.contains('e-check')) {\n                setChecked(cBoxInput, true);\n            }\n            else if (checkBoxItem.classList.contains('e-uncheck')) {\n                setChecked(cBoxInput, false);\n            }\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function (checkstate) {\n        var visibleCols = this.parent.getVisibleColumns();\n        for (var i = 0; i < visibleCols.length; i++) {\n            var columnUID = visibleCols[parseInt(i.toString(), 10)].uid;\n            if (this.prevShowedCols.indexOf(columnUID) === -1 && visibleCols[parseInt(i.toString(), 10)].type !== 'checkbox') {\n                this.prevShowedCols.push(columnUID);\n            }\n        }\n        for (var i = 0; i < this.hideColumn.length; i++) {\n            var index = this.prevShowedCols.indexOf(this.hideColumn[parseInt(i.toString(), 10)]);\n            if (index !== -1) {\n                this.prevShowedCols.splice(index, 1);\n            }\n        }\n        var selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n        if (this.infiniteRenderMode) {\n            selected = this.infiniteLoadedElement.filter(function (arr) { return arr.querySelector('.e-uncheck'); }).length;\n        }\n        var btn;\n        if (!this.parent.enableAdaptiveUI) {\n            btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n            btn.disabled = false;\n        }\n        else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n            this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: false });\n        }\n        var sreachShowColumns = [];\n        var searchData = [].slice.call(document.getElementsByClassName('e-cc-chbox'));\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[parseInt(i.toString(), 10)];\n            if (this.infiniteRenderMode && element.classList.contains('e-selectall')) {\n                continue;\n            }\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            sreachShowColumns.push(columnUID);\n        }\n        var hideColumns = this.showColumn.filter(function (column) { return sreachShowColumns.indexOf(column) !== -1; });\n        if ((this.infiniteRenderMode && (checkstate || sreachShowColumns.length === selected)) ||\n            (!this.infiniteRenderMode && selected === 0 && hideColumns.length === 0)) {\n            if (!this.parent.enableAdaptiveUI) {\n                btn.disabled = true;\n            }\n            else if (this.parent.enableAdaptiveUI && this.responsiveDialogRenderer) {\n                this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: true });\n            }\n        }\n        if (!this.parent.enableAdaptiveUI) {\n            btn.dataBind();\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (chooserColumns) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        var selectAllValue = this.l10n.getConstant('SelectAll');\n        var columnChooserList = this.parent.createElement('li', { className: 'e-cclist e-cc e-cc-selectall' });\n        updateCSSText(columnChooserList, this.infiniteRenderMode ? 'list-style: None;' : '');\n        var selectAll = this.createCheckBox(selectAllValue, false, this.parent.element.id + '-selectAll');\n        if (chooserColumns.length) {\n            selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            this.checkState(selectAll.querySelector('.e-icons'), true);\n            columnChooserList.appendChild(selectAll);\n            if (this.infiniteRenderMode) {\n                if (this.mainDiv.querySelector('.e-cc-contentdiv') && !this.mainDiv.querySelector('.e-cc-selectall')) {\n                    this.infiniteDiv = this.mainDiv.querySelector('.e-cc-contentdiv');\n                    this.mainDiv.insertBefore(columnChooserList, this.infiniteDiv);\n                    this.infiniteDiv.classList.add('e-checkbox-infinitescroll');\n                    EventHandler.add(this.infiniteDiv, 'scroll', this.infiniteScrollHandler, this);\n                    EventHandler.add(this.infiniteDiv, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n                    EventHandler.add(this.infiniteDiv, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n                }\n            }\n            else {\n                this.ulElement.appendChild(columnChooserList);\n            }\n        }\n        if (this.parent.cssClass) {\n            if (this.parent.cssClass.indexOf(' ') !== -1) {\n                addClass([selectAll], this.parent.cssClass.split(' '));\n            }\n            else {\n                addClass([selectAll], [this.parent.cssClass]);\n            }\n        }\n        if (this.infiniteRenderMode && chooserColumns.length > (this.itemsCount * 3)) {\n            this.infiniteSkipCount = this.itemsCount * 2;\n        }\n        this.renderCheckbox(chooserColumns.slice(0, this.infiniteRenderMode ? this.itemsCount * 3 : chooserColumns.length));\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.infiniteScrollMouseKeyDownHandler = function () {\n        EventHandler.remove(this.infiniteDiv, 'scroll', this.infiniteScrollHandler);\n    };\n    ColumnChooser.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n        var _this = this;\n        EventHandler.add(this.infiniteDiv, 'scroll', this.infiniteScrollHandler, this);\n        var target = this.infiniteDiv;\n        if (this.ulElement.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight ||\n            target.scrollTop <= 0)) {\n            this.infiniteScrollHandler();\n        }\n        Global.timer = setTimeout(function () { _this.clickHandler(e); Global.timer = null; }, 0);\n    };\n    ColumnChooser.prototype.infiniteScrollHandler = function () {\n        var target = this.infiniteDiv;\n        var columns = this.searchValue && this.searchValue.length ? this.filterColumns : this.infiniteColumns;\n        if (target.scrollTop >= target.scrollHeight - target.offsetHeight\n            && this.infiniteLoadedElement.length <= (this.infiniteSkipCount + this.itemsCount)\n            && this.ulElement.children.length === this.itemsCount * 3\n            && (!columns.length || columns.length > (this.infiniteSkipCount + this.itemsCount))) {\n            var diffcount = columns.length - (this.infiniteSkipCount + this.itemsCount);\n            var count = 0;\n            if (diffcount < this.itemsCount) {\n                count = diffcount;\n            }\n            infiniteRemoveElements(([].slice.call(this.ulElement.children)).splice(0, this.itemsCount));\n            this.infiniteInitialLoad = true;\n            this.infiniteSkipCount += this.itemsCount;\n            this.renderCheckbox(columns.slice(this.infiniteSkipCount, this.infiniteSkipCount + (count + this.itemsCount)));\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && this.infiniteLoadedElement.length > (this.infiniteSkipCount + this.itemsCount) && this.ulElement.children.length === this.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.ulElement.children)).splice(0, this.itemsCount));\n            this.infiniteSkipCount += this.prevInfiniteScrollDirection === 'down' ? this.itemsCount :\n                (this.itemsCount * 3);\n            appendChildren(this.ulElement, this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.itemsCount +\n                this.infiniteSkipCount));\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && this.infiniteSkipCount\n            && this.infiniteLoadedElement.length && this.infiniteLoadedElement.length > this.itemsCount * 3\n            && this.ulElement.children.length === this.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.ulElement.children)).splice(this.itemsCount * 2, this.itemsCount));\n            this.infiniteSkipCount -= this.prevInfiniteScrollDirection === 'up' ? this.itemsCount : this.itemsCount * 3;\n            infiniteAppendElements([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.infiniteSkipCount +\n                this.itemsCount)), this.ulElement);\n            this.prevInfiniteScrollDirection = 'up';\n            this.infiniteDiv.scrollTop = this.infiniteScrollAppendDiff;\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && this.infiniteSkipCount &&\n            (this.infiniteSkipCount > this.itemsCount * 2) && this.infiniteLoadedElement.length &&\n            this.ulElement.children.length < this.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.ulElement.children)).splice((this.itemsCount * 2), columns.length % this.itemsCount));\n            this.infiniteSkipCount = (Math.floor(columns.length / this.itemsCount) - 3) *\n                this.itemsCount;\n            infiniteAppendElements([].slice.call(this.infiniteLoadedElement.slice(this.infiniteSkipCount, this.infiniteSkipCount +\n                this.itemsCount)), this.ulElement);\n            this.infiniteDiv.scrollTop = this.infiniteScrollAppendDiff;\n            this.prevInfiniteScrollDirection = 'up';\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        if (!this.parent.columnChooserSettings.enableSearching) {\n            return;\n        }\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('', false);\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[parseInt(i.toString(), 10)];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[parseInt(i.toString(), 10)], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID, this.infiniteRenderMode);\n            var uncheck = [].slice.call(element.parentElement.getElementsByClassName('e-uncheck'));\n            if (column.visible && !uncheck.length) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        if (state) {\n            classList(element, ['e-check'], ['e-uncheck']);\n        }\n        else {\n            classList(element, ['e-uncheck'], ['e-check']);\n        }\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        if (!this.parent.enableAdaptiveUI && this.parent.enableRtl && !cbox.classList.contains('e-rtl')) {\n            cbox.classList.add('e-rtl');\n        }\n        var cboxLabel = cbox.querySelector('.e-label');\n        var inputcbox = cbox.querySelector('input');\n        setChecked(inputcbox, checked);\n        cboxLabel.setAttribute('id', uid + 'label');\n        cboxLabel.innerHTML = label;\n        inputcbox.setAttribute('aria-labelledby', cboxLabel.id);\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (columns) {\n        var _a;\n        var checkBoxItems = this.parent.createElement('div');\n        var offsetHeight = this.ulElement.offsetHeight;\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[parseInt(i.toString(), 10)];\n            if (column.showInColumnChooser) {\n                var columnChooserList = this.parent.createElement('li', { className: 'e-cclist e-cc', id: 'e-ccli_' + column.uid });\n                columnChooserList.style.listStyle = 'none';\n                var hideColumnState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n                var showColumnState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n                var columnchooserccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColumnState) || showColumnState, column.uid);\n                columnChooserList.appendChild(columnchooserccheckboxlist);\n                if (this.parent.cssClass) {\n                    if (this.parent.cssClass.indexOf(' ') !== -1) {\n                        addClass([columnchooserccheckboxlist], this.parent.cssClass.split(' '));\n                    }\n                    else {\n                        addClass([columnchooserccheckboxlist], [this.parent.cssClass]);\n                    }\n                }\n                if (this.infiniteRenderMode && this.infiniteDiv) {\n                    columnChooserList.style.height = getListHeight(this.infiniteDiv, true) + 'px';\n                }\n                checkBoxItems.appendChild(columnChooserList);\n            }\n        }\n        if (this.infiniteRenderMode && this.infiniteInitialLoad) {\n            (_a = this.infiniteLoadedElement).push.apply(_a, [].slice.call(checkBoxItems.children));\n            this.infiniteInitialLoad = false;\n        }\n        appendChildren(this.ulElement, [].slice.call(checkBoxItems.children));\n        if (this.infiniteRenderMode && !this.infiniteScrollAppendDiff) {\n            this.infiniteScrollAppendDiff = this.ulElement.offsetHeight - offsetHeight;\n        }\n        if (this.isInitialOpen) {\n            this.updateIntermediateBtn();\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue, true); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        if (this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon')) {\n            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n            this.dlgDiv.querySelector('.e-cc-cancel').setAttribute('title', this.l10n.getConstant('Clear'));\n        }\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        if (this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon')) {\n            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n            this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').setAttribute('title', this.l10n.getConstant('Search'));\n        }\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            if (this.dlgObj.element.querySelector('.e-cc-searchdiv')) {\n                this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            }\n            if (this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0]) {\n                this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n            }\n        }\n        if (this.parent.enableAdaptiveUI) {\n            if (this.dlgObj.element.querySelector('.e-cc-searchdiv')) {\n                this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.add('e-input-focus');\n            }\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (this.parent.element.id + '_ccdlg' !== openCC[parseInt(i.toString(), 10)].id || openCC[parseInt(i.toString(), 10)].classList.contains('e-dialog')) {\n                openCC[parseInt(i.toString(), 10)].ej2_instances[0].hide();\n            }\n        }\n    };\n    ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n        var args1 = {\n            requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n            columns: this.getColumns(), cancel: false,\n            searchOperator: this.parent.columnChooserSettings.operator\n        };\n        this.parent.trigger(events.beforeOpenColumnChooser, args1);\n        this.searchOperator = args1.searchOperator;\n        return args1;\n    };\n    ColumnChooser.prototype.renderResponsiveChangeAction = function (args) {\n        this.responsiveDialogRenderer.action = args.action;\n    };\n    /**\n     * To show the responsive custom sort dialog\n     *\n     * @param {boolean} enable - specifes dialog open\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.showCustomColumnChooser = function (enable) {\n        this.responsiveDialogRenderer.isCustomDialog = enable;\n        this.responsiveDialogRenderer.showResponsiveDialog();\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}