{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile, Property, EventHandler, Animation, formatUnit, append, attributes } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, detach, Event, Complex, addClass, removeClass, closest, isUndefined, getValue, NotifyPropertyChanges, Browser } from '@syncfusion/ej2-base';\nimport { FieldSettings } from '../drop-down-base/drop-down-base';\nimport { DropDownBase, dropDownBaseClasses } from '../drop-down-base/drop-down-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { Popup, isCollide, createSpinner, showSpinner, hideSpinner, getZindexPartial } from '@syncfusion/ej2-popups';\nimport { highlightSearch, revertHighlightSearch } from '../common/highlight-search';\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\nvar Mention = /** @class */function (_super) {\n  __extends(Mention, _super);\n  /**\n   * * Constructor for creating the widget\n   *\n   * @param {MentionModel} options - Specifies the MentionComponent model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function Mention(options, element) {\n    var _this = _super.call(this, options, element) || this;\n    _this.debounceTimer = null;\n    return _this;\n  }\n  /**\n   * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n   *\n   * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n   * @param {MentionModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'minLength':\n          this.minLength = newProp.minLength;\n          break;\n        case 'suffixText':\n          this.suffixText = newProp.suffixText;\n          break;\n        case 'allowSpaces':\n          this.allowSpaces = newProp.allowSpaces;\n          break;\n        case 'mentionChar':\n          this.mentionChar = newProp.mentionChar;\n          break;\n        case 'showMentionChar':\n          this.showMentionChar = newProp.showMentionChar;\n          break;\n        case 'requireLeadingSpace':\n          this.requireLeadingSpace = newProp.requireLeadingSpace;\n          break;\n        case 'cssClass':\n          this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n      }\n    }\n  };\n  Mention.prototype.updateCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n    this.setCssClass(newClass, [this.inputElement], oldClass);\n    if (this.popupObj) {\n      this.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n  Mention.prototype.setCssClass = function (cssClass, elements, oldClass) {\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      removeClass(elements, oldClass.split(' '));\n    }\n    if (!isNullOrUndefined(cssClass) && cssClass !== '') {\n      addClass(elements, cssClass.split(' '));\n    }\n  };\n  Mention.prototype.initializeData = function () {\n    this.isSelected = false;\n    this.isFiltered = false;\n    this.beforePopupOpen = false;\n    this.initRemoteRender = false;\n    this.isListResetted = false;\n    this.isPopupOpen = false;\n    this.isCollided = false;\n    this.lineBreak = false;\n    this.isRTE = false;\n    this.keyEventName = 'mousedown';\n  };\n  /**\n   * Execute before render the list items\n   *\n   * @private\n   * @returns {void}\n   */\n  Mention.prototype.preRender = function () {\n    this.initializeData();\n    _super.prototype.preRender.call(this);\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n  Mention.prototype.render = function () {\n    var isSelector = typeof this.target === 'string';\n    this.inputElement = !isNullOrUndefined(this.target) ? this.checkAndUpdateInternalComponent(isSelector ? document.querySelector(this.target) : this.target) : this.element;\n    if (this.isContentEditable(this.inputElement)) {\n      if (!this.inputElement.hasAttribute('contenteditable')) {\n        this.inputElement.setAttribute('contenteditable', 'true');\n      }\n      addClass([this.inputElement], ['e-mention']);\n      if (isNullOrUndefined(this.target)) {\n        addClass([this.inputElement], ['e-editable-element']);\n      }\n    }\n    this.inputElement.setAttribute('role', 'textbox');\n    this.inputElement.setAttribute('aria-label', 'mention');\n    this.queryString = this.elementValue();\n    this.wireEvent();\n  };\n  Mention.prototype.wireEvent = function () {\n    EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n    this.bindCommonEvent();\n  };\n  Mention.prototype.unWireEvent = function () {\n    EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n    this.unBindCommonEvent();\n  };\n  Mention.prototype.bindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.inputElement.addEventListener('keydown', this.keyDownHandler.bind(this), !this.isRTE);\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @private\n   * @returns {void}\n   */\n  Mention.prototype.hideSpinner = function () {\n    this.hideWaitingSpinner();\n  };\n  Mention.prototype.hideWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n    }\n    if (!isNullOrUndefined(this.spinnerTemplate) && !isNullOrUndefined(this.spinnerTemplateElement)) {\n      detach(this.spinnerTemplateElement);\n    }\n  };\n  Mention.prototype.checkAndUpdateInternalComponent = function (targetElement) {\n    if (!this.isVue && targetElement.classList.contains('e-richtexteditor')) {\n      return targetElement.querySelector('.e-content');\n    }\n    if (this.isVue && targetElement.nodeName === 'TEXTAREA' && targetElement.classList.contains('e-rte-hidden')) {\n      var parentElement = targetElement.parentElement;\n      if (parentElement && parentElement.classList.contains('e-richtexteditor')) {\n        return parentElement.querySelector('.e-content');\n      }\n    }\n    if (targetElement && targetElement.parentElement && targetElement.parentElement.classList.contains('e-rte-content')) {\n      this.isRTE = true;\n      this.keyEventName = 'click';\n    }\n    return targetElement;\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.showWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.popupObj)) {\n      if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n        this.spinnerElement = this.popupObj.element;\n        createSpinner({\n          target: this.spinnerElement,\n          width: Browser.isDevice ? '16px' : '14px'\n        }, this.createElement);\n        showSpinner(this.spinnerElement);\n      }\n      if (!isNullOrUndefined(this.spinnerTemplate)) {\n        this.setSpinnerTemplate();\n      }\n    }\n  };\n  Mention.prototype.keyDownHandler = function (e) {\n    var isKeyAction = true;\n    switch (e.keyCode) {\n      case 38:\n        e.action = e.altKey ? 'hide' : 'up';\n        break;\n      case 40:\n        e.action = e.altKey ? 'open' : 'down';\n        break;\n      case 33:\n        e.action = 'pageUp';\n        break;\n      case 34:\n        e.action = 'pageDown';\n        break;\n      case 36:\n        e.action = 'home';\n        break;\n      case 35:\n        e.action = 'end';\n        break;\n      case 9:\n        e.action = e.shiftKey ? 'close' : 'tab';\n        break;\n      case 27:\n        e.action = 'escape';\n        break;\n      case 32:\n        e.action = 'space';\n        break;\n      case 13:\n        e.action = 'enter';\n        break;\n      default:\n        isKeyAction = false;\n        break;\n    }\n    if (isKeyAction) {\n      this.keyActionHandler(e);\n    }\n  };\n  Mention.prototype.keyActionHandler = function (e) {\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n    var isTabAction = e.action === 'tab' || e.action === 'close';\n    if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape' && e.action !== 'space' && this.mentionChar.charCodeAt(0) === this.getLastLetter(this.getTextRange()).charCodeAt(0)) {\n      this.renderList();\n    }\n    if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n      return;\n    }\n    if (e.action === 'escape') {\n      e.preventDefault();\n    }\n    this.isSelected = e.action === 'escape' ? false : this.isSelected;\n    switch (e.action) {\n      case 'down':\n      case 'up':\n        this.isUpDownKey = true;\n        this.updateUpDownAction(e);\n        break;\n      case 'tab':\n        if (this.isPopupOpen) {\n          e.preventDefault();\n          var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n          if (li) {\n            this.isSelected = true;\n            this.setSelection(li, e);\n          }\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n          }\n        }\n        break;\n      case 'enter':\n        if (this.isPopupOpen) {\n          e.preventDefault();\n          if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n            this.updateSelectedItem(this.selectedLI, e, false, true);\n          }\n        }\n        break;\n      case 'escape':\n        if (this.isPopupOpen) {\n          this.hidePopup(e);\n        }\n        break;\n    }\n  };\n  Mention.prototype.updateUpDownAction = function (e) {\n    if (this.fields.disabled && this.list && this.list.querySelectorAll('.e-list-item:not(.e-disabled)').length === 0) {\n      return;\n    }\n    var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n    if (this.isSelectFocusItem(focusEle)) {\n      this.setSelection(focusEle, e);\n    } else if (!isNullOrUndefined(this.liCollections)) {\n      var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n      if (!isNullOrUndefined(li)) {\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        this.activeIndex = this.getIndexByValue(value);\n      }\n      var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n      var startIndex = 0;\n      startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n      index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n      var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n      if (!isNullOrUndefined(nextItem)) {\n        this.setSelection(nextItem, e);\n      }\n    }\n    var itemIndex;\n    for (var index = 0; index < this.liCollections.length; index++) {\n      if (this.liCollections[index].classList.contains(dropDownBaseClasses.focus) || this.liCollections[index].classList.contains(dropDownBaseClasses.selected)) {\n        itemIndex = index;\n        break;\n      }\n    }\n    if (itemIndex != null && this.isDisabledElement(this.liCollections[itemIndex])) {\n      this.updateUpDownAction(e);\n    }\n    if (this.isPopupOpen) {\n      e.preventDefault();\n    }\n  };\n  Mention.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n  Mention.prototype.unBindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.inputElement.removeEventListener('keydown', this.keyDownHandler.bind(this), !this.isRTE);\n    }\n  };\n  Mention.prototype.onKeyUp = function (e) {\n    var rangetextContent;\n    if (this.isUpDownKey && this.isPopupOpen && e.keyCode === 229) {\n      this.isUpDownKey = false;\n      return;\n    }\n    this.isTyped = e.code !== 'Enter' && e.code !== 'Space' && e.code !== 'ArrowDown' && e.code !== 'ArrowUp' ? true : false;\n    var isRteImage = document.activeElement.parentElement && document.activeElement.parentElement.querySelector('.e-rte-image') ? true : false;\n    if (document.activeElement !== this.inputElement && !isRteImage) {\n      this.inputElement.focus();\n    }\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n      rangetextContent = this.range.startContainer.textContent.split('');\n    }\n    var currentRange = this.getTextRange();\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    var mentionRegex = new RegExp(this.mentionChar.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') + '\\\\s');\n    var isValid = currentRange && mentionRegex.test(currentRange) ? false : true;\n    var lastWordRange = this.getLastLetter(currentRange);\n    var previousChar = currentRange ? currentRange.charAt(Math.max(0, currentRange.indexOf(this.mentionChar) - 1)) : '';\n    if (isValid && this.allowSpaces && currentRange && currentRange.includes(this.mentionChar) && currentRange.split(this.mentionChar).pop() !== '' && (!this.requireLeadingSpace || this.requireLeadingSpace && (previousChar === ' ' || currentRange.indexOf(this.mentionChar) === 0))) {\n      lastWordRange = this.mentionChar + currentRange.split(this.mentionChar).pop();\n    }\n    if (!this.requireLeadingSpace && lastWordRange && lastWordRange.includes(this.mentionChar)) {\n      lastWordRange = this.mentionChar + lastWordRange.split(this.mentionChar).pop();\n    }\n    var lastTwoLetters = this.mentionChar.toString() + this.mentionChar.toString();\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    var Regex = new RegExp(this.mentionChar.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'g');\n    var charRegex = new RegExp('[a-zA-Z]', 'g');\n    if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n      return;\n    }\n    if (this.beforePopupOpen && this.isPopupOpen && lastWordRange === lastTwoLetters) {\n      this.hidePopup();\n      return;\n    }\n    if (!currentRange || !lastWordRange || !lastWordRange.includes(this.mentionChar) && !this.requireLeadingSpace || e.code === 'Enter' || e.keyCode === 27 || lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1 || this.isContentEditable(this.inputElement) && this.range.startContainer && this.range.startContainer.previousElementSibling && this.range.startContainer.previousElementSibling.tagName !== 'BR' && this.range.startContainer.textContent.split('').length > 0 && (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 || this.range.startContainer.nodeType === 1)) {\n      if (isValid && this.isPopupOpen && this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1 && !this.isMatchedText() && currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ' && this.list && this.list.querySelectorAll('ul').length > 0 && e.code !== 'Enter') {\n        this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n        this.searchLists(e);\n      } else if (!this.requireLeadingSpace || this.isPopupOpen && (!this.allowSpaces || !lastWordRange) && e.code !== 'ArrowDown' && e.code !== 'ArrowUp') {\n        this.hidePopup();\n        this.lineBreak = true;\n      } else if ((e.key === 'Backspace' || e.key === 'Delete') && this.range && this.range.startOffset !== this.range.endOffset) {\n        this.range.deleteContents();\n      }\n      return;\n    }\n    if (lastWordRange.includes(this.mentionChar)) {\n      this.queryString = !this.requireLeadingSpace ? lastWordRange.substring(lastWordRange.lastIndexOf(this.mentionChar) + 1).trim() : lastWordRange.replace(this.mentionChar, '');\n    }\n    if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) && this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n      this.searchLists(e);\n      if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n        if (!this.isContentEditable(this.inputElement)) {\n          this.showPopup();\n        } else if (this.isContentEditable(this.inputElement) && this.range && this.range.startContainer !== this.inputElement && e.keyCode !== 9) {\n          this.showPopup();\n        }\n      }\n    } else if ((!this.requireLeadingSpace ? lastWordRange.includes(this.mentionChar) : lastWordRange.indexOf(this.mentionChar) === 0) && !this.isPopupOpen && e.keyCode !== 8 && (!this.popupObj || isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element) || !isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element))) {\n      if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n        this.searchLists(e);\n      }\n      this.resetList(this.dataSource, this.fields);\n      if (isNullOrUndefined(this.list)) {\n        this.initValue();\n      }\n      if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.queryString.length >= this.minLength) {\n        this.didPopupOpenByTypingInitialChar = true;\n        this.showPopup();\n        if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n          this.showWaitingSpinner();\n        }\n        this.lineBreak = false;\n      }\n    } else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 && e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8 && (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) || this.liCollections && this.liCollections.length > 0)) {\n      this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n      this.searchLists(e);\n    } else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n      this.searchLists(e);\n      if (!this.isListResetted) {\n        this.resetList(this.dataSource, this.fields);\n      }\n    }\n    this.isListResetted = false;\n  };\n  Mention.prototype.isMatchedText = function () {\n    var isMatched = false;\n    for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n      if (this.getTextRange() && this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n        isMatched = true;\n      }\n    }\n    return isMatched;\n  };\n  Mention.prototype.getCurrentRange = function () {\n    this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n    return this.range;\n  };\n  Mention.prototype.performFiltering = function (e) {\n    var _this = this;\n    var eventArgs = {\n      preventDefaultAction: false,\n      text: this.queryString,\n      updateData: function (dataSource, query, fields) {\n        if (eventArgs.cancel) {\n          return;\n        }\n        _this.isFiltered = true;\n        _this.filterAction(dataSource, query, fields);\n      },\n      cancel: false\n    };\n    this.trigger('filtering', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n        _this.filterAction(_this.dataSource, null, _this.fields);\n      }\n    });\n  };\n  Mention.prototype.searchLists = function (e) {\n    this.isDataFetched = false;\n    if (isNullOrUndefined(this.list)) {\n      _super.prototype.render.call(this);\n      this.unWireListEvents();\n      this.wireListEvents();\n    }\n    if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n      this.queryString = this.queryString === '' ? null : this.queryString;\n      this.beforePopupOpen = true;\n      this.resetList(this.dataSource, this.fields);\n      return;\n    }\n    this.isSelected = false;\n    this.activeIndex = null;\n    if (this.queryString !== '' && this.debounceDelay > 0) {\n      this.debouncedFiltering(e, this.debounceDelay);\n    } else {\n      this.performFiltering(e);\n    }\n  };\n  Mention.prototype.filterAction = function (dataSource, query, fields) {\n    this.beforePopupOpen = true;\n    if (this.queryString.length >= this.minLength) {\n      this.resetList(dataSource, fields, query);\n      this.isListResetted = true;\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n      this.beforePopupOpen = false;\n    }\n    this.setDataIndex();\n    this.renderReactTemplates();\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n    if (this.isActive) {\n      if (!isNullOrUndefined(ulElement)) {\n        attributes(ulElement, {\n          'id': this.inputElement.id + '_options',\n          'role': 'listbox',\n          'aria-hidden': 'false'\n        });\n        var isRTESlashMenuPopup = this.isRTE && this.cssClass && this.cssClass.indexOf('e-slash-menu') > -1;\n        if (isRTESlashMenuPopup) {\n          ulElement.id = this.inputElement.id + '_slash_menu_options';\n        }\n      }\n      var focusItem = this.fields.disabled ? ulElement.querySelector('.' + dropDownBaseClasses.li + ':not(.e-disabled)') : ulElement.querySelector('.' + dropDownBaseClasses.li);\n      if (focusItem) {\n        focusItem.classList.add(dropDownBaseClasses.selected);\n        this.selectedLI = focusItem;\n        var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n        this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n      }\n      if (this.beforePopupOpen && this.isPopupOpen) {\n        if (!isNullOrUndefined(this.popupObj.element)) {\n          this.popupObj.element.remove();\n        }\n        this.renderPopup();\n      }\n    }\n  };\n  Mention.prototype.setDataIndex = function () {\n    for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n      this.liCollections[i].setAttribute('data-index', i.toString());\n    }\n  };\n  Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n    var _this = this;\n    var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n    if (isNullOrUndefined(fields.itemCreated)) {\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n            setTimeout(function () {\n              highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n            }, 0);\n          } else {\n            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n          }\n        }\n      };\n    } else {\n      var itemCreated_1 = fields.itemCreated;\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n        }\n        itemCreated_1.apply(_this, [e]);\n      };\n    }\n    return fields;\n  };\n  Mention.prototype.elementValue = function () {\n    if (!this.isContentEditable(this.inputElement)) {\n      return this.inputElement.value.replace(this.mentionChar, '');\n    } else {\n      return this.inputElement.textContent.replace(this.mentionChar, '');\n    }\n  };\n  Mention.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    var filterType = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? 'equal' : this.filterType;\n    var queryString = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? this.elementValue() : this.queryString;\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n    if (this.queryString !== null && this.queryString !== '') {\n      var dataType = this.typeOfData(this.dataSource).typeof;\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n        filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      }\n    }\n    if (!isNullOrUndefined(this.suggestionCount)) {\n      // Since defualt value of suggestioncount is 25, checked the condition\n      if (this.suggestionCount !== 25) {\n        for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n          if (filterQuery.queries[queryElements].fn === 'onTake') {\n            filterQuery.queries.splice(queryElements, 1);\n          }\n        }\n      }\n      filterQuery.take(this.suggestionCount);\n    }\n    return filterQuery;\n  };\n  Mention.prototype.renderHightSearch = function () {\n    if (this.highlight) {\n      for (var i = 0; i < this.liCollections.length; i++) {\n        var isHighlight = this.ulElement.querySelector('.e-active');\n        if (!isHighlight) {\n          revertHighlightSearch(this.liCollections[i]);\n          highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n        }\n      }\n    }\n  };\n  Mention.prototype.getTextRange = function () {\n    var text;\n    if (!this.isContentEditable(this.inputElement)) {\n      var component = this.inputElement;\n      if (!isNullOrUndefined(component)) {\n        var startPos = component.selectionStart;\n        if (component.value && startPos >= 0) {\n          text = component.value.substring(0, startPos);\n        }\n      }\n    } else {\n      if (this.range) {\n        var selectedElem = this.range.startContainer;\n        if (!isNullOrUndefined(selectedElem)) {\n          var workingNodeContent = selectedElem.textContent;\n          var selectStartOffset = this.range.startOffset;\n          if (workingNodeContent && selectStartOffset >= 0) {\n            text = workingNodeContent.substring(0, selectStartOffset);\n          }\n        }\n      }\n    }\n    return text;\n  };\n  Mention.prototype.getLastLetter = function (text) {\n    if (isNullOrUndefined(text)) {\n      return '';\n    }\n    var textValue = text.indexOf('\\u200B') > -1 ? text.replace(/\\u200B/g, '').replace(/\\u00A0/g, ' ') : text.replace(/\\u00A0/g, ' ');\n    var words = textValue.split(/\\s+/);\n    var wordCnt = words.length - 1;\n    return words[wordCnt].trim();\n  };\n  Mention.prototype.isContentEditable = function (element) {\n    return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n  };\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.showPopup = function () {\n    this.beforePopupOpen = true;\n    if (document.activeElement !== this.inputElement) {\n      this.inputElement.focus();\n    }\n    this.queryString = this.didPopupOpenByTypingInitialChar ? this.queryString : '';\n    this.didPopupOpenByTypingInitialChar = false;\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n    }\n    if (!this.isTyped) {\n      this.resetList(this.dataSource, this.fields);\n    }\n    if (isNullOrUndefined(this.list)) {\n      this.initValue();\n    }\n    this.renderPopup();\n    attributes(this.inputElement, {\n      'aria-activedescendant': this.selectedElementID\n    });\n    if (this.selectedElementID == null) {\n      this.inputElement.removeAttribute('aria-activedescendant');\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n  /**\n   * Hides the popup if it is in an open state.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.hidePopup = function (e) {\n    this.removeSelection();\n    this.closePopup(0, e);\n  };\n  Mention.prototype.closePopup = function (delay, e) {\n    var _this = this;\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.inputElement.removeAttribute('aria-owns');\n    this.inputElement.removeAttribute('aria-activedescendant');\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel,\n      event: e || null\n    };\n    this.trigger('closed', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && _this.popupObj) {\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n  };\n  Mention.prototype.renderPopup = function () {\n    var _this = this;\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle_1;\n        if (isNullOrUndefined(_this.target)) {\n          popupEle_1 = _this.createElement('div', {\n            id: _this.inputElement.id + '_popup',\n            className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n          });\n        } else {\n          popupEle_1 = _this.element;\n          if (_this.cssClass != null) {\n            addClass([popupEle_1], _this.cssClass.split(' '));\n          }\n        }\n        var isRTESlashMenuPopup = _this.isRTE && _this.cssClass && _this.cssClass.indexOf('e-slash-menu') > -1;\n        if (isRTESlashMenuPopup) {\n          popupEle_1.id = _this.inputElement.id + '_slash_menu_popup';\n        } else {\n          if (!isNullOrUndefined(_this.target)) {\n            popupEle_1.id = _this.inputElement.id + '_popup';\n          }\n        }\n        _this.listHeight = formatUnit(_this.popupHeight);\n        if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n          var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n          if (!isNullOrUndefined(li)) {\n            _this.selectedLI = li;\n            var value = _this.getFormattedValue(li.getAttribute('data-value'));\n            _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n          }\n        }\n        append([_this.list], popupEle_1);\n        if (_this.inputElement.parentElement) {\n          var rteRootElement = _this.inputElement.parentElement.closest('.e-richtexteditor');\n          if (rteRootElement && popupEle_1.firstElementChild && popupEle_1.firstElementChild.childElementCount > 0) {\n            popupEle_1.firstElementChild.setAttribute('aria-owns', rteRootElement.id);\n            addClass([popupEle_1], 'e-rte-elements');\n          }\n        }\n        if (!_this.popupObj || !document.body.contains(_this.popupObj.element) || !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n          document.body.appendChild(popupEle_1);\n        }\n        var coordinates_1;\n        popupEle_1.style.visibility = 'hidden';\n        _this.setHeight(popupEle_1);\n        var offsetValue = 0;\n        var left = 0;\n        _this.initializePopup(popupEle_1, offsetValue, left);\n        _this.checkCollision(popupEle_1);\n        popupEle_1.style.visibility = 'visible';\n        var popupLeft_1 = popupEle_1.parentElement.offsetWidth - popupEle_1.offsetWidth;\n        var popupHeight_1 = popupEle_1.offsetHeight;\n        addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n          _this.wireListEvents();\n        }\n        _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n        attributes(_this.inputElement, {\n          'aria-owns': _this.inputElement.id + '_options',\n          'aria-activedescendant': _this.selectedElementID\n        });\n        if (_this.selectedElementID == null) {\n          _this.inputElement.removeAttribute('aria-activedescendant');\n        }\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          cancel: false,\n          animation: animModel\n        };\n        _this.trigger('opened', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            _this.renderReactTemplates();\n            if (_this.popupObj) {\n              _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.inputElement : null);\n            }\n            if (isNullOrUndefined(_this.getTriggerCharPosition())) {\n              return;\n            }\n            coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n            if (!_this.isCollided) {\n              popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n            } else {\n              if (_this.collision.length > 0 && _this.collision.indexOf('right') > -1 && _this.collision.indexOf('bottom') === -1) {\n                popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(popupLeft_1.toString(), 'px;\\nposition: absolute;\\n display: block;');\n              } else if (_this.collision && _this.collision.length > 0 && _this.collision.indexOf('bottom') > -1 && _this.collision.indexOf('right') === -1) {\n                popupEle_1.style.left = formatUnit(coordinates_1.left);\n                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(popupHeight_1.toString(), 10));\n              } else if (_this.collision && _this.collision.length > 0 && _this.collision.indexOf('bottom') > -1 && _this.collision.indexOf('right') > -1) {\n                popupEle_1.style.left = formatUnit(popupLeft_1);\n                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(popupHeight_1.toString(), 10));\n              } else {\n                popupEle_1.style.left = formatUnit(coordinates_1.left);\n                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(_this.popupHeight.toString(), 10));\n              }\n              _this.isCollided = false;\n              _this.collision = [];\n            }\n            popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n            _this.setHeight(popupEle_1);\n            popupEle_1.style.zIndex = _this.zIndex === 1000 ? getZindexPartial(popupEle_1).toString() : _this.zIndex.toString();\n          } else {\n            _this.beforePopupOpen = false;\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n  Mention.prototype.setHeight = function (popupEle) {\n    if (this.popupHeight !== 'auto' && this.list) {\n      this.list.style.maxHeight = (parseInt(this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n      popupEle.style.maxHeight = formatUnit(this.popupHeight);\n    } else {\n      popupEle.style.height = 'auto';\n    }\n  };\n  Mention.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'mention')) {\n      var coordinates = this.getCoordinates(this.inputElement, this.getTriggerCharPosition());\n      this.collision = isCollide(popupEle, null, coordinates.left, coordinates.top);\n      if (this.collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n        this.isCollided = true;\n      }\n      this.popupObj.resolveCollision();\n    }\n  };\n  Mention.prototype.getTriggerCharPosition = function () {\n    var mostRecentTriggerCharPos;\n    var currentRange = this.getTextRange();\n    if (currentRange !== undefined && currentRange !== null) {\n      mostRecentTriggerCharPos = 0;\n      var idx = currentRange.lastIndexOf(this.mentionChar);\n      if (idx >= mostRecentTriggerCharPos) {\n        mostRecentTriggerCharPos = idx;\n      }\n    }\n    return mostRecentTriggerCharPos ? mostRecentTriggerCharPos : 0;\n  };\n  Mention.prototype.initializePopup = function (element, offsetValue, left) {\n    var _this = this;\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputElement,\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      actionOnScroll: 'hide',\n      zIndex: this.zIndex,\n      close: function () {\n        _this.destroyPopup();\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n        _this.setDataIndex();\n      }\n    });\n  };\n  Mention.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n    return width;\n  };\n  Mention.prototype.destroyPopup = function () {\n    this.isPopupOpen = false;\n    this.popupObj.destroy();\n    if (isNullOrUndefined(this.target)) {\n      detach(this.popupObj.element);\n    } else {\n      this.popupObj.element.innerHTML = '';\n      this.popupObj.element.removeAttribute('style');\n      this.popupObj.element.removeAttribute('aria-disabled');\n    }\n    if (this.list.classList.contains('e-nodata')) {\n      this.list = null;\n    }\n  };\n  Mention.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n      this.hidePopup(e);\n    }\n  };\n  Mention.prototype.getCoordinates = function (element, position) {\n    var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n    var div;\n    var span;\n    var range;\n    var globalRange;\n    var coordinates;\n    var computed;\n    var rect;\n    if (!this.isContentEditable(this.inputElement)) {\n      div = this.createElement('div', {\n        className: 'e-form-mirror-div'\n      });\n      document.body.appendChild(div);\n      computed = getComputedStyle(element);\n      div.style.position = 'absolute';\n      div.style.visibility = 'hidden';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      properties.forEach(function (prop) {\n        // eslint-disable-next-line security/detect-object-injection\n        div.style[prop] = computed[prop];\n      });\n      div.textContent = element.value.substring(0, position);\n      if (this.inputElement.nodeName === 'INPUT') {\n        div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n      }\n      span = this.createElement('span');\n      span.textContent = element.value.substring(position) || '.';\n      div.appendChild(span);\n      rect = element.getBoundingClientRect();\n    } else {\n      var selectedNodePosition = this.getTriggerCharPosition();\n      globalRange = this.range;\n      range = document.createRange();\n      if (this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n        range.setStart(globalRange.startContainer, selectedNodePosition);\n        range.setEnd(globalRange.startContainer, selectedNodePosition);\n      } else {\n        range.setStart(globalRange.startContainer, globalRange.startOffset);\n        range.setEnd(globalRange.startContainer, globalRange.endOffset);\n      }\n      this.isTyped = false;\n      range.collapse(false);\n      rect = range.getBoundingClientRect().top === 0 ? range.startContainer.getClientRects()[0] : range.getBoundingClientRect();\n    }\n    var rectTop = rect.top;\n    var rectLeft = rect.left;\n    var iframes = document.querySelectorAll('iframe');\n    if (iframes.length > 0) {\n      for (var i = 0; i < iframes.length; i++) {\n        // eslint-disable-next-line security/detect-object-injection\n        var iframe = iframes[i];\n        if (iframe.contentDocument && iframe.contentDocument.contains(element)) {\n          var iframeRect = iframe.getBoundingClientRect();\n          rectTop += iframeRect.top;\n          rectLeft += iframeRect.left;\n        }\n      }\n    }\n    var doc = document.documentElement;\n    var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n    var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n    var width = 0;\n    if (!isNullOrUndefined(range) && range.getBoundingClientRect().top === 0) {\n      for (var i = 0; i < this.range.startContainer.childNodes.length; i++) {\n        if (this.range.startContainer.childNodes[i].nodeType !== Node.TEXT_NODE && this.range.startContainer.childNodes[i].textContent.trim() !== '') {\n          width += this.range.startContainer.childNodes[i].getClientRects()[0].width;\n        } else if (this.range.startContainer.childNodes[i].textContent !== '') {\n          var span_1 = document.createElement('span');\n          span_1.innerHTML = this.range.startContainer.childNodes[i].nodeValue;\n          document.body.appendChild(span_1);\n          var textNodeWidth = span_1.offsetWidth;\n          document.body.removeChild(span_1);\n          width += textNodeWidth;\n        }\n      }\n    }\n    if (!this.isContentEditable(this.inputElement)) {\n      coordinates = {\n        top: rectTop + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) + parseInt(computed.fontSize, 10) + 3 - element.scrollTop - (this.isCollided ? 10 : 0),\n        left: rectLeft + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n      };\n      document.body.removeChild(div);\n    } else {\n      if (this.collision && this.collision.length > 0 && this.collision.indexOf('right') > -1 && this.collision.indexOf('bottom') === -1) {\n        coordinates = {\n          top: rectTop + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10),\n          left: rectLeft + windowLeft + width\n        };\n      } else {\n        coordinates = {\n          top: rectTop + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10) - (this.isCollided ? 10 : 0),\n          left: rectLeft + windowLeft + width\n        };\n      }\n    }\n    return coordinates;\n  };\n  Mention.prototype.initValue = function () {\n    this.isDataFetched = false;\n    this.renderList();\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n  Mention.prototype.updateValues = function () {\n    var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n    if (!isNullOrUndefined(li)) {\n      this.setSelection(li, null);\n    }\n  };\n  Mention.prototype.renderList = function () {\n    _super.prototype.render.call(this);\n    this.unWireListEvents();\n    this.wireListEvents();\n  };\n  /**\n   * Event binding for list\n   *\n   * @returns {void}\n   */\n  Mention.prototype.wireListEvents = function () {\n    EventHandler.add(this.list, this.keyEventName, this.onMouseClick, this);\n    EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n    EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n  };\n  /**\n   * Event un binding for list items.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.unWireListEvents = function () {\n    EventHandler.remove(this.list, this.keyEventName, this.onMouseClick);\n    EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n    EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n  };\n  Mention.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n    if (!this.isValidLI(li) || this.isDisabledElement(li)) {\n      return;\n    }\n    this.isSelected = true;\n    this.setSelection(li, e);\n    var delay = 100;\n    this.closePopup(delay, e);\n    this.inputElement.focus();\n    if (!this.isRTE) {\n      e.preventDefault();\n    }\n  };\n  Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = this.getFormattedValue(li.getAttribute('data-value'));\n    var selectedData = this.getDataByValue(value);\n    if (!preventSelect && !isNullOrUndefined(e) && !(e.action === 'down' || e.action === 'up')) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n          _this.isSelected = false;\n          _this.isSelectCancel = true;\n        } else {\n          _this.selectEventCallback(li, selectedData, value);\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, selectedData, value);\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n  Mention.prototype.setSelection = function (li, e) {\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n    }\n  };\n  Mention.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n      this.setScrollPosition(e);\n    }\n    if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n      return;\n    }\n    if (isNullOrUndefined(e) || this.setValue(e)) {\n      return;\n    }\n  };\n  Mention.prototype.setScrollPosition = function (e) {\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.scrollBottom();\n          break;\n        default:\n          this.scrollTop();\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n  };\n  Mention.prototype.scrollBottom = function (isInitial) {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  };\n  Mention.prototype.scrollTop = function () {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var nextOffset = !isNullOrUndefined(this.fields.groupBy) && !isNullOrUndefined(this.fixedHeaderElement) ? this.selectedLI.offsetTop - (this.list.scrollTop + this.fixedHeaderElement.offsetHeight) : this.selectedLI.offsetTop - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop;\n      }\n    }\n  };\n  Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n    if (selectLi) {\n      addClass([li], dropDownBaseClasses.selected);\n    }\n    li.setAttribute('aria-selected', 'true');\n    this.activeIndex = this.getIndexByValue(value);\n  };\n  Mention.prototype.detachChanges = function (value) {\n    var items;\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n    return items;\n  };\n  Mention.prototype.setValue = function (e) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      if (!isNullOrUndefined(this.displayTemplate)) {\n        this.setDisplayTemplate();\n      }\n      this.updateMentionValue(e);\n      return true;\n    } else {\n      if (!isNullOrUndefined(this.displayTemplate)) {\n        this.setDisplayTemplate(e);\n      } else {\n        this.updateMentionValue(e);\n      }\n      return true;\n    }\n  };\n  Mention.prototype.updateMentionValue = function (e) {\n    var dataItem = this.getItemData();\n    var textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n    var value;\n    var endPos;\n    var range;\n    var globalRange;\n    var selection = this.inputElement.ownerDocument.getSelection();\n    var startPos = this.getTriggerCharPosition();\n    if (this.isSelectCancel) {\n      this.isSelectCancel = false;\n      return;\n    }\n    if (dataItem.text !== null) {\n      value = this.mentionVal(dataItem.text);\n    }\n    if (!this.isContentEditable(this.inputElement)) {\n      var myField = this.inputElement;\n      var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n      value += textSuffix;\n      endPos = startPos + this.mentionChar.length;\n      endPos += currentTriggerSnippet.length;\n      myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n      myField.selectionStart = startPos + value.length;\n      myField.selectionEnd = startPos + value.length;\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n      this.onChangeEvent(e);\n    } else {\n      endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n      if (this.range && this.range.startContainer.textContent.trim() !== this.mentionChar) {\n        endPos = this.range.endOffset;\n      }\n      globalRange = this.range;\n      range = document.createRange();\n      if (this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1 || this.getTextRange() && this.getTextRange().trim() === this.mentionChar) {\n        range.setStart(globalRange.startContainer, startPos);\n        range.setEnd(globalRange.startContainer, endPos);\n      } else {\n        if (globalRange.commonAncestorContainer.textContent.trim() !== '' && !isNullOrUndefined(globalRange.commonAncestorContainer.textContent.trim()) && this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n          range.setStart(globalRange.startContainer, globalRange.startOffset - 1);\n          range.setEnd(globalRange.startContainer, globalRange.endOffset - 1);\n        } else {\n          range.setStart(globalRange.startContainer, globalRange.startOffset);\n          range.setEnd(globalRange.startContainer, globalRange.endOffset);\n        }\n      }\n      this.isTyped = false;\n      range.deleteContents();\n      range.startContainer.parentElement.normalize();\n      var element = this.createElement('div');\n      element.innerHTML = value;\n      var frag = document.createDocumentFragment();\n      var node = void 0;\n      var lastNode = void 0;\n      // eslint-disable-next-line no-cond-assign\n      while (node = element.firstChild) {\n        lastNode = frag.appendChild(node);\n      }\n      range.insertNode(frag);\n      if (lastNode) {\n        range = range.cloneRange();\n        if (this.isRTE) {\n          if (lastNode.nodeType === 3) {\n            range.setStart(lastNode, lastNode.textContent.length);\n          } else {\n            range.setStartAfter(lastNode);\n          }\n        } else {\n          range.setStartAfter(lastNode);\n        }\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n      //New event to update the RichTextEditor value, when a mention item is selected using mouse click action.\n      if (!isNullOrUndefined(e.pointerType) && e.pointerType === 'mouse') {\n        var event_1 = new CustomEvent('content-changed', {\n          detail: {\n            click: true\n          }\n        });\n        this.inputElement.dispatchEvent(event_1);\n      }\n      this.onChangeEvent(e);\n    }\n  };\n  Mention.prototype.mentionVal = function (value) {\n    var showChar = this.showMentionChar ? this.mentionChar : '';\n    if (!isNullOrUndefined(this.displayTemplate) && !isNullOrUndefined(this.displayTempElement)) {\n      value = this.displayTempElement.innerHTML;\n    }\n    if (this.isContentEditable(this.inputElement)) {\n      if (Browser.isAndroid) {\n        return '<span contenteditable=\"true\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : '&#8203;');\n      } else {\n        return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : '&#8203;');\n      }\n    } else {\n      return showChar + value;\n    }\n  };\n  Mention.prototype.setDisplayTemplate = function (e) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.isReact) {\n      this.clearTemplate(['displayTemplate']);\n      if (this.displayTempElement) {\n        detach(this.displayTempElement);\n        this.displayTempElement = null;\n      }\n    }\n    if (!this.displayTempElement) {\n      this.displayTempElement = this.createElement('div');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      this.displayTempElement.innerHTML = '';\n    }\n    var compiledString = compile(this.displayTemplate);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n    if (displayCompTemp && displayCompTemp.length > 0) {\n      append(displayCompTemp, this.displayTempElement);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      this.renderTemplates();\n    } else {\n      this.renderTemplates(function () {\n        _this.updateMentionValue(e);\n      });\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Mention.prototype.renderTemplates = function (callBack) {\n    this.renderReactTemplates(callBack);\n  };\n  Mention.prototype.setSpinnerTemplate = function () {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.isReact) {\n      this.clearTemplate(['spinnerTemplate']);\n      if (this.spinnerTemplateElement) {\n        detach(this.spinnerTemplateElement);\n        this.spinnerTemplateElement = null;\n      }\n    }\n    if (!this.spinnerTemplateElement) {\n      this.spinnerTemplateElement = this.createElement('div');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      this.spinnerTemplateElement.innerHTML = '';\n    }\n    var compiledString = compile(this.spinnerTemplate);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n    if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n      for (var i = 0; i < spinnerCompTemp.length; i++) {\n        this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n      }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      this.renderTemplates();\n      this.popupObj.element.appendChild(this.spinnerTemplateElement);\n    } else {\n      this.renderTemplates(function () {\n        _this.popupObj.element.appendChild(_this.spinnerTemplateElement);\n      });\n    }\n  };\n  Mention.prototype.onChangeEvent = function (eve) {\n    this.isSelected = false;\n    var items = this.detachMentionChanges(this.itemData);\n    var preItems;\n    if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n      preItems = Object.defineProperties({}, {\n        value: {\n          value: this.previousItemData,\n          enumerable: true\n        },\n        text: {\n          value: this.previousItemData,\n          enumerable: true\n        }\n      });\n    } else {\n      preItems = this.previousItemData;\n    }\n    var eventArgs = {\n      e: eve,\n      item: this.item,\n      itemData: items,\n      previousItem: this.previousSelectedLI,\n      previousItemData: preItems,\n      isInteracted: eve ? true : false,\n      value: this.item.innerHTML,\n      element: this.inputElement\n    };\n    this.trigger('change', eventArgs);\n  };\n  Mention.prototype.detachMentionChanges = function (value) {\n    var items;\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n    return items;\n  };\n  Mention.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n  Mention.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n  Mention.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n  Mention.prototype.setHover = function (li) {\n    if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n  Mention.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n  Mention.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n  Mention.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n  /**\n   * Search the entered text and show it in the suggestion list if available.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.search = function (text, positionX, positionY) {\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n    }\n    var currentRange = this.getTextRange();\n    this.queryString = text;\n    var lastWordRange = this.getLastLetter(currentRange);\n    if (this.ignoreCase && (text === lastWordRange || text === lastWordRange.toLowerCase()) || !this.ignoreCase && text === lastWordRange) {\n      this.resetList(this.dataSource, this.fields);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n      return;\n    }\n    if (isNullOrUndefined(this.list)) {\n      this.renderList();\n      this.renderPopup();\n    } else if (!this.isPopupOpen) {\n      this.renderPopup();\n    }\n    this.popupObj.element.style.left = formatUnit(positionX);\n    this.popupObj.element.style.top = formatUnit(positionY);\n  };\n  /**\n   * Method to disable specific item in the popup.\n   *\n   * @param {string | number | object | HTMLLIElement} item - Specifies the item to be disabled.\n   * @returns {void}\n    */\n  Mention.prototype.disableItem = function (item) {\n    if (this.fields.disabled) {\n      if (!this.list) {\n        this.renderList();\n      }\n      var itemIndex = -1;\n      if (this.liCollections && this.liCollections.length > 0 && this.listData && this.fields.disabled) {\n        if (typeof item === 'string') {\n          itemIndex = this.getIndexByValue(item);\n        } else if (typeof item === 'object') {\n          if (item instanceof HTMLLIElement) {\n            for (var index = 0; index < this.liCollections.length; index++) {\n              if (this.liCollections[index] === item) {\n                itemIndex = this.getIndexByValue(item.getAttribute('data-value'));\n                break;\n              }\n            }\n          } else {\n            var value = JSON.parse(JSON.stringify(item))[this.fields.value];\n            for (var index = 0; index < this.listData.length; index++) {\n              if (JSON.parse(JSON.stringify(this.listData[index]))[this.fields.value] === value) {\n                itemIndex = this.getIndexByValue(value);\n                break;\n              }\n            }\n          }\n        } else {\n          itemIndex = item;\n        }\n        var isValidIndex = itemIndex < this.liCollections.length && itemIndex > -1;\n        if (isValidIndex && !JSON.parse(JSON.stringify(this.listData[itemIndex]))[this.fields.disabled]) {\n          var li = this.liCollections[itemIndex];\n          if (li) {\n            this.disableListItem(li);\n            var parsedData = JSON.parse(JSON.stringify(this.listData[itemIndex]));\n            parsedData[this.fields.disabled] = true;\n            this.listData[itemIndex] = parsedData;\n            this.dataSource = this.listData;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n  Mention.prototype.destroy = function () {\n    this.hidePopup();\n    this.unWireEvent();\n    if (this.list) {\n      this.unWireListEvents();\n    }\n    if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n      return;\n    }\n    this.previousSelectedLI = null;\n    this.item = null;\n    this.selectedLI = null;\n    this.popupObj = null;\n    _super.prototype.destroy.call(this);\n  };\n  Mention.prototype.getLocaleName = function () {\n    return 'mention';\n  };\n  Mention.prototype.getNgDirective = function () {\n    return 'EJS-MENTION';\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n  Mention.prototype.getModuleName = function () {\n    return 'mention';\n  };\n  __decorate([Property(null)], Mention.prototype, \"cssClass\", void 0);\n  __decorate([Property('@')], Mention.prototype, \"mentionChar\", void 0);\n  __decorate([Property(false)], Mention.prototype, \"showMentionChar\", void 0);\n  __decorate([Property(false)], Mention.prototype, \"allowSpaces\", void 0);\n  __decorate([Property(null)], Mention.prototype, \"suffixText\", void 0);\n  __decorate([Property(25)], Mention.prototype, \"suggestionCount\", void 0);\n  __decorate([Property(0)], Mention.prototype, \"minLength\", void 0);\n  __decorate([Property('None')], Mention.prototype, \"sortOrder\", void 0);\n  __decorate([Property(true)], Mention.prototype, \"ignoreCase\", void 0);\n  __decorate([Property(true)], Mention.prototype, \"requireLeadingSpace\", void 0);\n  __decorate([Property(false)], Mention.prototype, \"highlight\", void 0);\n  __decorate([Property()], Mention.prototype, \"locale\", void 0);\n  __decorate([Property('auto')], Mention.prototype, \"popupWidth\", void 0);\n  __decorate([Property('300px')], Mention.prototype, \"popupHeight\", void 0);\n  __decorate([Property(300)], Mention.prototype, \"debounceDelay\", void 0);\n  __decorate([Property(null)], Mention.prototype, \"displayTemplate\", void 0);\n  __decorate([Property(null)], Mention.prototype, \"itemTemplate\", void 0);\n  __decorate([Property('No records found')], Mention.prototype, \"noRecordsTemplate\", void 0);\n  __decorate([Property(null)], Mention.prototype, \"spinnerTemplate\", void 0);\n  __decorate([Property()], Mention.prototype, \"target\", void 0);\n  __decorate([Property([])], Mention.prototype, \"dataSource\", void 0);\n  __decorate([Property(null)], Mention.prototype, \"query\", void 0);\n  __decorate([Property('Contains')], Mention.prototype, \"filterType\", void 0);\n  __decorate([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], Mention.prototype, \"fields\", void 0);\n  __decorate([Event()], Mention.prototype, \"actionBegin\", void 0);\n  __decorate([Event()], Mention.prototype, \"actionComplete\", void 0);\n  __decorate([Event()], Mention.prototype, \"actionFailure\", void 0);\n  __decorate([Event()], Mention.prototype, \"change\", void 0);\n  __decorate([Event()], Mention.prototype, \"beforeOpen\", void 0);\n  __decorate([Event()], Mention.prototype, \"opened\", void 0);\n  __decorate([Event()], Mention.prototype, \"closed\", void 0);\n  __decorate([Event()], Mention.prototype, \"select\", void 0);\n  __decorate([Event()], Mention.prototype, \"filtering\", void 0);\n  __decorate([Event()], Mention.prototype, \"created\", void 0);\n  __decorate([Event()], Mention.prototype, \"destroyed\", void 0);\n  Mention = __decorate([NotifyPropertyChanges], Mention);\n  return Mention;\n}(DropDownBase);\nexport { Mention };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","compile","Property","EventHandler","Animation","formatUnit","append","attributes","isNullOrUndefined","detach","Event","Complex","addClass","removeClass","closest","isUndefined","getValue","NotifyPropertyChanges","Browser","FieldSettings","DropDownBase","dropDownBaseClasses","DataManager","Query","Popup","isCollide","createSpinner","showSpinner","hideSpinner","getZindexPartial","highlightSearch","revertHighlightSearch","Mention","_super","options","element","_this","call","debounceTimer","onPropertyChanged","newProp","oldProp","_i","_a","keys","prop","minLength","suffixText","allowSpaces","mentionChar","showMentionChar","requireLeadingSpace","updateCssClass","cssClass","newClass","oldClass","replace","trim","setCssClass","inputElement","popupObj","elements","split","initializeData","isSelected","isFiltered","beforePopupOpen","initRemoteRender","isListResetted","isPopupOpen","isCollided","lineBreak","isRTE","keyEventName","preRender","render","isSelector","checkAndUpdateInternalComponent","document","querySelector","isContentEditable","hasAttribute","setAttribute","queryString","elementValue","wireEvent","add","onKeyUp","bindCommonEvent","unWireEvent","remove","unBindCommonEvent","isDevice","addEventListener","keyDownHandler","bind","hideWaitingSpinner","spinnerElement","spinnerTemplate","spinnerTemplateElement","targetElement","isVue","classList","contains","nodeName","parentElement","showWaitingSpinner","width","createElement","setSpinnerTemplate","e","isKeyAction","keyCode","action","altKey","shiftKey","keyActionHandler","isNavigation","isTabAction","list","undefined","isRequested","charCodeAt","getLastLetter","getTextRange","renderList","liCollections","preventDefault","isUpDownKey","updateUpDownAction","li","selected","setSelection","hidePopup","selectedLI","updateSelectedItem","fields","disabled","querySelectorAll","focusEle","focus","isSelectFocusItem","value","getFormattedValue","getAttribute","activeIndex","getIndexByValue","index","startIndex","nextItem","itemIndex","isDisabledElement","removeEventListener","rangetextContent","isTyped","code","isRteImage","activeElement","range","getCurrentRange","startContainer","textContent","currentRange","mentionRegex","RegExp","isValid","test","lastWordRange","previousChar","charAt","Math","max","indexOf","includes","pop","lastTwoLetters","toString","Regex","charRegex","match","previousElementSibling","tagName","nodeType","isMatchedText","substring","lastIndexOf","searchLists","startOffset","endOffset","deleteContents","showPopup","body","resetList","dataSource","initValue","didPopupOpenByTypingInitialChar","isMatched","toLowerCase","ownerDocument","getSelection","getRangeAt","performFiltering","eventArgs","preventDefaultAction","text","updateData","query","cancel","filterAction","trigger","isDataFetched","unWireListEvents","wireListEvents","type","debounceDelay","debouncedFiltering","setDataIndex","renderReactTemplates","onActionComplete","ulElement","isUpdated","isActive","id","isRTESlashMenuPopup","focusItem","selectEventCallback","getDataByValue","renderPopup","listOption","fieldsSettings","itemCreated","highlight","getNgDirective","itemTemplate","setTimeout","item","ignoreCase","filterType","itemCreated_1","apply","getQuery","filterQuery","clone","dataType","typeOfData","typeof","where","ignoreAccent","mapping","suggestionCount","queryElements","queries","fn","splice","take","renderHightSearch","isHighlight","component","startPos","selectionStart","selectedElem","workingNodeContent","selectStartOffset","textValue","words","wordCnt","selectedElementID","removeAttribute","removeSelection","closePopup","delay","onDocumentClick","animModel","name","duration","popupInstance","popup","animation","event","hide","destroyPopup","args","popupEle_1","className","listHeight","popupHeight","rteRootElement","firstElementChild","childElementCount","appendChild","coordinates_1","style","visibility","setHeight","offsetValue","left","initializePopup","checkCollision","popupLeft_1","offsetWidth","popupHeight_1","offsetHeight","show","zIndex","getTriggerCharPosition","getCoordinates","cssText","concat","top","collision","parseInt","popupWidth","popupEle","maxHeight","height","getModuleName","coordinates","marginTop","getComputedStyle","resolveCollision","mostRecentTriggerCharPos","idx","setWidth","targetType","relateTo","X","Y","offsetY","enableRtl","offsetX","position","actionOnScroll","close","open","inputWidth","parseFloat","destroy","innerHTML","properties","div","span","globalRange","computed","rect","forEach","getBoundingClientRect","selectedNodePosition","createRange","setStart","setEnd","collapse","getClientRects","rectTop","rectLeft","iframes","iframe","contentDocument","iframeRect","doc","documentElement","windowLeft","window","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","scrollTop","clientTop","childNodes","Node","TEXT_NODE","span_1","nodeValue","textNodeWidth","removeChild","offsetTop","borderTopWidth","fontSize","offsetLeft","borderLeftWidth","updateValues","onMouseClick","onMouseOver","onMouseLeave","isValidLI","preventSelect","isSelection","removeHover","selectedData","items","detachChanges","itemData","isInteracted","isSelectCancel","setSelectOptions","previousSelectedLI","setScrollPosition","setValue","scrollBottom","isInitial","currentOffset","nextBottom","nextOffset","paddingTop","boxRange","groupBy","fixedHeaderElement","selectLi","previousItemData","focusedItem","defineProperties","enumerable","isReact","displayTemplate","setDisplayTemplate","updateMentionValue","dataItem","getItemData","textSuffix","endPos","selection","mentionVal","myField","currentTriggerSnippet","selectionEnd","onChangeEvent","commonAncestorContainer","normalize","frag","createDocumentFragment","node","lastNode","firstChild","insertNode","cloneRange","setStartAfter","removeAllRanges","addRange","pointerType","event_1","CustomEvent","detail","click","dispatchEvent","showChar","displayTempElement","isAndroid","clearTemplate","compiledString","displayCompTemp","displayTemplateId","isStringTemplate","renderTemplates","callBack","spinnerCompTemp","spinnerTemplateId","eve","detachMentionChanges","preItems","previousItem","dataValue","dataText","selectedItems","currentLi","setHover","hover","hoveredItem","search","positionX","positionY","disableItem","listData","HTMLLIElement","JSON","parse","stringify","isValidIndex","disableListItem","parsedData","getLocaleName","iconCss"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-dropdowns/src/mention/mention.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile, Property, EventHandler, Animation, formatUnit, append, attributes } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, detach, Event, Complex, addClass, removeClass, closest, isUndefined, getValue, NotifyPropertyChanges, Browser } from '@syncfusion/ej2-base';\nimport { FieldSettings } from '../drop-down-base/drop-down-base';\nimport { DropDownBase, dropDownBaseClasses } from '../drop-down-base/drop-down-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { Popup, isCollide, createSpinner, showSpinner, hideSpinner, getZindexPartial } from '@syncfusion/ej2-popups';\nimport { highlightSearch, revertHighlightSearch } from '../common/highlight-search';\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\nvar Mention = /** @class */ (function (_super) {\n    __extends(Mention, _super);\n    /**\n     * * Constructor for creating the widget\n     *\n     * @param {MentionModel} options - Specifies the MentionComponent model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function Mention(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.debounceTimer = null;\n        return _this;\n    }\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n     * @param {MentionModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'minLength':\n                    this.minLength = newProp.minLength;\n                    break;\n                case 'suffixText':\n                    this.suffixText = newProp.suffixText;\n                    break;\n                case 'allowSpaces':\n                    this.allowSpaces = newProp.allowSpaces;\n                    break;\n                case 'mentionChar':\n                    this.mentionChar = newProp.mentionChar;\n                    break;\n                case 'showMentionChar':\n                    this.showMentionChar = newProp.showMentionChar;\n                    break;\n                case 'requireLeadingSpace':\n                    this.requireLeadingSpace = newProp.requireLeadingSpace;\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n            }\n        }\n    };\n    Mention.prototype.updateCssClass = function (newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        this.setCssClass(newClass, [this.inputElement], oldClass);\n        if (this.popupObj) {\n            this.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    };\n    Mention.prototype.setCssClass = function (cssClass, elements, oldClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass(elements, oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(cssClass) && cssClass !== '') {\n            addClass(elements, cssClass.split(' '));\n        }\n    };\n    Mention.prototype.initializeData = function () {\n        this.isSelected = false;\n        this.isFiltered = false;\n        this.beforePopupOpen = false;\n        this.initRemoteRender = false;\n        this.isListResetted = false;\n        this.isPopupOpen = false;\n        this.isCollided = false;\n        this.lineBreak = false;\n        this.isRTE = false;\n        this.keyEventName = 'mousedown';\n    };\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.preRender = function () {\n        this.initializeData();\n        _super.prototype.preRender.call(this);\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.render = function () {\n        var isSelector = typeof this.target === 'string';\n        this.inputElement = !isNullOrUndefined(this.target) ?\n            this.checkAndUpdateInternalComponent(isSelector\n                ? document.querySelector(this.target)\n                : this.target) : this.element;\n        if (this.isContentEditable(this.inputElement)) {\n            if (!this.inputElement.hasAttribute('contenteditable')) {\n                this.inputElement.setAttribute('contenteditable', 'true');\n            }\n            addClass([this.inputElement], ['e-mention']);\n            if (isNullOrUndefined(this.target)) {\n                addClass([this.inputElement], ['e-editable-element']);\n            }\n        }\n        this.inputElement.setAttribute('role', 'textbox');\n        this.inputElement.setAttribute('aria-label', 'mention');\n        this.queryString = this.elementValue();\n        this.wireEvent();\n    };\n    Mention.prototype.wireEvent = function () {\n        EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n        this.bindCommonEvent();\n    };\n    Mention.prototype.unWireEvent = function () {\n        EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n        this.unBindCommonEvent();\n    };\n    Mention.prototype.bindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.inputElement.addEventListener('keydown', this.keyDownHandler.bind(this), !this.isRTE);\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.hideSpinner = function () {\n        this.hideWaitingSpinner();\n    };\n    Mention.prototype.hideWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n        }\n        if (!isNullOrUndefined(this.spinnerTemplate) && !isNullOrUndefined(this.spinnerTemplateElement)) {\n            detach(this.spinnerTemplateElement);\n        }\n    };\n    Mention.prototype.checkAndUpdateInternalComponent = function (targetElement) {\n        if (!this.isVue && targetElement.classList.contains('e-richtexteditor')) {\n            return targetElement.querySelector('.e-content');\n        }\n        if (this.isVue && targetElement.nodeName === 'TEXTAREA' && targetElement.classList.contains('e-rte-hidden')) {\n            var parentElement = targetElement.parentElement;\n            if (parentElement && parentElement.classList.contains('e-richtexteditor')) {\n                return parentElement.querySelector('.e-content');\n            }\n        }\n        if (targetElement && targetElement.parentElement && targetElement.parentElement.classList.contains('e-rte-content')) {\n            this.isRTE = true;\n            this.keyEventName = 'click';\n        }\n        return targetElement;\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.popupObj)) {\n            if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n                this.spinnerElement = this.popupObj.element;\n                createSpinner({\n                    target: this.spinnerElement,\n                    width: Browser.isDevice ? '16px' : '14px'\n                }, this.createElement);\n                showSpinner(this.spinnerElement);\n            }\n            if (!isNullOrUndefined(this.spinnerTemplate)) {\n                this.setSpinnerTemplate();\n            }\n        }\n    };\n    Mention.prototype.keyDownHandler = function (e) {\n        var isKeyAction = true;\n        switch (e.keyCode) {\n            case 38:\n                e.action = e.altKey ? 'hide' : 'up';\n                break;\n            case 40:\n                e.action = e.altKey ? 'open' : 'down';\n                break;\n            case 33:\n                e.action = 'pageUp';\n                break;\n            case 34:\n                e.action = 'pageDown';\n                break;\n            case 36:\n                e.action = 'home';\n                break;\n            case 35:\n                e.action = 'end';\n                break;\n            case 9:\n                e.action = e.shiftKey ? 'close' : 'tab';\n                break;\n            case 27:\n                e.action = 'escape';\n                break;\n            case 32:\n                e.action = 'space';\n                break;\n            case 13:\n                e.action = 'enter';\n                break;\n            default:\n                isKeyAction = false;\n                break;\n        }\n        if (isKeyAction) {\n            this.keyActionHandler(e);\n        }\n    };\n    Mention.prototype.keyActionHandler = function (e) {\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        var isTabAction = e.action === 'tab' || e.action === 'close';\n        if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape' && e.action !== 'space' && this.mentionChar.charCodeAt(0) === this.getLastLetter(this.getTextRange()).charCodeAt(0)) {\n            this.renderList();\n        }\n        if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n            isNavigation && this.liCollections.length === 0) || this.isRequested) {\n            return;\n        }\n        if (e.action === 'escape') {\n            e.preventDefault();\n        }\n        this.isSelected = e.action === 'escape' ? false : this.isSelected;\n        switch (e.action) {\n            case 'down':\n            case 'up':\n                this.isUpDownKey = true;\n                this.updateUpDownAction(e);\n                break;\n            case 'tab':\n                if (this.isPopupOpen) {\n                    e.preventDefault();\n                    var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n                    if (li) {\n                        this.isSelected = true;\n                        this.setSelection(li, e);\n                    }\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                    }\n                }\n                break;\n            case 'enter':\n                if (this.isPopupOpen) {\n                    e.preventDefault();\n                    if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n                        this.updateSelectedItem(this.selectedLI, e, false, true);\n                    }\n                }\n                break;\n            case 'escape':\n                if (this.isPopupOpen) {\n                    this.hidePopup(e);\n                }\n                break;\n        }\n    };\n    Mention.prototype.updateUpDownAction = function (e) {\n        if (this.fields.disabled && this.list && this.list.querySelectorAll('.e-list-item:not(.e-disabled)').length === 0) {\n            return;\n        }\n        var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (this.isSelectFocusItem(focusEle)) {\n            this.setSelection(focusEle, e);\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n            if (!isNullOrUndefined(li)) {\n                var value = this.getFormattedValue(li.getAttribute('data-value'));\n                this.activeIndex = this.getIndexByValue(value);\n            }\n            var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            var startIndex = 0;\n            startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n            index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            var nextItem = isNullOrUndefined(this.activeIndex) ?\n                this.liCollections[startIndex] : this.liCollections[index];\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n        }\n        var itemIndex;\n        for (var index = 0; index < this.liCollections.length; index++) {\n            if (this.liCollections[index].classList.contains(dropDownBaseClasses.focus)\n                || this.liCollections[index].classList.contains(dropDownBaseClasses.selected)) {\n                itemIndex = index;\n                break;\n            }\n        }\n        if (itemIndex != null && this.isDisabledElement(this.liCollections[itemIndex])) {\n            this.updateUpDownAction(e);\n        }\n        if (this.isPopupOpen) {\n            e.preventDefault();\n        }\n    };\n    Mention.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    Mention.prototype.unBindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.inputElement.removeEventListener('keydown', this.keyDownHandler.bind(this), !this.isRTE);\n        }\n    };\n    Mention.prototype.onKeyUp = function (e) {\n        var rangetextContent;\n        if (this.isUpDownKey && this.isPopupOpen && e.keyCode === 229) {\n            this.isUpDownKey = false;\n            return;\n        }\n        this.isTyped = e.code !== 'Enter' && e.code !== 'Space' && e.code !== 'ArrowDown' && e.code !== 'ArrowUp' ? true : false;\n        var isRteImage = document.activeElement.parentElement && document.activeElement.parentElement.querySelector('.e-rte-image') ? true : false;\n        if (document.activeElement !== this.inputElement && !isRteImage) {\n            this.inputElement.focus();\n        }\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n            rangetextContent = this.range.startContainer.textContent.split('');\n        }\n        var currentRange = this.getTextRange();\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        var mentionRegex = new RegExp(this.mentionChar.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') + '\\\\s');\n        var isValid = currentRange && mentionRegex.test(currentRange) ? false : true;\n        var lastWordRange = this.getLastLetter(currentRange);\n        var previousChar = currentRange ? currentRange.charAt(Math.max(0, currentRange.indexOf(this.mentionChar) - 1)) : '';\n        if (isValid && this.allowSpaces && currentRange && currentRange.includes(this.mentionChar) && currentRange.split(this.mentionChar).pop() !== ''\n            && (!this.requireLeadingSpace || (this.requireLeadingSpace && (previousChar === ' ' || currentRange.indexOf(this.mentionChar) === 0)))) {\n            lastWordRange = this.mentionChar + currentRange.split(this.mentionChar).pop();\n        }\n        if (!this.requireLeadingSpace && lastWordRange && lastWordRange.includes(this.mentionChar)) {\n            lastWordRange = this.mentionChar + lastWordRange.split(this.mentionChar).pop();\n        }\n        var lastTwoLetters = this.mentionChar.toString() + this.mentionChar.toString();\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        var Regex = new RegExp(this.mentionChar.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'g');\n        var charRegex = new RegExp('[a-zA-Z]', 'g');\n        if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n            return;\n        }\n        if (this.beforePopupOpen && this.isPopupOpen && lastWordRange === lastTwoLetters) {\n            this.hidePopup();\n            return;\n        }\n        if (((!currentRange || !lastWordRange) || (!lastWordRange.includes(this.mentionChar) && !this.requireLeadingSpace)) || e.code === 'Enter' || e.keyCode === 27 ||\n            (lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1) ||\n            (this.isContentEditable(this.inputElement) && this.range.startContainer &&\n                this.range.startContainer.previousElementSibling && this.range.startContainer.previousElementSibling.tagName !== 'BR' && this.range.startContainer.textContent.split('').length > 0 &&\n                (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 ||\n                    this.range.startContainer.nodeType === 1))) {\n            if (isValid && this.isPopupOpen && this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1\n                && !this.isMatchedText() && (currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ') &&\n                (this.list && this.list.querySelectorAll('ul').length > 0) && e.code !== 'Enter') {\n                this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n                this.searchLists(e);\n            }\n            else if (!this.requireLeadingSpace || this.isPopupOpen && (!this.allowSpaces || !lastWordRange) && (e.code !== 'ArrowDown' && e.code !== 'ArrowUp')) {\n                this.hidePopup();\n                this.lineBreak = true;\n            }\n            else if ((e.key === 'Backspace' || e.key === 'Delete') && this.range && this.range.startOffset !== this.range.endOffset) {\n                this.range.deleteContents();\n            }\n            return;\n        }\n        if (lastWordRange.includes(this.mentionChar)) {\n            this.queryString = !this.requireLeadingSpace\n                ? lastWordRange.substring(lastWordRange.lastIndexOf(this.mentionChar) + 1).trim()\n                : lastWordRange.replace(this.mentionChar, '');\n        }\n        if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) &&\n            this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n            this.searchLists(e);\n            if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n                if (!this.isContentEditable(this.inputElement)) {\n                    this.showPopup();\n                }\n                else if (this.isContentEditable(this.inputElement) && this.range &&\n                    this.range.startContainer !== this.inputElement && e.keyCode !== 9) {\n                    this.showPopup();\n                }\n            }\n        }\n        else if ((!this.requireLeadingSpace ? lastWordRange.includes(this.mentionChar)\n            : lastWordRange.indexOf(this.mentionChar) === 0) && !this.isPopupOpen && e.keyCode !== 8 &&\n            (!this.popupObj || ((isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element)) ||\n                (!isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element))))) {\n            if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n                this.searchLists(e);\n            }\n            this.resetList(this.dataSource, this.fields);\n            if (isNullOrUndefined(this.list)) {\n                this.initValue();\n            }\n            if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.queryString.length >= this.minLength) {\n                this.didPopupOpenByTypingInitialChar = true;\n                this.showPopup();\n                if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n                    this.showWaitingSpinner();\n                }\n                this.lineBreak = false;\n            }\n        }\n        else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 &&\n            e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8 && (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) ||\n            (this.liCollections && this.liCollections.length > 0))) {\n            this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n            this.searchLists(e);\n        }\n        else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n            this.searchLists(e);\n            if (!this.isListResetted) {\n                this.resetList(this.dataSource, this.fields);\n            }\n        }\n        this.isListResetted = false;\n    };\n    Mention.prototype.isMatchedText = function () {\n        var isMatched = false;\n        for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n            if (this.getTextRange() &&\n                this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n                isMatched = true;\n            }\n        }\n        return isMatched;\n    };\n    Mention.prototype.getCurrentRange = function () {\n        this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n        return this.range;\n    };\n    Mention.prototype.performFiltering = function (e) {\n        var _this = this;\n        var eventArgs = {\n            preventDefaultAction: false,\n            text: this.queryString,\n            updateData: function (dataSource, query, fields) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                _this.isFiltered = true;\n                _this.filterAction(dataSource, query, fields);\n            },\n            cancel: false\n        };\n        this.trigger('filtering', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n                _this.filterAction(_this.dataSource, null, _this.fields);\n            }\n        });\n    };\n    Mention.prototype.searchLists = function (e) {\n        this.isDataFetched = false;\n        if (isNullOrUndefined(this.list)) {\n            _super.prototype.render.call(this);\n            this.unWireListEvents();\n            this.wireListEvents();\n        }\n        if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n            this.queryString = this.queryString === '' ? null : this.queryString;\n            this.beforePopupOpen = true;\n            this.resetList(this.dataSource, this.fields);\n            return;\n        }\n        this.isSelected = false;\n        this.activeIndex = null;\n        if (this.queryString !== '' && this.debounceDelay > 0) {\n            this.debouncedFiltering(e, this.debounceDelay);\n        }\n        else {\n            this.performFiltering(e);\n        }\n    };\n    Mention.prototype.filterAction = function (dataSource, query, fields) {\n        this.beforePopupOpen = true;\n        if (this.queryString.length >= this.minLength) {\n            this.resetList(dataSource, fields, query);\n            this.isListResetted = true;\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.beforePopupOpen = false;\n        }\n        this.setDataIndex();\n        this.renderReactTemplates();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.isActive) {\n            if (!isNullOrUndefined(ulElement)) {\n                attributes(ulElement, { 'id': this.inputElement.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n                var isRTESlashMenuPopup = this.isRTE && this.cssClass && this.cssClass.indexOf('e-slash-menu') > -1;\n                if (isRTESlashMenuPopup) {\n                    ulElement.id = this.inputElement.id + '_slash_menu_options';\n                }\n            }\n            var focusItem = this.fields.disabled ? ulElement.querySelector('.' + dropDownBaseClasses.li + ':not(.e-disabled)') : ulElement.querySelector('.' + dropDownBaseClasses.li);\n            if (focusItem) {\n                focusItem.classList.add(dropDownBaseClasses.selected);\n                this.selectedLI = focusItem;\n                var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n                this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n            }\n            if (this.beforePopupOpen && this.isPopupOpen) {\n                if (!isNullOrUndefined(this.popupObj.element)) {\n                    this.popupObj.element.remove();\n                }\n                this.renderPopup();\n            }\n        }\n    };\n    Mention.prototype.setDataIndex = function () {\n        for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n            this.liCollections[i].setAttribute('data-index', i.toString());\n        }\n    };\n    Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n        var _this = this;\n        var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n        if (isNullOrUndefined(fields.itemCreated)) {\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n                        setTimeout(function () {\n                            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                        }, 0);\n                    }\n                    else {\n                        highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                    }\n                }\n            };\n        }\n        else {\n            var itemCreated_1 = fields.itemCreated;\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                }\n                itemCreated_1.apply(_this, [e]);\n            };\n        }\n        return fields;\n    };\n    Mention.prototype.elementValue = function () {\n        if (!this.isContentEditable(this.inputElement)) {\n            return this.inputElement.value.replace(this.mentionChar, '');\n        }\n        else {\n            return this.inputElement.textContent.replace(this.mentionChar, '');\n        }\n    };\n    Mention.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        var filterType = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ? 'equal' : this.filterType;\n        var queryString = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ?\n            this.elementValue() : this.queryString;\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.queryString !== null && this.queryString !== '') {\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n                filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        if (!isNullOrUndefined(this.suggestionCount)) {\n            // Since defualt value of suggestioncount is 25, checked the condition\n            if (this.suggestionCount !== 25) {\n                for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onTake') {\n                        filterQuery.queries.splice(queryElements, 1);\n                    }\n                }\n            }\n            filterQuery.take(this.suggestionCount);\n        }\n        return filterQuery;\n    };\n    Mention.prototype.renderHightSearch = function () {\n        if (this.highlight) {\n            for (var i = 0; i < this.liCollections.length; i++) {\n                var isHighlight = this.ulElement.querySelector('.e-active');\n                if (!isHighlight) {\n                    revertHighlightSearch(this.liCollections[i]);\n                    highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n                }\n            }\n        }\n    };\n    Mention.prototype.getTextRange = function () {\n        var text;\n        if (!this.isContentEditable(this.inputElement)) {\n            var component = this.inputElement;\n            if (!isNullOrUndefined(component)) {\n                var startPos = component.selectionStart;\n                if (component.value && startPos >= 0) {\n                    text = component.value.substring(0, startPos);\n                }\n            }\n        }\n        else {\n            if (this.range) {\n                var selectedElem = this.range.startContainer;\n                if (!isNullOrUndefined(selectedElem)) {\n                    var workingNodeContent = selectedElem.textContent;\n                    var selectStartOffset = this.range.startOffset;\n                    if (workingNodeContent && selectStartOffset >= 0) {\n                        text = workingNodeContent.substring(0, selectStartOffset);\n                    }\n                }\n            }\n        }\n        return text;\n    };\n    Mention.prototype.getLastLetter = function (text) {\n        if (isNullOrUndefined(text)) {\n            return '';\n        }\n        var textValue = text.indexOf('\\u200B') > -1 ? text.replace(/\\u200B/g, '').replace(/\\u00A0/g, ' ') : text.replace(/\\u00A0/g, ' ');\n        var words = textValue.split(/\\s+/);\n        var wordCnt = words.length - 1;\n        return words[wordCnt].trim();\n    };\n    Mention.prototype.isContentEditable = function (element) {\n        return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n    };\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showPopup = function () {\n        this.beforePopupOpen = true;\n        if (document.activeElement !== this.inputElement) {\n            this.inputElement.focus();\n        }\n        this.queryString = this.didPopupOpenByTypingInitialChar ? this.queryString : '';\n        this.didPopupOpenByTypingInitialChar = false;\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n        }\n        if (!this.isTyped) {\n            this.resetList(this.dataSource, this.fields);\n        }\n        if (isNullOrUndefined(this.list)) {\n            this.initValue();\n        }\n        this.renderPopup();\n        attributes(this.inputElement, { 'aria-activedescendant': this.selectedElementID });\n        if (this.selectedElementID == null) {\n            this.inputElement.removeAttribute('aria-activedescendant');\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.hidePopup = function (e) {\n        this.removeSelection();\n        this.closePopup(0, e);\n    };\n    Mention.prototype.closePopup = function (delay, e) {\n        var _this = this;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.inputElement.removeAttribute('aria-owns');\n        this.inputElement.removeAttribute('aria-activedescendant');\n        this.beforePopupOpen = false;\n        var animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        var popupInstance = this.popupObj;\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };\n        this.trigger('closed', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && _this.popupObj) {\n                if (_this.isPopupOpen) {\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    _this.destroyPopup();\n                }\n            }\n        });\n    };\n    Mention.prototype.renderPopup = function () {\n        var _this = this;\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                var popupEle_1;\n                if (isNullOrUndefined(_this.target)) {\n                    popupEle_1 = _this.createElement('div', {\n                        id: _this.inputElement.id + '_popup', className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n                    });\n                }\n                else {\n                    popupEle_1 = _this.element;\n                    if (_this.cssClass != null) {\n                        addClass([popupEle_1], _this.cssClass.split(' '));\n                    }\n                }\n                var isRTESlashMenuPopup = _this.isRTE && _this.cssClass && _this.cssClass.indexOf('e-slash-menu') > -1;\n                if (isRTESlashMenuPopup) {\n                    popupEle_1.id = _this.inputElement.id + '_slash_menu_popup';\n                }\n                else {\n                    if (!isNullOrUndefined(_this.target)) {\n                        popupEle_1.id = _this.inputElement.id + '_popup';\n                    }\n                }\n                _this.listHeight = formatUnit(_this.popupHeight);\n                if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n                    var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n                    if (!isNullOrUndefined(li)) {\n                        _this.selectedLI = li;\n                        var value = _this.getFormattedValue(li.getAttribute('data-value'));\n                        _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n                    }\n                }\n                append([_this.list], popupEle_1);\n                if (_this.inputElement.parentElement) {\n                    var rteRootElement = _this.inputElement.parentElement.closest('.e-richtexteditor');\n                    if (rteRootElement && popupEle_1.firstElementChild && popupEle_1.firstElementChild.childElementCount > 0) {\n                        popupEle_1.firstElementChild.setAttribute('aria-owns', rteRootElement.id);\n                        addClass([popupEle_1], 'e-rte-elements');\n                    }\n                }\n                if ((!_this.popupObj || !document.body.contains(_this.popupObj.element)) ||\n                    !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n                    document.body.appendChild(popupEle_1);\n                }\n                var coordinates_1;\n                popupEle_1.style.visibility = 'hidden';\n                _this.setHeight(popupEle_1);\n                var offsetValue = 0;\n                var left = 0;\n                _this.initializePopup(popupEle_1, offsetValue, left);\n                _this.checkCollision(popupEle_1);\n                popupEle_1.style.visibility = 'visible';\n                var popupLeft_1 = popupEle_1.parentElement.offsetWidth - popupEle_1.offsetWidth;\n                var popupHeight_1 = popupEle_1.offsetHeight;\n                addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n                if (!isNullOrUndefined(_this.list)) {\n                    _this.unWireListEvents();\n                    _this.wireListEvents();\n                }\n                _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n                attributes(_this.inputElement, { 'aria-owns': _this.inputElement.id + '_options', 'aria-activedescendant': _this.selectedElementID });\n                if (_this.selectedElementID == null) {\n                    _this.inputElement.removeAttribute('aria-activedescendant');\n                }\n                var animModel = { name: 'FadeIn', duration: 100 };\n                _this.beforePopupOpen = true;\n                var popupInstance = _this.popupObj;\n                var eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\n                _this.trigger('opened', eventArgs, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        _this.renderReactTemplates();\n                        if (_this.popupObj) {\n                            _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.inputElement : null);\n                        }\n                        if (isNullOrUndefined(_this.getTriggerCharPosition())) {\n                            return;\n                        }\n                        coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n                        if (!_this.isCollided) {\n                            popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n                        }\n                        else {\n                            if (_this.collision.length > 0 && _this.collision.indexOf('right') > -1 && _this.collision.indexOf('bottom') === -1) {\n                                popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(popupLeft_1.toString(), 'px;\\nposition: absolute;\\n display: block;');\n                            }\n                            else if (_this.collision && _this.collision.length > 0 && _this.collision.indexOf('bottom') > -1 && _this.collision.indexOf('right') === -1) {\n                                popupEle_1.style.left = formatUnit(coordinates_1.left);\n                                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(popupHeight_1.toString(), 10));\n                            }\n                            else if (_this.collision && _this.collision.length > 0 && _this.collision.indexOf('bottom') > -1 && _this.collision.indexOf('right') > -1) {\n                                popupEle_1.style.left = formatUnit(popupLeft_1);\n                                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(popupHeight_1.toString(), 10));\n                            }\n                            else {\n                                popupEle_1.style.left = formatUnit(coordinates_1.left);\n                                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(_this.popupHeight.toString(), 10));\n                            }\n                            _this.isCollided = false;\n                            _this.collision = [];\n                        }\n                        popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n                        _this.setHeight(popupEle_1);\n                        popupEle_1.style.zIndex = _this.zIndex === 1000 ? getZindexPartial(popupEle_1).toString() : _this.zIndex.toString();\n                    }\n                    else {\n                        _this.beforePopupOpen = false;\n                        _this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                _this.beforePopupOpen = false;\n            }\n        });\n    };\n    Mention.prototype.setHeight = function (popupEle) {\n        if (this.popupHeight !== 'auto' && this.list) {\n            this.list.style.maxHeight = (parseInt(this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n            popupEle.style.maxHeight = formatUnit(this.popupHeight);\n        }\n        else {\n            popupEle.style.height = 'auto';\n        }\n    };\n    Mention.prototype.checkCollision = function (popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'mention'))) {\n            var coordinates = this.getCoordinates(this.inputElement, this.getTriggerCharPosition());\n            this.collision = isCollide(popupEle, null, coordinates.left, coordinates.top);\n            if (this.collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n                this.isCollided = true;\n            }\n            this.popupObj.resolveCollision();\n        }\n    };\n    Mention.prototype.getTriggerCharPosition = function () {\n        var mostRecentTriggerCharPos;\n        var currentRange = this.getTextRange();\n        if (currentRange !== undefined && currentRange !== null) {\n            mostRecentTriggerCharPos = 0;\n            var idx = currentRange.lastIndexOf(this.mentionChar);\n            if (idx >= mostRecentTriggerCharPos) {\n                mostRecentTriggerCharPos = idx;\n            }\n        }\n        return mostRecentTriggerCharPos ? mostRecentTriggerCharPos : 0;\n    };\n    Mention.prototype.initializePopup = function (element, offsetValue, left) {\n        var _this = this;\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputElement, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'left', Y: 'bottom' }, actionOnScroll: 'hide',\n            zIndex: this.zIndex,\n            close: function () {\n                _this.destroyPopup();\n            },\n            open: function () {\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                _this.isPopupOpen = true;\n                _this.setDataIndex();\n            }\n        });\n    };\n    Mention.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        return width;\n    };\n    Mention.prototype.destroyPopup = function () {\n        this.isPopupOpen = false;\n        this.popupObj.destroy();\n        if (isNullOrUndefined(this.target)) {\n            detach(this.popupObj.element);\n        }\n        else {\n            this.popupObj.element.innerHTML = '';\n            this.popupObj.element.removeAttribute('style');\n            this.popupObj.element.removeAttribute('aria-disabled');\n        }\n        if (this.list.classList.contains('e-nodata')) {\n            this.list = null;\n        }\n    };\n    Mention.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n            this.hidePopup(e);\n        }\n    };\n    Mention.prototype.getCoordinates = function (element, position) {\n        var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n        var div;\n        var span;\n        var range;\n        var globalRange;\n        var coordinates;\n        var computed;\n        var rect;\n        if (!this.isContentEditable(this.inputElement)) {\n            div = this.createElement('div', { className: 'e-form-mirror-div' });\n            document.body.appendChild(div);\n            computed = getComputedStyle(element);\n            div.style.position = 'absolute';\n            div.style.visibility = 'hidden';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            properties.forEach(function (prop) {\n                // eslint-disable-next-line security/detect-object-injection\n                div.style[prop] = computed[prop];\n            });\n            div.textContent = element.value.substring(0, position);\n            if (this.inputElement.nodeName === 'INPUT') {\n                div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n            }\n            span = this.createElement('span');\n            span.textContent = element.value.substring(position) || '.';\n            div.appendChild(span);\n            rect = element.getBoundingClientRect();\n        }\n        else {\n            var selectedNodePosition = this.getTriggerCharPosition();\n            globalRange = this.range;\n            range = document.createRange();\n            if (this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n                range.setStart(globalRange.startContainer, selectedNodePosition);\n                range.setEnd(globalRange.startContainer, selectedNodePosition);\n            }\n            else {\n                range.setStart(globalRange.startContainer, globalRange.startOffset);\n                range.setEnd(globalRange.startContainer, globalRange.endOffset);\n            }\n            this.isTyped = false;\n            range.collapse(false);\n            rect = range.getBoundingClientRect().top === 0 ? range.startContainer.getClientRects()[0] :\n                range.getBoundingClientRect();\n        }\n        var rectTop = rect.top;\n        var rectLeft = rect.left;\n        var iframes = document.querySelectorAll('iframe');\n        if (iframes.length > 0) {\n            for (var i = 0; i < iframes.length; i++) {\n                // eslint-disable-next-line security/detect-object-injection\n                var iframe = iframes[i];\n                if (iframe.contentDocument && iframe.contentDocument.contains(element)) {\n                    var iframeRect = iframe.getBoundingClientRect();\n                    rectTop += iframeRect.top;\n                    rectLeft += iframeRect.left;\n                }\n            }\n        }\n        var doc = document.documentElement;\n        var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n        var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n        var width = 0;\n        if (!isNullOrUndefined(range) && range.getBoundingClientRect().top === 0) {\n            for (var i = 0; i < this.range.startContainer.childNodes.length; i++) {\n                if (this.range.startContainer.childNodes[i].nodeType !== Node.TEXT_NODE && this.range.startContainer.childNodes[i].textContent.trim() !== '') {\n                    width += this.range.startContainer.childNodes[i].getClientRects()[0].width;\n                }\n                else if (this.range.startContainer.childNodes[i].textContent !== '') {\n                    var span_1 = document.createElement('span');\n                    span_1.innerHTML = this.range.startContainer.childNodes[i].nodeValue;\n                    document.body.appendChild(span_1);\n                    var textNodeWidth = span_1.offsetWidth;\n                    document.body.removeChild(span_1);\n                    width += textNodeWidth;\n                }\n            }\n        }\n        if (!this.isContentEditable(this.inputElement)) {\n            coordinates = {\n                top: rectTop + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) +\n                    parseInt(computed.fontSize, 10) + 3 - element.scrollTop -\n                    (this.isCollided ? 10 : 0),\n                left: rectLeft + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n            };\n            document.body.removeChild(div);\n        }\n        else {\n            if (this.collision && this.collision.length > 0 && this.collision.indexOf('right') > -1 && this.collision.indexOf('bottom') === -1) {\n                coordinates = {\n                    top: rectTop + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10),\n                    left: rectLeft + windowLeft + width\n                };\n            }\n            else {\n                coordinates = {\n                    top: rectTop + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10) - (this.isCollided ? 10 : 0),\n                    left: rectLeft + windowLeft + width\n                };\n            }\n        }\n        return coordinates;\n    };\n    Mention.prototype.initValue = function () {\n        this.isDataFetched = false;\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    };\n    Mention.prototype.updateValues = function () {\n        var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(li)) {\n            this.setSelection(li, null);\n        }\n    };\n    Mention.prototype.renderList = function () {\n        _super.prototype.render.call(this);\n        this.unWireListEvents();\n        this.wireListEvents();\n    };\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    Mention.prototype.wireListEvents = function () {\n        EventHandler.add(this.list, this.keyEventName, this.onMouseClick, this);\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    };\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.unWireListEvents = function () {\n        EventHandler.remove(this.list, this.keyEventName, this.onMouseClick);\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    };\n    Mention.prototype.onMouseClick = function (e) {\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li) || this.isDisabledElement(li)) {\n            return;\n        }\n        this.isSelected = true;\n        this.setSelection(li, e);\n        var delay = 100;\n        this.closePopup(delay, e);\n        this.inputElement.focus();\n        if (!this.isRTE) {\n            e.preventDefault();\n        }\n    };\n    Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n        var _this = this;\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        var selectedData = this.getDataByValue(value);\n        if (!preventSelect && !isNullOrUndefined(e) && !(e.action === 'down' || e.action === 'up')) {\n            var items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            var eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                    _this.isSelected = false;\n                    _this.isSelectCancel = true;\n                }\n                else {\n                    _this.selectEventCallback(li, selectedData, value);\n                    if (isSelection) {\n                        _this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    };\n    Mention.prototype.setSelection = function (li, e) {\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n        }\n    };\n    Mention.prototype.setSelectOptions = function (li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n            this.setScrollPosition(e);\n        }\n        if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n            return;\n        }\n        if (isNullOrUndefined(e) || this.setValue(e)) {\n            return;\n        }\n    };\n    Mention.prototype.setScrollPosition = function (e) {\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.scrollBottom();\n                    break;\n                default:\n                    this.scrollTop();\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n    };\n    Mention.prototype.scrollBottom = function (isInitial) {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var currentOffset = this.list.offsetHeight;\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n            var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = nextOffset;\n            }\n        }\n    };\n    Mention.prototype.scrollTop = function () {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var nextOffset = !isNullOrUndefined(this.fields.groupBy) && !isNullOrUndefined(this.fixedHeaderElement) ?\n                this.selectedLI.offsetTop - (this.list.scrollTop + this.fixedHeaderElement.offsetHeight) :\n                this.selectedLI.offsetTop - this.list.scrollTop;\n            nextOffset = this.fields.groupBy && nextOffset;\n            var boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0) {\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop;\n            }\n        }\n    };\n    Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        this.item = li;\n        this.itemData = selectedData;\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        if (selectLi) {\n            addClass([li], dropDownBaseClasses.selected);\n        }\n        li.setAttribute('aria-selected', 'true');\n        this.activeIndex = this.getIndexByValue(value);\n    };\n    Mention.prototype.detachChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    Mention.prototype.setValue = function (e) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            if (!isNullOrUndefined(this.displayTemplate)) {\n                this.setDisplayTemplate();\n            }\n            this.updateMentionValue(e);\n            return true;\n        }\n        else {\n            if (!isNullOrUndefined(this.displayTemplate)) {\n                this.setDisplayTemplate(e);\n            }\n            else {\n                this.updateMentionValue(e);\n            }\n            return true;\n        }\n    };\n    Mention.prototype.updateMentionValue = function (e) {\n        var dataItem = this.getItemData();\n        var textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n        var value;\n        var endPos;\n        var range;\n        var globalRange;\n        var selection = this.inputElement.ownerDocument.getSelection();\n        var startPos = this.getTriggerCharPosition();\n        if (this.isSelectCancel) {\n            this.isSelectCancel = false;\n            return;\n        }\n        if (dataItem.text !== null) {\n            value = this.mentionVal(dataItem.text);\n        }\n        if (!this.isContentEditable(this.inputElement)) {\n            var myField = this.inputElement;\n            var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n            value += textSuffix;\n            endPos = startPos + this.mentionChar.length;\n            endPos += currentTriggerSnippet.length;\n            myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n            myField.selectionStart = startPos + value.length;\n            myField.selectionEnd = startPos + value.length;\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.onChangeEvent(e);\n        }\n        else {\n            endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n            if (this.range && (this.range.startContainer.textContent.trim() !== this.mentionChar)) {\n                endPos = this.range.endOffset;\n            }\n            globalRange = this.range;\n            range = document.createRange();\n            if (((this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) || this.getTextRange() &&\n                this.getTextRange().trim() === this.mentionChar)) {\n                range.setStart(globalRange.startContainer, startPos);\n                range.setEnd(globalRange.startContainer, endPos);\n            }\n            else {\n                if (globalRange.commonAncestorContainer.textContent.trim() !== '' && !isNullOrUndefined(globalRange.commonAncestorContainer.textContent.trim()) && this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n                    range.setStart(globalRange.startContainer, globalRange.startOffset - 1);\n                    range.setEnd(globalRange.startContainer, globalRange.endOffset - 1);\n                }\n                else {\n                    range.setStart(globalRange.startContainer, globalRange.startOffset);\n                    range.setEnd(globalRange.startContainer, globalRange.endOffset);\n                }\n            }\n            this.isTyped = false;\n            range.deleteContents();\n            range.startContainer.parentElement.normalize();\n            var element = this.createElement('div');\n            element.innerHTML = value;\n            var frag = document.createDocumentFragment();\n            var node = void 0;\n            var lastNode = void 0;\n            // eslint-disable-next-line no-cond-assign\n            while (node = element.firstChild) {\n                lastNode = frag.appendChild(node);\n            }\n            range.insertNode(frag);\n            if (lastNode) {\n                range = range.cloneRange();\n                if (this.isRTE) {\n                    if (lastNode.nodeType === 3) {\n                        range.setStart(lastNode, lastNode.textContent.length);\n                    }\n                    else {\n                        range.setStartAfter(lastNode);\n                    }\n                }\n                else {\n                    range.setStartAfter(lastNode);\n                }\n                range.collapse(true);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            //New event to update the RichTextEditor value, when a mention item is selected using mouse click action.\n            if (!isNullOrUndefined(e.pointerType) && e.pointerType === 'mouse') {\n                var event_1 = new CustomEvent('content-changed', { detail: { click: true } });\n                this.inputElement.dispatchEvent(event_1);\n            }\n            this.onChangeEvent(e);\n        }\n    };\n    Mention.prototype.mentionVal = function (value) {\n        var showChar = this.showMentionChar ? this.mentionChar : '';\n        if (!isNullOrUndefined(this.displayTemplate) && !isNullOrUndefined(this.displayTempElement)) {\n            value = this.displayTempElement.innerHTML;\n        }\n        if (this.isContentEditable(this.inputElement)) {\n            if (Browser.isAndroid) {\n                return '<span contenteditable=\"true\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : '&#8203;');\n            }\n            else {\n                return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : '&#8203;');\n            }\n        }\n        else {\n            return showChar + value;\n        }\n    };\n    Mention.prototype.setDisplayTemplate = function (e) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['displayTemplate']);\n            if (this.displayTempElement) {\n                detach(this.displayTempElement);\n                this.displayTempElement = null;\n            }\n        }\n        if (!this.displayTempElement) {\n            this.displayTempElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.displayTempElement.innerHTML = '';\n        }\n        var compiledString = compile(this.displayTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n        if (displayCompTemp && displayCompTemp.length > 0) {\n            append(displayCompTemp, this.displayTempElement);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.renderTemplates();\n        }\n        else {\n            this.renderTemplates(function () {\n                _this.updateMentionValue(e);\n            });\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Mention.prototype.renderTemplates = function (callBack) {\n        this.renderReactTemplates(callBack);\n    };\n    Mention.prototype.setSpinnerTemplate = function () {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['spinnerTemplate']);\n            if (this.spinnerTemplateElement) {\n                detach(this.spinnerTemplateElement);\n                this.spinnerTemplateElement = null;\n            }\n        }\n        if (!this.spinnerTemplateElement) {\n            this.spinnerTemplateElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.spinnerTemplateElement.innerHTML = '';\n        }\n        var compiledString = compile(this.spinnerTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n        if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n            for (var i = 0; i < spinnerCompTemp.length; i++) {\n                this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.renderTemplates();\n            this.popupObj.element.appendChild(this.spinnerTemplateElement);\n        }\n        else {\n            this.renderTemplates(function () {\n                _this.popupObj.element.appendChild(_this.spinnerTemplateElement);\n            });\n        }\n    };\n    Mention.prototype.onChangeEvent = function (eve) {\n        this.isSelected = false;\n        var items = this.detachMentionChanges(this.itemData);\n        var preItems;\n        if (typeof this.previousItemData === 'string' ||\n            typeof this.previousItemData === 'boolean' ||\n            typeof this.previousItemData === 'number') {\n            preItems = Object.defineProperties({}, {\n                value: {\n                    value: this.previousItemData,\n                    enumerable: true\n                },\n                text: {\n                    value: this.previousItemData,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            preItems = this.previousItemData;\n        }\n        var eventArgs = {\n            e: eve,\n            item: this.item,\n            itemData: items,\n            previousItem: this.previousSelectedLI,\n            previousItemData: preItems,\n            isInteracted: eve ? true : false,\n            value: this.item.innerHTML,\n            element: this.inputElement\n        };\n        this.trigger('change', eventArgs);\n    };\n    Mention.prototype.detachMentionChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    Mention.prototype.getItemData = function () {\n        var fields = this.fields;\n        var dataItem = null;\n        dataItem = this.itemData;\n        var dataValue;\n        var dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        var value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        var text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    };\n    Mention.prototype.removeSelection = function () {\n        if (this.list) {\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    };\n    Mention.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    };\n    Mention.prototype.setHover = function (li) {\n        if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    };\n    Mention.prototype.removeHover = function () {\n        if (this.list) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    };\n    Mention.prototype.isValidLI = function (li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    };\n    Mention.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.search = function (text, positionX, positionY) {\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n        }\n        var currentRange = this.getTextRange();\n        this.queryString = text;\n        var lastWordRange = this.getLastLetter(currentRange);\n        if ((this.ignoreCase && (text === lastWordRange || text === lastWordRange.toLowerCase()))\n            || !this.ignoreCase && text === lastWordRange) {\n            this.resetList(this.dataSource, this.fields);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            return;\n        }\n        if (isNullOrUndefined(this.list)) {\n            this.renderList();\n            this.renderPopup();\n        }\n        else if (!this.isPopupOpen) {\n            this.renderPopup();\n        }\n        this.popupObj.element.style.left = formatUnit(positionX);\n        this.popupObj.element.style.top = formatUnit(positionY);\n    };\n    /**\n     * Method to disable specific item in the popup.\n     *\n     * @param {string | number | object | HTMLLIElement} item - Specifies the item to be disabled.\n     * @returns {void}\n\n     */\n    Mention.prototype.disableItem = function (item) {\n        if (this.fields.disabled) {\n            if (!this.list) {\n                this.renderList();\n            }\n            var itemIndex = -1;\n            if (this.liCollections && this.liCollections.length > 0 && this.listData && this.fields.disabled) {\n                if (typeof (item) === 'string') {\n                    itemIndex = this.getIndexByValue(item);\n                }\n                else if (typeof item === 'object') {\n                    if (item instanceof HTMLLIElement) {\n                        for (var index = 0; index < this.liCollections.length; index++) {\n                            if (this.liCollections[index] === item) {\n                                itemIndex = this.getIndexByValue(item.getAttribute('data-value'));\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        var value = JSON.parse(JSON.stringify(item))[this.fields.value];\n                        for (var index = 0; index < this.listData.length; index++) {\n                            if (JSON.parse(JSON.stringify(this.listData[index]))[this.fields.value] === value) {\n                                itemIndex = this.getIndexByValue(value);\n                                break;\n                            }\n                        }\n                    }\n                }\n                else {\n                    itemIndex = item;\n                }\n                var isValidIndex = itemIndex < this.liCollections.length && itemIndex > -1;\n                if (isValidIndex && !(JSON.parse(JSON.stringify(this.listData[itemIndex]))[this.fields.disabled])) {\n                    var li = this.liCollections[itemIndex];\n                    if (li) {\n                        this.disableListItem(li);\n                        var parsedData = JSON.parse(JSON.stringify(this.listData[itemIndex]));\n                        parsedData[this.fields.disabled] = true;\n                        this.listData[itemIndex] = parsedData;\n                        this.dataSource = this.listData;\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    Mention.prototype.destroy = function () {\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        this.previousSelectedLI = null;\n        this.item = null;\n        this.selectedLI = null;\n        this.popupObj = null;\n        _super.prototype.destroy.call(this);\n    };\n    Mention.prototype.getLocaleName = function () {\n        return 'mention';\n    };\n    Mention.prototype.getNgDirective = function () {\n        return 'EJS-MENTION';\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    Mention.prototype.getModuleName = function () {\n        return 'mention';\n    };\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property('@')\n    ], Mention.prototype, \"mentionChar\", void 0);\n    __decorate([\n        Property(false)\n    ], Mention.prototype, \"showMentionChar\", void 0);\n    __decorate([\n        Property(false)\n    ], Mention.prototype, \"allowSpaces\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"suffixText\", void 0);\n    __decorate([\n        Property(25)\n    ], Mention.prototype, \"suggestionCount\", void 0);\n    __decorate([\n        Property(0)\n    ], Mention.prototype, \"minLength\", void 0);\n    __decorate([\n        Property('None')\n    ], Mention.prototype, \"sortOrder\", void 0);\n    __decorate([\n        Property(true)\n    ], Mention.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(true)\n    ], Mention.prototype, \"requireLeadingSpace\", void 0);\n    __decorate([\n        Property(false)\n    ], Mention.prototype, \"highlight\", void 0);\n    __decorate([\n        Property()\n    ], Mention.prototype, \"locale\", void 0);\n    __decorate([\n        Property('auto')\n    ], Mention.prototype, \"popupWidth\", void 0);\n    __decorate([\n        Property('300px')\n    ], Mention.prototype, \"popupHeight\", void 0);\n    __decorate([\n        Property(300)\n    ], Mention.prototype, \"debounceDelay\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"displayTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"itemTemplate\", void 0);\n    __decorate([\n        Property('No records found')\n    ], Mention.prototype, \"noRecordsTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"spinnerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Mention.prototype, \"target\", void 0);\n    __decorate([\n        Property([])\n    ], Mention.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Mention.prototype, \"query\", void 0);\n    __decorate([\n        Property('Contains')\n    ], Mention.prototype, \"filterType\", void 0);\n    __decorate([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], Mention.prototype, \"fields\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"opened\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"closed\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"filtering\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Mention.prototype, \"destroyed\", void 0);\n    Mention = __decorate([\n        NotifyPropertyChanges\n    ], Mention);\n    return Mention;\n}(DropDownBase));\nexport { Mention };\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIA,CAAC,CAACM,cAAc,CAACD,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IAC9E,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnBF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASO,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGT,CAAC;IAAE;IACtCA,CAAC,CAACU,SAAS,GAAGT,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACS,MAAM,CAACV,CAAC,CAAC,IAAIO,EAAE,CAACE,SAAS,GAAGT,CAAC,CAACS,SAAS,EAAE,IAAIF,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJ,IAAII,UAAU,GAAI,IAAI,IAAI,IAAI,CAACA,UAAU,IAAK,UAAUC,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACnF,IAAIC,CAAC,GAAGC,SAAS,CAACC,MAAM;IAAEC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGH,MAAM,GAAGE,IAAI,KAAK,IAAI,GAAGA,IAAI,GAAGd,MAAM,CAACmB,wBAAwB,CAACP,MAAM,EAAEC,GAAG,CAAC,GAAGC,IAAI;IAAEhB,CAAC;EAC5H,IAAI,OAAOsB,OAAO,KAAK,QAAQ,IAAI,OAAOA,OAAO,CAACC,QAAQ,KAAK,UAAU,EAAEH,CAAC,GAAGE,OAAO,CAACC,QAAQ,CAACV,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,CAAC,CAAC,KAC1H,KAAK,IAAIQ,CAAC,GAAGX,UAAU,CAACM,MAAM,GAAG,CAAC,EAAEK,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE,IAAIxB,CAAC,GAAGa,UAAU,CAACW,CAAC,CAAC,EAAEJ,CAAC,GAAG,CAACH,CAAC,GAAG,CAAC,GAAGjB,CAAC,CAACoB,CAAC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGjB,CAAC,CAACc,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,GAAGpB,CAAC,CAACc,MAAM,EAAEC,GAAG,CAAC,KAAKK,CAAC;EACjJ,OAAOH,CAAC,GAAG,CAAC,IAAIG,CAAC,IAAIlB,MAAM,CAACuB,cAAc,CAACX,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,EAAEA,CAAC;AACjE,CAAC;AACD,SAASM,OAAO,EAAEC,QAAQ,EAAEC,YAAY,EAAEC,SAAS,EAAEC,UAAU,EAAEC,MAAM,EAAEC,UAAU,QAAQ,sBAAsB;AACjH,SAASC,iBAAiB,EAAEC,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,OAAO,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,qBAAqB,EAAEC,OAAO,QAAQ,sBAAsB;AACvK,SAASC,aAAa,QAAQ,kCAAkC;AAChE,SAASC,YAAY,EAAEC,mBAAmB,QAAQ,kCAAkC;AACpF,SAASC,WAAW,EAAEC,KAAK,QAAQ,sBAAsB;AACzD,SAASC,KAAK,EAAEC,SAAS,EAAEC,aAAa,EAAEC,WAAW,EAAEC,WAAW,EAAEC,gBAAgB,QAAQ,wBAAwB;AACpH,SAASC,eAAe,EAAEC,qBAAqB,QAAQ,4BAA4B;AACnF;AACA;AACA;AACA;AACA,IAAIC,OAAO,GAAG,aAAe,UAAUC,MAAM,EAAE;EAC3C5D,SAAS,CAAC2D,OAAO,EAAEC,MAAM,CAAC;EAC1B;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,SAASD,OAAOA,CAACE,OAAO,EAAEC,OAAO,EAAE;IAC/B,IAAIC,KAAK,GAAGH,MAAM,CAACI,IAAI,CAAC,IAAI,EAAEH,OAAO,EAAEC,OAAO,CAAC,IAAI,IAAI;IACvDC,KAAK,CAACE,aAAa,GAAG,IAAI;IAC1B,OAAOF,KAAK;EAChB;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIJ,OAAO,CAAC/C,SAAS,CAACsD,iBAAiB,GAAG,UAAUC,OAAO,EAAEC,OAAO,EAAE;IAC9D,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGlE,MAAM,CAACmE,IAAI,CAACJ,OAAO,CAAC,EAAEE,EAAE,GAAGC,EAAE,CAACjD,MAAM,EAAEgD,EAAE,EAAE,EAAE;MAC9D,IAAIG,IAAI,GAAGF,EAAE,CAACD,EAAE,CAAC;MACjB,QAAQG,IAAI;QACR,KAAK,WAAW;UACZ,IAAI,CAACC,SAAS,GAAGN,OAAO,CAACM,SAAS;UAClC;QACJ,KAAK,YAAY;UACb,IAAI,CAACC,UAAU,GAAGP,OAAO,CAACO,UAAU;UACpC;QACJ,KAAK,aAAa;UACd,IAAI,CAACC,WAAW,GAAGR,OAAO,CAACQ,WAAW;UACtC;QACJ,KAAK,aAAa;UACd,IAAI,CAACC,WAAW,GAAGT,OAAO,CAACS,WAAW;UACtC;QACJ,KAAK,iBAAiB;UAClB,IAAI,CAACC,eAAe,GAAGV,OAAO,CAACU,eAAe;UAC9C;QACJ,KAAK,qBAAqB;UACtB,IAAI,CAACC,mBAAmB,GAAGX,OAAO,CAACW,mBAAmB;UACtD;QACJ,KAAK,UAAU;UACX,IAAI,CAACC,cAAc,CAACZ,OAAO,CAACa,QAAQ,EAAEZ,OAAO,CAACY,QAAQ,CAAC;UACvD;MACR;IACJ;EACJ,CAAC;EACDrB,OAAO,CAAC/C,SAAS,CAACmE,cAAc,GAAG,UAAUE,QAAQ,EAAEC,QAAQ,EAAE;IAC7D,IAAI,CAAC/C,iBAAiB,CAAC+C,QAAQ,CAAC,EAAE;MAC9BA,QAAQ,GAAIA,QAAQ,CAACC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAEC,IAAI,CAAC,CAAC;IACrD;IACA,IAAI,CAACjD,iBAAiB,CAAC8C,QAAQ,CAAC,EAAE;MAC9BA,QAAQ,GAAIA,QAAQ,CAACE,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAEC,IAAI,CAAC,CAAC;IACrD;IACA,IAAI,CAACC,WAAW,CAACJ,QAAQ,EAAE,CAAC,IAAI,CAACK,YAAY,CAAC,EAAEJ,QAAQ,CAAC;IACzD,IAAI,IAAI,CAACK,QAAQ,EAAE;MACf,IAAI,CAACF,WAAW,CAACJ,QAAQ,EAAE,CAAC,IAAI,CAACM,QAAQ,CAACzB,OAAO,CAAC,EAAEoB,QAAQ,CAAC;IACjE;EACJ,CAAC;EACDvB,OAAO,CAAC/C,SAAS,CAACyE,WAAW,GAAG,UAAUL,QAAQ,EAAEQ,QAAQ,EAAEN,QAAQ,EAAE;IACpE,IAAI,CAAC/C,iBAAiB,CAAC+C,QAAQ,CAAC,IAAIA,QAAQ,KAAK,EAAE,EAAE;MACjD1C,WAAW,CAACgD,QAAQ,EAAEN,QAAQ,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC;IAC9C;IACA,IAAI,CAACtD,iBAAiB,CAAC6C,QAAQ,CAAC,IAAIA,QAAQ,KAAK,EAAE,EAAE;MACjDzC,QAAQ,CAACiD,QAAQ,EAAER,QAAQ,CAACS,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3C;EACJ,CAAC;EACD9B,OAAO,CAAC/C,SAAS,CAAC8E,cAAc,GAAG,YAAY;IAC3C,IAAI,CAACC,UAAU,GAAG,KAAK;IACvB,IAAI,CAACC,UAAU,GAAG,KAAK;IACvB,IAAI,CAACC,eAAe,GAAG,KAAK;IAC5B,IAAI,CAACC,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAACC,cAAc,GAAG,KAAK;IAC3B,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,UAAU,GAAG,KAAK;IACvB,IAAI,CAACC,SAAS,GAAG,KAAK;IACtB,IAAI,CAACC,KAAK,GAAG,KAAK;IAClB,IAAI,CAACC,YAAY,GAAG,WAAW;EACnC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIzC,OAAO,CAAC/C,SAAS,CAACyF,SAAS,GAAG,YAAY;IACtC,IAAI,CAACX,cAAc,CAAC,CAAC;IACrB9B,MAAM,CAAChD,SAAS,CAACyF,SAAS,CAACrC,IAAI,CAAC,IAAI,CAAC;EACzC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIL,OAAO,CAAC/C,SAAS,CAAC0F,MAAM,GAAG,YAAY;IACnC,IAAIC,UAAU,GAAG,OAAO,IAAI,CAACvF,MAAM,KAAK,QAAQ;IAChD,IAAI,CAACsE,YAAY,GAAG,CAACnD,iBAAiB,CAAC,IAAI,CAACnB,MAAM,CAAC,GAC/C,IAAI,CAACwF,+BAA+B,CAACD,UAAU,GACzCE,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC1F,MAAM,CAAC,GACnC,IAAI,CAACA,MAAM,CAAC,GAAG,IAAI,CAAC8C,OAAO;IACrC,IAAI,IAAI,CAAC6C,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC3C,IAAI,CAAC,IAAI,CAACA,YAAY,CAACsB,YAAY,CAAC,iBAAiB,CAAC,EAAE;QACpD,IAAI,CAACtB,YAAY,CAACuB,YAAY,CAAC,iBAAiB,EAAE,MAAM,CAAC;MAC7D;MACAtE,QAAQ,CAAC,CAAC,IAAI,CAAC+C,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;MAC5C,IAAInD,iBAAiB,CAAC,IAAI,CAACnB,MAAM,CAAC,EAAE;QAChCuB,QAAQ,CAAC,CAAC,IAAI,CAAC+C,YAAY,CAAC,EAAE,CAAC,oBAAoB,CAAC,CAAC;MACzD;IACJ;IACA,IAAI,CAACA,YAAY,CAACuB,YAAY,CAAC,MAAM,EAAE,SAAS,CAAC;IACjD,IAAI,CAACvB,YAAY,CAACuB,YAAY,CAAC,YAAY,EAAE,SAAS,CAAC;IACvD,IAAI,CAACC,WAAW,GAAG,IAAI,CAACC,YAAY,CAAC,CAAC;IACtC,IAAI,CAACC,SAAS,CAAC,CAAC;EACpB,CAAC;EACDrD,OAAO,CAAC/C,SAAS,CAACoG,SAAS,GAAG,YAAY;IACtClF,YAAY,CAACmF,GAAG,CAAC,IAAI,CAAC3B,YAAY,EAAE,OAAO,EAAE,IAAI,CAAC4B,OAAO,EAAE,IAAI,CAAC;IAChE,IAAI,CAACC,eAAe,CAAC,CAAC;EAC1B,CAAC;EACDxD,OAAO,CAAC/C,SAAS,CAACwG,WAAW,GAAG,YAAY;IACxCtF,YAAY,CAACuF,MAAM,CAAC,IAAI,CAAC/B,YAAY,EAAE,OAAO,EAAE,IAAI,CAAC4B,OAAO,CAAC;IAC7D,IAAI,CAACI,iBAAiB,CAAC,CAAC;EAC5B,CAAC;EACD3D,OAAO,CAAC/C,SAAS,CAACuG,eAAe,GAAG,YAAY;IAC5C,IAAI,CAACtE,OAAO,CAAC0E,QAAQ,EAAE;MACnB,IAAI,CAACjC,YAAY,CAACkC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACC,cAAc,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAACvB,KAAK,CAAC;IAC9F;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIxC,OAAO,CAAC/C,SAAS,CAAC2C,WAAW,GAAG,YAAY;IACxC,IAAI,CAACoE,kBAAkB,CAAC,CAAC;EAC7B,CAAC;EACDhE,OAAO,CAAC/C,SAAS,CAAC+G,kBAAkB,GAAG,YAAY;IAC/C,IAAI,CAACxF,iBAAiB,CAAC,IAAI,CAACyF,cAAc,CAAC,EAAE;MACzCrE,WAAW,CAAC,IAAI,CAACqE,cAAc,CAAC;IACpC;IACA,IAAI,CAACzF,iBAAiB,CAAC,IAAI,CAAC0F,eAAe,CAAC,IAAI,CAAC1F,iBAAiB,CAAC,IAAI,CAAC2F,sBAAsB,CAAC,EAAE;MAC7F1F,MAAM,CAAC,IAAI,CAAC0F,sBAAsB,CAAC;IACvC;EACJ,CAAC;EACDnE,OAAO,CAAC/C,SAAS,CAAC4F,+BAA+B,GAAG,UAAUuB,aAAa,EAAE;IACzE,IAAI,CAAC,IAAI,CAACC,KAAK,IAAID,aAAa,CAACE,SAAS,CAACC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;MACrE,OAAOH,aAAa,CAACrB,aAAa,CAAC,YAAY,CAAC;IACpD;IACA,IAAI,IAAI,CAACsB,KAAK,IAAID,aAAa,CAACI,QAAQ,KAAK,UAAU,IAAIJ,aAAa,CAACE,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;MACzG,IAAIE,aAAa,GAAGL,aAAa,CAACK,aAAa;MAC/C,IAAIA,aAAa,IAAIA,aAAa,CAACH,SAAS,CAACC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;QACvE,OAAOE,aAAa,CAAC1B,aAAa,CAAC,YAAY,CAAC;MACpD;IACJ;IACA,IAAIqB,aAAa,IAAIA,aAAa,CAACK,aAAa,IAAIL,aAAa,CAACK,aAAa,CAACH,SAAS,CAACC,QAAQ,CAAC,eAAe,CAAC,EAAE;MACjH,IAAI,CAAC/B,KAAK,GAAG,IAAI;MACjB,IAAI,CAACC,YAAY,GAAG,OAAO;IAC/B;IACA,OAAO2B,aAAa;EACxB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIpE,OAAO,CAAC/C,SAAS,CAACyH,kBAAkB,GAAG,YAAY;IAC/C,IAAI,CAAClG,iBAAiB,CAAC,IAAI,CAACoD,QAAQ,CAAC,EAAE;MACnC,IAAIpD,iBAAiB,CAAC,IAAI,CAAC0F,eAAe,CAAC,IAAI1F,iBAAiB,CAAC,IAAI,CAACyF,cAAc,CAAC,EAAE;QACnF,IAAI,CAACA,cAAc,GAAG,IAAI,CAACrC,QAAQ,CAACzB,OAAO;QAC3CT,aAAa,CAAC;UACVrC,MAAM,EAAE,IAAI,CAAC4G,cAAc;UAC3BU,KAAK,EAAEzF,OAAO,CAAC0E,QAAQ,GAAG,MAAM,GAAG;QACvC,CAAC,EAAE,IAAI,CAACgB,aAAa,CAAC;QACtBjF,WAAW,CAAC,IAAI,CAACsE,cAAc,CAAC;MACpC;MACA,IAAI,CAACzF,iBAAiB,CAAC,IAAI,CAAC0F,eAAe,CAAC,EAAE;QAC1C,IAAI,CAACW,kBAAkB,CAAC,CAAC;MAC7B;IACJ;EACJ,CAAC;EACD7E,OAAO,CAAC/C,SAAS,CAAC6G,cAAc,GAAG,UAAUgB,CAAC,EAAE;IAC5C,IAAIC,WAAW,GAAG,IAAI;IACtB,QAAQD,CAAC,CAACE,OAAO;MACb,KAAK,EAAE;QACHF,CAAC,CAACG,MAAM,GAAGH,CAAC,CAACI,MAAM,GAAG,MAAM,GAAG,IAAI;QACnC;MACJ,KAAK,EAAE;QACHJ,CAAC,CAACG,MAAM,GAAGH,CAAC,CAACI,MAAM,GAAG,MAAM,GAAG,MAAM;QACrC;MACJ,KAAK,EAAE;QACHJ,CAAC,CAACG,MAAM,GAAG,QAAQ;QACnB;MACJ,KAAK,EAAE;QACHH,CAAC,CAACG,MAAM,GAAG,UAAU;QACrB;MACJ,KAAK,EAAE;QACHH,CAAC,CAACG,MAAM,GAAG,MAAM;QACjB;MACJ,KAAK,EAAE;QACHH,CAAC,CAACG,MAAM,GAAG,KAAK;QAChB;MACJ,KAAK,CAAC;QACFH,CAAC,CAACG,MAAM,GAAGH,CAAC,CAACK,QAAQ,GAAG,OAAO,GAAG,KAAK;QACvC;MACJ,KAAK,EAAE;QACHL,CAAC,CAACG,MAAM,GAAG,QAAQ;QACnB;MACJ,KAAK,EAAE;QACHH,CAAC,CAACG,MAAM,GAAG,OAAO;QAClB;MACJ,KAAK,EAAE;QACHH,CAAC,CAACG,MAAM,GAAG,OAAO;QAClB;MACJ;QACIF,WAAW,GAAG,KAAK;QACnB;IACR;IACA,IAAIA,WAAW,EAAE;MACb,IAAI,CAACK,gBAAgB,CAACN,CAAC,CAAC;IAC5B;EACJ,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAACmI,gBAAgB,GAAG,UAAUN,CAAC,EAAE;IAC9C,IAAIO,YAAY,GAAIP,CAAC,CAACG,MAAM,KAAK,MAAM,IAAIH,CAAC,CAACG,MAAM,KAAK,IAAI,IAAIH,CAAC,CAACG,MAAM,KAAK,QAAQ,IAAIH,CAAC,CAACG,MAAM,KAAK,UAAU,IACzGH,CAAC,CAACG,MAAM,KAAK,MAAM,IAAIH,CAAC,CAACG,MAAM,KAAK,KAAM;IACjD,IAAIK,WAAW,GAAGR,CAAC,CAACG,MAAM,KAAK,KAAK,IAAIH,CAAC,CAACG,MAAM,KAAK,OAAO;IAC5D,IAAI,IAAI,CAACM,IAAI,KAAKC,SAAS,IAAI,CAAC,IAAI,CAACC,WAAW,IAAI,CAACH,WAAW,IAAIR,CAAC,CAACG,MAAM,KAAK,QAAQ,IAAIH,CAAC,CAACG,MAAM,KAAK,OAAO,IAAI,IAAI,CAAChE,WAAW,CAACyE,UAAU,CAAC,CAAC,CAAC,KAAK,IAAI,CAACC,aAAa,CAAC,IAAI,CAACC,YAAY,CAAC,CAAC,CAAC,CAACF,UAAU,CAAC,CAAC,CAAC,EAAE;MAC3M,IAAI,CAACG,UAAU,CAAC,CAAC;IACrB;IACA,IAAIrH,iBAAiB,CAAC,IAAI,CAAC+G,IAAI,CAAC,IAAK,CAAC/G,iBAAiB,CAAC,IAAI,CAACsH,aAAa,CAAC,IACvET,YAAY,IAAI,IAAI,CAACS,aAAa,CAACpI,MAAM,KAAK,CAAE,IAAI,IAAI,CAAC+H,WAAW,EAAE;MACtE;IACJ;IACA,IAAIX,CAAC,CAACG,MAAM,KAAK,QAAQ,EAAE;MACvBH,CAAC,CAACiB,cAAc,CAAC,CAAC;IACtB;IACA,IAAI,CAAC/D,UAAU,GAAG8C,CAAC,CAACG,MAAM,KAAK,QAAQ,GAAG,KAAK,GAAG,IAAI,CAACjD,UAAU;IACjE,QAAQ8C,CAAC,CAACG,MAAM;MACZ,KAAK,MAAM;MACX,KAAK,IAAI;QACL,IAAI,CAACe,WAAW,GAAG,IAAI;QACvB,IAAI,CAACC,kBAAkB,CAACnB,CAAC,CAAC;QAC1B;MACJ,KAAK,KAAK;QACN,IAAI,IAAI,CAACzC,WAAW,EAAE;UAClByC,CAAC,CAACiB,cAAc,CAAC,CAAC;UAClB,IAAIG,EAAE,GAAG,IAAI,CAACX,IAAI,CAACxC,aAAa,CAAC,GAAG,GAAG1D,mBAAmB,CAAC8G,QAAQ,CAAC;UACpE,IAAID,EAAE,EAAE;YACJ,IAAI,CAAClE,UAAU,GAAG,IAAI;YACtB,IAAI,CAACoE,YAAY,CAACF,EAAE,EAAEpB,CAAC,CAAC;UAC5B;UACA,IAAI,IAAI,CAACzC,WAAW,EAAE;YAClB,IAAI,CAACgE,SAAS,CAACvB,CAAC,CAAC;UACrB;QACJ;QACA;MACJ,KAAK,OAAO;QACR,IAAI,IAAI,CAACzC,WAAW,EAAE;UAClByC,CAAC,CAACiB,cAAc,CAAC,CAAC;UAClB,IAAI,IAAI,CAACnE,QAAQ,IAAI,IAAI,CAACA,QAAQ,CAACzB,OAAO,CAACoE,QAAQ,CAAC,IAAI,CAAC+B,UAAU,CAAC,EAAE;YAClE,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAACD,UAAU,EAAExB,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC;UAC5D;QACJ;QACA;MACJ,KAAK,QAAQ;QACT,IAAI,IAAI,CAACzC,WAAW,EAAE;UAClB,IAAI,CAACgE,SAAS,CAACvB,CAAC,CAAC;QACrB;QACA;IACR;EACJ,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAACgJ,kBAAkB,GAAG,UAAUnB,CAAC,EAAE;IAChD,IAAI,IAAI,CAAC0B,MAAM,CAACC,QAAQ,IAAI,IAAI,CAAClB,IAAI,IAAI,IAAI,CAACA,IAAI,CAACmB,gBAAgB,CAAC,+BAA+B,CAAC,CAAChJ,MAAM,KAAK,CAAC,EAAE;MAC/G;IACJ;IACA,IAAIiJ,QAAQ,GAAG,IAAI,CAACpB,IAAI,CAACxC,aAAa,CAAC,GAAG,GAAG1D,mBAAmB,CAACuH,KAAK,CAAC;IACvE,IAAI,IAAI,CAACC,iBAAiB,CAACF,QAAQ,CAAC,EAAE;MAClC,IAAI,CAACP,YAAY,CAACO,QAAQ,EAAE7B,CAAC,CAAC;IAClC,CAAC,MACI,IAAI,CAACtG,iBAAiB,CAAC,IAAI,CAACsH,aAAa,CAAC,EAAE;MAC7C,IAAII,EAAE,GAAG,IAAI,CAACX,IAAI,CAACxC,aAAa,CAAC,GAAG,GAAG1D,mBAAmB,CAAC8G,QAAQ,CAAC;MACpE,IAAI,CAAC3H,iBAAiB,CAAC0H,EAAE,CAAC,EAAE;QACxB,IAAIY,KAAK,GAAG,IAAI,CAACC,iBAAiB,CAACb,EAAE,CAACc,YAAY,CAAC,YAAY,CAAC,CAAC;QACjE,IAAI,CAACC,WAAW,GAAG,IAAI,CAACC,eAAe,CAACJ,KAAK,CAAC;MAClD;MACA,IAAIK,KAAK,GAAGrC,CAAC,CAACG,MAAM,KAAK,MAAM,GAAG,IAAI,CAACgC,WAAW,GAAG,CAAC,GAAG,IAAI,CAACA,WAAW,GAAG,CAAC;MAC7E,IAAIG,UAAU,GAAG,CAAC;MAClBA,UAAU,GAAGtC,CAAC,CAACG,MAAM,KAAK,MAAM,IAAIzG,iBAAiB,CAAC,IAAI,CAACyI,WAAW,CAAC,GAAG,CAAC,GAAG,IAAI,CAACnB,aAAa,CAACpI,MAAM,GAAG,CAAC;MAC3GyJ,KAAK,GAAGA,KAAK,GAAG,CAAC,GAAG,IAAI,CAACrB,aAAa,CAACpI,MAAM,GAAG,CAAC,GAAGyJ,KAAK,KAAK,IAAI,CAACrB,aAAa,CAACpI,MAAM,GAAG,CAAC,GAAGyJ,KAAK;MACnG,IAAIE,QAAQ,GAAG7I,iBAAiB,CAAC,IAAI,CAACyI,WAAW,CAAC,GAC9C,IAAI,CAACnB,aAAa,CAACsB,UAAU,CAAC,GAAG,IAAI,CAACtB,aAAa,CAACqB,KAAK,CAAC;MAC9D,IAAI,CAAC3I,iBAAiB,CAAC6I,QAAQ,CAAC,EAAE;QAC9B,IAAI,CAACjB,YAAY,CAACiB,QAAQ,EAAEvC,CAAC,CAAC;MAClC;IACJ;IACA,IAAIwC,SAAS;IACb,KAAK,IAAIH,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACrB,aAAa,CAACpI,MAAM,EAAEyJ,KAAK,EAAE,EAAE;MAC5D,IAAI,IAAI,CAACrB,aAAa,CAACqB,KAAK,CAAC,CAAC7C,SAAS,CAACC,QAAQ,CAAClF,mBAAmB,CAACuH,KAAK,CAAC,IACpE,IAAI,CAACd,aAAa,CAACqB,KAAK,CAAC,CAAC7C,SAAS,CAACC,QAAQ,CAAClF,mBAAmB,CAAC8G,QAAQ,CAAC,EAAE;QAC/EmB,SAAS,GAAGH,KAAK;QACjB;MACJ;IACJ;IACA,IAAIG,SAAS,IAAI,IAAI,IAAI,IAAI,CAACC,iBAAiB,CAAC,IAAI,CAACzB,aAAa,CAACwB,SAAS,CAAC,CAAC,EAAE;MAC5E,IAAI,CAACrB,kBAAkB,CAACnB,CAAC,CAAC;IAC9B;IACA,IAAI,IAAI,CAACzC,WAAW,EAAE;MAClByC,CAAC,CAACiB,cAAc,CAAC,CAAC;IACtB;EACJ,CAAC;EACD/F,OAAO,CAAC/C,SAAS,CAAC4J,iBAAiB,GAAG,UAAU1G,OAAO,EAAE;IACrD,OAAO,CAAC3B,iBAAiB,CAAC2B,OAAO,CAAC;EACtC,CAAC;EACDH,OAAO,CAAC/C,SAAS,CAAC0G,iBAAiB,GAAG,YAAY;IAC9C,IAAI,CAACzE,OAAO,CAAC0E,QAAQ,EAAE;MACnB,IAAI,CAACjC,YAAY,CAAC6F,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC1D,cAAc,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAACvB,KAAK,CAAC;IACjG;EACJ,CAAC;EACDxC,OAAO,CAAC/C,SAAS,CAACsG,OAAO,GAAG,UAAUuB,CAAC,EAAE;IACrC,IAAI2C,gBAAgB;IACpB,IAAI,IAAI,CAACzB,WAAW,IAAI,IAAI,CAAC3D,WAAW,IAAIyC,CAAC,CAACE,OAAO,KAAK,GAAG,EAAE;MAC3D,IAAI,CAACgB,WAAW,GAAG,KAAK;MACxB;IACJ;IACA,IAAI,CAAC0B,OAAO,GAAG5C,CAAC,CAAC6C,IAAI,KAAK,OAAO,IAAI7C,CAAC,CAAC6C,IAAI,KAAK,OAAO,IAAI7C,CAAC,CAAC6C,IAAI,KAAK,WAAW,IAAI7C,CAAC,CAAC6C,IAAI,KAAK,SAAS,GAAG,IAAI,GAAG,KAAK;IACxH,IAAIC,UAAU,GAAG9E,QAAQ,CAAC+E,aAAa,CAACpD,aAAa,IAAI3B,QAAQ,CAAC+E,aAAa,CAACpD,aAAa,CAAC1B,aAAa,CAAC,cAAc,CAAC,GAAG,IAAI,GAAG,KAAK;IAC1I,IAAID,QAAQ,CAAC+E,aAAa,KAAK,IAAI,CAAClG,YAAY,IAAI,CAACiG,UAAU,EAAE;MAC7D,IAAI,CAACjG,YAAY,CAACiF,KAAK,CAAC,CAAC;IAC7B;IACA,IAAI,IAAI,CAAC5D,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC3C,IAAI,CAACmG,KAAK,GAAG,IAAI,CAACC,eAAe,CAAC,CAAC;MACnCN,gBAAgB,GAAG,IAAI,CAACK,KAAK,CAACE,cAAc,CAACC,WAAW,CAACnG,KAAK,CAAC,EAAE,CAAC;IACtE;IACA,IAAIoG,YAAY,GAAG,IAAI,CAACtC,YAAY,CAAC,CAAC;IACtC;IACA,IAAIuC,YAAY,GAAG,IAAIC,MAAM,CAAC,IAAI,CAACnH,WAAW,CAACO,OAAO,CAAC,qBAAqB,EAAE,MAAM,CAAC,GAAG,KAAK,CAAC;IAC9F,IAAI6G,OAAO,GAAGH,YAAY,IAAIC,YAAY,CAACG,IAAI,CAACJ,YAAY,CAAC,GAAG,KAAK,GAAG,IAAI;IAC5E,IAAIK,aAAa,GAAG,IAAI,CAAC5C,aAAa,CAACuC,YAAY,CAAC;IACpD,IAAIM,YAAY,GAAGN,YAAY,GAAGA,YAAY,CAACO,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAET,YAAY,CAACU,OAAO,CAAC,IAAI,CAAC3H,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE;IACnH,IAAIoH,OAAO,IAAI,IAAI,CAACrH,WAAW,IAAIkH,YAAY,IAAIA,YAAY,CAACW,QAAQ,CAAC,IAAI,CAAC5H,WAAW,CAAC,IAAIiH,YAAY,CAACpG,KAAK,CAAC,IAAI,CAACb,WAAW,CAAC,CAAC6H,GAAG,CAAC,CAAC,KAAK,EAAE,KACvI,CAAC,IAAI,CAAC3H,mBAAmB,IAAK,IAAI,CAACA,mBAAmB,KAAKqH,YAAY,KAAK,GAAG,IAAIN,YAAY,CAACU,OAAO,CAAC,IAAI,CAAC3H,WAAW,CAAC,KAAK,CAAC,CAAE,CAAC,EAAE;MACxIsH,aAAa,GAAG,IAAI,CAACtH,WAAW,GAAGiH,YAAY,CAACpG,KAAK,CAAC,IAAI,CAACb,WAAW,CAAC,CAAC6H,GAAG,CAAC,CAAC;IACjF;IACA,IAAI,CAAC,IAAI,CAAC3H,mBAAmB,IAAIoH,aAAa,IAAIA,aAAa,CAACM,QAAQ,CAAC,IAAI,CAAC5H,WAAW,CAAC,EAAE;MACxFsH,aAAa,GAAG,IAAI,CAACtH,WAAW,GAAGsH,aAAa,CAACzG,KAAK,CAAC,IAAI,CAACb,WAAW,CAAC,CAAC6H,GAAG,CAAC,CAAC;IAClF;IACA,IAAIC,cAAc,GAAG,IAAI,CAAC9H,WAAW,CAAC+H,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC/H,WAAW,CAAC+H,QAAQ,CAAC,CAAC;IAC9E;IACA,IAAIC,KAAK,GAAG,IAAIb,MAAM,CAAC,IAAI,CAACnH,WAAW,CAACO,OAAO,CAAC,uBAAuB,EAAE,MAAM,CAAC,EAAE,GAAG,CAAC;IACtF,IAAI0H,SAAS,GAAG,IAAId,MAAM,CAAC,UAAU,EAAE,GAAG,CAAC;IAC3C,IAAItD,CAAC,CAACxH,GAAG,KAAK,OAAO,IAAIwH,CAAC,CAACE,OAAO,KAAK,EAAE,IAAIF,CAAC,CAACE,OAAO,KAAK,EAAE,EAAE;MAC3D;IACJ;IACA,IAAI,IAAI,CAAC9C,eAAe,IAAI,IAAI,CAACG,WAAW,IAAIkG,aAAa,KAAKQ,cAAc,EAAE;MAC9E,IAAI,CAAC1C,SAAS,CAAC,CAAC;MAChB;IACJ;IACA,IAAM,CAAC6B,YAAY,IAAI,CAACK,aAAa,IAAM,CAACA,aAAa,CAACM,QAAQ,CAAC,IAAI,CAAC5H,WAAW,CAAC,IAAI,CAAC,IAAI,CAACE,mBAAoB,IAAK2D,CAAC,CAAC6C,IAAI,KAAK,OAAO,IAAI7C,CAAC,CAACE,OAAO,KAAK,EAAE,IACxJuD,aAAa,CAACY,KAAK,CAACF,KAAK,CAAC,IAAIV,aAAa,CAACY,KAAK,CAACF,KAAK,CAAC,CAACvL,MAAM,GAAG,CAAE,IACpE,IAAI,CAACsF,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,IAAI,IAAI,CAACmG,KAAK,CAACE,cAAc,IACnE,IAAI,CAACF,KAAK,CAACE,cAAc,CAACoB,sBAAsB,IAAI,IAAI,CAACtB,KAAK,CAACE,cAAc,CAACoB,sBAAsB,CAACC,OAAO,KAAK,IAAI,IAAI,IAAI,CAACvB,KAAK,CAACE,cAAc,CAACC,WAAW,CAACnG,KAAK,CAAC,EAAE,CAAC,CAACpE,MAAM,GAAG,CAAC,KAClL+J,gBAAgB,CAAC/J,MAAM,KAAK,CAAC,IAAI+J,gBAAgB,CAACA,gBAAgB,CAAC/J,MAAM,GAAG,CAAC,CAAC,CAACkL,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAC9F,IAAI,CAACd,KAAK,CAACE,cAAc,CAACsB,QAAQ,KAAK,CAAC,CAAE,EAAE;MACpD,IAAIjB,OAAO,IAAI,IAAI,CAAChG,WAAW,IAAI,IAAI,CAACrB,WAAW,IAAIkH,YAAY,IAAIA,YAAY,CAACzG,IAAI,CAAC,CAAC,KAAK,EAAE,IAAIyH,SAAS,CAACZ,IAAI,CAACJ,YAAY,CAAC,IAAIA,YAAY,CAACU,OAAO,CAAC,IAAI,CAAC3H,WAAW,CAAC,KAAK,CAAC,CAAC,IAC3K,CAAC,IAAI,CAACsI,aAAa,CAAC,CAAC,IAAKrB,YAAY,CAACxK,MAAM,GAAG,CAAC,IAAIwK,YAAY,CAAC1G,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAACiH,MAAM,CAACP,YAAY,CAACxK,MAAM,GAAG,CAAC,CAAC,KAAK,GAAI,IACpI,IAAI,CAAC6H,IAAI,IAAI,IAAI,CAACA,IAAI,CAACmB,gBAAgB,CAAC,IAAI,CAAC,CAAChJ,MAAM,GAAG,CAAE,IAAIoH,CAAC,CAAC6C,IAAI,KAAK,OAAO,EAAE;QAClF,IAAI,CAACxE,WAAW,GAAG+E,YAAY,CAACsB,SAAS,CAACtB,YAAY,CAACuB,WAAW,CAAC,IAAI,CAACxI,WAAW,CAAC,GAAG,CAAC,CAAC,CAACO,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC;QAChH,IAAI,CAACkI,WAAW,CAAC5E,CAAC,CAAC;MACvB,CAAC,MACI,IAAI,CAAC,IAAI,CAAC3D,mBAAmB,IAAI,IAAI,CAACkB,WAAW,KAAK,CAAC,IAAI,CAACrB,WAAW,IAAI,CAACuH,aAAa,CAAC,IAAKzD,CAAC,CAAC6C,IAAI,KAAK,WAAW,IAAI7C,CAAC,CAAC6C,IAAI,KAAK,SAAU,EAAE;QACjJ,IAAI,CAACtB,SAAS,CAAC,CAAC;QAChB,IAAI,CAAC9D,SAAS,GAAG,IAAI;MACzB,CAAC,MACI,IAAI,CAACuC,CAAC,CAACxH,GAAG,KAAK,WAAW,IAAIwH,CAAC,CAACxH,GAAG,KAAK,QAAQ,KAAK,IAAI,CAACwK,KAAK,IAAI,IAAI,CAACA,KAAK,CAAC6B,WAAW,KAAK,IAAI,CAAC7B,KAAK,CAAC8B,SAAS,EAAE;QACrH,IAAI,CAAC9B,KAAK,CAAC+B,cAAc,CAAC,CAAC;MAC/B;MACA;IACJ;IACA,IAAItB,aAAa,CAACM,QAAQ,CAAC,IAAI,CAAC5H,WAAW,CAAC,EAAE;MAC1C,IAAI,CAACkC,WAAW,GAAG,CAAC,IAAI,CAAChC,mBAAmB,GACtCoH,aAAa,CAACiB,SAAS,CAACjB,aAAa,CAACkB,WAAW,CAAC,IAAI,CAACxI,WAAW,CAAC,GAAG,CAAC,CAAC,CAACQ,IAAI,CAAC,CAAC,GAC/E8G,aAAa,CAAC/G,OAAO,CAAC,IAAI,CAACP,WAAW,EAAE,EAAE,CAAC;IACrD;IACA,IAAI,IAAI,CAACA,WAAW,CAACyE,UAAU,CAAC,CAAC,CAAC,KAAK6C,aAAa,CAAC7C,UAAU,CAAC,CAAC,CAAC,IAC9D,IAAI,CAACvC,WAAW,KAAK,EAAE,IAAI2B,CAAC,CAACE,OAAO,KAAK,EAAE,IAAIF,CAAC,CAACE,OAAO,KAAK,EAAE,IAAI,CAAC,IAAI,CAACzC,SAAS,EAAE;MACpF,IAAI,CAACmH,WAAW,CAAC5E,CAAC,CAAC;MACnB,IAAI,CAAC,IAAI,CAACzC,WAAW,IAAI,IAAI,CAACc,WAAW,CAACzF,MAAM,IAAI,IAAI,CAACoD,SAAS,EAAE;QAChE,IAAI,CAAC,IAAI,CAACkC,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;UAC5C,IAAI,CAACmI,SAAS,CAAC,CAAC;QACpB,CAAC,MACI,IAAI,IAAI,CAAC9G,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,IAAI,IAAI,CAACmG,KAAK,IAC5D,IAAI,CAACA,KAAK,CAACE,cAAc,KAAK,IAAI,CAACrG,YAAY,IAAImD,CAAC,CAACE,OAAO,KAAK,CAAC,EAAE;UACpE,IAAI,CAAC8E,SAAS,CAAC,CAAC;QACpB;MACJ;IACJ,CAAC,MACI,IAAI,CAAC,CAAC,IAAI,CAAC3I,mBAAmB,GAAGoH,aAAa,CAACM,QAAQ,CAAC,IAAI,CAAC5H,WAAW,CAAC,GACxEsH,aAAa,CAACK,OAAO,CAAC,IAAI,CAAC3H,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAACoB,WAAW,IAAIyC,CAAC,CAACE,OAAO,KAAK,CAAC,KACvF,CAAC,IAAI,CAACpD,QAAQ,IAAMpD,iBAAiB,CAAC,IAAI,CAACnB,MAAM,CAAC,IAAI,CAACyF,QAAQ,CAACiH,IAAI,CAACxF,QAAQ,CAAC,IAAI,CAAC3C,QAAQ,CAACzB,OAAO,CAAC,IAChG,CAAC3B,iBAAiB,CAAC,IAAI,CAACnB,MAAM,CAAC,IAAIyF,QAAQ,CAACiH,IAAI,CAACxF,QAAQ,CAAC,IAAI,CAAC3C,QAAQ,CAACzB,OAAO,CAAG,CAAC,EAAE;MAC1F,IAAI,IAAI,CAACgC,gBAAgB,IAAI,IAAI,CAACoD,IAAI,IAAI,IAAI,CAACA,IAAI,CAACjB,SAAS,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;QAChF,IAAI,CAACmF,WAAW,CAAC5E,CAAC,CAAC;MACvB;MACA,IAAI,CAACkF,SAAS,CAAC,IAAI,CAACC,UAAU,EAAE,IAAI,CAACzD,MAAM,CAAC;MAC5C,IAAIhI,iBAAiB,CAAC,IAAI,CAAC+G,IAAI,CAAC,EAAE;QAC9B,IAAI,CAAC2E,SAAS,CAAC,CAAC;MACpB;MACA,IAAI,CAAC,IAAI,CAAC7H,WAAW,IAAIyC,CAAC,CAACE,OAAO,KAAK,EAAE,IAAIF,CAAC,CAACE,OAAO,KAAK,EAAE,IAAI,IAAI,CAAC7B,WAAW,CAACzF,MAAM,IAAI,IAAI,CAACoD,SAAS,EAAE;QACxG,IAAI,CAACqJ,+BAA+B,GAAG,IAAI;QAC3C,IAAI,CAACL,SAAS,CAAC,CAAC;QAChB,IAAI,IAAI,CAAC3H,gBAAgB,IAAI,IAAI,CAACoD,IAAI,CAACmB,gBAAgB,CAAC,IAAI,CAAC,CAAChJ,MAAM,KAAK,CAAC,EAAE;UACxE,IAAI,CAACgH,kBAAkB,CAAC,CAAC;QAC7B;QACA,IAAI,CAACnC,SAAS,GAAG,KAAK;MAC1B;IACJ,CAAC,MACI,IAAI,IAAI,CAACvB,WAAW,IAAI,IAAI,CAACmC,WAAW,KAAK,EAAE,IAAI+E,YAAY,IAAIA,YAAY,CAACzG,IAAI,CAAC,CAAC,KAAK,EAAE,IAAIyG,YAAY,CAAC1G,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAACiI,WAAW,CAAC,GAAG,CAAC,GAAGvB,YAAY,CAACxK,MAAM,GAAG,CAAC,IAChLoH,CAAC,CAACE,OAAO,KAAK,EAAE,IAAIF,CAAC,CAACE,OAAO,KAAK,EAAE,IAAIF,CAAC,CAACE,OAAO,KAAK,CAAC,KAAK,IAAI,CAAC/D,WAAW,CAACyE,UAAU,CAAC,CAAC,CAAC,KAAK6C,aAAa,CAAC7C,UAAU,CAAC,CAAC,CAAC,IACzH,IAAI,CAACI,aAAa,IAAI,IAAI,CAACA,aAAa,CAACpI,MAAM,GAAG,CAAE,CAAC,EAAE;MACxD,IAAI,CAACyF,WAAW,GAAG+E,YAAY,CAACsB,SAAS,CAACtB,YAAY,CAACuB,WAAW,CAAC,IAAI,CAACxI,WAAW,CAAC,GAAG,CAAC,CAAC,CAACO,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC;MAChH,IAAI,CAACkI,WAAW,CAAC5E,CAAC,CAAC;IACvB,CAAC,MACI,IAAI,IAAI,CAAC3B,WAAW,KAAK,EAAE,IAAI,IAAI,CAACd,WAAW,IAAIyC,CAAC,CAACE,OAAO,KAAK,EAAE,IAAIF,CAAC,CAACE,OAAO,KAAK,EAAE,IAAI,IAAI,CAAC/D,WAAW,CAACyE,UAAU,CAAC,CAAC,CAAC,KAAK6C,aAAa,CAAC7C,UAAU,CAAC,CAAC,CAAC,EAAE;MAC5J,IAAI,CAACgE,WAAW,CAAC5E,CAAC,CAAC;MACnB,IAAI,CAAC,IAAI,CAAC1C,cAAc,EAAE;QACtB,IAAI,CAAC4H,SAAS,CAAC,IAAI,CAACC,UAAU,EAAE,IAAI,CAACzD,MAAM,CAAC;MAChD;IACJ;IACA,IAAI,CAACpE,cAAc,GAAG,KAAK;EAC/B,CAAC;EACDpC,OAAO,CAAC/C,SAAS,CAACsM,aAAa,GAAG,YAAY;IAC1C,IAAIa,SAAS,GAAG,KAAK;IACrB,KAAK,IAAIrM,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,IAAI,CAAC+H,aAAa,IAAI,IAAI,CAACA,aAAa,CAACpI,MAAM,CAAC,EAAEK,CAAC,EAAE,EAAE;MACxE,IAAI,IAAI,CAAC6H,YAAY,CAAC,CAAC,IACnB,IAAI,CAACA,YAAY,CAAC,CAAC,CAAC4D,SAAS,CAAC,IAAI,CAAC5D,YAAY,CAAC,CAAC,CAAC6D,WAAW,CAAC,IAAI,CAACxI,WAAW,CAAC,GAAG,CAAC,CAAC,CAACO,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAACC,IAAI,CAAC,CAAC,KAAK,IAAI,CAACqE,aAAa,CAAC/H,CAAC,CAAC,CAACiJ,YAAY,CAAC,YAAY,CAAC,CAACqD,WAAW,CAAC,CAAC,EAAE;QACvLD,SAAS,GAAG,IAAI;MACpB;IACJ;IACA,OAAOA,SAAS;EACpB,CAAC;EACDpK,OAAO,CAAC/C,SAAS,CAAC8K,eAAe,GAAG,YAAY;IAC5C,IAAI,CAACD,KAAK,GAAG,IAAI,CAACnG,YAAY,CAAC2I,aAAa,CAACC,YAAY,CAAC,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC;IACzE,OAAO,IAAI,CAAC1C,KAAK;EACrB,CAAC;EACD9H,OAAO,CAAC/C,SAAS,CAACwN,gBAAgB,GAAG,UAAU3F,CAAC,EAAE;IAC9C,IAAI1E,KAAK,GAAG,IAAI;IAChB,IAAIsK,SAAS,GAAG;MACZC,oBAAoB,EAAE,KAAK;MAC3BC,IAAI,EAAE,IAAI,CAACzH,WAAW;MACtB0H,UAAU,EAAE,SAAAA,CAAUZ,UAAU,EAAEa,KAAK,EAAEtE,MAAM,EAAE;QAC7C,IAAIkE,SAAS,CAACK,MAAM,EAAE;UAClB;QACJ;QACA3K,KAAK,CAAC6B,UAAU,GAAG,IAAI;QACvB7B,KAAK,CAAC4K,YAAY,CAACf,UAAU,EAAEa,KAAK,EAAEtE,MAAM,CAAC;MACjD,CAAC;MACDuE,MAAM,EAAE;IACZ,CAAC;IACD,IAAI,CAACE,OAAO,CAAC,WAAW,EAAEP,SAAS,EAAE,UAAUA,SAAS,EAAE;MACtD,IAAI,CAACA,SAAS,CAACK,MAAM,IAAI,CAAC3K,KAAK,CAAC6B,UAAU,IAAI,CAACyI,SAAS,CAACC,oBAAoB,EAAE;QAC3EvK,KAAK,CAAC4K,YAAY,CAAC5K,KAAK,CAAC6J,UAAU,EAAE,IAAI,EAAE7J,KAAK,CAACoG,MAAM,CAAC;MAC5D;IACJ,CAAC,CAAC;EACN,CAAC;EACDxG,OAAO,CAAC/C,SAAS,CAACyM,WAAW,GAAG,UAAU5E,CAAC,EAAE;IACzC,IAAI,CAACoG,aAAa,GAAG,KAAK;IAC1B,IAAI1M,iBAAiB,CAAC,IAAI,CAAC+G,IAAI,CAAC,EAAE;MAC9BtF,MAAM,CAAChD,SAAS,CAAC0F,MAAM,CAACtC,IAAI,CAAC,IAAI,CAAC;MAClC,IAAI,CAAC8K,gBAAgB,CAAC,CAAC;MACvB,IAAI,CAACC,cAAc,CAAC,CAAC;IACzB;IACA,IAAItG,CAAC,CAACuG,IAAI,KAAK,WAAW,KAAKvG,CAAC,CAACE,OAAO,KAAK,EAAE,IAAIF,CAAC,CAACE,OAAO,KAAK,EAAE,CAAC,EAAE;MAClE,IAAI,CAAC7B,WAAW,GAAG,IAAI,CAACA,WAAW,KAAK,EAAE,GAAG,IAAI,GAAG,IAAI,CAACA,WAAW;MACpE,IAAI,CAACjB,eAAe,GAAG,IAAI;MAC3B,IAAI,CAAC8H,SAAS,CAAC,IAAI,CAACC,UAAU,EAAE,IAAI,CAACzD,MAAM,CAAC;MAC5C;IACJ;IACA,IAAI,CAACxE,UAAU,GAAG,KAAK;IACvB,IAAI,CAACiF,WAAW,GAAG,IAAI;IACvB,IAAI,IAAI,CAAC9D,WAAW,KAAK,EAAE,IAAI,IAAI,CAACmI,aAAa,GAAG,CAAC,EAAE;MACnD,IAAI,CAACC,kBAAkB,CAACzG,CAAC,EAAE,IAAI,CAACwG,aAAa,CAAC;IAClD,CAAC,MACI;MACD,IAAI,CAACb,gBAAgB,CAAC3F,CAAC,CAAC;IAC5B;EACJ,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAAC+N,YAAY,GAAG,UAAUf,UAAU,EAAEa,KAAK,EAAEtE,MAAM,EAAE;IAClE,IAAI,CAACtE,eAAe,GAAG,IAAI;IAC3B,IAAI,IAAI,CAACiB,WAAW,CAACzF,MAAM,IAAI,IAAI,CAACoD,SAAS,EAAE;MAC3C,IAAI,CAACkJ,SAAS,CAACC,UAAU,EAAEzD,MAAM,EAAEsE,KAAK,CAAC;MACzC,IAAI,CAAC1I,cAAc,GAAG,IAAI;IAC9B,CAAC,MACI;MACD,IAAI,IAAI,CAACC,WAAW,EAAE;QAClB,IAAI,CAACgE,SAAS,CAAC,CAAC;MACpB;MACA,IAAI,CAACnE,eAAe,GAAG,KAAK;IAChC;IACA,IAAI,CAACsJ,YAAY,CAAC,CAAC;IACnB,IAAI,CAACC,oBAAoB,CAAC,CAAC;EAC/B,CAAC;EACD;EACAzL,OAAO,CAAC/C,SAAS,CAACyO,gBAAgB,GAAG,UAAUC,SAAS,EAAEpG,IAAI,EAAET,CAAC,EAAE8G,SAAS,EAAE;IAC1E3L,MAAM,CAAChD,SAAS,CAACyO,gBAAgB,CAACrL,IAAI,CAAC,IAAI,EAAEsL,SAAS,EAAEpG,IAAI,EAAET,CAAC,CAAC;IAChE,IAAI,IAAI,CAAC+G,QAAQ,EAAE;MACf,IAAI,CAACrN,iBAAiB,CAACmN,SAAS,CAAC,EAAE;QAC/BpN,UAAU,CAACoN,SAAS,EAAE;UAAE,IAAI,EAAE,IAAI,CAAChK,YAAY,CAACmK,EAAE,GAAG,UAAU;UAAE,MAAM,EAAE,SAAS;UAAE,aAAa,EAAE;QAAQ,CAAC,CAAC;QAC7G,IAAIC,mBAAmB,GAAG,IAAI,CAACvJ,KAAK,IAAI,IAAI,CAACnB,QAAQ,IAAI,IAAI,CAACA,QAAQ,CAACuH,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;QACnG,IAAImD,mBAAmB,EAAE;UACrBJ,SAAS,CAACG,EAAE,GAAG,IAAI,CAACnK,YAAY,CAACmK,EAAE,GAAG,qBAAqB;QAC/D;MACJ;MACA,IAAIE,SAAS,GAAG,IAAI,CAACxF,MAAM,CAACC,QAAQ,GAAGkF,SAAS,CAAC5I,aAAa,CAAC,GAAG,GAAG1D,mBAAmB,CAAC6G,EAAE,GAAG,mBAAmB,CAAC,GAAGyF,SAAS,CAAC5I,aAAa,CAAC,GAAG,GAAG1D,mBAAmB,CAAC6G,EAAE,CAAC;MAC1K,IAAI8F,SAAS,EAAE;QACXA,SAAS,CAAC1H,SAAS,CAAChB,GAAG,CAACjE,mBAAmB,CAAC8G,QAAQ,CAAC;QACrD,IAAI,CAACG,UAAU,GAAG0F,SAAS;QAC3B,IAAIlF,KAAK,GAAG,IAAI,CAACC,iBAAiB,CAACiF,SAAS,CAAChF,YAAY,CAAC,YAAY,CAAC,CAAC;QACxE,IAAI,CAACiF,mBAAmB,CAACD,SAAS,EAAE,IAAI,CAACE,cAAc,CAACpF,KAAK,CAAC,EAAEA,KAAK,EAAE,IAAI,CAAC;MAChF;MACA,IAAI,IAAI,CAAC5E,eAAe,IAAI,IAAI,CAACG,WAAW,EAAE;QAC1C,IAAI,CAAC7D,iBAAiB,CAAC,IAAI,CAACoD,QAAQ,CAACzB,OAAO,CAAC,EAAE;UAC3C,IAAI,CAACyB,QAAQ,CAACzB,OAAO,CAACuD,MAAM,CAAC,CAAC;QAClC;QACA,IAAI,CAACyI,WAAW,CAAC,CAAC;MACtB;IACJ;EACJ,CAAC;EACDnM,OAAO,CAAC/C,SAAS,CAACuO,YAAY,GAAG,YAAY;IACzC,KAAK,IAAIzN,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC+H,aAAa,IAAI/H,CAAC,GAAG,IAAI,CAAC+H,aAAa,CAACpI,MAAM,EAAEK,CAAC,EAAE,EAAE;MACtE,IAAI,CAAC+H,aAAa,CAAC/H,CAAC,CAAC,CAACmF,YAAY,CAAC,YAAY,EAAEnF,CAAC,CAACiL,QAAQ,CAAC,CAAC,CAAC;IAClE;EACJ,CAAC;EACDhJ,OAAO,CAAC/C,SAAS,CAACmP,UAAU,GAAG,UAAUnC,UAAU,EAAEoC,cAAc,EAAE;IACjE,IAAIjM,KAAK,GAAG,IAAI;IAChB,IAAIoG,MAAM,GAAGvG,MAAM,CAAChD,SAAS,CAACmP,UAAU,CAAC/L,IAAI,CAAC,IAAI,EAAE4J,UAAU,EAAEoC,cAAc,CAAC;IAC/E,IAAI7N,iBAAiB,CAACgI,MAAM,CAAC8F,WAAW,CAAC,EAAE;MACvC9F,MAAM,CAAC8F,WAAW,GAAG,UAAUxH,CAAC,EAAE;QAC9B,IAAI1E,KAAK,CAACmM,SAAS,EAAE;UACjB,IAAInM,KAAK,CAACuB,YAAY,CAAC0H,OAAO,KAAKjJ,KAAK,CAACoM,cAAc,CAAC,CAAC,IAAIpM,KAAK,CAACqM,YAAY,EAAE;YAC7EC,UAAU,CAAC,YAAY;cACnB5M,eAAe,CAACgF,CAAC,CAAC6H,IAAI,EAAEvM,KAAK,CAAC+C,WAAW,EAAE/C,KAAK,CAACwM,UAAU,EAAExM,KAAK,CAACyM,UAAU,CAAC;YAClF,CAAC,EAAE,CAAC,CAAC;UACT,CAAC,MACI;YACD/M,eAAe,CAACgF,CAAC,CAAC6H,IAAI,EAAEvM,KAAK,CAAC+C,WAAW,EAAE/C,KAAK,CAACwM,UAAU,EAAExM,KAAK,CAACyM,UAAU,CAAC;UAClF;QACJ;MACJ,CAAC;IACL,CAAC,MACI;MACD,IAAIC,aAAa,GAAGtG,MAAM,CAAC8F,WAAW;MACtC9F,MAAM,CAAC8F,WAAW,GAAG,UAAUxH,CAAC,EAAE;QAC9B,IAAI1E,KAAK,CAACmM,SAAS,EAAE;UACjBzM,eAAe,CAACgF,CAAC,CAAC6H,IAAI,EAAEvM,KAAK,CAAC+C,WAAW,EAAE/C,KAAK,CAACwM,UAAU,EAAExM,KAAK,CAACyM,UAAU,CAAC;QAClF;QACAC,aAAa,CAACC,KAAK,CAAC3M,KAAK,EAAE,CAAC0E,CAAC,CAAC,CAAC;MACnC,CAAC;IACL;IACA,OAAO0B,MAAM;EACjB,CAAC;EACDxG,OAAO,CAAC/C,SAAS,CAACmG,YAAY,GAAG,YAAY;IACzC,IAAI,CAAC,IAAI,CAACJ,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC5C,OAAO,IAAI,CAACA,YAAY,CAACmF,KAAK,CAACtF,OAAO,CAAC,IAAI,CAACP,WAAW,EAAE,EAAE,CAAC;IAChE,CAAC,MACI;MACD,OAAO,IAAI,CAACU,YAAY,CAACsG,WAAW,CAACzG,OAAO,CAAC,IAAI,CAACP,WAAW,EAAE,EAAE,CAAC;IACtE;EACJ,CAAC;EACDjB,OAAO,CAAC/C,SAAS,CAAC+P,QAAQ,GAAG,UAAUlC,KAAK,EAAE;IAC1C,IAAImC,WAAW,GAAGnC,KAAK,GAAGA,KAAK,CAACoC,KAAK,CAAC,CAAC,GAAG,IAAI,CAACpC,KAAK,GAAG,IAAI,CAACA,KAAK,CAACoC,KAAK,CAAC,CAAC,GAAG,IAAI3N,KAAK,CAAC,CAAC;IACvF,IAAIsN,UAAU,GAAI,IAAI,CAAC1J,WAAW,KAAK,EAAE,IAAI,CAAC3E,iBAAiB,CAAC,IAAI,CAAC4E,YAAY,CAAC,CAAC,CAAC,GAAI,OAAO,GAAG,IAAI,CAACyJ,UAAU;IACjH,IAAI1J,WAAW,GAAI,IAAI,CAACA,WAAW,KAAK,EAAE,IAAI,CAAC3E,iBAAiB,CAAC,IAAI,CAAC4E,YAAY,CAAC,CAAC,CAAC,GACjF,IAAI,CAACA,YAAY,CAAC,CAAC,GAAG,IAAI,CAACD,WAAW;IAC1C,IAAI,IAAI,CAAClB,UAAU,EAAE;MACjB,OAAOgL,WAAW;IACtB;IACA,IAAI,IAAI,CAAC9J,WAAW,KAAK,IAAI,IAAI,IAAI,CAACA,WAAW,KAAK,EAAE,EAAE;MACtD,IAAIgK,QAAQ,GAAG,IAAI,CAACC,UAAU,CAAC,IAAI,CAACnD,UAAU,CAAC,CAACoD,MAAM;MACtD,IAAI,EAAE,IAAI,CAACpD,UAAU,YAAY3K,WAAW,CAAC,IAAI6N,QAAQ,KAAK,QAAQ,IAAIA,QAAQ,KAAK,QAAQ,EAAE;QAC7FF,WAAW,CAACK,KAAK,CAAC,EAAE,EAAET,UAAU,EAAE1J,WAAW,EAAE,IAAI,CAACyJ,UAAU,EAAE,IAAI,CAACW,YAAY,CAAC;MACtF,CAAC,MACI;QACD,IAAIC,OAAO,GAAG,CAAChP,iBAAiB,CAAC,IAAI,CAACgI,MAAM,CAACoE,IAAI,CAAC,GAAG,IAAI,CAACpE,MAAM,CAACoE,IAAI,GAAG,EAAE;QAC1EqC,WAAW,CAACK,KAAK,CAACE,OAAO,EAAEX,UAAU,EAAE1J,WAAW,EAAE,IAAI,CAACyJ,UAAU,EAAE,IAAI,CAACW,YAAY,CAAC;MAC3F;IACJ;IACA,IAAI,CAAC/O,iBAAiB,CAAC,IAAI,CAACiP,eAAe,CAAC,EAAE;MAC1C;MACA,IAAI,IAAI,CAACA,eAAe,KAAK,EAAE,EAAE;QAC7B,KAAK,IAAIC,aAAa,GAAG,CAAC,EAAEA,aAAa,GAAGT,WAAW,CAACU,OAAO,CAACjQ,MAAM,EAAEgQ,aAAa,EAAE,EAAE;UACrF,IAAIT,WAAW,CAACU,OAAO,CAACD,aAAa,CAAC,CAACE,EAAE,KAAK,QAAQ,EAAE;YACpDX,WAAW,CAACU,OAAO,CAACE,MAAM,CAACH,aAAa,EAAE,CAAC,CAAC;UAChD;QACJ;MACJ;MACAT,WAAW,CAACa,IAAI,CAAC,IAAI,CAACL,eAAe,CAAC;IAC1C;IACA,OAAOR,WAAW;EACtB,CAAC;EACDjN,OAAO,CAAC/C,SAAS,CAAC8Q,iBAAiB,GAAG,YAAY;IAC9C,IAAI,IAAI,CAACxB,SAAS,EAAE;MAChB,KAAK,IAAIxO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC+H,aAAa,CAACpI,MAAM,EAAEK,CAAC,EAAE,EAAE;QAChD,IAAIiQ,WAAW,GAAG,IAAI,CAACrC,SAAS,CAAC5I,aAAa,CAAC,WAAW,CAAC;QAC3D,IAAI,CAACiL,WAAW,EAAE;UACdjO,qBAAqB,CAAC,IAAI,CAAC+F,aAAa,CAAC/H,CAAC,CAAC,CAAC;UAC5C+B,eAAe,CAAC,IAAI,CAACgG,aAAa,CAAC/H,CAAC,CAAC,EAAE,IAAI,CAACoF,WAAW,EAAE,IAAI,CAACyJ,UAAU,EAAE,IAAI,CAACC,UAAU,CAAC;QAC9F;MACJ;IACJ;EACJ,CAAC;EACD7M,OAAO,CAAC/C,SAAS,CAAC2I,YAAY,GAAG,YAAY;IACzC,IAAIgF,IAAI;IACR,IAAI,CAAC,IAAI,CAAC5H,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC5C,IAAIsM,SAAS,GAAG,IAAI,CAACtM,YAAY;MACjC,IAAI,CAACnD,iBAAiB,CAACyP,SAAS,CAAC,EAAE;QAC/B,IAAIC,QAAQ,GAAGD,SAAS,CAACE,cAAc;QACvC,IAAIF,SAAS,CAACnH,KAAK,IAAIoH,QAAQ,IAAI,CAAC,EAAE;UAClCtD,IAAI,GAAGqD,SAAS,CAACnH,KAAK,CAAC0C,SAAS,CAAC,CAAC,EAAE0E,QAAQ,CAAC;QACjD;MACJ;IACJ,CAAC,MACI;MACD,IAAI,IAAI,CAACpG,KAAK,EAAE;QACZ,IAAIsG,YAAY,GAAG,IAAI,CAACtG,KAAK,CAACE,cAAc;QAC5C,IAAI,CAACxJ,iBAAiB,CAAC4P,YAAY,CAAC,EAAE;UAClC,IAAIC,kBAAkB,GAAGD,YAAY,CAACnG,WAAW;UACjD,IAAIqG,iBAAiB,GAAG,IAAI,CAACxG,KAAK,CAAC6B,WAAW;UAC9C,IAAI0E,kBAAkB,IAAIC,iBAAiB,IAAI,CAAC,EAAE;YAC9C1D,IAAI,GAAGyD,kBAAkB,CAAC7E,SAAS,CAAC,CAAC,EAAE8E,iBAAiB,CAAC;UAC7D;QACJ;MACJ;IACJ;IACA,OAAO1D,IAAI;EACf,CAAC;EACD5K,OAAO,CAAC/C,SAAS,CAAC0I,aAAa,GAAG,UAAUiF,IAAI,EAAE;IAC9C,IAAIpM,iBAAiB,CAACoM,IAAI,CAAC,EAAE;MACzB,OAAO,EAAE;IACb;IACA,IAAI2D,SAAS,GAAG3D,IAAI,CAAChC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAGgC,IAAI,CAACpJ,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,GAAGoJ,IAAI,CAACpJ,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC;IAChI,IAAIgN,KAAK,GAAGD,SAAS,CAACzM,KAAK,CAAC,KAAK,CAAC;IAClC,IAAI2M,OAAO,GAAGD,KAAK,CAAC9Q,MAAM,GAAG,CAAC;IAC9B,OAAO8Q,KAAK,CAACC,OAAO,CAAC,CAAChN,IAAI,CAAC,CAAC;EAChC,CAAC;EACDzB,OAAO,CAAC/C,SAAS,CAAC+F,iBAAiB,GAAG,UAAU7C,OAAO,EAAE;IACrD,OAAOA,OAAO,IAAIA,OAAO,CAACqE,QAAQ,KAAK,OAAO,IAAIrE,OAAO,CAACqE,QAAQ,KAAK,UAAU;EACrF,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIxE,OAAO,CAAC/C,SAAS,CAAC6M,SAAS,GAAG,YAAY;IACtC,IAAI,CAAC5H,eAAe,GAAG,IAAI;IAC3B,IAAIY,QAAQ,CAAC+E,aAAa,KAAK,IAAI,CAAClG,YAAY,EAAE;MAC9C,IAAI,CAACA,YAAY,CAACiF,KAAK,CAAC,CAAC;IAC7B;IACA,IAAI,CAACzD,WAAW,GAAG,IAAI,CAACgH,+BAA+B,GAAG,IAAI,CAAChH,WAAW,GAAG,EAAE;IAC/E,IAAI,CAACgH,+BAA+B,GAAG,KAAK;IAC5C,IAAI,IAAI,CAACnH,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC3C,IAAI,CAACmG,KAAK,GAAG,IAAI,CAACC,eAAe,CAAC,CAAC;IACvC;IACA,IAAI,CAAC,IAAI,CAACL,OAAO,EAAE;MACf,IAAI,CAACsC,SAAS,CAAC,IAAI,CAACC,UAAU,EAAE,IAAI,CAACzD,MAAM,CAAC;IAChD;IACA,IAAIhI,iBAAiB,CAAC,IAAI,CAAC+G,IAAI,CAAC,EAAE;MAC9B,IAAI,CAAC2E,SAAS,CAAC,CAAC;IACpB;IACA,IAAI,CAACiC,WAAW,CAAC,CAAC;IAClB5N,UAAU,CAAC,IAAI,CAACoD,YAAY,EAAE;MAAE,uBAAuB,EAAE,IAAI,CAAC+M;IAAkB,CAAC,CAAC;IAClF,IAAI,IAAI,CAACA,iBAAiB,IAAI,IAAI,EAAE;MAChC,IAAI,CAAC/M,YAAY,CAACgN,eAAe,CAAC,uBAAuB,CAAC;IAC9D;EACJ,CAAC;EACD;EACA;AACJ;AACA;AACA;AACA;EACI3O,OAAO,CAAC/C,SAAS,CAACoJ,SAAS,GAAG,UAAUvB,CAAC,EAAE;IACvC,IAAI,CAAC8J,eAAe,CAAC,CAAC;IACtB,IAAI,CAACC,UAAU,CAAC,CAAC,EAAE/J,CAAC,CAAC;EACzB,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAAC4R,UAAU,GAAG,UAAUC,KAAK,EAAEhK,CAAC,EAAE;IAC/C,IAAI1E,KAAK,GAAG,IAAI;IAChB,IAAI,EAAE,IAAI,CAACwB,QAAQ,IAAIkB,QAAQ,CAACiH,IAAI,CAACxF,QAAQ,CAAC,IAAI,CAAC3C,QAAQ,CAACzB,OAAO,CAAC,IAAI,IAAI,CAAC+B,eAAe,CAAC,EAAE;MAC3F;IACJ;IACA/D,YAAY,CAACuF,MAAM,CAACZ,QAAQ,EAAE,WAAW,EAAE,IAAI,CAACiM,eAAe,CAAC;IAChE,IAAI,CAACpN,YAAY,CAACgN,eAAe,CAAC,WAAW,CAAC;IAC9C,IAAI,CAAChN,YAAY,CAACgN,eAAe,CAAC,uBAAuB,CAAC;IAC1D,IAAI,CAACzM,eAAe,GAAG,KAAK;IAC5B,IAAI8M,SAAS,GAAG;MACZC,IAAI,EAAE,SAAS;MACfC,QAAQ,EAAE,GAAG;MACbJ,KAAK,EAAEA,KAAK,GAAGA,KAAK,GAAG;IAC3B,CAAC;IACD,IAAIK,aAAa,GAAG,IAAI,CAACvN,QAAQ;IACjC,IAAI8I,SAAS,GAAG;MAAE0E,KAAK,EAAED,aAAa;MAAEpE,MAAM,EAAE,KAAK;MAAEsE,SAAS,EAAEL,SAAS;MAAEM,KAAK,EAAExK,CAAC,IAAI;IAAK,CAAC;IAC/F,IAAI,CAACmG,OAAO,CAAC,QAAQ,EAAEP,SAAS,EAAE,UAAUA,SAAS,EAAE;MACnD,IAAI,CAACA,SAAS,CAACK,MAAM,IAAI3K,KAAK,CAACwB,QAAQ,EAAE;QACrC,IAAIxB,KAAK,CAACiC,WAAW,EAAE;UACnBjC,KAAK,CAACwB,QAAQ,CAAC2N,IAAI,CAAC,IAAInR,SAAS,CAACsM,SAAS,CAAC2E,SAAS,CAAC,CAAC;QAC3D,CAAC,MACI;UACDjP,KAAK,CAACoP,YAAY,CAAC,CAAC;QACxB;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EACDxP,OAAO,CAAC/C,SAAS,CAACkP,WAAW,GAAG,YAAY;IACxC,IAAI/L,KAAK,GAAG,IAAI;IAChB,IAAIqP,IAAI,GAAG;MAAE1E,MAAM,EAAE;IAAM,CAAC;IAC5B,IAAI,CAACE,OAAO,CAAC,YAAY,EAAEwE,IAAI,EAAE,UAAUA,IAAI,EAAE;MAC7C,IAAI,CAACA,IAAI,CAAC1E,MAAM,EAAE;QACd,IAAI2E,UAAU;QACd,IAAIlR,iBAAiB,CAAC4B,KAAK,CAAC/C,MAAM,CAAC,EAAE;UACjCqS,UAAU,GAAGtP,KAAK,CAACwE,aAAa,CAAC,KAAK,EAAE;YACpCkH,EAAE,EAAE1L,KAAK,CAACuB,YAAY,CAACmK,EAAE,GAAG,QAAQ;YAAE6D,SAAS,EAAE,oBAAoB,IAAIvP,KAAK,CAACiB,QAAQ,IAAI,IAAI,GAAGjB,KAAK,CAACiB,QAAQ,GAAG,EAAE;UACzH,CAAC,CAAC;QACN,CAAC,MACI;UACDqO,UAAU,GAAGtP,KAAK,CAACD,OAAO;UAC1B,IAAIC,KAAK,CAACiB,QAAQ,IAAI,IAAI,EAAE;YACxBzC,QAAQ,CAAC,CAAC8Q,UAAU,CAAC,EAAEtP,KAAK,CAACiB,QAAQ,CAACS,KAAK,CAAC,GAAG,CAAC,CAAC;UACrD;QACJ;QACA,IAAIiK,mBAAmB,GAAG3L,KAAK,CAACoC,KAAK,IAAIpC,KAAK,CAACiB,QAAQ,IAAIjB,KAAK,CAACiB,QAAQ,CAACuH,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;QACtG,IAAImD,mBAAmB,EAAE;UACrB2D,UAAU,CAAC5D,EAAE,GAAG1L,KAAK,CAACuB,YAAY,CAACmK,EAAE,GAAG,mBAAmB;QAC/D,CAAC,MACI;UACD,IAAI,CAACtN,iBAAiB,CAAC4B,KAAK,CAAC/C,MAAM,CAAC,EAAE;YAClCqS,UAAU,CAAC5D,EAAE,GAAG1L,KAAK,CAACuB,YAAY,CAACmK,EAAE,GAAG,QAAQ;UACpD;QACJ;QACA1L,KAAK,CAACwP,UAAU,GAAGvR,UAAU,CAAC+B,KAAK,CAACyP,WAAW,CAAC;QAChD,IAAI,CAACrR,iBAAiB,CAAC4B,KAAK,CAACmF,IAAI,CAACxC,aAAa,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC3C,KAAK,CAAC+B,gBAAgB,EAAE;UAC/E,IAAI+D,EAAE,GAAG9F,KAAK,CAACmF,IAAI,CAACxC,aAAa,CAAC,GAAG,GAAG1D,mBAAmB,CAACuH,KAAK,CAAC;UAClE,IAAI,CAACpI,iBAAiB,CAAC0H,EAAE,CAAC,EAAE;YACxB9F,KAAK,CAACkG,UAAU,GAAGJ,EAAE;YACrB,IAAIY,KAAK,GAAG1G,KAAK,CAAC2G,iBAAiB,CAACb,EAAE,CAACc,YAAY,CAAC,YAAY,CAAC,CAAC;YAClE5G,KAAK,CAAC6L,mBAAmB,CAAC/F,EAAE,EAAE9F,KAAK,CAAC8L,cAAc,CAACpF,KAAK,CAAC,EAAEA,KAAK,EAAE,IAAI,CAAC;UAC3E;QACJ;QACAxI,MAAM,CAAC,CAAC8B,KAAK,CAACmF,IAAI,CAAC,EAAEmK,UAAU,CAAC;QAChC,IAAItP,KAAK,CAACuB,YAAY,CAAC8C,aAAa,EAAE;UAClC,IAAIqL,cAAc,GAAG1P,KAAK,CAACuB,YAAY,CAAC8C,aAAa,CAAC3F,OAAO,CAAC,mBAAmB,CAAC;UAClF,IAAIgR,cAAc,IAAIJ,UAAU,CAACK,iBAAiB,IAAIL,UAAU,CAACK,iBAAiB,CAACC,iBAAiB,GAAG,CAAC,EAAE;YACtGN,UAAU,CAACK,iBAAiB,CAAC7M,YAAY,CAAC,WAAW,EAAE4M,cAAc,CAAChE,EAAE,CAAC;YACzElN,QAAQ,CAAC,CAAC8Q,UAAU,CAAC,EAAE,gBAAgB,CAAC;UAC5C;QACJ;QACA,IAAK,CAACtP,KAAK,CAACwB,QAAQ,IAAI,CAACkB,QAAQ,CAACiH,IAAI,CAACxF,QAAQ,CAACnE,KAAK,CAACwB,QAAQ,CAACzB,OAAO,CAAC,IACnE,CAAC2C,QAAQ,CAACyB,QAAQ,CAACmL,UAAU,CAAC,IAAIlR,iBAAiB,CAAC4B,KAAK,CAAC/C,MAAM,CAAC,EAAE;UACnEyF,QAAQ,CAACiH,IAAI,CAACkG,WAAW,CAACP,UAAU,CAAC;QACzC;QACA,IAAIQ,aAAa;QACjBR,UAAU,CAACS,KAAK,CAACC,UAAU,GAAG,QAAQ;QACtChQ,KAAK,CAACiQ,SAAS,CAACX,UAAU,CAAC;QAC3B,IAAIY,WAAW,GAAG,CAAC;QACnB,IAAIC,IAAI,GAAG,CAAC;QACZnQ,KAAK,CAACoQ,eAAe,CAACd,UAAU,EAAEY,WAAW,EAAEC,IAAI,CAAC;QACpDnQ,KAAK,CAACqQ,cAAc,CAACf,UAAU,CAAC;QAChCA,UAAU,CAACS,KAAK,CAACC,UAAU,GAAG,SAAS;QACvC,IAAIM,WAAW,GAAGhB,UAAU,CAACjL,aAAa,CAACkM,WAAW,GAAGjB,UAAU,CAACiB,WAAW;QAC/E,IAAIC,aAAa,GAAGlB,UAAU,CAACmB,YAAY;QAC3CjS,QAAQ,CAAC,CAAC8Q,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,SAAS,EAAE,eAAe,CAAC,CAAC;QACjE,IAAI,CAAClR,iBAAiB,CAAC4B,KAAK,CAACmF,IAAI,CAAC,EAAE;UAChCnF,KAAK,CAAC+K,gBAAgB,CAAC,CAAC;UACxB/K,KAAK,CAACgL,cAAc,CAAC,CAAC;QAC1B;QACAhL,KAAK,CAACsO,iBAAiB,GAAGtO,KAAK,CAACkG,UAAU,GAAGlG,KAAK,CAACkG,UAAU,CAACwF,EAAE,GAAG,IAAI;QACvEvN,UAAU,CAAC6B,KAAK,CAACuB,YAAY,EAAE;UAAE,WAAW,EAAEvB,KAAK,CAACuB,YAAY,CAACmK,EAAE,GAAG,UAAU;UAAE,uBAAuB,EAAE1L,KAAK,CAACsO;QAAkB,CAAC,CAAC;QACrI,IAAItO,KAAK,CAACsO,iBAAiB,IAAI,IAAI,EAAE;UACjCtO,KAAK,CAACuB,YAAY,CAACgN,eAAe,CAAC,uBAAuB,CAAC;QAC/D;QACA,IAAIK,SAAS,GAAG;UAAEC,IAAI,EAAE,QAAQ;UAAEC,QAAQ,EAAE;QAAI,CAAC;QACjD9O,KAAK,CAAC8B,eAAe,GAAG,IAAI;QAC5B,IAAIiN,aAAa,GAAG/O,KAAK,CAACwB,QAAQ;QAClC,IAAI8I,SAAS,GAAG;UAAE0E,KAAK,EAAED,aAAa;UAAEpE,MAAM,EAAE,KAAK;UAAEsE,SAAS,EAAEL;QAAU,CAAC;QAC7E5O,KAAK,CAAC6K,OAAO,CAAC,QAAQ,EAAEP,SAAS,EAAE,UAAUA,SAAS,EAAE;UACpD,IAAI,CAACA,SAAS,CAACK,MAAM,EAAE;YACnB3K,KAAK,CAACqL,oBAAoB,CAAC,CAAC;YAC5B,IAAIrL,KAAK,CAACwB,QAAQ,EAAE;cAChBxB,KAAK,CAACwB,QAAQ,CAACkP,IAAI,CAAC,IAAI1S,SAAS,CAACsM,SAAS,CAAC2E,SAAS,CAAC,EAAGjP,KAAK,CAAC2Q,MAAM,KAAK,IAAI,GAAI3Q,KAAK,CAACuB,YAAY,GAAG,IAAI,CAAC;YAChH;YACA,IAAInD,iBAAiB,CAAC4B,KAAK,CAAC4Q,sBAAsB,CAAC,CAAC,CAAC,EAAE;cACnD;YACJ;YACAd,aAAa,GAAG9P,KAAK,CAAC6Q,cAAc,CAAC7Q,KAAK,CAACuB,YAAY,EAAEvB,KAAK,CAAC4Q,sBAAsB,CAAC,CAAC,CAAC;YACxF,IAAI,CAAC5Q,KAAK,CAACkC,UAAU,EAAE;cACnBoN,UAAU,CAACS,KAAK,CAACe,OAAO,GAAG,OAAO,CAACC,MAAM,CAACjB,aAAa,CAACkB,GAAG,CAACpI,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,CAACmI,MAAM,CAACjB,aAAa,CAACK,IAAI,CAACvH,QAAQ,CAAC,CAAC,EAAE,4CAA4C,CAAC;YAC/K,CAAC,MACI;cACD,IAAI5I,KAAK,CAACiR,SAAS,CAAC3T,MAAM,GAAG,CAAC,IAAI0C,KAAK,CAACiR,SAAS,CAACzI,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAIxI,KAAK,CAACiR,SAAS,CAACzI,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;gBACjH8G,UAAU,CAACS,KAAK,CAACe,OAAO,GAAG,OAAO,CAACC,MAAM,CAACjB,aAAa,CAACkB,GAAG,CAACpI,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,CAACmI,MAAM,CAACT,WAAW,CAAC1H,QAAQ,CAAC,CAAC,EAAE,4CAA4C,CAAC;cACxK,CAAC,MACI,IAAI5I,KAAK,CAACiR,SAAS,IAAIjR,KAAK,CAACiR,SAAS,CAAC3T,MAAM,GAAG,CAAC,IAAI0C,KAAK,CAACiR,SAAS,CAACzI,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAIxI,KAAK,CAACiR,SAAS,CAACzI,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE;gBACzI8G,UAAU,CAACS,KAAK,CAACI,IAAI,GAAGlS,UAAU,CAAC6R,aAAa,CAACK,IAAI,CAAC;gBACtDb,UAAU,CAACS,KAAK,CAACiB,GAAG,GAAG/S,UAAU,CAAC6R,aAAa,CAACkB,GAAG,GAAGE,QAAQ,CAACV,aAAa,CAAC5H,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;cACjG,CAAC,MACI,IAAI5I,KAAK,CAACiR,SAAS,IAAIjR,KAAK,CAACiR,SAAS,CAAC3T,MAAM,GAAG,CAAC,IAAI0C,KAAK,CAACiR,SAAS,CAACzI,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAIxI,KAAK,CAACiR,SAAS,CAACzI,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE;gBACvI8G,UAAU,CAACS,KAAK,CAACI,IAAI,GAAGlS,UAAU,CAACqS,WAAW,CAAC;gBAC/ChB,UAAU,CAACS,KAAK,CAACiB,GAAG,GAAG/S,UAAU,CAAC6R,aAAa,CAACkB,GAAG,GAAGE,QAAQ,CAACV,aAAa,CAAC5H,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;cACjG,CAAC,MACI;gBACD0G,UAAU,CAACS,KAAK,CAACI,IAAI,GAAGlS,UAAU,CAAC6R,aAAa,CAACK,IAAI,CAAC;gBACtDb,UAAU,CAACS,KAAK,CAACiB,GAAG,GAAG/S,UAAU,CAAC6R,aAAa,CAACkB,GAAG,GAAGE,QAAQ,CAAClR,KAAK,CAACyP,WAAW,CAAC7G,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;cACrG;cACA5I,KAAK,CAACkC,UAAU,GAAG,KAAK;cACxBlC,KAAK,CAACiR,SAAS,GAAG,EAAE;YACxB;YACA3B,UAAU,CAACS,KAAK,CAACxL,KAAK,GAAGvE,KAAK,CAACmR,UAAU,KAAK,MAAM,IAAI,CAAC/S,iBAAiB,CAAC4B,KAAK,CAACmR,UAAU,CAAC,GAAGlT,UAAU,CAAC+B,KAAK,CAACmR,UAAU,CAAC,GAAG,MAAM;YACpInR,KAAK,CAACiQ,SAAS,CAACX,UAAU,CAAC;YAC3BA,UAAU,CAACS,KAAK,CAACY,MAAM,GAAG3Q,KAAK,CAAC2Q,MAAM,KAAK,IAAI,GAAGlR,gBAAgB,CAAC6P,UAAU,CAAC,CAAC1G,QAAQ,CAAC,CAAC,GAAG5I,KAAK,CAAC2Q,MAAM,CAAC/H,QAAQ,CAAC,CAAC;UACvH,CAAC,MACI;YACD5I,KAAK,CAAC8B,eAAe,GAAG,KAAK;YAC7B9B,KAAK,CAACoP,YAAY,CAAC,CAAC;UACxB;QACJ,CAAC,CAAC;MACN,CAAC,MACI;QACDpP,KAAK,CAAC8B,eAAe,GAAG,KAAK;MACjC;IACJ,CAAC,CAAC;EACN,CAAC;EACDlC,OAAO,CAAC/C,SAAS,CAACoT,SAAS,GAAG,UAAUmB,QAAQ,EAAE;IAC9C,IAAI,IAAI,CAAC3B,WAAW,KAAK,MAAM,IAAI,IAAI,CAACtK,IAAI,EAAE;MAC1C,IAAI,CAACA,IAAI,CAAC4K,KAAK,CAACsB,SAAS,GAAG,CAACH,QAAQ,CAAC,IAAI,CAAC1B,UAAU,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE5G,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;MACnFwI,QAAQ,CAACrB,KAAK,CAACsB,SAAS,GAAGpT,UAAU,CAAC,IAAI,CAACwR,WAAW,CAAC;IAC3D,CAAC,MACI;MACD2B,QAAQ,CAACrB,KAAK,CAACuB,MAAM,GAAG,MAAM;IAClC;EACJ,CAAC;EACD1R,OAAO,CAAC/C,SAAS,CAACwT,cAAc,GAAG,UAAUe,QAAQ,EAAE;IACnD,IAAI,CAACtS,OAAO,CAAC0E,QAAQ,IAAK1E,OAAO,CAAC0E,QAAQ,IAAI,EAAE,IAAI,CAAC+N,aAAa,CAAC,CAAC,KAAK,SAAS,CAAE,EAAE;MAClF,IAAIC,WAAW,GAAG,IAAI,CAACX,cAAc,CAAC,IAAI,CAACtP,YAAY,EAAE,IAAI,CAACqP,sBAAsB,CAAC,CAAC,CAAC;MACvF,IAAI,CAACK,SAAS,GAAG5R,SAAS,CAAC+R,QAAQ,EAAE,IAAI,EAAEI,WAAW,CAACrB,IAAI,EAAEqB,WAAW,CAACR,GAAG,CAAC;MAC7E,IAAI,IAAI,CAACC,SAAS,CAAC3T,MAAM,GAAG,CAAC,EAAE;QAC3B8T,QAAQ,CAACrB,KAAK,CAAC0B,SAAS,GAAG,CAACP,QAAQ,CAACQ,gBAAgB,CAACN,QAAQ,CAAC,CAACK,SAAS,EAAE,EAAE,CAAC,GAAG,IAAI;QACrF,IAAI,CAACvP,UAAU,GAAG,IAAI;MAC1B;MACA,IAAI,CAACV,QAAQ,CAACmQ,gBAAgB,CAAC,CAAC;IACpC;EACJ,CAAC;EACD/R,OAAO,CAAC/C,SAAS,CAAC+T,sBAAsB,GAAG,YAAY;IACnD,IAAIgB,wBAAwB;IAC5B,IAAI9J,YAAY,GAAG,IAAI,CAACtC,YAAY,CAAC,CAAC;IACtC,IAAIsC,YAAY,KAAK1C,SAAS,IAAI0C,YAAY,KAAK,IAAI,EAAE;MACrD8J,wBAAwB,GAAG,CAAC;MAC5B,IAAIC,GAAG,GAAG/J,YAAY,CAACuB,WAAW,CAAC,IAAI,CAACxI,WAAW,CAAC;MACpD,IAAIgR,GAAG,IAAID,wBAAwB,EAAE;QACjCA,wBAAwB,GAAGC,GAAG;MAClC;IACJ;IACA,OAAOD,wBAAwB,GAAGA,wBAAwB,GAAG,CAAC;EAClE,CAAC;EACDhS,OAAO,CAAC/C,SAAS,CAACuT,eAAe,GAAG,UAAUrQ,OAAO,EAAEmQ,WAAW,EAAEC,IAAI,EAAE;IACtE,IAAInQ,KAAK,GAAG,IAAI;IAChB,IAAI,CAACwB,QAAQ,GAAG,IAAIpC,KAAK,CAACW,OAAO,EAAE;MAC/BwE,KAAK,EAAE,IAAI,CAACuN,QAAQ,CAAC,CAAC;MAAEC,UAAU,EAAE,UAAU;MAC9CC,QAAQ,EAAE,IAAI,CAACzQ,YAAY;MAAE0P,SAAS,EAAE;QAAEgB,CAAC,EAAE,MAAM;QAAEC,CAAC,EAAE;MAAO,CAAC;MAAEC,OAAO,EAAEjC,WAAW;MACtFkC,SAAS,EAAE,IAAI,CAACA,SAAS;MAAEC,OAAO,EAAElC,IAAI;MAAEmC,QAAQ,EAAE;QAAEL,CAAC,EAAE,MAAM;QAAEC,CAAC,EAAE;MAAS,CAAC;MAAEK,cAAc,EAAE,MAAM;MACtG5B,MAAM,EAAE,IAAI,CAACA,MAAM;MACnB6B,KAAK,EAAE,SAAAA,CAAA,EAAY;QACfxS,KAAK,CAACoP,YAAY,CAAC,CAAC;MACxB,CAAC;MACDqD,IAAI,EAAE,SAAAA,CAAA,EAAY;QACd1U,YAAY,CAACmF,GAAG,CAACR,QAAQ,EAAE,WAAW,EAAE1C,KAAK,CAAC2O,eAAe,EAAE3O,KAAK,CAAC;QACrEA,KAAK,CAACiC,WAAW,GAAG,IAAI;QACxBjC,KAAK,CAACoL,YAAY,CAAC,CAAC;MACxB;IACJ,CAAC,CAAC;EACN,CAAC;EACDxL,OAAO,CAAC/C,SAAS,CAACiV,QAAQ,GAAG,YAAY;IACrC,IAAIvN,KAAK,GAAGtG,UAAU,CAAC,IAAI,CAACkT,UAAU,CAAC;IACvC,IAAI5M,KAAK,CAACiE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;MACzB,IAAIkK,UAAU,GAAG,IAAI,CAACnR,YAAY,CAACgP,WAAW,GAAGoC,UAAU,CAACpO,KAAK,CAAC,GAAG,GAAG;MACxEA,KAAK,GAAGmO,UAAU,CAAC9J,QAAQ,CAAC,CAAC,GAAG,IAAI;IACxC;IACA,OAAOrE,KAAK;EAChB,CAAC;EACD3E,OAAO,CAAC/C,SAAS,CAACuS,YAAY,GAAG,YAAY;IACzC,IAAI,CAACnN,WAAW,GAAG,KAAK;IACxB,IAAI,CAACT,QAAQ,CAACoR,OAAO,CAAC,CAAC;IACvB,IAAIxU,iBAAiB,CAAC,IAAI,CAACnB,MAAM,CAAC,EAAE;MAChCoB,MAAM,CAAC,IAAI,CAACmD,QAAQ,CAACzB,OAAO,CAAC;IACjC,CAAC,MACI;MACD,IAAI,CAACyB,QAAQ,CAACzB,OAAO,CAAC8S,SAAS,GAAG,EAAE;MACpC,IAAI,CAACrR,QAAQ,CAACzB,OAAO,CAACwO,eAAe,CAAC,OAAO,CAAC;MAC9C,IAAI,CAAC/M,QAAQ,CAACzB,OAAO,CAACwO,eAAe,CAAC,eAAe,CAAC;IAC1D;IACA,IAAI,IAAI,CAACpJ,IAAI,CAACjB,SAAS,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;MAC1C,IAAI,CAACgB,IAAI,GAAG,IAAI;IACpB;EACJ,CAAC;EACDvF,OAAO,CAAC/C,SAAS,CAAC8R,eAAe,GAAG,UAAUjK,CAAC,EAAE;IAC7C,IAAIzH,MAAM,GAAGyH,CAAC,CAACzH,MAAM;IACrB,IAAI,EAAE,CAACmB,iBAAiB,CAAC,IAAI,CAACoD,QAAQ,CAAC,IAAI9C,OAAO,CAACzB,MAAM,EAAE,GAAG,GAAG,IAAI,CAACuE,QAAQ,CAACzB,OAAO,CAAC2L,EAAE,CAAC,CAAC,EAAE;MACzF,IAAI,CAACzF,SAAS,CAACvB,CAAC,CAAC;IACrB;EACJ,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAACgU,cAAc,GAAG,UAAU9Q,OAAO,EAAEuS,QAAQ,EAAE;IAC5D,IAAIQ,UAAU,GAAG,CAAC,WAAW,EAAE,WAAW,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,gBAAgB,EAAE,kBAAkB,EAAE,mBAAmB,EAAE,iBAAiB,EAAE,YAAY,EAAE,cAAc,EAAE,eAAe,EAAE,aAAa,EAAE,WAAW,EAAE,aAAa,EAAE,YAAY,EAAE,aAAa,EAAE,UAAU,EAAE,gBAAgB,EAAE,YAAY,EAAE,YAAY,EAAE,WAAW,EAAE,eAAe,EAAE,YAAY,EAAE,gBAAgB,EAAE,eAAe,EAAE,aAAa,CAAC;IACrb,IAAIC,GAAG;IACP,IAAIC,IAAI;IACR,IAAItL,KAAK;IACT,IAAIuL,WAAW;IACf,IAAIzB,WAAW;IACf,IAAI0B,QAAQ;IACZ,IAAIC,IAAI;IACR,IAAI,CAAC,IAAI,CAACvQ,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC5CwR,GAAG,GAAG,IAAI,CAACvO,aAAa,CAAC,KAAK,EAAE;QAAE+K,SAAS,EAAE;MAAoB,CAAC,CAAC;MACnE7M,QAAQ,CAACiH,IAAI,CAACkG,WAAW,CAACkD,GAAG,CAAC;MAC9BG,QAAQ,GAAGxB,gBAAgB,CAAC3R,OAAO,CAAC;MACpCgT,GAAG,CAAChD,KAAK,CAACuC,QAAQ,GAAG,UAAU;MAC/BS,GAAG,CAAChD,KAAK,CAACC,UAAU,GAAG,QAAQ;MAC/B;MACA8C,UAAU,CAACM,OAAO,CAAC,UAAU3S,IAAI,EAAE;QAC/B;QACAsS,GAAG,CAAChD,KAAK,CAACtP,IAAI,CAAC,GAAGyS,QAAQ,CAACzS,IAAI,CAAC;MACpC,CAAC,CAAC;MACFsS,GAAG,CAAClL,WAAW,GAAG9H,OAAO,CAAC2G,KAAK,CAAC0C,SAAS,CAAC,CAAC,EAAEkJ,QAAQ,CAAC;MACtD,IAAI,IAAI,CAAC/Q,YAAY,CAAC6C,QAAQ,KAAK,OAAO,EAAE;QACxC2O,GAAG,CAAClL,WAAW,GAAGkL,GAAG,CAAClL,WAAW,CAACzG,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC;MAC9D;MACA4R,IAAI,GAAG,IAAI,CAACxO,aAAa,CAAC,MAAM,CAAC;MACjCwO,IAAI,CAACnL,WAAW,GAAG9H,OAAO,CAAC2G,KAAK,CAAC0C,SAAS,CAACkJ,QAAQ,CAAC,IAAI,GAAG;MAC3DS,GAAG,CAAClD,WAAW,CAACmD,IAAI,CAAC;MACrBG,IAAI,GAAGpT,OAAO,CAACsT,qBAAqB,CAAC,CAAC;IAC1C,CAAC,MACI;MACD,IAAIC,oBAAoB,GAAG,IAAI,CAAC1C,sBAAsB,CAAC,CAAC;MACxDqC,WAAW,GAAG,IAAI,CAACvL,KAAK;MACxBA,KAAK,GAAGhF,QAAQ,CAAC6Q,WAAW,CAAC,CAAC;MAC9B,IAAI,IAAI,CAAC/N,YAAY,CAAC,CAAC,IAAI,IAAI,CAACA,YAAY,CAAC,CAAC,CAAC6D,WAAW,CAAC,IAAI,CAACxI,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE;QACjF6G,KAAK,CAAC8L,QAAQ,CAACP,WAAW,CAACrL,cAAc,EAAE0L,oBAAoB,CAAC;QAChE5L,KAAK,CAAC+L,MAAM,CAACR,WAAW,CAACrL,cAAc,EAAE0L,oBAAoB,CAAC;MAClE,CAAC,MACI;QACD5L,KAAK,CAAC8L,QAAQ,CAACP,WAAW,CAACrL,cAAc,EAAEqL,WAAW,CAAC1J,WAAW,CAAC;QACnE7B,KAAK,CAAC+L,MAAM,CAACR,WAAW,CAACrL,cAAc,EAAEqL,WAAW,CAACzJ,SAAS,CAAC;MACnE;MACA,IAAI,CAAClC,OAAO,GAAG,KAAK;MACpBI,KAAK,CAACgM,QAAQ,CAAC,KAAK,CAAC;MACrBP,IAAI,GAAGzL,KAAK,CAAC2L,qBAAqB,CAAC,CAAC,CAACrC,GAAG,KAAK,CAAC,GAAGtJ,KAAK,CAACE,cAAc,CAAC+L,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,GACrFjM,KAAK,CAAC2L,qBAAqB,CAAC,CAAC;IACrC;IACA,IAAIO,OAAO,GAAGT,IAAI,CAACnC,GAAG;IACtB,IAAI6C,QAAQ,GAAGV,IAAI,CAAChD,IAAI;IACxB,IAAI2D,OAAO,GAAGpR,QAAQ,CAAC4D,gBAAgB,CAAC,QAAQ,CAAC;IACjD,IAAIwN,OAAO,CAACxW,MAAM,GAAG,CAAC,EAAE;MACpB,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmW,OAAO,CAACxW,MAAM,EAAEK,CAAC,EAAE,EAAE;QACrC;QACA,IAAIoW,MAAM,GAAGD,OAAO,CAACnW,CAAC,CAAC;QACvB,IAAIoW,MAAM,CAACC,eAAe,IAAID,MAAM,CAACC,eAAe,CAAC7P,QAAQ,CAACpE,OAAO,CAAC,EAAE;UACpE,IAAIkU,UAAU,GAAGF,MAAM,CAACV,qBAAqB,CAAC,CAAC;UAC/CO,OAAO,IAAIK,UAAU,CAACjD,GAAG;UACzB6C,QAAQ,IAAII,UAAU,CAAC9D,IAAI;QAC/B;MACJ;IACJ;IACA,IAAI+D,GAAG,GAAGxR,QAAQ,CAACyR,eAAe;IAClC,IAAIC,UAAU,GAAG,CAACC,MAAM,CAACC,WAAW,IAAIJ,GAAG,CAACK,UAAU,KAAKL,GAAG,CAACM,UAAU,IAAI,CAAC,CAAC;IAC/E,IAAIC,SAAS,GAAG,CAACJ,MAAM,CAACK,WAAW,IAAIR,GAAG,CAACS,SAAS,KAAKT,GAAG,CAACU,SAAS,IAAI,CAAC,CAAC;IAC5E,IAAIrQ,KAAK,GAAG,CAAC;IACb,IAAI,CAACnG,iBAAiB,CAACsJ,KAAK,CAAC,IAAIA,KAAK,CAAC2L,qBAAqB,CAAC,CAAC,CAACrC,GAAG,KAAK,CAAC,EAAE;MACtE,KAAK,IAAIrT,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC+J,KAAK,CAACE,cAAc,CAACiN,UAAU,CAACvX,MAAM,EAAEK,CAAC,EAAE,EAAE;QAClE,IAAI,IAAI,CAAC+J,KAAK,CAACE,cAAc,CAACiN,UAAU,CAAClX,CAAC,CAAC,CAACuL,QAAQ,KAAK4L,IAAI,CAACC,SAAS,IAAI,IAAI,CAACrN,KAAK,CAACE,cAAc,CAACiN,UAAU,CAAClX,CAAC,CAAC,CAACkK,WAAW,CAACxG,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;UAC1IkD,KAAK,IAAI,IAAI,CAACmD,KAAK,CAACE,cAAc,CAACiN,UAAU,CAAClX,CAAC,CAAC,CAACgW,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAACpP,KAAK;QAC9E,CAAC,MACI,IAAI,IAAI,CAACmD,KAAK,CAACE,cAAc,CAACiN,UAAU,CAAClX,CAAC,CAAC,CAACkK,WAAW,KAAK,EAAE,EAAE;UACjE,IAAImN,MAAM,GAAGtS,QAAQ,CAAC8B,aAAa,CAAC,MAAM,CAAC;UAC3CwQ,MAAM,CAACnC,SAAS,GAAG,IAAI,CAACnL,KAAK,CAACE,cAAc,CAACiN,UAAU,CAAClX,CAAC,CAAC,CAACsX,SAAS;UACpEvS,QAAQ,CAACiH,IAAI,CAACkG,WAAW,CAACmF,MAAM,CAAC;UACjC,IAAIE,aAAa,GAAGF,MAAM,CAACzE,WAAW;UACtC7N,QAAQ,CAACiH,IAAI,CAACwL,WAAW,CAACH,MAAM,CAAC;UACjCzQ,KAAK,IAAI2Q,aAAa;QAC1B;MACJ;IACJ;IACA,IAAI,CAAC,IAAI,CAACtS,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC5CiQ,WAAW,GAAG;QACVR,GAAG,EAAE4C,OAAO,GAAGa,SAAS,GAAGzB,IAAI,CAACoC,SAAS,GAAGlE,QAAQ,CAACgC,QAAQ,CAACmC,cAAc,EAAE,EAAE,CAAC,GAC7EnE,QAAQ,CAACgC,QAAQ,CAACoC,QAAQ,EAAE,EAAE,CAAC,GAAG,CAAC,GAAGvV,OAAO,CAAC4U,SAAS,IACtD,IAAI,CAACzS,UAAU,GAAG,EAAE,GAAG,CAAC,CAAC;QAC9BiO,IAAI,EAAE0D,QAAQ,GAAGO,UAAU,GAAGpB,IAAI,CAACuC,UAAU,GAAGrE,QAAQ,CAACgC,QAAQ,CAACsC,eAAe,EAAE,EAAE;MACzF,CAAC;MACD9S,QAAQ,CAACiH,IAAI,CAACwL,WAAW,CAACpC,GAAG,CAAC;IAClC,CAAC,MACI;MACD,IAAI,IAAI,CAAC9B,SAAS,IAAI,IAAI,CAACA,SAAS,CAAC3T,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC2T,SAAS,CAACzI,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAACyI,SAAS,CAACzI,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;QAChIgJ,WAAW,GAAG;UACVR,GAAG,EAAE4C,OAAO,GAAGa,SAAS,GAAGvD,QAAQ,CAACQ,gBAAgB,CAAC,IAAI,CAACnQ,YAAY,CAAC,CAAC+T,QAAQ,EAAE,EAAE,CAAC;UACrFnF,IAAI,EAAE0D,QAAQ,GAAGO,UAAU,GAAG7P;QAClC,CAAC;MACL,CAAC,MACI;QACDiN,WAAW,GAAG;UACVR,GAAG,EAAE4C,OAAO,GAAGa,SAAS,GAAGvD,QAAQ,CAACQ,gBAAgB,CAAC,IAAI,CAACnQ,YAAY,CAAC,CAAC+T,QAAQ,EAAE,EAAE,CAAC,IAAI,IAAI,CAACpT,UAAU,GAAG,EAAE,GAAG,CAAC,CAAC;UAClHiO,IAAI,EAAE0D,QAAQ,GAAGO,UAAU,GAAG7P;QAClC,CAAC;MACL;IACJ;IACA,OAAOiN,WAAW;EACtB,CAAC;EACD5R,OAAO,CAAC/C,SAAS,CAACiN,SAAS,GAAG,YAAY;IACtC,IAAI,CAACgB,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACrF,UAAU,CAAC,CAAC;IACjB,IAAI,IAAI,CAACoE,UAAU,YAAY3K,WAAW,EAAE;MACxC,IAAI,CAAC6C,gBAAgB,GAAG,IAAI;IAChC,CAAC,MACI;MACD,IAAI,CAAC0T,YAAY,CAAC,CAAC;IACvB;EACJ,CAAC;EACD7V,OAAO,CAAC/C,SAAS,CAAC4Y,YAAY,GAAG,YAAY;IACzC,IAAI3P,EAAE,GAAG,IAAI,CAACX,IAAI,CAACxC,aAAa,CAAC,GAAG,GAAG1D,mBAAmB,CAACuH,KAAK,CAAC;IACjE,IAAI,CAACpI,iBAAiB,CAAC0H,EAAE,CAAC,EAAE;MACxB,IAAI,CAACE,YAAY,CAACF,EAAE,EAAE,IAAI,CAAC;IAC/B;EACJ,CAAC;EACDlG,OAAO,CAAC/C,SAAS,CAAC4I,UAAU,GAAG,YAAY;IACvC5F,MAAM,CAAChD,SAAS,CAAC0F,MAAM,CAACtC,IAAI,CAAC,IAAI,CAAC;IAClC,IAAI,CAAC8K,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACC,cAAc,CAAC,CAAC;EACzB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIpL,OAAO,CAAC/C,SAAS,CAACmO,cAAc,GAAG,YAAY;IAC3CjN,YAAY,CAACmF,GAAG,CAAC,IAAI,CAACiC,IAAI,EAAE,IAAI,CAAC9C,YAAY,EAAE,IAAI,CAACqT,YAAY,EAAE,IAAI,CAAC;IACvE3X,YAAY,CAACmF,GAAG,CAAC,IAAI,CAACiC,IAAI,EAAE,WAAW,EAAE,IAAI,CAACwQ,WAAW,EAAE,IAAI,CAAC;IAChE5X,YAAY,CAACmF,GAAG,CAAC,IAAI,CAACiC,IAAI,EAAE,UAAU,EAAE,IAAI,CAACyQ,YAAY,EAAE,IAAI,CAAC;EACpE,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIhW,OAAO,CAAC/C,SAAS,CAACkO,gBAAgB,GAAG,YAAY;IAC7ChN,YAAY,CAACuF,MAAM,CAAC,IAAI,CAAC6B,IAAI,EAAE,IAAI,CAAC9C,YAAY,EAAE,IAAI,CAACqT,YAAY,CAAC;IACpE3X,YAAY,CAACuF,MAAM,CAAC,IAAI,CAAC6B,IAAI,EAAE,WAAW,EAAE,IAAI,CAACwQ,WAAW,CAAC;IAC7D5X,YAAY,CAACuF,MAAM,CAAC,IAAI,CAAC6B,IAAI,EAAE,UAAU,EAAE,IAAI,CAACyQ,YAAY,CAAC;EACjE,CAAC;EACDhW,OAAO,CAAC/C,SAAS,CAAC6Y,YAAY,GAAG,UAAUhR,CAAC,EAAE;IAC1C,IAAIzH,MAAM,GAAGyH,CAAC,CAACzH,MAAM;IACrB,IAAI6I,EAAE,GAAGpH,OAAO,CAACzB,MAAM,EAAE,GAAG,GAAGgC,mBAAmB,CAAC6G,EAAE,CAAC;IACtD,IAAI,CAAC,IAAI,CAAC+P,SAAS,CAAC/P,EAAE,CAAC,IAAI,IAAI,CAACqB,iBAAiB,CAACrB,EAAE,CAAC,EAAE;MACnD;IACJ;IACA,IAAI,CAAClE,UAAU,GAAG,IAAI;IACtB,IAAI,CAACoE,YAAY,CAACF,EAAE,EAAEpB,CAAC,CAAC;IACxB,IAAIgK,KAAK,GAAG,GAAG;IACf,IAAI,CAACD,UAAU,CAACC,KAAK,EAAEhK,CAAC,CAAC;IACzB,IAAI,CAACnD,YAAY,CAACiF,KAAK,CAAC,CAAC;IACzB,IAAI,CAAC,IAAI,CAACpE,KAAK,EAAE;MACbsC,CAAC,CAACiB,cAAc,CAAC,CAAC;IACtB;EACJ,CAAC;EACD/F,OAAO,CAAC/C,SAAS,CAACsJ,kBAAkB,GAAG,UAAUL,EAAE,EAAEpB,CAAC,EAAEoR,aAAa,EAAEC,WAAW,EAAE;IAChF,IAAI/V,KAAK,GAAG,IAAI;IAChB,IAAI,CAACwO,eAAe,CAAC,CAAC;IACtB1I,EAAE,CAAC5B,SAAS,CAAChB,GAAG,CAACjE,mBAAmB,CAAC8G,QAAQ,CAAC;IAC9C,IAAI,CAACiQ,WAAW,CAAC,CAAC;IAClB,IAAItP,KAAK,GAAG,IAAI,CAACC,iBAAiB,CAACb,EAAE,CAACc,YAAY,CAAC,YAAY,CAAC,CAAC;IACjE,IAAIqP,YAAY,GAAG,IAAI,CAACnK,cAAc,CAACpF,KAAK,CAAC;IAC7C,IAAI,CAACoP,aAAa,IAAI,CAAC1X,iBAAiB,CAACsG,CAAC,CAAC,IAAI,EAAEA,CAAC,CAACG,MAAM,KAAK,MAAM,IAAIH,CAAC,CAACG,MAAM,KAAK,IAAI,CAAC,EAAE;MACxF,IAAIqR,KAAK,GAAG,IAAI,CAACC,aAAa,CAACF,YAAY,CAAC;MAC5C,IAAI,CAACrU,UAAU,GAAG,IAAI;MACtB,IAAI0I,SAAS,GAAG;QACZ5F,CAAC,EAAEA,CAAC;QACJ6H,IAAI,EAAEzG,EAAE;QACRsQ,QAAQ,EAAEF,KAAK;QACfG,YAAY,EAAE3R,CAAC,GAAG,IAAI,GAAG,KAAK;QAC9BiG,MAAM,EAAE;MACZ,CAAC;MACD,IAAI,CAACE,OAAO,CAAC,QAAQ,EAAEP,SAAS,EAAE,UAAUA,SAAS,EAAE;QACnD,IAAIA,SAAS,CAACK,MAAM,EAAE;UAClB7E,EAAE,CAAC5B,SAAS,CAACZ,MAAM,CAACrE,mBAAmB,CAAC8G,QAAQ,CAAC;UACjD/F,KAAK,CAAC4B,UAAU,GAAG,KAAK;UACxB5B,KAAK,CAACsW,cAAc,GAAG,IAAI;QAC/B,CAAC,MACI;UACDtW,KAAK,CAAC6L,mBAAmB,CAAC/F,EAAE,EAAEmQ,YAAY,EAAEvP,KAAK,CAAC;UAClD,IAAIqP,WAAW,EAAE;YACb/V,KAAK,CAACuW,gBAAgB,CAACzQ,EAAE,EAAEpB,CAAC,CAAC;UACjC;QACJ;MACJ,CAAC,CAAC;IACN,CAAC,MACI;MACD,IAAI,CAACmH,mBAAmB,CAAC/F,EAAE,EAAEmQ,YAAY,EAAEvP,KAAK,CAAC;MACjD,IAAIqP,WAAW,EAAE;QACb,IAAI,CAACQ,gBAAgB,CAACzQ,EAAE,EAAEpB,CAAC,CAAC;MAChC;IACJ;EACJ,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAACmJ,YAAY,GAAG,UAAUF,EAAE,EAAEpB,CAAC,EAAE;IAC9C,IAAI,IAAI,CAACmR,SAAS,CAAC/P,EAAE,CAAC,KAAK,CAACA,EAAE,CAAC5B,SAAS,CAACC,QAAQ,CAAClF,mBAAmB,CAAC8G,QAAQ,CAAC,IAAK,IAAI,CAAC9D,WAAW,IAAI,IAAI,CAACL,UAAU,IAChHkE,EAAE,CAAC5B,SAAS,CAACC,QAAQ,CAAClF,mBAAmB,CAAC8G,QAAQ,CAAE,CAAC,EAAE;MAC1D,IAAI,CAACI,kBAAkB,CAACL,EAAE,EAAEpB,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC;IAC/C,CAAC,MACI;MACD,IAAI,CAAC6R,gBAAgB,CAACzQ,EAAE,EAAEpB,CAAC,CAAC;IAChC;EACJ,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAAC0Z,gBAAgB,GAAG,UAAUzQ,EAAE,EAAEpB,CAAC,EAAE;IAClD,IAAI,IAAI,CAACS,IAAI,EAAE;MACX,IAAI,CAAC6Q,WAAW,CAAC,CAAC;IACtB;IACA,IAAI,CAACQ,kBAAkB,GAAI,CAACpY,iBAAiB,CAAC,IAAI,CAAC8H,UAAU,CAAC,GAAI,IAAI,CAACA,UAAU,GAAG,IAAI;IACxF,IAAI,CAACA,UAAU,GAAGJ,EAAE;IACpB,IAAI,IAAI,CAAC7D,WAAW,IAAI,CAAC7D,iBAAiB,CAAC,IAAI,CAAC8H,UAAU,CAAC,EAAE;MACzD,IAAI,CAACuQ,iBAAiB,CAAC/R,CAAC,CAAC;IAC7B;IACA,IAAIA,CAAC,KAAKA,CAAC,CAACE,OAAO,KAAK,EAAE,IAAIF,CAAC,CAACE,OAAO,KAAK,EAAE,CAAC,EAAE;MAC7C;IACJ;IACA,IAAIxG,iBAAiB,CAACsG,CAAC,CAAC,IAAI,IAAI,CAACgS,QAAQ,CAAChS,CAAC,CAAC,EAAE;MAC1C;IACJ;EACJ,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAAC4Z,iBAAiB,GAAG,UAAU/R,CAAC,EAAE;IAC/C,IAAI,CAACtG,iBAAiB,CAACsG,CAAC,CAAC,EAAE;MACvB,QAAQA,CAAC,CAACG,MAAM;QACZ,KAAK,UAAU;QACf,KAAK,MAAM;QACX,KAAK,KAAK;UACN,IAAI,CAAC8R,YAAY,CAAC,CAAC;UACnB;QACJ;UACI,IAAI,CAAChC,SAAS,CAAC,CAAC;UAChB;MACR;IACJ,CAAC,MACI;MACD,IAAI,CAACgC,YAAY,CAAC,IAAI,CAAC;IAC3B;EACJ,CAAC;EACD/W,OAAO,CAAC/C,SAAS,CAAC8Z,YAAY,GAAG,UAAUC,SAAS,EAAE;IAClD,IAAI,CAACxY,iBAAiB,CAAC,IAAI,CAAC8H,UAAU,CAAC,EAAE;MACrC,IAAI2Q,aAAa,GAAG,IAAI,CAAC1R,IAAI,CAACsL,YAAY;MAC1C,IAAIqG,UAAU,GAAG,IAAI,CAAC5Q,UAAU,CAACkP,SAAS,GAAG,IAAI,CAAClP,UAAU,CAACuK,YAAY,GAAG,IAAI,CAACtL,IAAI,CAACwP,SAAS;MAC/F,IAAIoC,UAAU,GAAG,IAAI,CAAC5R,IAAI,CAACwP,SAAS,GAAGmC,UAAU,GAAGD,aAAa;MACjEE,UAAU,GAAGH,SAAS,GAAGG,UAAU,GAAG7F,QAAQ,CAACQ,gBAAgB,CAAC,IAAI,CAACvM,IAAI,CAAC,CAAC6R,UAAU,EAAE,EAAE,CAAC,GAAG,CAAC,GAAGD,UAAU;MAC3G,IAAIE,QAAQ,GAAG,IAAI,CAAC/Q,UAAU,CAACkP,SAAS,GAAG,IAAI,CAAClP,UAAU,CAACuK,YAAY,GAAG,IAAI,CAACtL,IAAI,CAACwP,SAAS;MAC7F,IAAI,IAAI,CAAC9N,WAAW,KAAK,CAAC,EAAE;QACxB,IAAI,CAAC1B,IAAI,CAACwP,SAAS,GAAG,CAAC;MAC3B,CAAC,MACI,IAAImC,UAAU,GAAGD,aAAa,IAAI,EAAEI,QAAQ,GAAG,CAAC,IAAI,IAAI,CAAC9R,IAAI,CAACsL,YAAY,GAAGwG,QAAQ,CAAC,EAAE;QACzF,IAAI,CAAC9R,IAAI,CAACwP,SAAS,GAAGoC,UAAU;MACpC;IACJ;EACJ,CAAC;EACDnX,OAAO,CAAC/C,SAAS,CAAC8X,SAAS,GAAG,YAAY;IACtC,IAAI,CAACvW,iBAAiB,CAAC,IAAI,CAAC8H,UAAU,CAAC,EAAE;MACrC,IAAI6Q,UAAU,GAAG,CAAC3Y,iBAAiB,CAAC,IAAI,CAACgI,MAAM,CAAC8Q,OAAO,CAAC,IAAI,CAAC9Y,iBAAiB,CAAC,IAAI,CAAC+Y,kBAAkB,CAAC,GACnG,IAAI,CAACjR,UAAU,CAACkP,SAAS,IAAI,IAAI,CAACjQ,IAAI,CAACwP,SAAS,GAAG,IAAI,CAACwC,kBAAkB,CAAC1G,YAAY,CAAC,GACxF,IAAI,CAACvK,UAAU,CAACkP,SAAS,GAAG,IAAI,CAACjQ,IAAI,CAACwP,SAAS;MACnDoC,UAAU,GAAG,IAAI,CAAC3Q,MAAM,CAAC8Q,OAAO,IAAIH,UAAU;MAC9C,IAAIE,QAAQ,GAAI,IAAI,CAAC/Q,UAAU,CAACkP,SAAS,GAAG,IAAI,CAAClP,UAAU,CAACuK,YAAY,GAAG,IAAI,CAACtL,IAAI,CAACwP,SAAU;MAC/F,IAAI,IAAI,CAAC9N,WAAW,KAAK,CAAC,EAAE;QACxB,IAAI,CAAC1B,IAAI,CAACwP,SAAS,GAAG,CAAC;MAC3B,CAAC,MACI,IAAIoC,UAAU,GAAG,CAAC,EAAE;QACrB,IAAI,CAAC5R,IAAI,CAACwP,SAAS,GAAG,IAAI,CAACxP,IAAI,CAACwP,SAAS,GAAGoC,UAAU;MAC1D,CAAC,MACI,IAAI,EAAEE,QAAQ,GAAG,CAAC,IAAI,IAAI,CAAC9R,IAAI,CAACsL,YAAY,GAAGwG,QAAQ,CAAC,EAAE;QAC3D,IAAI,CAAC9R,IAAI,CAACwP,SAAS,GAAG,IAAI,CAACzO,UAAU,CAACkP,SAAS;MACnD;IACJ;EACJ,CAAC;EACDxV,OAAO,CAAC/C,SAAS,CAACgP,mBAAmB,GAAG,UAAU/F,EAAE,EAAEmQ,YAAY,EAAEvP,KAAK,EAAE0Q,QAAQ,EAAE;IACjF,IAAI,CAACC,gBAAgB,GAAI,CAACjZ,iBAAiB,CAAC,IAAI,CAACgY,QAAQ,CAAC,GAAI,IAAI,CAACA,QAAQ,GAAG,IAAI;IAClF,IAAI,CAAC7J,IAAI,GAAGzG,EAAE;IACd,IAAI,CAACsQ,QAAQ,GAAGH,YAAY;IAC5B,IAAIqB,WAAW,GAAG,IAAI,CAACnS,IAAI,CAACxC,aAAa,CAAC,GAAG,GAAG1D,mBAAmB,CAACuH,KAAK,CAAC;IAC1E,IAAI8Q,WAAW,EAAE;MACb7Y,WAAW,CAAC,CAAC6Y,WAAW,CAAC,EAAErY,mBAAmB,CAACuH,KAAK,CAAC;IACzD;IACA,IAAI4Q,QAAQ,EAAE;MACV5Y,QAAQ,CAAC,CAACsH,EAAE,CAAC,EAAE7G,mBAAmB,CAAC8G,QAAQ,CAAC;IAChD;IACAD,EAAE,CAAChD,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC;IACxC,IAAI,CAAC+D,WAAW,GAAG,IAAI,CAACC,eAAe,CAACJ,KAAK,CAAC;EAClD,CAAC;EACD9G,OAAO,CAAC/C,SAAS,CAACsZ,aAAa,GAAG,UAAUzP,KAAK,EAAE;IAC/C,IAAIwP,KAAK;IACT,IAAI,OAAOxP,KAAK,KAAK,QAAQ,IACzB,OAAOA,KAAK,KAAK,SAAS,IAC1B,OAAOA,KAAK,KAAK,QAAQ,EAAE;MAC3BwP,KAAK,GAAG7Z,MAAM,CAACkb,gBAAgB,CAAC,CAAC,CAAC,EAAE;QAChC7Q,KAAK,EAAE;UACHA,KAAK,EAAEA,KAAK;UACZ8Q,UAAU,EAAE;QAChB,CAAC;QACDhN,IAAI,EAAE;UACF9D,KAAK,EAAEA,KAAK;UACZ8Q,UAAU,EAAE;QAChB;MACJ,CAAC,CAAC;IACN,CAAC,MACI;MACDtB,KAAK,GAAGxP,KAAK;IACjB;IACA,OAAOwP,KAAK;EAChB,CAAC;EACDtW,OAAO,CAAC/C,SAAS,CAAC6Z,QAAQ,GAAG,UAAUhS,CAAC,EAAE;IACtC;IACA,IAAI,CAAC,IAAI,CAAC+S,OAAO,EAAE;MACf,IAAI,CAACrZ,iBAAiB,CAAC,IAAI,CAACsZ,eAAe,CAAC,EAAE;QAC1C,IAAI,CAACC,kBAAkB,CAAC,CAAC;MAC7B;MACA,IAAI,CAACC,kBAAkB,CAAClT,CAAC,CAAC;MAC1B,OAAO,IAAI;IACf,CAAC,MACI;MACD,IAAI,CAACtG,iBAAiB,CAAC,IAAI,CAACsZ,eAAe,CAAC,EAAE;QAC1C,IAAI,CAACC,kBAAkB,CAACjT,CAAC,CAAC;MAC9B,CAAC,MACI;QACD,IAAI,CAACkT,kBAAkB,CAAClT,CAAC,CAAC;MAC9B;MACA,OAAO,IAAI;IACf;EACJ,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAAC+a,kBAAkB,GAAG,UAAUlT,CAAC,EAAE;IAChD,IAAImT,QAAQ,GAAG,IAAI,CAACC,WAAW,CAAC,CAAC;IACjC,IAAIC,UAAU,GAAG,OAAO,IAAI,CAACpX,UAAU,KAAK,QAAQ,GAAG,IAAI,CAACA,UAAU,GAAG,EAAE;IAC3E,IAAI+F,KAAK;IACT,IAAIsR,MAAM;IACV,IAAItQ,KAAK;IACT,IAAIuL,WAAW;IACf,IAAIgF,SAAS,GAAG,IAAI,CAAC1W,YAAY,CAAC2I,aAAa,CAACC,YAAY,CAAC,CAAC;IAC9D,IAAI2D,QAAQ,GAAG,IAAI,CAAC8C,sBAAsB,CAAC,CAAC;IAC5C,IAAI,IAAI,CAAC0F,cAAc,EAAE;MACrB,IAAI,CAACA,cAAc,GAAG,KAAK;MAC3B;IACJ;IACA,IAAIuB,QAAQ,CAACrN,IAAI,KAAK,IAAI,EAAE;MACxB9D,KAAK,GAAG,IAAI,CAACwR,UAAU,CAACL,QAAQ,CAACrN,IAAI,CAAC;IAC1C;IACA,IAAI,CAAC,IAAI,CAAC5H,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC5C,IAAI4W,OAAO,GAAG,IAAI,CAAC5W,YAAY;MAC/B,IAAI6W,qBAAqB,GAAG,IAAI,CAAC5S,YAAY,CAAC,CAAC,CAAC4D,SAAS,CAAC0E,QAAQ,GAAG,IAAI,CAACjN,WAAW,CAACvD,MAAM,EAAE,IAAI,CAACkI,YAAY,CAAC,CAAC,CAAClI,MAAM,CAAC;MACzHoJ,KAAK,IAAIqR,UAAU;MACnBC,MAAM,GAAGlK,QAAQ,GAAG,IAAI,CAACjN,WAAW,CAACvD,MAAM;MAC3C0a,MAAM,IAAII,qBAAqB,CAAC9a,MAAM;MACtC6a,OAAO,CAACzR,KAAK,GAAGyR,OAAO,CAACzR,KAAK,CAAC0C,SAAS,CAAC,CAAC,EAAE0E,QAAQ,CAAC,GAAGpH,KAAK,GAAGyR,OAAO,CAACzR,KAAK,CAAC0C,SAAS,CAAC4O,MAAM,EAAEG,OAAO,CAACzR,KAAK,CAACpJ,MAAM,CAAC;MACpH6a,OAAO,CAACpK,cAAc,GAAGD,QAAQ,GAAGpH,KAAK,CAACpJ,MAAM;MAChD6a,OAAO,CAACE,YAAY,GAAGvK,QAAQ,GAAGpH,KAAK,CAACpJ,MAAM;MAC9C,IAAI,IAAI,CAAC2E,WAAW,EAAE;QAClB,IAAI,CAACgE,SAAS,CAAC,CAAC;MACpB;MACA,IAAI,CAACqS,aAAa,CAAC5T,CAAC,CAAC;IACzB,CAAC,MACI;MACDsT,MAAM,GAAG,IAAI,CAACpH,sBAAsB,CAAC,CAAC,GAAG,IAAI,CAAC/P,WAAW,CAACvD,MAAM;MAChE,IAAI,IAAI,CAACoK,KAAK,IAAK,IAAI,CAACA,KAAK,CAACE,cAAc,CAACC,WAAW,CAACxG,IAAI,CAAC,CAAC,KAAK,IAAI,CAACR,WAAY,EAAE;QACnFmX,MAAM,GAAG,IAAI,CAACtQ,KAAK,CAAC8B,SAAS;MACjC;MACAyJ,WAAW,GAAG,IAAI,CAACvL,KAAK;MACxBA,KAAK,GAAGhF,QAAQ,CAAC6Q,WAAW,CAAC,CAAC;MAC9B,IAAM,IAAI,CAAC/N,YAAY,CAAC,CAAC,IAAI,IAAI,CAACA,YAAY,CAAC,CAAC,CAAC6D,WAAW,CAAC,IAAI,CAACxI,WAAW,CAAC,KAAK,CAAC,CAAC,IAAK,IAAI,CAAC2E,YAAY,CAAC,CAAC,IACzG,IAAI,CAACA,YAAY,CAAC,CAAC,CAACnE,IAAI,CAAC,CAAC,KAAK,IAAI,CAACR,WAAW,EAAG;QAClD6G,KAAK,CAAC8L,QAAQ,CAACP,WAAW,CAACrL,cAAc,EAAEkG,QAAQ,CAAC;QACpDpG,KAAK,CAAC+L,MAAM,CAACR,WAAW,CAACrL,cAAc,EAAEoQ,MAAM,CAAC;MACpD,CAAC,MACI;QACD,IAAI/E,WAAW,CAACsF,uBAAuB,CAAC1Q,WAAW,CAACxG,IAAI,CAAC,CAAC,KAAK,EAAE,IAAI,CAACjD,iBAAiB,CAAC6U,WAAW,CAACsF,uBAAuB,CAAC1Q,WAAW,CAACxG,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAACmE,YAAY,CAAC,CAAC,IAAI,IAAI,CAACA,YAAY,CAAC,CAAC,CAAC6D,WAAW,CAAC,IAAI,CAACxI,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE;UAChO6G,KAAK,CAAC8L,QAAQ,CAACP,WAAW,CAACrL,cAAc,EAAEqL,WAAW,CAAC1J,WAAW,GAAG,CAAC,CAAC;UACvE7B,KAAK,CAAC+L,MAAM,CAACR,WAAW,CAACrL,cAAc,EAAEqL,WAAW,CAACzJ,SAAS,GAAG,CAAC,CAAC;QACvE,CAAC,MACI;UACD9B,KAAK,CAAC8L,QAAQ,CAACP,WAAW,CAACrL,cAAc,EAAEqL,WAAW,CAAC1J,WAAW,CAAC;UACnE7B,KAAK,CAAC+L,MAAM,CAACR,WAAW,CAACrL,cAAc,EAAEqL,WAAW,CAACzJ,SAAS,CAAC;QACnE;MACJ;MACA,IAAI,CAAClC,OAAO,GAAG,KAAK;MACpBI,KAAK,CAAC+B,cAAc,CAAC,CAAC;MACtB/B,KAAK,CAACE,cAAc,CAACvD,aAAa,CAACmU,SAAS,CAAC,CAAC;MAC9C,IAAIzY,OAAO,GAAG,IAAI,CAACyE,aAAa,CAAC,KAAK,CAAC;MACvCzE,OAAO,CAAC8S,SAAS,GAAGnM,KAAK;MACzB,IAAI+R,IAAI,GAAG/V,QAAQ,CAACgW,sBAAsB,CAAC,CAAC;MAC5C,IAAIC,IAAI,GAAG,KAAK,CAAC;MACjB,IAAIC,QAAQ,GAAG,KAAK,CAAC;MACrB;MACA,OAAOD,IAAI,GAAG5Y,OAAO,CAAC8Y,UAAU,EAAE;QAC9BD,QAAQ,GAAGH,IAAI,CAAC5I,WAAW,CAAC8I,IAAI,CAAC;MACrC;MACAjR,KAAK,CAACoR,UAAU,CAACL,IAAI,CAAC;MACtB,IAAIG,QAAQ,EAAE;QACVlR,KAAK,GAAGA,KAAK,CAACqR,UAAU,CAAC,CAAC;QAC1B,IAAI,IAAI,CAAC3W,KAAK,EAAE;UACZ,IAAIwW,QAAQ,CAAC1P,QAAQ,KAAK,CAAC,EAAE;YACzBxB,KAAK,CAAC8L,QAAQ,CAACoF,QAAQ,EAAEA,QAAQ,CAAC/Q,WAAW,CAACvK,MAAM,CAAC;UACzD,CAAC,MACI;YACDoK,KAAK,CAACsR,aAAa,CAACJ,QAAQ,CAAC;UACjC;QACJ,CAAC,MACI;UACDlR,KAAK,CAACsR,aAAa,CAACJ,QAAQ,CAAC;QACjC;QACAlR,KAAK,CAACgM,QAAQ,CAAC,IAAI,CAAC;QACpBuE,SAAS,CAACgB,eAAe,CAAC,CAAC;QAC3BhB,SAAS,CAACiB,QAAQ,CAACxR,KAAK,CAAC;MAC7B;MACA,IAAI,IAAI,CAACzF,WAAW,EAAE;QAClB,IAAI,CAACgE,SAAS,CAAC,CAAC;MACpB;MACA;MACA,IAAI,CAAC7H,iBAAiB,CAACsG,CAAC,CAACyU,WAAW,CAAC,IAAIzU,CAAC,CAACyU,WAAW,KAAK,OAAO,EAAE;QAChE,IAAIC,OAAO,GAAG,IAAIC,WAAW,CAAC,iBAAiB,EAAE;UAAEC,MAAM,EAAE;YAAEC,KAAK,EAAE;UAAK;QAAE,CAAC,CAAC;QAC7E,IAAI,CAAChY,YAAY,CAACiY,aAAa,CAACJ,OAAO,CAAC;MAC5C;MACA,IAAI,CAACd,aAAa,CAAC5T,CAAC,CAAC;IACzB;EACJ,CAAC;EACD9E,OAAO,CAAC/C,SAAS,CAACqb,UAAU,GAAG,UAAUxR,KAAK,EAAE;IAC5C,IAAI+S,QAAQ,GAAG,IAAI,CAAC3Y,eAAe,GAAG,IAAI,CAACD,WAAW,GAAG,EAAE;IAC3D,IAAI,CAACzC,iBAAiB,CAAC,IAAI,CAACsZ,eAAe,CAAC,IAAI,CAACtZ,iBAAiB,CAAC,IAAI,CAACsb,kBAAkB,CAAC,EAAE;MACzFhT,KAAK,GAAG,IAAI,CAACgT,kBAAkB,CAAC7G,SAAS;IAC7C;IACA,IAAI,IAAI,CAACjQ,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC3C,IAAIzC,OAAO,CAAC6a,SAAS,EAAE;QACnB,OAAO,sDAAsD,GAAGF,QAAQ,GAAG/S,KAAK,GAAG,SAAS,CAACqK,MAAM,CAAC,OAAO,IAAI,CAACpQ,UAAU,KAAK,QAAQ,GAAG,IAAI,CAACA,UAAU,GAAG,SAAS,CAAC;MAC1K,CAAC,MACI;QACD,OAAO,uDAAuD,GAAG8Y,QAAQ,GAAG/S,KAAK,GAAG,SAAS,CAACqK,MAAM,CAAC,OAAO,IAAI,CAACpQ,UAAU,KAAK,QAAQ,GAAG,IAAI,CAACA,UAAU,GAAG,SAAS,CAAC;MAC3K;IACJ,CAAC,MACI;MACD,OAAO8Y,QAAQ,GAAG/S,KAAK;IAC3B;EACJ,CAAC;EACD9G,OAAO,CAAC/C,SAAS,CAAC8a,kBAAkB,GAAG,UAAUjT,CAAC,EAAE;IAChD,IAAI1E,KAAK,GAAG,IAAI;IAChB;IACA,IAAI,IAAI,CAACyX,OAAO,EAAE;MACd,IAAI,CAACmC,aAAa,CAAC,CAAC,iBAAiB,CAAC,CAAC;MACvC,IAAI,IAAI,CAACF,kBAAkB,EAAE;QACzBrb,MAAM,CAAC,IAAI,CAACqb,kBAAkB,CAAC;QAC/B,IAAI,CAACA,kBAAkB,GAAG,IAAI;MAClC;IACJ;IACA,IAAI,CAAC,IAAI,CAACA,kBAAkB,EAAE;MAC1B,IAAI,CAACA,kBAAkB,GAAG,IAAI,CAAClV,aAAa,CAAC,KAAK,CAAC;IACvD;IACA;IACA,IAAI,CAAC,IAAI,CAACiT,OAAO,EAAE;MACf,IAAI,CAACiC,kBAAkB,CAAC7G,SAAS,GAAG,EAAE;IAC1C;IACA,IAAIgH,cAAc,GAAGhc,OAAO,CAAC,IAAI,CAAC6Z,eAAe,CAAC;IAClD;IACA,IAAIoC,eAAe,GAAGD,cAAc,CAAC,IAAI,CAACzD,QAAQ,EAAE,IAAI,EAAE,iBAAiB,EAAE,IAAI,CAAC2D,iBAAiB,EAAE,IAAI,CAACC,gBAAgB,EAAE,IAAI,EAAE,IAAI,CAACN,kBAAkB,CAAC;IAC1J,IAAII,eAAe,IAAIA,eAAe,CAACxc,MAAM,GAAG,CAAC,EAAE;MAC/CY,MAAM,CAAC4b,eAAe,EAAE,IAAI,CAACJ,kBAAkB,CAAC;IACpD;IACA;IACA,IAAI,CAAC,IAAI,CAACjC,OAAO,EAAE;MACf,IAAI,CAACwC,eAAe,CAAC,CAAC;IAC1B,CAAC,MACI;MACD,IAAI,CAACA,eAAe,CAAC,YAAY;QAC7Bja,KAAK,CAAC4X,kBAAkB,CAAClT,CAAC,CAAC;MAC/B,CAAC,CAAC;IACN;EACJ,CAAC;EACD;EACA9E,OAAO,CAAC/C,SAAS,CAACod,eAAe,GAAG,UAAUC,QAAQ,EAAE;IACpD,IAAI,CAAC7O,oBAAoB,CAAC6O,QAAQ,CAAC;EACvC,CAAC;EACDta,OAAO,CAAC/C,SAAS,CAAC4H,kBAAkB,GAAG,YAAY;IAC/C,IAAIzE,KAAK,GAAG,IAAI;IAChB;IACA,IAAI,IAAI,CAACyX,OAAO,EAAE;MACd,IAAI,CAACmC,aAAa,CAAC,CAAC,iBAAiB,CAAC,CAAC;MACvC,IAAI,IAAI,CAAC7V,sBAAsB,EAAE;QAC7B1F,MAAM,CAAC,IAAI,CAAC0F,sBAAsB,CAAC;QACnC,IAAI,CAACA,sBAAsB,GAAG,IAAI;MACtC;IACJ;IACA,IAAI,CAAC,IAAI,CAACA,sBAAsB,EAAE;MAC9B,IAAI,CAACA,sBAAsB,GAAG,IAAI,CAACS,aAAa,CAAC,KAAK,CAAC;IAC3D;IACA;IACA,IAAI,CAAC,IAAI,CAACiT,OAAO,EAAE;MACf,IAAI,CAAC1T,sBAAsB,CAAC8O,SAAS,GAAG,EAAE;IAC9C;IACA,IAAIgH,cAAc,GAAGhc,OAAO,CAAC,IAAI,CAACiG,eAAe,CAAC;IAClD;IACA,IAAIqW,eAAe,GAAGN,cAAc,CAAC,IAAI,EAAE,IAAI,EAAE,iBAAiB,EAAE,IAAI,CAACO,iBAAiB,EAAE,IAAI,CAACJ,gBAAgB,EAAE,IAAI,EAAE,IAAI,CAACjW,sBAAsB,CAAC;IACrJ,IAAIoW,eAAe,IAAIA,eAAe,CAAC7c,MAAM,GAAG,CAAC,EAAE;MAC/C,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwc,eAAe,CAAC7c,MAAM,EAAEK,CAAC,EAAE,EAAE;QAC7C,IAAI,CAACoG,sBAAsB,CAAC8L,WAAW,CAACsK,eAAe,CAACxc,CAAC,CAAC,CAAC;MAC/D;IACJ;IACA;IACA,IAAI,CAAC,IAAI,CAAC8Z,OAAO,EAAE;MACf,IAAI,CAACwC,eAAe,CAAC,CAAC;MACtB,IAAI,CAACzY,QAAQ,CAACzB,OAAO,CAAC8P,WAAW,CAAC,IAAI,CAAC9L,sBAAsB,CAAC;IAClE,CAAC,MACI;MACD,IAAI,CAACkW,eAAe,CAAC,YAAY;QAC7Bja,KAAK,CAACwB,QAAQ,CAACzB,OAAO,CAAC8P,WAAW,CAAC7P,KAAK,CAAC+D,sBAAsB,CAAC;MACpE,CAAC,CAAC;IACN;EACJ,CAAC;EACDnE,OAAO,CAAC/C,SAAS,CAACyb,aAAa,GAAG,UAAU+B,GAAG,EAAE;IAC7C,IAAI,CAACzY,UAAU,GAAG,KAAK;IACvB,IAAIsU,KAAK,GAAG,IAAI,CAACoE,oBAAoB,CAAC,IAAI,CAAClE,QAAQ,CAAC;IACpD,IAAImE,QAAQ;IACZ,IAAI,OAAO,IAAI,CAAClD,gBAAgB,KAAK,QAAQ,IACzC,OAAO,IAAI,CAACA,gBAAgB,KAAK,SAAS,IAC1C,OAAO,IAAI,CAACA,gBAAgB,KAAK,QAAQ,EAAE;MAC3CkD,QAAQ,GAAGle,MAAM,CAACkb,gBAAgB,CAAC,CAAC,CAAC,EAAE;QACnC7Q,KAAK,EAAE;UACHA,KAAK,EAAE,IAAI,CAAC2Q,gBAAgB;UAC5BG,UAAU,EAAE;QAChB,CAAC;QACDhN,IAAI,EAAE;UACF9D,KAAK,EAAE,IAAI,CAAC2Q,gBAAgB;UAC5BG,UAAU,EAAE;QAChB;MACJ,CAAC,CAAC;IACN,CAAC,MACI;MACD+C,QAAQ,GAAG,IAAI,CAAClD,gBAAgB;IACpC;IACA,IAAI/M,SAAS,GAAG;MACZ5F,CAAC,EAAE2V,GAAG;MACN9N,IAAI,EAAE,IAAI,CAACA,IAAI;MACf6J,QAAQ,EAAEF,KAAK;MACfsE,YAAY,EAAE,IAAI,CAAChE,kBAAkB;MACrCa,gBAAgB,EAAEkD,QAAQ;MAC1BlE,YAAY,EAAEgE,GAAG,GAAG,IAAI,GAAG,KAAK;MAChC3T,KAAK,EAAE,IAAI,CAAC6F,IAAI,CAACsG,SAAS;MAC1B9S,OAAO,EAAE,IAAI,CAACwB;IAClB,CAAC;IACD,IAAI,CAACsJ,OAAO,CAAC,QAAQ,EAAEP,SAAS,CAAC;EACrC,CAAC;EACD1K,OAAO,CAAC/C,SAAS,CAACyd,oBAAoB,GAAG,UAAU5T,KAAK,EAAE;IACtD,IAAIwP,KAAK;IACT,IAAI,OAAOxP,KAAK,KAAK,QAAQ,IACzB,OAAOA,KAAK,KAAK,SAAS,IAC1B,OAAOA,KAAK,KAAK,QAAQ,EAAE;MAC3BwP,KAAK,GAAG7Z,MAAM,CAACkb,gBAAgB,CAAC,CAAC,CAAC,EAAE;QAChC7Q,KAAK,EAAE;UACHA,KAAK,EAAEA,KAAK;UACZ8Q,UAAU,EAAE;QAChB,CAAC;QACDhN,IAAI,EAAE;UACF9D,KAAK,EAAEA,KAAK;UACZ8Q,UAAU,EAAE;QAChB;MACJ,CAAC,CAAC;IACN,CAAC,MACI;MACDtB,KAAK,GAAGxP,KAAK;IACjB;IACA,OAAOwP,KAAK;EAChB,CAAC;EACDtW,OAAO,CAAC/C,SAAS,CAACib,WAAW,GAAG,YAAY;IACxC,IAAI1R,MAAM,GAAG,IAAI,CAACA,MAAM;IACxB,IAAIyR,QAAQ,GAAG,IAAI;IACnBA,QAAQ,GAAG,IAAI,CAACzB,QAAQ;IACxB,IAAIqE,SAAS;IACb,IAAIC,QAAQ;IACZ,IAAI,CAACtc,iBAAiB,CAACyZ,QAAQ,CAAC,EAAE;MAC9B4C,SAAS,GAAG7b,QAAQ,CAACwH,MAAM,CAACM,KAAK,EAAEmR,QAAQ,CAAC;MAC5C6C,QAAQ,GAAG9b,QAAQ,CAACwH,MAAM,CAACoE,IAAI,EAAEqN,QAAQ,CAAC;IAC9C;IACA,IAAInR,KAAK,GAAI,CAACtI,iBAAiB,CAACyZ,QAAQ,CAAC,IACrC,CAAClZ,WAAW,CAAC8b,SAAS,CAAC,GAAGA,SAAS,GAAG5C,QAAS;IACnD,IAAIrN,IAAI,GAAI,CAACpM,iBAAiB,CAACyZ,QAAQ,CAAC,IACpC,CAAClZ,WAAW,CAAC8b,SAAS,CAAC,GAAGC,QAAQ,GAAG7C,QAAS;IAClD,OAAO;MAAEnR,KAAK,EAAEA,KAAK;MAAE8D,IAAI,EAAEA;IAAK,CAAC;EACvC,CAAC;EACD5K,OAAO,CAAC/C,SAAS,CAAC2R,eAAe,GAAG,YAAY;IAC5C,IAAI,IAAI,CAACrJ,IAAI,EAAE;MACX,IAAIwV,aAAa,GAAG,IAAI,CAACxV,IAAI,CAACmB,gBAAgB,CAAC,GAAG,GAAGrH,mBAAmB,CAAC8G,QAAQ,CAAC;MAClF,IAAI4U,aAAa,CAACrd,MAAM,EAAE;QACtBmB,WAAW,CAACkc,aAAa,EAAE1b,mBAAmB,CAAC8G,QAAQ,CAAC;QACxD4U,aAAa,CAAC,CAAC,CAAC,CAACpM,eAAe,CAAC,eAAe,CAAC;MACrD;IACJ;EACJ,CAAC;EACD3O,OAAO,CAAC/C,SAAS,CAAC8Y,WAAW,GAAG,UAAUjR,CAAC,EAAE;IACzC,IAAIkW,SAAS,GAAGlc,OAAO,CAACgG,CAAC,CAACzH,MAAM,EAAE,GAAG,GAAGgC,mBAAmB,CAAC6G,EAAE,CAAC;IAC/D,IAAI,CAAC+U,QAAQ,CAACD,SAAS,CAAC;EAC5B,CAAC;EACDhb,OAAO,CAAC/C,SAAS,CAACge,QAAQ,GAAG,UAAU/U,EAAE,EAAE;IACvC,IAAI,IAAI,CAAC+P,SAAS,CAAC/P,EAAE,CAAC,IAAI,CAACA,EAAE,CAAC5B,SAAS,CAACC,QAAQ,CAAClF,mBAAmB,CAAC6b,KAAK,CAAC,EAAE;MACzE,IAAI,CAAC9E,WAAW,CAAC,CAAC;MAClBxX,QAAQ,CAAC,CAACsH,EAAE,CAAC,EAAE7G,mBAAmB,CAAC6b,KAAK,CAAC;IAC7C;EACJ,CAAC;EACDlb,OAAO,CAAC/C,SAAS,CAACmZ,WAAW,GAAG,YAAY;IACxC,IAAI,IAAI,CAAC7Q,IAAI,EAAE;MACX,IAAI4V,WAAW,GAAG,IAAI,CAAC5V,IAAI,CAACmB,gBAAgB,CAAC,GAAG,GAAGrH,mBAAmB,CAAC6b,KAAK,CAAC;MAC7E,IAAIC,WAAW,IAAIA,WAAW,CAACzd,MAAM,EAAE;QACnCmB,WAAW,CAACsc,WAAW,EAAE9b,mBAAmB,CAAC6b,KAAK,CAAC;MACvD;IACJ;EACJ,CAAC;EACDlb,OAAO,CAAC/C,SAAS,CAACgZ,SAAS,GAAG,UAAU/P,EAAE,EAAE;IACxC,OAAQA,EAAE,IAAIA,EAAE,CAACjD,YAAY,CAAC,MAAM,CAAC,IAAIiD,EAAE,CAACc,YAAY,CAAC,MAAM,CAAC,KAAK,QAAQ;EACjF,CAAC;EACDhH,OAAO,CAAC/C,SAAS,CAAC+Y,YAAY,GAAG,YAAY;IACzC,IAAI,CAACI,WAAW,CAAC,CAAC;EACtB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIpW,OAAO,CAAC/C,SAAS,CAACme,MAAM,GAAG,UAAUxQ,IAAI,EAAEyQ,SAAS,EAAEC,SAAS,EAAE;IAC7D,IAAI,IAAI,CAACtY,iBAAiB,CAAC,IAAI,CAACrB,YAAY,CAAC,EAAE;MAC3C,IAAI,CAACmG,KAAK,GAAG,IAAI,CAACC,eAAe,CAAC,CAAC;IACvC;IACA,IAAIG,YAAY,GAAG,IAAI,CAACtC,YAAY,CAAC,CAAC;IACtC,IAAI,CAACzC,WAAW,GAAGyH,IAAI;IACvB,IAAIrC,aAAa,GAAG,IAAI,CAAC5C,aAAa,CAACuC,YAAY,CAAC;IACpD,IAAK,IAAI,CAAC0E,UAAU,KAAKhC,IAAI,KAAKrC,aAAa,IAAIqC,IAAI,KAAKrC,aAAa,CAAC8B,WAAW,CAAC,CAAC,CAAC,IACjF,CAAC,IAAI,CAACuC,UAAU,IAAIhC,IAAI,KAAKrC,aAAa,EAAE;MAC/C,IAAI,CAACyB,SAAS,CAAC,IAAI,CAACC,UAAU,EAAE,IAAI,CAACzD,MAAM,CAAC;IAChD,CAAC,MACI;MACD,IAAI,IAAI,CAACnE,WAAW,EAAE;QAClB,IAAI,CAACgE,SAAS,CAAC,CAAC;MACpB;MACA;IACJ;IACA,IAAI7H,iBAAiB,CAAC,IAAI,CAAC+G,IAAI,CAAC,EAAE;MAC9B,IAAI,CAACM,UAAU,CAAC,CAAC;MACjB,IAAI,CAACsG,WAAW,CAAC,CAAC;IACtB,CAAC,MACI,IAAI,CAAC,IAAI,CAAC9J,WAAW,EAAE;MACxB,IAAI,CAAC8J,WAAW,CAAC,CAAC;IACtB;IACA,IAAI,CAACvK,QAAQ,CAACzB,OAAO,CAACgQ,KAAK,CAACI,IAAI,GAAGlS,UAAU,CAACgd,SAAS,CAAC;IACxD,IAAI,CAACzZ,QAAQ,CAACzB,OAAO,CAACgQ,KAAK,CAACiB,GAAG,GAAG/S,UAAU,CAACid,SAAS,CAAC;EAC3D,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EAEItb,OAAO,CAAC/C,SAAS,CAACse,WAAW,GAAG,UAAU5O,IAAI,EAAE;IAC5C,IAAI,IAAI,CAACnG,MAAM,CAACC,QAAQ,EAAE;MACtB,IAAI,CAAC,IAAI,CAAClB,IAAI,EAAE;QACZ,IAAI,CAACM,UAAU,CAAC,CAAC;MACrB;MACA,IAAIyB,SAAS,GAAG,CAAC,CAAC;MAClB,IAAI,IAAI,CAACxB,aAAa,IAAI,IAAI,CAACA,aAAa,CAACpI,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC8d,QAAQ,IAAI,IAAI,CAAChV,MAAM,CAACC,QAAQ,EAAE;QAC9F,IAAI,OAAQkG,IAAK,KAAK,QAAQ,EAAE;UAC5BrF,SAAS,GAAG,IAAI,CAACJ,eAAe,CAACyF,IAAI,CAAC;QAC1C,CAAC,MACI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;UAC/B,IAAIA,IAAI,YAAY8O,aAAa,EAAE;YAC/B,KAAK,IAAItU,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACrB,aAAa,CAACpI,MAAM,EAAEyJ,KAAK,EAAE,EAAE;cAC5D,IAAI,IAAI,CAACrB,aAAa,CAACqB,KAAK,CAAC,KAAKwF,IAAI,EAAE;gBACpCrF,SAAS,GAAG,IAAI,CAACJ,eAAe,CAACyF,IAAI,CAAC3F,YAAY,CAAC,YAAY,CAAC,CAAC;gBACjE;cACJ;YACJ;UACJ,CAAC,MACI;YACD,IAAIF,KAAK,GAAG4U,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACjP,IAAI,CAAC,CAAC,CAAC,IAAI,CAACnG,MAAM,CAACM,KAAK,CAAC;YAC/D,KAAK,IAAIK,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACqU,QAAQ,CAAC9d,MAAM,EAAEyJ,KAAK,EAAE,EAAE;cACvD,IAAIuU,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAAC,IAAI,CAACJ,QAAQ,CAACrU,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAACX,MAAM,CAACM,KAAK,CAAC,KAAKA,KAAK,EAAE;gBAC/EQ,SAAS,GAAG,IAAI,CAACJ,eAAe,CAACJ,KAAK,CAAC;gBACvC;cACJ;YACJ;UACJ;QACJ,CAAC,MACI;UACDQ,SAAS,GAAGqF,IAAI;QACpB;QACA,IAAIkP,YAAY,GAAGvU,SAAS,GAAG,IAAI,CAACxB,aAAa,CAACpI,MAAM,IAAI4J,SAAS,GAAG,CAAC,CAAC;QAC1E,IAAIuU,YAAY,IAAI,CAAEH,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAAC,IAAI,CAACJ,QAAQ,CAAClU,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAACd,MAAM,CAACC,QAAQ,CAAE,EAAE;UAC/F,IAAIP,EAAE,GAAG,IAAI,CAACJ,aAAa,CAACwB,SAAS,CAAC;UACtC,IAAIpB,EAAE,EAAE;YACJ,IAAI,CAAC4V,eAAe,CAAC5V,EAAE,CAAC;YACxB,IAAI6V,UAAU,GAAGL,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAAC,IAAI,CAACJ,QAAQ,CAAClU,SAAS,CAAC,CAAC,CAAC;YACrEyU,UAAU,CAAC,IAAI,CAACvV,MAAM,CAACC,QAAQ,CAAC,GAAG,IAAI;YACvC,IAAI,CAAC+U,QAAQ,CAAClU,SAAS,CAAC,GAAGyU,UAAU;YACrC,IAAI,CAAC9R,UAAU,GAAG,IAAI,CAACuR,QAAQ;UACnC;QACJ;MACJ;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIxb,OAAO,CAAC/C,SAAS,CAAC+V,OAAO,GAAG,YAAY;IACpC,IAAI,CAAC3M,SAAS,CAAC,CAAC;IAChB,IAAI,CAAC5C,WAAW,CAAC,CAAC;IAClB,IAAI,IAAI,CAAC8B,IAAI,EAAE;MACX,IAAI,CAAC4F,gBAAgB,CAAC,CAAC;IAC3B;IACA,IAAI,IAAI,CAACxJ,YAAY,IAAI,CAAC,IAAI,CAACA,YAAY,CAAC2C,SAAS,CAACC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAACoN,aAAa,CAAC,CAAC,CAAC,EAAE;MACzF;IACJ;IACA,IAAI,CAACiF,kBAAkB,GAAG,IAAI;IAC9B,IAAI,CAACjK,IAAI,GAAG,IAAI;IAChB,IAAI,CAACrG,UAAU,GAAG,IAAI;IACtB,IAAI,CAAC1E,QAAQ,GAAG,IAAI;IACpB3B,MAAM,CAAChD,SAAS,CAAC+V,OAAO,CAAC3S,IAAI,CAAC,IAAI,CAAC;EACvC,CAAC;EACDL,OAAO,CAAC/C,SAAS,CAAC+e,aAAa,GAAG,YAAY;IAC1C,OAAO,SAAS;EACpB,CAAC;EACDhc,OAAO,CAAC/C,SAAS,CAACuP,cAAc,GAAG,YAAY;IAC3C,OAAO,aAAa;EACxB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIxM,OAAO,CAAC/C,SAAS,CAAC0U,aAAa,GAAG,YAAY;IAC1C,OAAO,SAAS;EACpB,CAAC;EACDxU,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;EACzCE,UAAU,CAAC,CACPe,QAAQ,CAAC,GAAG,CAAC,CAChB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;EAC5CE,UAAU,CAAC,CACPe,QAAQ,CAAC,KAAK,CAAC,CAClB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAC;EAChDE,UAAU,CAAC,CACPe,QAAQ,CAAC,KAAK,CAAC,CAClB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;EAC5CE,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;EAC3CE,UAAU,CAAC,CACPe,QAAQ,CAAC,EAAE,CAAC,CACf,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAC;EAChDE,UAAU,CAAC,CACPe,QAAQ,CAAC,CAAC,CAAC,CACd,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;EAC1CE,UAAU,CAAC,CACPe,QAAQ,CAAC,MAAM,CAAC,CACnB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;EAC1CE,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;EAC3CE,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,qBAAqB,EAAE,KAAK,CAAC,CAAC;EACpDE,UAAU,CAAC,CACPe,QAAQ,CAAC,KAAK,CAAC,CAClB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;EAC1CE,UAAU,CAAC,CACPe,QAAQ,CAAC,CAAC,CACb,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;EACvCE,UAAU,CAAC,CACPe,QAAQ,CAAC,MAAM,CAAC,CACnB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;EAC3CE,UAAU,CAAC,CACPe,QAAQ,CAAC,OAAO,CAAC,CACpB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;EAC5CE,UAAU,CAAC,CACPe,QAAQ,CAAC,GAAG,CAAC,CAChB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;EAC9CE,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAC;EAChDE,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;EAC7CE,UAAU,CAAC,CACPe,QAAQ,CAAC,kBAAkB,CAAC,CAC/B,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,mBAAmB,EAAE,KAAK,CAAC,CAAC;EAClDE,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAC;EAChDE,UAAU,CAAC,CACPe,QAAQ,CAAC,CAAC,CACb,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;EACvCE,UAAU,CAAC,CACPe,QAAQ,CAAC,EAAE,CAAC,CACf,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;EAC3CE,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;EACtCE,UAAU,CAAC,CACPe,QAAQ,CAAC,UAAU,CAAC,CACvB,EAAE8B,OAAO,CAAC/C,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;EAC3CE,UAAU,CAAC,CACPwB,OAAO,CAAC;IAAEiM,IAAI,EAAE,IAAI;IAAE9D,KAAK,EAAE,IAAI;IAAEmV,OAAO,EAAE,IAAI;IAAE3E,OAAO,EAAE;EAAK,CAAC,EAAEnY,aAAa,CAAC,CACpF,EAAEa,OAAO,CAAC/C,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;EACvCE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;EAC5CE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,gBAAgB,EAAE,KAAK,CAAC,CAAC;EAC/CE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;EAC9CE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;EACvCE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;EAC3CE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;EACvCE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;EACvCE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;EACvCE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;EAC1CE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;EACxCE,UAAU,CAAC,CACPuB,KAAK,CAAC,CAAC,CACV,EAAEsB,OAAO,CAAC/C,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;EAC1C+C,OAAO,GAAG7C,UAAU,CAAC,CACjB8B,qBAAqB,CACxB,EAAEe,OAAO,CAAC;EACX,OAAOA,OAAO;AAClB,CAAC,CAACZ,YAAY,CAAE;AAChB,SAASY,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}