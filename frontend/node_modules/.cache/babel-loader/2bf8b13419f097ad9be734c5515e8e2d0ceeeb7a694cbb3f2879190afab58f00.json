{"ast":null,"code":"/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked, clearReactVueTemplates, padZero, Global } from '../base/util';\nimport { remove, debounce, Internationalization, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData, resetDialogAppend } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue, getListHeight, infiniteRemoveElements, infiniteAppendElements } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */function () {\n  /**\n   * Constructor for checkbox filtering module\n   *\n   * @param {IXLFilter} parent - specifies the IXLFilter\n   * @hidden\n   */\n  function CheckBoxFilterBase(parent) {\n    this.searchInputArgs = null;\n    this.isExecuteLocal = false;\n    this.queryFilteredColumn = [];\n    this.existingPredicate = {};\n    this.foreignKeyQuery = new Query();\n    /** @hidden */\n    this.filterState = true;\n    this.values = {};\n    this.renderEmpty = false;\n    this.isCheckboxFilterTemplate = false;\n    this.infiniteRenderMod = false;\n    // for infinite scroll ui\n    this.infiniteInitialLoad = false;\n    this.infiniteSearchValChange = false;\n    this.infinitePermenantLocalData = [];\n    this.infiniteQueryExecutionPending = false;\n    this.infiniteSkipCnt = 0;\n    this.infiniteScrollAppendDiff = 0;\n    this.prevInfiniteScrollDirection = '';\n    this.infiniteLoadedElem = [];\n    this.infiniteDataCount = 0;\n    this.infiniteLocalSelectAll = true;\n    this.localInfiniteSelectAllClicked = false;\n    this.localInfiniteSelectionInteracted = false;\n    this.infiniteManualSelectMaintainPred = [];\n    this.parent = parent;\n    this.id = this.parent.element.id;\n    this.valueFormatter = new ValueFormatter(this.parent.locale);\n    this.cBoxTrue = createCheckBox(this.parent.createElement, false, {\n      checked: true,\n      label: ' '\n    });\n    this.cBoxFalse = createCheckBox(this.parent.createElement, false, {\n      checked: false,\n      label: ' '\n    });\n    this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden',\n      attrs: {\n        type: 'checkbox'\n      }\n    }), this.cBoxTrue.firstChild);\n    this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden',\n      attrs: {\n        'type': 'checkbox'\n      }\n    }), this.cBoxFalse.firstChild);\n    this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n    if (this.parent.enableRtl) {\n      addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n    }\n    if (this.parent.cssClass) {\n      if (this.parent.cssClass.indexOf(' ') !== -1) {\n        addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n      } else {\n        addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n      }\n    }\n  }\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.destroy = function () {\n    this.closeDialog();\n  };\n  CheckBoxFilterBase.prototype.wireEvents = function () {\n    EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n    EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n    this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n    var elem = this.dialogObj.element.querySelector('.e-searchinput');\n    if (elem) {\n      EventHandler.add(elem, 'keyup', this.searchHandler, this);\n      EventHandler.add(elem, 'input', this.searchHandler, this);\n    }\n  };\n  CheckBoxFilterBase.prototype.unWireEvents = function () {\n    EventHandler.remove(this.dlg, 'click', this.clickHandler);\n    EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n    var elem = this.dialogObj.element.querySelector('.e-searchinput');\n    if (elem) {\n      EventHandler.remove(elem, 'keyup', this.searchHandler);\n      EventHandler.remove(elem, 'input', this.searchHandler);\n    }\n  };\n  CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n    var _this = this;\n    var fPredicate = {};\n    var filterCollection = [];\n    var query = this.foreignKeyQuery.clone();\n    this.options.column.dataSource.executeQuery(query.where(mPredicate)).then(function (e) {\n      _this.options.column.columnData = e.result;\n      _this.parent.notify(events.generateQuery, {\n        predicate: fPredicate,\n        column: _this.options.column\n      });\n      args.ejpredicate = fPredicate.predicate.predicates;\n      var fpred = fPredicate.predicate.predicates;\n      for (var i = 0; i < fpred.length; i++) {\n        filterCollection.push({\n          field: fpred[parseInt(i.toString(), 10)].field,\n          predicate: 'or',\n          matchCase: fpred[parseInt(i.toString(), 10)].ignoreCase,\n          ignoreAccent: fpred[parseInt(i.toString(), 10)].ignoreAccent,\n          operator: fpred[parseInt(i.toString(), 10)].operator,\n          value: fpred[parseInt(i.toString(), 10)].value,\n          type: _this.options.type\n        });\n      }\n      args.filterCollection = filterCollection.length ? filterCollection : fColl.filter(function (col) {\n        return col.field = _this.options.field;\n      });\n      _this.options.handler(args);\n    });\n  };\n  CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n    var target = e.target;\n    if (target.classList.contains('e-searchclear')) {\n      this.sInput.value = target.classList.contains('e-chkcancel-icon') ? '' : this.sInput.value;\n      if (this.isCheckboxFilterTemplate) {\n        this.parent.notify('refreshCheckbox', {\n          event: e\n        });\n      } else {\n        this.refreshCheckboxes();\n      }\n      this.updateSearchIcon();\n      this.sInput.focus();\n    }\n  };\n  CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n    if (isNullOrUndefined(this.sInput)) {\n      return;\n    }\n    if (isNullOrUndefined(e) || e.key !== 'ArrowUp' && e.key !== 'ArrowDown' && e.key !== 'Tab' && !(e.key === 'Tab' && e.shiftKey)) {\n      if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n        this.parent.showMaskRow(undefined, this.dialogObj.element);\n      }\n      if (this.isCheckboxFilterTemplate) {\n        this.parent.notify('refreshCheckbox', {\n          event: e\n        });\n      } else {\n        this.refreshCheckboxes();\n      }\n      this.updateSearchIcon();\n    }\n  };\n  CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n    if (this.sInput.value.length) {\n      classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n      if (!isNullOrUndefined(document.body.querySelector('.e-chkcancel-icon'))) {\n        document.body.querySelector('.e-chkcancel-icon').setAttribute('title', this.localeObj.getConstant('Clear'));\n      }\n    } else {\n      classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n      if (!isNullOrUndefined(document.body.querySelector('.e-searchclear.e-search-icon'))) {\n        document.body.querySelector('.e-searchclear.e-search-icon').setAttribute('title', this.localeObj.getConstant('Search'));\n      }\n    }\n  };\n  /**\n   * Gets the localized label by locale keyword.\n   *\n   * @param {string} key - Defines localization key\n   * @returns {string} - returns localization label\n   */\n  CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n    return this.localeObj.getConstant(key);\n  };\n  CheckBoxFilterBase.prototype.updateDataSource = function () {\n    var dataSource = this.options.dataSource;\n    var str = 'object';\n    if (!(dataSource instanceof DataManager)) {\n      for (var i = 0; i < dataSource.length; i++) {\n        // eslint-disable-next-line valid-typeof\n        if (typeof dataSource !== str) {\n          var obj = {};\n          obj[this.options.field] = dataSource[parseInt(i.toString(), 10)];\n          dataSource[parseInt(i.toString(), 10)] = obj;\n        }\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.updateModel = function (options) {\n    this.options = options;\n    this.existingPredicate = options.actualPredicate || {};\n    this.options.dataSource = options.dataSource;\n    this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n    this.updateDataSource();\n    this.options.type = options.type;\n    this.options.format = options.format || '';\n    this.options.ignoreAccent = options.ignoreAccent || false;\n    this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n    this.options.query = options.query || new Query();\n    this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n    this.options.uid = options.column.uid;\n    this.options.disableHtmlEncode = options.column.disableHtmlEncode || false;\n    this.values = {};\n    this.localeObj = options.localeObj;\n    this.isFiltered = options.filteredColumns.length;\n    this.infiniteRenderMod = this.parent.filterSettings && this.parent.filterSettings.enableInfiniteScrolling ? true : false;\n    this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n  };\n  CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n    this.dlg = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_excelDlg',\n      attrs: {\n        uid: this.options.column.uid\n      },\n      className: 'e-checkboxfilter e-filter-popup'\n    });\n    this.sBox = this.parent.createElement('div', {\n      className: 'e-searchcontainer'\n    });\n    if (!options.hideSearchbox) {\n      this.sInput = this.parent.createElement('input', {\n        id: this.id + '_SearchBox',\n        className: 'e-searchinput'\n      });\n      this.sIcon = this.parent.createElement('span', {\n        className: 'e-searchclear e-search-icon e-icons e-input-group-icon',\n        attrs: {\n          type: 'text',\n          title: this.getLocalizedLabel('Search')\n        }\n      });\n      this.searchBox = this.parent.createElement('span', {\n        className: 'e-searchbox e-fields'\n      });\n      this.searchBox.appendChild(this.sInput);\n      this.sBox.appendChild(this.searchBox);\n      this.searchInputArgs = {\n        element: this.sInput,\n        floatLabelType: 'Never',\n        properties: {\n          placeholder: this.getLocalizedLabel('Search'),\n          cssClass: this.parent.cssClass\n        }\n      };\n      Input.createInput(this.searchInputArgs, this.parent.createElement);\n      this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n    }\n    this.spinner = this.parent.createElement('div', {\n      className: 'e-spinner'\n    }); //for spinner\n    this.cBox = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_CheckBoxList',\n      className: 'e-checkboxlist e-fields'\n    });\n    this.spinner.appendChild(this.cBox);\n    this.sBox.appendChild(this.spinner);\n    return this.sBox;\n  };\n  CheckBoxFilterBase.prototype.showDialog = function (options) {\n    var args = {\n      requestType: events.filterBeforeOpen,\n      columnName: this.options.field,\n      columnType: this.options.type,\n      cancel: false\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    this.parent.notify(events.cBoxFltrBegin, args);\n    if (args.cancel) {\n      options.cancel = args.cancel;\n      return;\n    }\n    this.dialogObj = new Dialog({\n      visible: false,\n      content: this.sBox,\n      close: this.closeDialog.bind(this),\n      enableRtl: this.parent.enableRtl,\n      width: !isNullOrUndefined(parentsUntil(options.target, 'e-bigger')) || this.parent.element.classList.contains('e-device') ? 260 : 255,\n      target: this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      buttons: [{\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n          cssClass: this.parent.cssClass ? 'e-primary' + ' ' + this.parent.cssClass : 'e-primary',\n          isPrimary: true\n        }\n      }, {\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          cssClass: this.parent.cssClass ? 'e-flat' + ' ' + this.parent.cssClass : 'e-flat',\n          content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton')\n        }\n      }],\n      created: this.dialogCreated.bind(this),\n      open: this.dialogOpen.bind(this),\n      cssClass: this.parent.cssClass ? this.parent.cssClass : ''\n    });\n    var isStringTemplate = 'isStringTemplate';\n    this.dialogObj[\"\" + isStringTemplate] = true;\n    this.renderResponsiveFilter(options);\n    var dialogLabel = this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox' ? this.getLocalizedLabel('CheckBoxFilterDialogARIA') : this.getLocalizedLabel('ExcelFilterDialogARIA');\n    this.dlg.setAttribute('aria-label', dialogLabel);\n    if (options.isResponsiveFilter) {\n      var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n      responsiveCnt.appendChild(this.dlg);\n    } else {\n      this.parent.element.appendChild(this.dlg);\n    }\n    this.dialogObj.appendTo(this.dlg);\n    this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n    this.dialogObj.show();\n    if (this.parent && this.parent.filterSettings && (this.parent.filterSettings.type === 'CheckBox' || this.options.column && this.options.column.filter && this.options.column.filter.type === 'CheckBox') && this.parent.getContent().firstElementChild.offsetHeight < this.dialogObj.element.offsetHeight && !parentsUntil(this.parent.element, 'e-gantt-dialog')) {\n      resetDialogAppend(this.parent, this.dialogObj);\n    }\n    var content = this.dialogObj.element.querySelector('.e-dlg-content');\n    content.appendChild(this.sBox);\n    this.wireEvents();\n    if (!this.parent.enableAdaptiveUI) {\n      if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer' && !this.infiniteRenderMod) {\n        this.parent.showMaskRow(undefined, this.dialogObj.element);\n      }\n      if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n        this.showMask();\n      }\n    } else {\n      if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n        this.getAllData();\n        return;\n      }\n      if (this.infiniteRenderMod) {\n        this.cBox.style.marginTop = getListHeight(this.cBox) + 'px';\n      }\n    }\n    if (!(this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer')) {\n      createSpinner({\n        target: this.spinner,\n        cssClass: this.parent.cssClass ? this.parent.cssClass : null\n      }, this.parent.createElement);\n      showSpinner(this.spinner);\n    }\n    this.getAllData();\n  };\n  CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n    if (options.isResponsiveFilter) {\n      this.dialogObj.buttons = [{}];\n      this.dialogObj.position = {\n        X: '',\n        Y: ''\n      };\n      this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n      this.dialogObj.width = '100%';\n    }\n  };\n  CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n    if (this.options.isResponsiveFilter) {\n      this.dialogObj.element.style.left = '0px';\n    } else {\n      if (!Browser.isDevice) {\n        getFilterMenuPostion(this.options.target, this.dialogObj, this.parent);\n      } else {\n        this.dialogObj.position = {\n          X: 'center',\n          Y: 'center'\n        };\n      }\n    }\n    if (this.options.column.showColumnMenu) {\n      this.parent.notify(events.filterDialogCreated, e);\n    }\n  };\n  CheckBoxFilterBase.prototype.openDialog = function (options) {\n    this.updateModel(options);\n    this.getAndSetChkElem(options);\n    this.showDialog(options);\n  };\n  CheckBoxFilterBase.prototype.closeDialog = function () {\n    if (this.infiniteRenderMod && this.infinitePermenantLocalData.length && !this.options.isRemote) {\n      this.options.dataSource.dataSource.json = this.infinitePermenantLocalData;\n    }\n    if (this.dialogObj && !this.dialogObj.isDestroyed) {\n      this.isBlanks = false;\n      var filterTemplateCol = this.options.columns.filter(function (col) {\n        return col.getFilterItemTemplate();\n      });\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var registeredTemplate = this.parent.registeredTemplate;\n      if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n        this.parent.destroyTemplate(['filterItemTemplate']);\n      }\n      if ((this.parent.isReact || this.parent.isVue) && this.parent.destroyTemplate !== undefined) {\n        clearReactVueTemplates(this.parent, ['filterItemTemplate']);\n      }\n      this.parent.notify(events.filterMenuClose, {\n        field: this.options.field\n      });\n      this.unWireEvents();\n      if (this.searchInputArgs && this.searchInputArgs.element && this.searchInputArgs.element.parentElement) {\n        Input.destroy(this.searchInputArgs);\n        remove(this.searchInputArgs.element);\n      }\n      this.searchInputArgs = null;\n      this.sInput = null;\n      if (this.parent.isReact && this.options.column.filter && typeof this.options.column.filter.itemTemplate !== 'string' && (this.options.column.filter.type === 'CheckBox' || this.options.column.filter.type === 'Excel')) {\n        this.dialogObj.element.querySelector('.e-dlg-content').innerHTML = '';\n      }\n      this.dialogObj.destroy();\n      if (this.dialogObj['dlgClosedBy'] === 'escape') {\n        this.parent.isColumnMenuFilterClosing = true;\n      }\n      if (this.dlg && this.dlg.parentElement) {\n        remove(this.dlg);\n        var gridPopup = document.getElementById(this.parent.element.id + '_e-popup');\n        if (!isNullOrUndefined(gridPopup)) {\n          remove(gridPopup);\n          gridPopup = null;\n        }\n      }\n      this.dlg = null;\n      this.parent.notify(events.filterDialogClose, {});\n    }\n  };\n  /**\n   * @param {Column} col - Defines column details\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.clearFilter = function (col) {\n    // eslint-disable-next-line max-len\n    var args = {\n      instance: this,\n      handler: this.clearFilter,\n      cancel: false\n    };\n    this.parent.notify(events.fltrPrevent, args);\n    if (args.cancel) {\n      return;\n    }\n    this.options.handler({\n      action: 'clear-filter',\n      field: col ? col.field : this.options.field\n    });\n  };\n  CheckBoxFilterBase.prototype.btnClick = function (e) {\n    if (this.filterState) {\n      if (e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput') || e.keyCode === 13) {\n        if (!this.isCheckboxFilterTemplate) {\n          this.fltrBtnHandler();\n        }\n      } else {\n        var text = e.target.firstChild.textContent.toLowerCase();\n        if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n          if (!this.isCheckboxFilterTemplate) {\n            this.fltrBtnHandler();\n          }\n        } else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n          this.clearFilter();\n        }\n      }\n      this.closeDialog();\n    } else if (e.target && e.target.firstChild && e.target.firstChild.textContent.toLowerCase() === this.getLocalizedLabel('CancelButton').toLowerCase()) {\n      this.closeDialog();\n    } else if (!(e.target.tagName.toLowerCase() === 'input')) {\n      this.clearFilter();\n      this.closeDialog();\n    }\n    if (this.options.column.showColumnMenu) {\n      this.parent.notify(events.afterFilterColumnMenuClose, {});\n    }\n    if (!isNullOrUndefined(this.parent.focusModule)) {\n      this.parent.focusModule.filterfocus();\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n    var _this = this;\n    if (this.infiniteRenderMod) {\n      this.cBox.innerHTML = '';\n      appendChildren(this.cBox, this.infiniteLoadedElem.slice());\n    }\n    var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)'));\n    var check = checked;\n    var optr = 'equal';\n    var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n    if (ddlValue) {\n      this.options.operator = optr = ddlValue.ej2_instances[0].value;\n    }\n    this.isMenuNotEqual = this.options.operator === 'notequal';\n    var searchInput;\n    if (!this.options.hideSearchbox) {\n      searchInput = this.searchBox.querySelector('.e-searchinput');\n    }\n    var caseSen = this.options.allowCaseSensitive;\n    var defaults = {\n      field: this.options.field,\n      predicate: this.isMenuNotEqual ? 'and' : 'or',\n      uid: this.options.uid,\n      operator: optr,\n      type: this.options.type,\n      matchCase: caseSen,\n      ignoreAccent: this.options.ignoreAccent\n    };\n    var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n    if (isNotEqual && searchInput && searchInput.value === '') {\n      optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n      checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n      defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n      defaults.operator = optr;\n    }\n    var val;\n    var length;\n    var coll = [];\n    if (checked.length !== this.itemsCnt || searchInput && searchInput.value && searchInput.value !== '' || this.infiniteRenderMod) {\n      if (!this.infiniteRenderMod) {\n        coll = this.complexQueryPredicate(checked, defaults, isNotEqual);\n        if (isNullOrUndefined(coll)) {\n          return;\n        }\n        coll = this.filterPreventColumns ? this.filterPreventColumns : coll;\n      } else if (this.infiniteRenderMod && (!this.infiniteSearchPred || this.infiniteSearchPred && !this.infiniteSearchPred.isComplex)) {\n        this.infiniteFltrBtnHandler(coll);\n      } else {\n        if (this.infiniteSearchPred.isComplex) {\n          coll = this.complexQueryPredicate(checked, defaults, isNotEqual);\n        }\n      }\n      if ((this.options.type === 'date' || this.options.type === 'dateonly' || this.options.type === 'datetime') && check.length) {\n        length = check.length - 1;\n        val = this.values[parentsUntil(check[parseInt(length.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n        if (isNullOrUndefined(val) && isNotEqual) {\n          coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase,\n            operator: 'equal',\n            predicate: 'or',\n            value: null\n          });\n        }\n      }\n      var addCurrSelection = this.infiniteRenderMod ? this.sBox.querySelector('.e-add-current') : this.cBox.querySelector('.e-add-current');\n      if (addCurrSelection && addCurrSelection.classList.contains('e-check')) {\n        var existingPredicate_1 = this.existingPredicate[this.options.field];\n        if (existingPredicate_1) {\n          var _loop_1 = function (j) {\n            if (!coll.some(function (data) {\n              return data.value === existingPredicate_1[parseInt(j.toString(), 10)].value;\n            })) {\n              coll.push(existingPredicate_1[parseInt(j.toString(), 10)]);\n            }\n          };\n          for (var j = 0; j < existingPredicate_1.length; j++) {\n            _loop_1(j);\n          }\n        } else {\n          return;\n        }\n      }\n      if (!this.infiniteRenderMod) {\n        this.initiateFilter(coll);\n      } else if (coll.length) {\n        this.initiateFilter(coll);\n      } else if (this.sBox.querySelector('.e-selectall').classList.contains('e-check') && !coll.length) {\n        var isClearFilter = this.options.filteredColumns.some(function (value) {\n          return _this.options.field === value.field;\n        });\n        if (isClearFilter) {\n          this.clearFilter();\n        }\n      }\n    } else {\n      var isClearFilter = this.options.filteredColumns.some(function (value) {\n        return _this.options.field === value.field;\n      });\n      if (isClearFilter) {\n        this.clearFilter();\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.complexQueryPredicate = function (checkBoxChecked, defaults, isNotEqual) {\n    var value;\n    var fObj;\n    var coll = [];\n    for (var i = 0; i < checkBoxChecked.length; i++) {\n      value = this.values[parentsUntil(checkBoxChecked[parseInt(i.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n      fObj = extend({}, {\n        value: value\n      }, defaults);\n      if (value && !value.toString().length) {\n        fObj.operator = isNotEqual ? 'notequal' : 'equal';\n      }\n      if (value === '' || isNullOrUndefined(value)) {\n        coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n      } else {\n        coll.push(fObj);\n      }\n    }\n    var filterColumns = this.filterPreventColumns && this.filterPreventColumns.length ? this.filterPreventColumns[0] : fObj;\n    if (filterColumns && !this.notifyFilterPrevEvent(filterColumns)) {\n      this.filterPreventColumns = coll;\n      return null;\n    } else {\n      return coll;\n    }\n  };\n  CheckBoxFilterBase.prototype.infiniteFltrBtnHandler = function (coll) {\n    var value;\n    if (this.infiniteManualSelectMaintainPred.length) {\n      for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n        var pred = this.infiniteManualSelectMaintainPred[i];\n        value = pred.value + '';\n        if (value === '' || isNullOrUndefined(value)) {\n          var dummyDefaults = {\n            predicate: pred.predicate,\n            field: pred.field,\n            type: pred.type,\n            uid: pred.uid,\n            operator: pred.operator,\n            matchCase: pred.matchCase,\n            ignoreAccent: pred.ignoreAccent\n          };\n          coll.push.apply(coll, CheckBoxFilterBase.generateNullValuePredicates(dummyDefaults));\n        } else {\n          coll.push(this.infiniteManualSelectMaintainPred[i]);\n        }\n        this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i]);\n      }\n    }\n    if (!this.localInfiniteSelectAllClicked && this.sInput.value === '' && !(!this.options.parentCurrentViewDataCount && coll.length)) {\n      for (var i = 0; i < this.infiniteUnloadParentExistPred.length; i++) {\n        coll.unshift(this.infiniteUnloadParentExistPred[i]);\n        this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);\n      }\n    }\n    if (this.sInput.value !== '' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {\n      this.infiniteSearchPred['predicate'] = 'or';\n      coll.unshift(this.infiniteSearchPred);\n      this.notifyFilterPrevEvent(this.infiniteSearchPred);\n    }\n  };\n  CheckBoxFilterBase.prototype.notifyFilterPrevEvent = function (predicate) {\n    var args = {\n      instance: this,\n      handler: this.fltrBtnHandler,\n      arg1: predicate.field,\n      arg2: predicate.predicate,\n      arg3: predicate.operator,\n      arg4: predicate.matchCase,\n      arg5: predicate.ignoreAccent,\n      arg6: predicate.value,\n      cancel: false\n    };\n    this.parent.notify(events.fltrPrevent, args);\n    if (args.cancel) {\n      return false;\n    }\n    return true;\n  };\n  // eslint-disable-next-line\n  /** @hidden */\n  CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n    var coll = [];\n    if (defaults.type === 'string') {\n      coll.push({\n        field: defaults.field,\n        ignoreAccent: defaults.ignoreAccent,\n        matchCase: defaults.matchCase,\n        operator: defaults.operator,\n        predicate: defaults.predicate,\n        value: ''\n      });\n    }\n    coll.push({\n      field: defaults.field,\n      matchCase: defaults.matchCase,\n      operator: defaults.operator,\n      predicate: defaults.predicate,\n      value: null\n    });\n    coll.push({\n      field: defaults.field,\n      matchCase: defaults.matchCase,\n      operator: defaults.operator,\n      predicate: defaults.predicate,\n      value: undefined\n    });\n    return coll;\n  };\n  // eslint-disable-next-line\n  /** @hidden */\n  CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n    var firstVal = fColl[0];\n    var predicate;\n    if (!isNullOrUndefined(firstVal)) {\n      predicate = firstVal.ejpredicate ? firstVal.ejpredicate : new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n      for (var j = 1; j < fColl.length; j++) {\n        predicate = fColl[parseInt(j.toString(), 10)].ejpredicate !== undefined ? predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].ejpredicate) : predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].field, fColl[parseInt(j.toString(), 10)].operator, fColl[parseInt(j.toString(), 10)].value, !fColl[parseInt(j.toString(), 10)].matchCase, fColl[parseInt(j.toString(), 10)].ignoreAccent);\n      }\n      var args = {\n        action: 'filtering',\n        filterCollection: fColl,\n        field: this.options.field,\n        ejpredicate: Predicate.or(predicate)\n      };\n      this.options.handler(args);\n    }\n  };\n  CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n    return col.isForeignColumn ? col.isForeignColumn() : false;\n  };\n  CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n    var _this = this;\n    var val = this.sInput.value;\n    var column = this.options.column;\n    var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n    var foreignQuery = this.options.query.clone();\n    var pred = query.queries.filter(function (e) {\n      return e && e.fn === 'onWhere';\n    })[0];\n    query.queries = [];\n    foreignQuery.queries = [];\n    var parsed = this.options.type !== 'string' && parseFloat(val) ? parseFloat(val) : val;\n    var operator = this.options.isRemote ? this.options.type === 'string' ? 'contains' : 'equal' : this.options.type ? 'contains' : 'equal';\n    var matchCase = true;\n    var ignoreAccent = this.options.ignoreAccent;\n    var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n    parsed = parsed === '' || parsed === undefined ? undefined : parsed;\n    var coll = [];\n    var defaults = {\n      field: field,\n      predicate: 'or',\n      uid: this.options.uid,\n      operator: 'equal',\n      type: this.options.type,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent\n    };\n    var predicte;\n    var moduleName = this.options.dataManager.adaptor.getModuleName;\n    if (this.options.type === 'boolean') {\n      if (parsed !== undefined && this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n        parsed = 'true';\n      } else if (parsed !== undefined && this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n        parsed = 'false';\n      }\n      if (parsed !== undefined && this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n        // eslint-disable-next-line no-constant-condition\n        parsed = moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor' ? true : 'true';\n      } else if (parsed !== undefined && this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n        // eslint-disable-next-line no-constant-condition\n        parsed = moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor' ? false : 'false';\n      }\n      operator = 'equal';\n    }\n    if ((this.options.type === 'date' || this.options.type === 'datetime' || this.options.type === 'dateonly') && this.options.format) {\n      var intl = new Internationalization();\n      var format = typeof this.options.format === 'string' ? this.options.format : this.options.format.format;\n      if (format) {\n        parsed = intl.parseDate(val, {\n          format: format\n        }) || new Date(val);\n      } else {\n        parsed = new Date(val);\n      }\n      if (this.options.type === 'dateonly') {\n        parsed = parsed.getFullYear() + '-' + padZero(parsed.getMonth() + 1) + '-' + padZero(parsed.getDate());\n      }\n    }\n    this.infiniteSearchValChange = true;\n    this.infiniteLoadedElem = [];\n    this.infiniteLocalSelectAll = true;\n    this.localInfiniteSelectAllClicked = false;\n    this.localInfiniteSelectionInteracted = false;\n    this.infiniteSkipCnt = 0;\n    this.infiniteDataCount = 0;\n    this.infiniteManualSelectMaintainPred = [];\n    if (this.sInput.value === '') {\n      this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n    } else {\n      this.infiniteUnloadParentExistPred = [];\n    }\n    if (!this.isForeignColumn(column)) {\n      this.addDistinct(query);\n    }\n    var args = {\n      requestType: events.filterSearchBegin,\n      filterModel: this,\n      columnName: field,\n      column: column,\n      operator: operator,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent,\n      filterChoiceCount: null,\n      query: query,\n      value: parsed,\n      cancel: false\n    };\n    if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n      args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n    }\n    this.parent.trigger(events.actionBegin, args, function (filterargs) {\n      if (filterargs.cancel) {\n        return;\n      }\n      // eslint-disable-next-line no-self-assign\n      filterargs.operator = filterargs.operator;\n      predicte = new Predicate(field, filterargs.operator, args.value, filterargs.matchCase, filterargs.ignoreAccent);\n      if (_this.options.type === 'date' || _this.options.type === 'datetime' || _this.options.type === 'dateonly') {\n        operator = 'equal';\n        var filterObj = {\n          field: field,\n          operator: operator,\n          value: parsed,\n          matchCase: matchCase,\n          ignoreAccent: ignoreAccent\n        };\n        if (!isNullOrUndefined(parsed)) {\n          predicte = getDatePredicate(filterObj, _this.options.type);\n        }\n      }\n      if (val && typeof val === 'string' && _this.isBlanks && _this.getLocalizedLabel('Blanks').toLowerCase().indexOf(val.toLowerCase()) >= 0) {\n        coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n        var emptyValPredicte = CheckBoxFilterBase.generatePredicate(coll);\n        emptyValPredicte.predicates.push(predicte);\n        predicte = emptyValPredicte;\n        query.where(emptyValPredicte);\n      } else if (val.length) {\n        predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n        query.where(predicte);\n      } else if (!isNullOrUndefined(pred)) {\n        predicte = pred.e;\n        query.where(pred.e);\n      }\n      _this.infiniteSearchPred = predicte;\n      filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n      if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== filterargs.filterChoiceCount) {\n        _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n      }\n      var fPredicate = {};\n      showSpinner(_this.spinner);\n      _this.renderEmpty = false;\n      if (_this.isForeignColumn(column) && val.length) {\n        var colData = 'result' in column.dataSource ? new DataManager(column.dataSource.result) : column.dataSource;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        colData.executeQuery(query).then(function (e) {\n          var columnData = _this.options.column.columnData;\n          _this.options.column.columnData = e.result;\n          _this.parent.notify(events.generateQuery, {\n            predicate: fPredicate,\n            column: column\n          });\n          if (fPredicate.predicate.predicates.length) {\n            foreignQuery.where(fPredicate.predicate);\n          } else {\n            _this.renderEmpty = true;\n          }\n          _this.options.column.columnData = columnData;\n          if (_this.infiniteRenderMod) {\n            _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n            _this.makeInfiniteScrollRequest(foreignQuery);\n            foreignQuery.requiresCount();\n          } else {\n            foreignQuery.take(filterargs.filterChoiceCount);\n          }\n          _this.search(filterargs, foreignQuery);\n        });\n      } else {\n        if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount) {\n          _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n          _this.makeInfiniteScrollRequest(query);\n          query.requiresCount();\n        } else {\n          query.take(filterargs.filterChoiceCount);\n        }\n        _this.search(filterargs, query);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.search = function (args, query) {\n    if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n      this.filterEvent(args, query);\n    } else {\n      this.processSearch(query);\n    }\n  };\n  CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns, isExecuteLocal) {\n    var predicates = CheckBoxFilterBase.getPredicate(columns, isExecuteLocal);\n    var predicateList = [];\n    var fPredicate = {};\n    var isGrid = this.parent.getForeignKeyColumns !== undefined;\n    var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n    for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      var col = void 0;\n      if (isGrid && !this.parent.getColumnByField(prop)) {\n        col = getColumnByForeignKeyValue(prop, foreignColumn);\n      }\n      if (col) {\n        this.parent.notify(events.generateQuery, {\n          predicate: fPredicate,\n          column: col\n        });\n        if (fPredicate.predicate.predicates.length) {\n          predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n        }\n      } else {\n        predicateList.push(predicates[\"\" + prop]);\n      }\n    }\n    return predicateList.length && Predicate.and(predicateList);\n  };\n  CheckBoxFilterBase.prototype.getQuery = function () {\n    return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n  };\n  CheckBoxFilterBase.prototype.getAllData = function () {\n    var _this = this;\n    this.customQuery = false;\n    var query = this.getQuery();\n    var moduleName = this.options.dataManager.adaptor.getModuleName;\n    if (!(!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === 'ODataV4Adaptor')) {\n      query.requiresCount(); //consider take query\n    }\n    this.addDistinct(query);\n    var args = {\n      requestType: events.filterChoiceRequest,\n      query: query,\n      filterChoiceCount: null\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n      args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n    }\n    this.parent.trigger(events.actionBegin, args, function (args) {\n      args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n      if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== args.filterChoiceCount) {\n        _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n      }\n      if (!_this.infiniteRenderMod) {\n        query.take(args.filterChoiceCount);\n      }\n      if (!args.query.distincts.length || _this.infiniteRenderMod) {\n        _this.customQuery = true;\n        _this.queryGenerate(query);\n      }\n      if (_this.infiniteRenderMod) {\n        _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n        _this.makeInfiniteScrollRequest(query);\n      }\n      if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n        _this.filterEvent(args, query);\n      } else {\n        _this.processDataOperation(query, true);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.addDistinct = function (query) {\n    var _this = this;\n    var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n    if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n      filteredColumn = filteredColumn.concat(this.options.column.field);\n    }\n    var moduleName = this.options.dataManager.adaptor.getModuleName;\n    if (moduleName && moduleName() === 'ODataV4Adaptor' && this.parent && this.parent.query instanceof Query) {\n      var gridQuery = this.parent.query;\n      for (var i = 0; i < gridQuery.queries.length; i++) {\n        var queryOptions = gridQuery.queries[parseInt(i.toString(), 10)];\n        if (queryOptions.fn === 'onWhere') {\n          this.getPredicateFields(queryOptions.e);\n          this.queryFilteredColumn.map(function (field) {\n            if (filteredColumn.indexOf(field) === -1) {\n              filteredColumn.push(field);\n            }\n          });\n          this.queryFilteredColumn = [];\n        }\n      }\n    }\n    if (!this.infiniteRenderMod) {\n      query.distinct(filteredColumn);\n    }\n    if (this.infiniteRenderMod && !this.options.isRemote && this.sInput.value === '') {\n      this.options.dataSource = this.options.dataSource instanceof DataManager ? this.options.dataSource : new DataManager(this.options.dataSource);\n      this.infinitePermenantLocalData = this.options.dataSource.dataSource.json.slice();\n      var query1 = new Query();\n      this.queryGenerate(query1);\n      var result = new DataManager(this.options.dataSource.dataSource).executeLocal(query1);\n      this.options.dataSource = new DataManager(DataUtil.distinct(result, this.options.column.field, true));\n      if (this.isForeignColumn(this.options.column)) {\n        this.options.column.dataSource = this.options.column.dataSource instanceof DataManager ? this.options.column.dataSource : new DataManager(this.options.column.dataSource);\n        this.options.dataSource.dataSource.json = this.options.dataSource.dataSource.json.map(function (item, i) {\n          return Object.assign({}, item, _this.options.column.dataSource.dataSource.json[i]);\n        });\n      }\n    } else if (this.infiniteRenderMod && this.options.isRemote) {\n      query.select(this.options.column.field);\n      query.sortBy(this.options.column.field, 'ascending');\n      var moduleName_1 = this.options.dataManager.adaptor.getModuleName;\n      if (moduleName_1 && moduleName_1() && (moduleName_1() === 'ODataV4Adaptor' || moduleName_1() === 'WebApiAdaptor' || moduleName_1() === 'CustomDataAdaptor' || moduleName_1() === 'GraphQLAdaptor' || moduleName_1() === 'ODataAdaptor')) {\n        query.distinct(filteredColumn);\n      }\n    }\n    return query;\n  };\n  CheckBoxFilterBase.prototype.getPredicateFields = function (query) {\n    var _this = this;\n    if (query.isComplex && query.predicates) {\n      query.predicates.forEach(function (predicate) {\n        if (Array.isArray(predicate)) {\n          predicate.forEach(function (p) {\n            return _this.getPredicateFields(p);\n          });\n        } else {\n          _this.getPredicateFields(predicate);\n        }\n      });\n    } else {\n      if (query.field && !query.isComplex) {\n        if (this.queryFilteredColumn.indexOf(query.field) <= -1) {\n          this.queryFilteredColumn = this.queryFilteredColumn.concat(DataUtil.distinct([query.field], 'field'));\n        }\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n    var _this = this;\n    var defObj = eventPromise(args, query);\n    this.parent.trigger(events.dataStateChange, defObj.state);\n    this.addInfiniteScrollEvent(query);\n    var def = defObj.deffered;\n    def.promise.then(function (e) {\n      _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e['count'] : _this.infiniteDataCount;\n      var dataResult = _this.infiniteRenderMod ? e['result'] : e;\n      _this.dataSuccess(dataResult);\n    });\n  };\n  CheckBoxFilterBase.prototype.addInfiniteScrollEvent = function (query) {\n    if (this.infiniteRenderMod) {\n      this.infiniteQuery = query.clone();\n      if (this.infiniteInitialLoad) {\n        this.cBox.classList.add('e-checkbox-infinitescroll');\n        EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n        EventHandler.add(this.cBox, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n        EventHandler.add(this.cBox, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n      } else if (this.infiniteSearchValChange) {\n        this.cBox.innerHTML = '';\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.infiniteScrollMouseKeyDownHandler = function () {\n    EventHandler.remove(this.cBox, 'scroll', this.infiniteScrollHandler);\n  };\n  CheckBoxFilterBase.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n    var _this = this;\n    EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n    var target = this.cBox;\n    if (target.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight || target.scrollTop <= 0)) {\n      this.infiniteScrollHandler();\n    }\n    Global.timer = setTimeout(function () {\n      _this.clickHandler(e);\n      Global.timer = null;\n    }, 0);\n  };\n  CheckBoxFilterBase.prototype.getShimmerTemplate = function () {\n    return '<span class=\"e-mask e-skeleton e-skeleton-text e-shimmer-wave\"></span>';\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.showMask = function () {\n    var maskRowCount = 5;\n    var maskItemHeight;\n    var maskList = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_CheckBoxMaskList',\n      className: 'e-checkboxlist e-fields e-infinite-list e-masklist'\n    });\n    maskList.style.zIndex = '10';\n    var wrapperElem = this.cBox;\n    this.removeMask();\n    if (wrapperElem) {\n      var computedStyle = getComputedStyle(wrapperElem);\n      var liHeight = getListHeight(wrapperElem);\n      var height = wrapperElem.children.length ? parseInt(computedStyle.height, 10) : Math.floor(parseInt(computedStyle.height.split('px')[0], 10)) - 5;\n      if (this.parent.enableAdaptiveUI && this.infiniteRenderMod) {\n        maskList.style.height = height - liHeight + 'px';\n        this.dlg.querySelector('.e-dlg-content').style.overflow = 'hidden';\n      }\n      var backgroundColor = this.isExcel && !wrapperElem.children.length && !this.dlg.classList.contains('e-excelfilter') ? '' : getComputedStyle(this.dlg.querySelector('.e-dlg-content')).backgroundColor;\n      maskList.style.cssText = 'width: ' + computedStyle.width + '; min-height: ' + computedStyle.minHeight + '; height: ' + height + 'px; margin: ' + computedStyle.margin + '; border-style: ' + computedStyle.borderStyle + '; border-width: ' + computedStyle.borderWidth + '; border-color: ' + computedStyle.borderColor + '; position: absolute; background-color: ' + backgroundColor + ';';\n      maskRowCount = Math.floor(height / liHeight);\n      maskRowCount = wrapperElem.children.length > maskRowCount ? wrapperElem.children.length : maskRowCount;\n      maskItemHeight = liHeight + 'px';\n    }\n    var maskTemplate = '<div class=\"e-ftrchk e-mask-ftrchk\">' + '<div class=\"e-checkbox-wrapper\"><input class=\"e-chk-hidden\">' + this.getShimmerTemplate() + this.getShimmerTemplate() + '</div></div>';\n    maskList.innerHTML = '';\n    if (!wrapperElem.children.length) {\n      this.spinner.insertAdjacentHTML('beforebegin', maskTemplate);\n      this.spinner.parentElement.querySelector('.e-ftrchk.e-mask-ftrchk').style.cssText = 'width: 100%; height: ' + maskItemHeight + ';';\n      this.spinner.parentElement.querySelector('.e-checkbox-wrapper').style.width = '100%';\n      var maskSpan = [].slice.call(this.spinner.parentElement.querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n      maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n      maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n    }\n    this.spinner.insertBefore(maskList, this.cBox);\n    for (var i = 0; maskRowCount && i < maskRowCount; i++) {\n      maskList.innerHTML += maskTemplate;\n      maskList.lastElementChild.style.cssText = 'width: 100%; height: ' + maskItemHeight + ';';\n      maskList.lastElementChild.querySelector('.e-checkbox-wrapper').style.width = '100%';\n      var maskSpan = [].slice.call(maskList.querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n      maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n      maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n    }\n    if (this.cBox) {\n      maskList.scrollTop = this.cBox.scrollTop;\n    }\n  };\n  CheckBoxFilterBase.prototype.removeMask = function () {\n    var maskLists = this.dialogObj.element.querySelectorAll('.e-mask-ftrchk');\n    if (maskLists.length) {\n      for (var i = 0; i < maskLists.length; i++) {\n        remove(maskLists[i]);\n      }\n    }\n    var maskParent = this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist');\n    if (maskParent) {\n      remove(this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist'));\n    }\n  };\n  CheckBoxFilterBase.prototype.infiniteScrollHandler = function () {\n    var target = this.cBox;\n    if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending && this.infiniteLoadedElem.length <= this.infiniteSkipCnt + this.parent.filterSettings.itemsCount && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3 && (!this.infiniteDataCount || this.infiniteDataCount > this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)) {\n      this.makeInfiniteScrollRequest();\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending && this.infiniteLoadedElem.length > this.infiniteSkipCnt + this.parent.filterSettings.itemsCount && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.cBox.children).splice(0, this.parent.filterSettings.itemsCount));\n      this.infiniteSkipCnt += this.prevInfiniteScrollDirection === 'down' ? this.parent.filterSettings.itemsCount : this.parent.filterSettings.itemsCount * 3;\n      appendChildren(this.cBox, this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.parent.filterSettings.itemsCount + this.infiniteSkipCnt));\n      this.prevInfiniteScrollDirection = 'down';\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt && this.infiniteLoadedElem.length && this.infiniteLoadedElem.length > this.parent.filterSettings.itemsCount * 3 && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount * 2, this.parent.filterSettings.itemsCount));\n      this.infiniteSkipCnt -= this.prevInfiniteScrollDirection === 'up' ? this.parent.filterSettings.itemsCount : this.parent.filterSettings.itemsCount * 3;\n      infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)), this.cBox);\n      this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n      this.prevInfiniteScrollDirection = 'up';\n    } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt && this.infiniteLoadedElem.length && this.cBox.children.length < this.parent.filterSettings.itemsCount * 3) {\n      infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount * 2, this.infiniteDataCount % this.parent.filterSettings.itemsCount));\n      this.infiniteSkipCnt = (Math.floor(this.infiniteDataCount / this.parent.filterSettings.itemsCount) - 3) * this.parent.filterSettings.itemsCount;\n      infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)), this.cBox);\n      this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n      this.prevInfiniteScrollDirection = 'up';\n    }\n  };\n  CheckBoxFilterBase.prototype.makeInfiniteScrollRequest = function (query) {\n    var _this = this;\n    if (!this.infiniteInitialLoad && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      setTimeout(function () {\n        if (_this.infiniteQueryExecutionPending) {\n          _this.showMask();\n        }\n      }, 500);\n    } else if (!this.infiniteInitialLoad) {\n      createSpinner({\n        target: this.spinner,\n        cssClass: this.parent.cssClass ? this.parent.cssClass : null\n      }, this.parent.createElement);\n      showSpinner(this.spinner);\n    }\n    var fName = 'fn';\n    if (this.infiniteQuery && this.infiniteQuery.queries && this.infiniteQuery.queries.length) {\n      for (var i = 0; i < this.infiniteQuery.queries.length; i++) {\n        if (this.infiniteQuery.queries[i][\"\" + fName] === 'onTake' || this.infiniteQuery.queries[i][\"\" + fName] === 'onSkip') {\n          this.infiniteQuery.queries.splice(i, 1);\n          i--;\n        }\n      }\n    }\n    var existQuery = query ? true : false;\n    query = query ? query : this.infiniteQuery;\n    if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n      this.infiniteSkipCnt = 0;\n    } else {\n      this.infiniteSkipCnt += this.parent.filterSettings.itemsCount;\n    }\n    query.skip(this.infiniteSkipCnt);\n    if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n      query.take(this.parent.filterSettings.itemsCount * 3);\n      this.infiniteSkipCnt += this.parent.filterSettings.itemsCount * 2;\n    } else {\n      query.take(this.parent.filterSettings.itemsCount);\n    }\n    if (!existQuery) {\n      if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n        var args = {\n          requestType: events.filterChoiceRequest,\n          query: query,\n          filterChoiceCount: null,\n          filterModel: this\n        };\n        if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n          args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n        }\n        this.filterEvent(args, query);\n      } else {\n        this.processDataOperation(query);\n        this.infiniteQueryExecutionPending = true;\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n    var _this = this;\n    this.options.dataSource = this.options.dataSource instanceof DataManager ? this.options.dataSource : new DataManager(this.options.dataSource);\n    var allPromise = [];\n    var runArray = [];\n    if (this.isForeignColumn(this.options.column) && isInitial) {\n      var colData = 'result' in this.options.column.dataSource ? new DataManager(this.options.column.dataSource.result) : this.options.column.dataSource;\n      this.foreignKeyQuery.params = query.params;\n      allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n      runArray.push(function (data) {\n        return _this.foreignKeyData = data;\n      });\n    }\n    this.addInfiniteScrollEvent(query);\n    if (this.infiniteRenderMod && this.infiniteInitialLoad && !this.options.isRemote) {\n      var field = this.isForeignColumn(this.options.column) ? this.options.foreignKeyValue : this.options.column.field;\n      this.options.dataSource.executeQuery(new Query().sortBy(field, DataUtil.fnAscending)).then(function (e) {\n        _this.options.dataSource.dataSource.json = e.result;\n        _this.executeQueryOperations(query, allPromise, runArray);\n      });\n    } else {\n      this.executeQueryOperations(query, allPromise, runArray);\n    }\n  };\n  CheckBoxFilterBase.prototype.executeQueryOperations = function (query, allPromise, runArray) {\n    var _this = this;\n    allPromise.push(this.options.dataSource.executeQuery(query));\n    runArray.push(this.dataSuccess.bind(this));\n    var i = 0;\n    Promise.all(allPromise).then(function (e) {\n      _this.infiniteQueryExecutionPending = _this.infiniteRenderMod ? false : _this.infiniteQueryExecutionPending;\n      for (var j = 0; j < e.length; j++) {\n        _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e[j].count : _this.infiniteDataCount;\n        runArray[i++](e[parseInt(j.toString(), 10)].result);\n      }\n    }).catch(function () {\n      if (_this.infiniteRenderMod && _this.parent.filterSettings && _this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n        _this.parent.showMaskRow(undefined, _this.dialogObj.element);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n    if (!this.infiniteInitialLoad && this.infiniteDataCount && (this.infiniteSkipCnt >= this.infiniteDataCount && !this.infiniteSearchValChange || e.length === 0)) {\n      return;\n    }\n    this.fullData = e;\n    var args1 = {\n      dataSource: this.fullData,\n      executeQuery: true,\n      field: this.options.field\n    };\n    this.parent.notify(events.beforeCheckboxRenderer, args1);\n    if (args1.executeQuery) {\n      var query = new Query();\n      if (!this.customQuery) {\n        this.isExecuteLocal = true;\n        this.queryGenerate(query);\n        this.isExecuteLocal = false;\n      }\n      // query.select(this.options.field);\n      var result = new DataManager(args1.dataSource).executeLocal(query);\n      var col = this.options.column;\n      this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData, this).records || [];\n    }\n    var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n    this.processDataSource(null, true, data, args1);\n    if (this.infiniteRenderMod && this.infiniteInitialLoad || !this.infiniteRenderMod) {\n      if (this.sInput) {\n        this.sInput.focus();\n      } else if (this.dlg.querySelector('.e-chk-hidden') && this.dlg.querySelector('.e-ftrchk')) {\n        this.dlg.querySelector('.e-chk-hidden').focus();\n        this.dlg.querySelector('.e-ftrchk').classList.add('e-chkfocus');\n      }\n    }\n    if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n      this.infiniteInitialLoad = false;\n      this.infiniteSearchValChange = false;\n    }\n    var args = {\n      requestType: events.filterAfterOpen,\n      columnName: this.options.field,\n      columnType: this.options.type\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    this.parent.notify(events.cBoxFltrComplete, args);\n    if (this.isCheckboxFilterTemplate) {\n      hideSpinner(this.spinner);\n    }\n  };\n  CheckBoxFilterBase.prototype.queryGenerate = function (query) {\n    if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n      var moduleName = this.options.dataManager.adaptor.getModuleName;\n      if (!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === 'ODataV4Adaptor') {\n        this.parent.getDataModule().searchQuery(query);\n      } else {\n        var searchSettings = this.parent.searchSettings;\n        var fields = searchSettings.fields.length ? searchSettings.fields : this.options.columns.map(function (f) {\n          return f.field;\n        });\n        query.search(searchSettings.key, fields, searchSettings.operator, searchSettings.ignoreCase, searchSettings.ignoreAccent);\n      }\n    }\n    if (this.options.filteredColumns.length) {\n      var cols = [];\n      for (var i = 0; i < this.options.filteredColumns.length; i++) {\n        var filterColumn = this.options.filteredColumns[parseInt(i.toString(), 10)];\n        if (this.options.uid) {\n          filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n          if (filterColumn.uid !== this.options.uid) {\n            cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n          }\n        } else {\n          if (filterColumn.field !== this.options.field) {\n            cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n          }\n        }\n      }\n      var predicate = this.getPredicateFromCols(cols, this.isExecuteLocal);\n      if (predicate) {\n        query.where(predicate);\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n    showSpinner(this.spinner);\n    // query = query ? query : this.options.query.clone();\n    // query.requiresCount();\n    // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n    // let res: { result: Object[] } = result as { result: Object[] };\n    this.isExecuteLocal = true;\n    this.updateResult();\n    this.isExecuteLocal = false;\n    var args1 = {\n      dataSource: this.fullData,\n      isCheckboxFilterTemplate: false,\n      column: this.options.column,\n      element: this.cBox,\n      type: this.options.type,\n      format: this.options.type,\n      btnObj: this.options.isResponsiveFilter ? null : this.dialogObj.btnObj[0],\n      searchBox: this.searchBox\n    };\n    this.parent.notify(events.beforeCheckboxfilterRenderer, args1);\n    this.isCheckboxFilterTemplate = args1.isCheckboxFilterTemplate;\n    if (!this.isCheckboxFilterTemplate) {\n      this.createFilterItems(dataSource, isInitial, args);\n    } else if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      this.removeMask();\n    }\n  };\n  CheckBoxFilterBase.prototype.processSearch = function (query) {\n    this.processDataOperation(query);\n  };\n  CheckBoxFilterBase.prototype.updateResult = function () {\n    this.result = {};\n    var predicate = this.infiniteRenderMod && this.existingPredicate[this.options.field] ? this.getPredicateFromCols(this.existingPredicate[this.options.field], this.isExecuteLocal) : this.getPredicateFromCols(this.options.filteredColumns, this.isExecuteLocal);\n    var query = new Query();\n    if (predicate) {\n      query.where(predicate);\n    }\n    this.parent.notify(events.beforeCheckboxRendererQuery, {\n      query: query\n    });\n    var result = new DataManager(this.fullData).executeLocal(query);\n    for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n      var res = result_1[_i];\n      this.result[getObject(this.options.field, res)] = true;\n    }\n  };\n  CheckBoxFilterBase.prototype.clickHandler = function (e) {\n    var _a;\n    if (!isNullOrUndefined(Global.timer)) {\n      clearTimeout(Global.timer);\n    }\n    var target = e.target;\n    if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer' && parentsUntil(target, 'e-mask-ftrchk')) {\n      return;\n    }\n    var elem = parentsUntil(target, 'e-checkbox-wrapper');\n    if (parentsUntil(target, 'e-searchbox')) {\n      this.searchBoxClick(e);\n    }\n    if (elem && !this.isCheckboxFilterTemplate) {\n      var selectAll = elem.querySelector('.e-selectall');\n      if (selectAll) {\n        this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n      } else {\n        toogleCheckbox(elem.parentElement);\n        if (this.infiniteRenderMod && !elem.parentElement.querySelector('.e-add-current')) {\n          this.localInfiniteSelectionInteracted = true;\n          var caseSen = this.options.allowCaseSensitive;\n          var span = elem.parentElement.querySelector('.e-frame');\n          var input = span.previousSibling;\n          var optr = input.checked ? 'equal' : 'notequal';\n          var pred = input.checked ? 'or' : 'and';\n          var defaults = {\n            field: this.options.field,\n            predicate: pred,\n            uid: this.options.uid,\n            operator: optr,\n            type: this.options.type,\n            matchCase: caseSen,\n            ignoreAccent: this.options.ignoreAccent\n          };\n          var value = this.values[parentsUntil(input, 'e-ftrchk').getAttribute('uid')];\n          this.updateInfiniteManualSelectPred(defaults, value);\n          if (this.infiniteRenderMod && !this.options.isRemote && this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {\n            var predicate = this.getPredicateFromCols((_a = this.options.filteredColumns).concat.apply(_a, this.infiniteManualSelectMaintainPred), true);\n            var query = new Query();\n            if (predicate) {\n              query.where(predicate);\n            }\n            var result = new DataManager(this.infinitePermenantLocalData).executeLocal(query);\n            if (this.options.parentTotalDataCount !== result.length) {\n              this.options.parentTotalDataCount = result.length;\n            }\n            if (!this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {\n              this.infiniteUnloadParentExistPred = [];\n            }\n          }\n          if (this.infiniteUnloadParentExistPred.length && (this.options.parentTotalDataCount === this.infiniteDataCount || !this.options.parentTotalDataCount)) {\n            this.infiniteUnloadParentExistPred = [];\n          }\n        }\n      }\n      this.updateIndeterminatenBtn();\n      elem.querySelector('.e-chk-hidden').focus();\n    }\n    this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n  };\n  CheckBoxFilterBase.prototype.updateInfiniteManualSelectPred = function (defaults, value) {\n    for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n      var predmdl = this.infiniteManualSelectMaintainPred[i];\n      if (predmdl.value + '' === value + '' && (predmdl.operator === 'equal' || predmdl.operator === 'notequal')) {\n        this.infiniteManualSelectMaintainPred.splice(i, 1);\n        break;\n      }\n    }\n    if (defaults.predicate === 'or' && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll) || defaults.predicate === 'and' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {\n      this.infiniteManualSelectMaintainPred.push(extend({}, {\n        value: value\n      }, defaults));\n      if (defaults.predicate === 'or') {\n        this.options.parentTotalDataCount++;\n      } else {\n        this.options.parentTotalDataCount--;\n      }\n    }\n  };\n  /**\n   * Method to set the next target element on keyboard navigation using arrow keys.\n   *\n   * @param {KeyboardEventArgs} e - Defines the Keyboard event argument\n   * @param {HTMLElement[]} focusableElements - Defines the Focusable elements\n   * @returns {void}\n   */\n  CheckBoxFilterBase.prototype.focusNextOrPrev = function (e, focusableElements) {\n    var nextIndex = e.key === 'ArrowUp' ? focusableElements.indexOf(document.activeElement) - 1 : focusableElements.indexOf(document.activeElement) + 1;\n    var nextElement = focusableElements[(nextIndex + focusableElements.length) % focusableElements.length];\n    // Set focus on the next / previous element\n    if (nextElement) {\n      nextElement.focus();\n      var target = nextElement.classList.contains('e-chk-hidden') ? parentsUntil(nextElement, 'e-ftrchk') : nextElement;\n      this.setFocus(target);\n    }\n  };\n  CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n    if (e.key === 'Tab' || (e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey) {\n      this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n    }\n    if ((e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey && this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox') {\n      e.preventDefault();\n      var focusableElements = Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex=\"-1\"])'));\n      this.focusNextOrPrev(e, focusableElements);\n    }\n  };\n  CheckBoxFilterBase.prototype.setFocus = function (elem) {\n    var prevElem = this.dlg.querySelector('.e-chkfocus');\n    if (prevElem) {\n      prevElem.classList.remove('e-chkfocus');\n    }\n    if (elem && elem !== prevElem) {\n      elem.classList.add('e-chkfocus');\n    }\n  };\n  CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n    if (this.infiniteRenderMod) {\n      this.localInfiniteSelectAllClicked = true;\n      this.infiniteLocalSelectAll = checked;\n      this.infiniteUnloadParentExistPred = [];\n      this.infiniteManualSelectMaintainPred = [];\n    }\n    var cBoxes = this.infiniteRenderMod ? this.infiniteLoadedElem.map(function (arr) {\n      return arr.querySelector('.e-frame');\n    }) : [].slice.call(this.cBox.querySelectorAll('.e-frame:not(.e-add-current)'));\n    for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n      var cBox = cBoxes_1[_i];\n      removeAddCboxClasses(cBox, checked);\n      setChecked(cBox.previousSibling, checked);\n    }\n  };\n  CheckBoxFilterBase.prototype.dialogOpen = function () {\n    if (this.parent.element.classList.contains('e-device')) {\n      this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n      if (!this.options.isResponsiveFilter) {\n        this.dialogObj.element.querySelector('.e-btn').focus();\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n    var elem = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n    setChecked(elem.querySelector('input'), checked);\n    var label = elem.querySelector('.e-label');\n    var dummyData = extendObjWithFn({}, data, {\n      column: this.options.column,\n      parent: this.parent\n    });\n    var innerText = this.options.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    label[\"\" + innerText] = !isNullOrUndefined(value) && value.toString().length ? this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(value) : value : this.getLocalizedLabel('Blanks');\n    var checkboxUid = getUid('cbox');\n    label.setAttribute('id', checkboxUid + 'cboxLabel');\n    elem.querySelector('input').setAttribute('aria-labelledby', label.id);\n    if (label.innerHTML === this.getLocalizedLabel('Blanks')) {\n      this.isBlanks = true;\n    }\n    if (typeof value === 'boolean') {\n      label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n    }\n    addClass([label], ['e-checkboxfiltertext']);\n    if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll') && data[this.options.column.field] !== this.getLocalizedLabel('AddCurrentSelection')) {\n      label.innerHTML = '';\n      var isReactCompiler = this.parent.isReact && this.options.column.filter && typeof this.options.column.filter.itemTemplate !== 'string' && !(this.options.column.filter.itemTemplate.prototype && this.options.column.filter.itemTemplate.prototype.CSPTemplate);\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.parent.parentDetails.parentInstObj.isReact;\n      if (isReactCompiler || isReactChild) {\n        this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n        this.parent.renderTemplates();\n      } else {\n        appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, null, this.parent.root));\n      }\n    }\n    return elem;\n  };\n  CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n    var cnt = this.infiniteRenderMod ? this.infiniteLoadedElem.length : this.cBox.children.length - 1;\n    var className = [];\n    var disabled = false;\n    var elem = this.infiniteRenderMod ? this.sBox.querySelector('.e-selectall') : this.cBox.querySelector('.e-selectall');\n    var selected = this.infiniteRenderMod ? this.infiniteLoadedElem.filter(function (arr) {\n      return arr.querySelector('.e-check');\n    }).length : this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)').length;\n    if (this.cBox.querySelector('.e-add-current')) {\n      cnt -= 1;\n    }\n    var btn;\n    if (!this.options.isResponsiveFilter) {\n      btn = this.dialogObj.btnObj[0];\n      btn.disabled = false;\n    }\n    var input = elem.previousSibling;\n    setChecked(input, false);\n    input.indeterminate = false;\n    if (this.infiniteRenderMod && this.sInput.value === '' && !this.options.parentCurrentViewDataCount && !this.localInfiniteSelectionInteracted && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll && !selected) && (cnt !== selected || cnt === selected)) {\n      selected = 0;\n    } else if (this.infiniteRenderMod && this.infiniteLoadedElem.length < this.infiniteDataCount && this.infiniteUnloadParentExistPred.length && (!selected || cnt === selected) && this.infiniteLocalSelectAll) {\n      if (!selected) {\n        selected += this.infiniteUnloadParentExistPred.length;\n      } else {\n        cnt += this.infiniteUnloadParentExistPred.length;\n      }\n    }\n    if (cnt === selected) {\n      if (this.infiniteRenderMod) {\n        this.infiniteLocalSelectAll = true;\n        this.localInfiniteSelectAllClicked = true;\n        this.infiniteManualSelectMaintainPred = [];\n      }\n      className = ['e-check'];\n      setChecked(input, true);\n    } else if (selected) {\n      className = ['e-stop'];\n      input.indeterminate = true;\n    } else {\n      if (this.infiniteRenderMod) {\n        this.infiniteLocalSelectAll = false;\n        this.localInfiniteSelectAllClicked = true;\n        this.infiniteManualSelectMaintainPred = [];\n      }\n      className = ['e-uncheck'];\n      disabled = true;\n      if (btn) {\n        btn.disabled = true;\n      }\n    }\n    if (btn) {\n      this.filterState = !btn.disabled;\n      btn.dataBind();\n    }\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    addClass([elem], className);\n    this.parent.notify(events.refreshCustomFilterOkBtn, {\n      disabled: disabled\n    });\n  };\n  CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n    var _a, _b, _c;\n    var cBoxes = this.parent.createElement('div');\n    var btn;\n    var disabled = false;\n    if (!this.options.isResponsiveFilter) {\n      btn = this.dialogObj.btnObj[0];\n    }\n    var nullCounter = -1;\n    var key = 'ejValue';\n    if (!args1.executeQuery) {\n      key = args1.field;\n    }\n    for (var i = 0; i < data.length; i++) {\n      var val = getValue(key, data[parseInt(i.toString(), 10)]);\n      if (val === '' || isNullOrUndefined(val)) {\n        nullCounter = nullCounter + 1;\n      }\n    }\n    if (!this.infiniteRenderMod) {\n      this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n    }\n    if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n      this.removeMask();\n    }\n    if (data.length && !this.renderEmpty) {\n      var selectAllValue = this.getLocalizedLabel('SelectAll');\n      var innerDiv = this.cBox.querySelector('.e-checkfltrnmdiv');\n      if (innerDiv) {\n        innerDiv.classList.remove('e-checkfltrnmdiv');\n      }\n      var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n      if (this.parent.cssClass) {\n        if (this.parent.cssClass.indexOf(' ') !== -1) {\n          addClass([checkBox], this.parent.cssClass.split(' '));\n        } else {\n          addClass([checkBox], [this.parent.cssClass]);\n        }\n      }\n      if (this.infiniteInitialLoad || !this.infiniteRenderMod) {\n        var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n        selectAll.querySelector('.e-frame').classList.add('e-selectall');\n        if (this.infiniteRenderMod) {\n          selectAll.classList.add('e-infinitescroll');\n          if (this.parent.enableAdaptiveUI) {\n            this.spinner.style.height = this.spinner.offsetHeight - getListHeight(this.cBox) + 'px';\n          }\n          this.sBox.insertBefore(selectAll, this.spinner);\n        } else {\n          cBoxes.appendChild(selectAll);\n        }\n      } else if (this.sBox.querySelector('.e-ftrchk .e-selectall')) {\n        this.sBox.querySelector('.e-ftrchk .e-selectall').previousSibling.disabled = false;\n        this.sBox.querySelector('.e-ftrchk .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n      }\n      var predicate = new Predicate('field', 'equal', this.options.field);\n      if (this.options.foreignKeyValue) {\n        predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n      }\n      var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n      if (this.sInput && this.sInput.value) {\n        var predicateCheckBox = this.createCheckbox(this.getLocalizedLabel('AddCurrentSelection'), false, (_b = {}, _b[this.options.field] = this.getLocalizedLabel('AddCurrentSelection'), _b));\n        if (this.parent.cssClass) {\n          if (this.parent.cssClass.indexOf(' ') !== -1) {\n            addClass([predicateCheckBox], this.parent.cssClass.split(' '));\n          } else {\n            addClass([predicateCheckBox], [this.parent.cssClass]);\n          }\n        }\n        if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2]) && this.sBox.children[2].innerText !== this.getLocalizedLabel('AddCurrentSelection') || !this.infiniteRenderMod) {\n          var predicateElement = createCboxWithWrap(getUid('cbox'), predicateCheckBox, 'e-ftrchk');\n          predicateElement.querySelector('.e-frame').classList.add('e-add-current');\n          if (this.infiniteRenderMod) {\n            predicateElement.classList.add('e-infinitescroll');\n            this.sBox.insertBefore(predicateElement, this.spinner);\n            var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n            var reduceHeight = Math.ceil(predicateElement.getBoundingClientRect().height);\n            checkBoxListElem.style.height = parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0], 10) - reduceHeight + 'px';\n            checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n          } else {\n            cBoxes.appendChild(predicateElement);\n          }\n        } else if (this.sBox.querySelector('.e-ftrchk .e-add-current')) {\n          this.sBox.querySelector('.e-ftrchk .e-add-current').previousSibling.disabled = false;\n          this.sBox.querySelector('.e-ftrchk .e-add-current').parentElement.classList.remove('e-checkbox-disabled');\n        }\n      } else if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2]) && this.sBox.children[2].innerText === this.getLocalizedLabel('AddCurrentSelection')) {\n        var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n        var increaseHeight = Math.ceil(this.sBox.children[2].getBoundingClientRect().height);\n        checkBoxListElem.style.height = parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0], 10) + increaseHeight + 'px';\n        checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n        remove(this.sBox.children[2]);\n      }\n      var isRndere = void 0;\n      for (var i = 0; i < data.length; i++) {\n        var uid = getUid('cbox');\n        this.values[\"\" + uid] = getValue(key, data[parseInt(i.toString(), 10)]);\n        var value = getValue(this.options.field, data[parseInt(i.toString(), 10)]);\n        if (this.options.formatFn) {\n          value = this.valueFormatter.toView(value, this.options.formatFn);\n        }\n        var args_1 = {\n          value: value,\n          column: this.options.column,\n          data: data[parseInt(i.toString(), 10)]\n        };\n        this.parent.notify(events.filterCboxValue, args_1);\n        value = args_1.value;\n        if (value === '' || isNullOrUndefined(value)) {\n          if (isRndere) {\n            continue;\n          }\n          isRndere = true;\n        }\n        if (this.infiniteRenderMod) {\n          this.updateInfiniteUnLoadedCheckboxExistPred(value, this.infiniteUnloadParentExistPred);\n        }\n        var checkbox = this.localInfiniteSelectAllClicked ? this.createCheckbox(value, this.infiniteLocalSelectAll, getValue('dataObj', data[i])) : this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[\"\" + uid]), getValue('dataObj', data[i]));\n        cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n        if (this.infiniteRenderMod) {\n          cBoxes.lastChild.style.height = getListHeight(this.cBox) + 'px';\n        }\n      }\n      var scrollTop = this.cBox.scrollTop;\n      if (!this.infiniteRenderMod || this.infiniteSearchValChange) {\n        this.cBox.innerHTML = '';\n      } else if (this.infiniteRenderMod && this.cBox.children.length) {\n        infiniteRemoveElements([].slice.call(this.cBox.children).splice(0, this.parent.filterSettings.itemsCount));\n      }\n      if (this.infiniteRenderMod) {\n        (_c = this.infiniteLoadedElem).push.apply(_c, [].slice.call(cBoxes.children));\n        this.itemsCnt = nullCounter !== -1 ? this.infiniteLoadedElem.length - nullCounter : this.infiniteLoadedElem.length;\n      }\n      if (this.infiniteUnloadParentExistPred.length && (this.infiniteLoadedElem.length >= this.infiniteDataCount || !this.options.parentCurrentViewDataCount || this.options.parentTotalDataCount === this.infiniteDataCount && this.options.parentCurrentViewDataCount)) {\n        this.infiniteUnloadParentExistPred = [];\n      }\n      appendChildren(this.cBox, [].slice.call(cBoxes.children));\n      if (this.infiniteRenderMod && !this.infiniteScrollAppendDiff) {\n        this.infiniteScrollAppendDiff = Math.round(scrollTop - this.cBox.scrollTop);\n      }\n      this.updateIndeterminatenBtn();\n      if (!this.infiniteRenderMod) {\n        if (btn) {\n          btn.disabled = false;\n        }\n        disabled = false;\n      } else {\n        if (btn && btn.disabled) {\n          disabled = true;\n        } else {\n          disabled = false;\n        }\n      }\n    } else {\n      cBoxes.appendChild(this.parent.createElement('span', {\n        innerHTML: this.getLocalizedLabel('NoResult')\n      }));\n      this.cBox.innerHTML = '';\n      if (this.infiniteRenderMod) {\n        var selectAll = this.sBox.querySelector('.e-ftrchk .e-selectall');\n        if (selectAll) {\n          var selectAllParent = selectAll.parentElement.parentElement;\n          if (selectAll.classList.contains('e-check')) {\n            toogleCheckbox(selectAllParent);\n          } else if (selectAll.classList.contains('e-stop')) {\n            toogleCheckbox(selectAllParent);\n            selectAll.classList.remove('e-stop');\n            toogleCheckbox(selectAllParent);\n          }\n          selectAll.previousSibling.disabled = true;\n          selectAll.parentElement.classList.add('e-checkbox-disabled');\n        }\n        var addCurrSelection = this.sBox.querySelector('.e-ftrchk .e-add-current');\n        if (addCurrSelection) {\n          var addCurrSelectionParent = addCurrSelection.parentElement.parentElement;\n          if (addCurrSelection.classList.contains('e-check')) {\n            toogleCheckbox(addCurrSelectionParent);\n          }\n          addCurrSelection.previousSibling.disabled = true;\n          addCurrSelection.parentElement.classList.add('e-checkbox-disabled');\n        }\n      }\n      this.cBox.appendChild(this.parent.createElement('div', {\n        className: 'e-checkfltrnmdiv'\n      }));\n      appendChildren(this.cBox.children[0], [].slice.call(cBoxes.children));\n      if (btn) {\n        btn.disabled = true;\n      }\n      disabled = true;\n      this.filterState = !disabled;\n    }\n    if (btn && data.length) {\n      this.filterState = !btn.disabled;\n      btn.dataBind();\n    }\n    var args = {\n      requestType: events.filterChoiceRequest,\n      dataSource: this.renderEmpty ? [] : data\n    };\n    var filterModel = 'filterModel';\n    args[\"\" + filterModel] = this;\n    this.parent.notify(events.cBoxFltrComplete, args);\n    this.parent.notify(events.refreshCustomFilterOkBtn, {\n      disabled: disabled\n    });\n    if (this.infiniteRenderMod && this.infiniteInitialLoad) {\n      this.cBox.style.marginTop = '0px';\n    }\n    hideSpinner(this.spinner);\n  };\n  CheckBoxFilterBase.prototype.updateInfiniteUnLoadedCheckboxExistPred = function (value, updatePredArr) {\n    for (var j = 0; j < updatePredArr.length; j++) {\n      var pred = updatePredArr[j];\n      var predValue = pred.value instanceof Date ? this.valueFormatter.toView(pred.value, this.options.formatFn) : pred.value;\n      var column = this.options.column;\n      if (column.isForeignColumn()) {\n        var foreignDataObj = getForeignData(column, {}, predValue, this.foreignKeyData)[0];\n        value = getValue(column.foreignKeyField, foreignDataObj);\n      }\n      if (value === predValue && (pred.operator === 'equal' || pred.operator === 'notequal')) {\n        this.infiniteManualSelectMaintainPred.push(updatePredArr[j]);\n        updatePredArr.splice(j, 1);\n        j--;\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n    if (!this.isFiltered || !isColFiltered) {\n      return true;\n    } else {\n      var checkState = this.sInput && this.sInput.value ? true : this.result[\"\" + value];\n      if (this.infiniteRenderMod) {\n        return checkState;\n      } else {\n        return this.options.operator === 'notequal' ? !checkState : checkState;\n      }\n    }\n  };\n  CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData, checkboxFilter) {\n    var len = json.length;\n    var result = [];\n    var value;\n    var ejValue = 'ejValue';\n    var lookup = {};\n    var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n    while (len--) {\n      value = json[parseInt(len.toString(), 10)];\n      if (column && column.type === 'dateonly' && typeof value[\"\" + field] === 'string' && value[\"\" + field]) {\n        var arr = value[\"\" + field].split(/[^0-9.]/);\n        value[\"\" + field] = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10));\n      }\n      value = getObject(field, value); //local remote diff, check with mdu\n      var currentFilterValue = typeof value === 'string' && !isNullOrUndefined(checkboxFilter) &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      !isNullOrUndefined(checkboxFilter.parent) && !isNullOrUndefined(checkboxFilter.parent.filterSettings) &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      !isNullOrUndefined(checkboxFilter.parent.filterSettings.enableCaseSensitivity) ? value.toLowerCase() : value;\n      if (!(currentFilterValue in lookup)) {\n        var obj = {};\n        obj[\"\" + ejValue] = value;\n        lookup[\"\" + currentFilterValue] = true;\n        if (isForeignKey) {\n          var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n          setValue(events.foreignKeyData, foreignDataObj, json[parseInt(len.toString(), 10)]);\n          value = getValue(column.foreignKeyValue, foreignDataObj);\n        }\n        setValue(field, isNullOrUndefined(value) ? null : value, obj);\n        setValue('dataObj', json[parseInt(len.toString(), 10)], obj);\n        result.push(obj);\n      }\n    }\n    return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n  };\n  CheckBoxFilterBase.getPredicate = function (columns, isExecuteLocal) {\n    var cols = DataUtil.distinct(columns, 'field', true) || [];\n    var collection = [];\n    var pred = {};\n    for (var i = 0; i < cols.length; i++) {\n      collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[parseInt(i.toString(), 10)].field));\n      if (collection.length !== 0) {\n        pred[cols[parseInt(i.toString(), 10)].field] = CheckBoxFilterBase.generatePredicate(collection, isExecuteLocal);\n      }\n    }\n    return pred;\n  };\n  CheckBoxFilterBase.generatePredicate = function (cols, isExecuteLocal) {\n    var len = cols ? cols.length : 0;\n    var predicate;\n    var operate = 'or';\n    var first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n    first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n    if (first.type === 'date' || first.type === 'datetime' || first.type === 'dateonly') {\n      predicate = getDatePredicate(first, first.type, isExecuteLocal);\n    } else {\n      predicate = first.ejpredicate ? first.ejpredicate : new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n    }\n    for (var p = 1; p < len; p++) {\n      cols[parseInt(p.toString(), 10)] = CheckBoxFilterBase.updateDateFilter(cols[parseInt(p.toString(), 10)]);\n      if (len > 2 && p > 1 && (cols[p].predicate === 'or' && cols[p - 1].predicate === 'or' || cols[p].predicate === 'and' && cols[p - 1].predicate === 'and')) {\n        if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n          predicate.predicates.push(getDatePredicate(cols[parseInt(p.toString(), 10)], cols[p].type, isExecuteLocal));\n        } else {\n          predicate.predicates.push(new Predicate(cols[p].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent));\n        }\n      } else {\n        if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n          if (cols[parseInt(p.toString(), 10)].predicate === 'and' && cols[parseInt(p.toString(), 10)].operator === 'equal') {\n            predicate = predicate[\"\" + operate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n          } else {\n            predicate = predicate[cols[parseInt(p.toString(), 10)].predicate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n          }\n        } else {\n          predicate = cols[parseInt(p.toString(), 10)].ejpredicate ? predicate[cols[parseInt(p.toString(), 10)].predicate](cols[parseInt(p.toString(), 10)].ejpredicate) : predicate[cols[parseInt(p.toString(), 10)].predicate](cols[parseInt(p.toString(), 10)].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent);\n        }\n      }\n    }\n    return predicate || null;\n  };\n  CheckBoxFilterBase.getCaseValue = function (filter) {\n    if (isNullOrUndefined(filter.matchCase)) {\n      if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof filter.value === 'string') {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      return filter.matchCase;\n    }\n  };\n  CheckBoxFilterBase.updateDateFilter = function (filter) {\n    if (filter.type === 'date' || filter.type === 'datetime' || filter.type === 'dateonly' || filter.value instanceof Date) {\n      filter.type = filter.type || 'date';\n    }\n    return filter;\n  };\n  return CheckBoxFilterBase;\n}();\nexport { CheckBoxFilterBase };","map":{"version":3,"names":["EventHandler","isNullOrUndefined","extend","classList","addClass","removeClass","Browser","getValue","setValue","parentsUntil","getUid","appendChildren","getDatePredicate","getObject","extendObjWithFn","eventPromise","setChecked","clearReactVueTemplates","padZero","Global","remove","debounce","Internationalization","SanitizeHtmlHelper","DataUtil","Query","DataManager","Predicate","createCheckBox","events","ValueFormatter","getForeignData","resetDialogAppend","Dialog","Input","createSpinner","hideSpinner","showSpinner","getFilterMenuPostion","toogleCheckbox","createCboxWithWrap","removeAddCboxClasses","getColumnByForeignKeyValue","getListHeight","infiniteRemoveElements","infiniteAppendElements","CheckBoxFilterBase","parent","searchInputArgs","isExecuteLocal","queryFilteredColumn","existingPredicate","foreignKeyQuery","filterState","values","renderEmpty","isCheckboxFilterTemplate","infiniteRenderMod","infiniteInitialLoad","infiniteSearchValChange","infinitePermenantLocalData","infiniteQueryExecutionPending","infiniteSkipCnt","infiniteScrollAppendDiff","prevInfiniteScrollDirection","infiniteLoadedElem","infiniteDataCount","infiniteLocalSelectAll","localInfiniteSelectAllClicked","localInfiniteSelectionInteracted","infiniteManualSelectMaintainPred","id","element","valueFormatter","locale","cBoxTrue","createElement","checked","label","cBoxFalse","insertBefore","className","attrs","type","firstChild","querySelector","add","enableRtl","cssClass","indexOf","split","prototype","destroy","closeDialog","wireEvents","dlg","clickHandler","keyupHandler","searchHandler","searchBoxKeyUp","elem","dialogObj","unWireEvents","foreignKeyFilter","args","fColl","mPredicate","_this","fPredicate","filterCollection","query","clone","options","column","dataSource","executeQuery","where","then","e","columnData","result","notify","generateQuery","predicate","ejpredicate","predicates","fpred","i","length","push","field","parseInt","toString","matchCase","ignoreCase","ignoreAccent","operator","value","filter","col","handler","searchBoxClick","target","contains","sInput","event","refreshCheckboxes","updateSearchIcon","focus","key","shiftKey","loadingIndicator","indicatorType","showMaskRow","undefined","sIcon","document","body","setAttribute","localeObj","getConstant","getLocalizedLabel","updateDataSource","str","obj","updateModel","actualPredicate","dataManager","format","filteredColumns","filterSettings","columns","allowCaseSensitive","uid","disableHtmlEncode","isFiltered","enableInfiniteScrolling","infiniteUnloadParentExistPred","slice","getAndSetChkElem","sBox","hideSearchbox","title","searchBox","appendChild","floatLabelType","properties","placeholder","createInput","spinner","cBox","showDialog","requestType","filterBeforeOpen","columnName","columnType","cancel","filterModel","cBoxFltrBegin","visible","content","close","bind","width","animationSettings","effect","buttons","click","btnClick","buttonModel","isExcel","isPrimary","created","dialogCreated","open","dialogOpen","isStringTemplate","renderResponsiveFilter","dialogLabel","isResponsiveFilter","responsiveCnt","appendTo","style","maxHeight","height","show","getContent","firstElementChild","offsetHeight","enableAdaptiveUI","showMask","getAllData","marginTop","position","X","Y","left","isDevice","showColumnMenu","filterDialogCreated","openDialog","isRemote","json","isDestroyed","isBlanks","filterTemplateCol","getFilterItemTemplate","registeredTemplate","filterItemTemplate","destroyTemplate","isReact","isVue","filterMenuClose","parentElement","itemTemplate","innerHTML","isColumnMenuFilterClosing","gridPopup","getElementById","filterDialogClose","clearFilter","instance","fltrPrevent","action","tagName","toLowerCase","keyCode","fltrBtnHandler","text","textContent","afterFilterColumnMenuClose","focusModule","filterfocus","call","querySelectorAll","check","optr","ddlValue","ej2_instances","isMenuNotEqual","searchInput","caseSen","defaults","isNotEqual","itemsCnt","val","coll","complexQueryPredicate","filterPreventColumns","infiniteSearchPred","isComplex","infiniteFltrBtnHandler","getAttribute","addCurrSelection","existingPredicate_1","_loop_1","j","some","data","initiateFilter","isClearFilter","checkBoxChecked","fObj","concat","generateNullValuePredicates","filterColumns","notifyFilterPrevEvent","pred","dummyDefaults","apply","parentCurrentViewDataCount","unshift","arg1","arg2","arg3","arg4","arg5","arg6","firstVal","or","isForeignColumn","foreignQuery","queries","fn","parsed","parseFloat","foreignKeyValue","predicte","moduleName","adaptor","getModuleName","intl","parseDate","Date","getFullYear","getMonth","getDate","addDistinct","filterSearchBegin","filterChoiceCount","itemsCount","trigger","actionBegin","filterargs","filterObj","emptyValPredicte","generatePredicate","and","colData","fullData","makeInfiniteScrollRequest","requiresCount","take","search","filterEvent","processSearch","getPredicateFromCols","getPredicate","predicateList","isGrid","getForeignKeyColumns","foreignColumn","_i","_a","Object","keys","prop","getColumnByField","getQuery","customQuery","getDataModule","filterChoiceRequest","distincts","queryGenerate","processDataOperation","filteredColumn","distinct","gridQuery","queryOptions","getPredicateFields","map","query1","executeLocal","item","assign","select","sortBy","moduleName_1","forEach","Array","isArray","p","defObj","dataStateChange","state","addInfiniteScrollEvent","def","deffered","promise","dataResult","dataSuccess","infiniteQuery","infiniteScrollHandler","infiniteScrollMouseKeyUpHandler","infiniteScrollMouseKeyDownHandler","children","scrollTop","scrollHeight","timer","setTimeout","getShimmerTemplate","maskRowCount","maskItemHeight","maskList","zIndex","wrapperElem","removeMask","computedStyle","getComputedStyle","liHeight","Math","floor","overflow","backgroundColor","cssText","minHeight","margin","borderStyle","borderWidth","borderColor","maskTemplate","insertAdjacentHTML","maskSpan","lastElementChild","maskLists","maskParent","splice","fName","existQuery","skip","isInitial","allPromise","runArray","params","foreignKeyData","fnAscending","executeQueryOperations","Promise","all","count","catch","args1","beforeCheckboxRenderer","filteredData","getDistinct","records","processDataSource","filterAfterOpen","cBoxFltrComplete","searchSettings","searchQuery","fields","f","cols","filterColumn","updateResult","btnObj","beforeCheckboxfilterRenderer","createFilterItems","beforeCheckboxRendererQuery","result_1","res","clearTimeout","selectAll","updateAllCBoxes","span","input","previousSibling","updateInfiniteManualSelectPred","parentTotalDataCount","updateIndeterminatenBtn","setFocus","predmdl","focusNextOrPrev","focusableElements","nextIndex","activeElement","nextElement","altKey","preventDefault","from","prevElem","cBoxes","arr","cBoxes_1","createCheckbox","cloneNode","dummyData","innerText","enableHtmlSanitizer","sanitize","checkboxUid","template","isReactCompiler","CSPTemplate","isReactChild","parentDetails","parentInstObj","renderTemplates","root","cnt","disabled","selected","btn","indeterminate","dataBind","refreshCustomFilterOkBtn","_b","_c","nullCounter","selectAllValue","innerDiv","checkBox","isColFiltered","predicateCheckBox","predicateElement","checkBoxListElem","reduceHeight","ceil","getBoundingClientRect","increaseHeight","isRndere","formatFn","toView","args_1","filterCboxValue","updateInfiniteUnLoadedCheckboxExistPred","checkbox","getCheckedState","lastChild","round","selectAllParent","addCurrSelectionParent","updatePredArr","predValue","foreignDataObj","foreignKeyField","checkState","checkboxFilter","len","ejValue","lookup","isForeignKey","currentFilterValue","enableCaseSensitivity","group","sort","collection","operate","first","updateDateFilter","getCaseValue"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/common/checkbox-filter-base.js"],"sourcesContent":["/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked, clearReactVueTemplates, padZero, Global } from '../base/util';\nimport { remove, debounce, Internationalization, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData, resetDialogAppend } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue, getListHeight, infiniteRemoveElements, infiniteAppendElements } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     *\n     * @param {IXLFilter} parent - specifies the IXLFilter\n     * @hidden\n     */\n    function CheckBoxFilterBase(parent) {\n        this.searchInputArgs = null;\n        this.isExecuteLocal = false;\n        this.queryFilteredColumn = [];\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        /** @hidden */\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.isCheckboxFilterTemplate = false;\n        this.infiniteRenderMod = false;\n        // for infinite scroll ui\n        this.infiniteInitialLoad = false;\n        this.infiniteSearchValChange = false;\n        this.infinitePermenantLocalData = [];\n        this.infiniteQueryExecutionPending = false;\n        this.infiniteSkipCnt = 0;\n        this.infiniteScrollAppendDiff = 0;\n        this.prevInfiniteScrollDirection = '';\n        this.infiniteLoadedElem = [];\n        this.infiniteDataCount = 0;\n        this.infiniteLocalSelectAll = true;\n        this.localInfiniteSelectAllClicked = false;\n        this.localInfiniteSelectionInteracted = false;\n        this.infiniteManualSelectMaintainPred = [];\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n        if (this.parent.cssClass) {\n            if (this.parent.cssClass.indexOf(' ') !== -1) {\n                addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(' '));\n            }\n            else {\n                addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);\n            }\n        }\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilterBase.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.add(elem, 'keyup', this.searchHandler, this);\n            EventHandler.add(elem, 'input', this.searchHandler, this);\n        }\n    };\n    CheckBoxFilterBase.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n            EventHandler.remove(elem, 'input', this.searchHandler);\n        }\n    };\n    CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            var fpred = fPredicate.predicate.predicates;\n            for (var i = 0; i < fpred.length; i++) {\n                filterCollection.push({\n                    field: fpred[parseInt(i.toString(), 10)].field,\n                    predicate: 'or',\n                    matchCase: fpred[parseInt(i.toString(), 10)].ignoreCase,\n                    ignoreAccent: fpred[parseInt(i.toString(), 10)].ignoreAccent,\n                    operator: fpred[parseInt(i.toString(), 10)].operator,\n                    value: fpred[parseInt(i.toString(), 10)].value,\n                    type: _this.options.type\n                });\n            }\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = target.classList.contains('e-chkcancel-icon') ? '' : this.sInput.value;\n            if (this.isCheckboxFilterTemplate) {\n                this.parent.notify('refreshCheckbox', { event: e });\n            }\n            else {\n                this.refreshCheckboxes();\n            }\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n        if (isNullOrUndefined(this.sInput)) {\n            return;\n        }\n        if (isNullOrUndefined(e) || (e.key !== 'ArrowUp' && e.key !== 'ArrowDown' && e.key !== 'Tab' && !(e.key === 'Tab' && e.shiftKey))) {\n            if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer') {\n                this.parent.showMaskRow(undefined, this.dialogObj.element);\n            }\n            if (this.isCheckboxFilterTemplate) {\n                this.parent.notify('refreshCheckbox', { event: e });\n            }\n            else {\n                this.refreshCheckboxes();\n            }\n            this.updateSearchIcon();\n        }\n    };\n    CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n            if (!isNullOrUndefined(document.body.querySelector('.e-chkcancel-icon'))) {\n                document.body.querySelector('.e-chkcancel-icon').setAttribute('title', this.localeObj.getConstant('Clear'));\n            }\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n            if (!isNullOrUndefined(document.body.querySelector('.e-searchclear.e-search-icon'))) {\n                document.body.querySelector('.e-searchclear.e-search-icon').setAttribute('title', this.localeObj.getConstant('Search'));\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     *\n     * @param {string} key - Defines localization key\n     * @returns {string} - returns localization label\n     */\n    CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilterBase.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                // eslint-disable-next-line valid-typeof\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[parseInt(i.toString(), 10)];\n                    dataSource[parseInt(i.toString(), 10)] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type;\n        this.options.format = options.format || '';\n        this.options.ignoreAccent = options.ignoreAccent || false;\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.options.uid = options.column.uid;\n        this.options.disableHtmlEncode = options.column.disableHtmlEncode || false;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n        this.infiniteRenderMod = this.parent.filterSettings && this.parent.filterSettings.enableInfiniteScrolling ? true : false;\n        this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n    };\n    CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            attrs: { uid: this.options.column.uid },\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            this.searchInputArgs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search'),\n                    cssClass: this.parent.cssClass\n                }\n            };\n            Input.createInput(this.searchInputArgs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilterBase.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        this.parent.notify(events.cBoxFltrBegin, args);\n        if (args.cancel) {\n            options.cancel = args.cancel;\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            enableRtl: this.parent.enableRtl,\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: this.parent.cssClass ? 'e-primary' + ' ' + this.parent.cssClass : 'e-primary',\n                        isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: this.parent.cssClass ? 'e-flat' + ' ' + this.parent.cssClass : 'e-flat',\n                        content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this),\n            cssClass: this.parent.cssClass ? this.parent.cssClass : ''\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[\"\" + isStringTemplate] = true;\n        this.renderResponsiveFilter(options);\n        var dialogLabel = this.parent.filterSettings && this.parent.filterSettings.type === 'CheckBox' ?\n            this.getLocalizedLabel('CheckBoxFilterDialogARIA') : this.getLocalizedLabel('ExcelFilterDialogARIA');\n        this.dlg.setAttribute('aria-label', dialogLabel);\n        if (options.isResponsiveFilter) {\n            var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n            responsiveCnt.appendChild(this.dlg);\n        }\n        else {\n            this.parent.element.appendChild(this.dlg);\n        }\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n        this.dialogObj.show();\n        if (this.parent && this.parent.filterSettings && (this.parent.filterSettings.type === 'CheckBox'\n            || (this.options.column && this.options.column.filter && this.options.column.filter.type === 'CheckBox')) &&\n            this.parent.getContent().firstElementChild.offsetHeight < this.dialogObj.element.offsetHeight &&\n            !parentsUntil(this.parent.element, 'e-gantt-dialog')) {\n            resetDialogAppend(this.parent, this.dialogObj);\n        }\n        var content = this.dialogObj.element.querySelector('.e-dlg-content');\n        content.appendChild(this.sBox);\n        this.wireEvents();\n        if (!this.parent.enableAdaptiveUI) {\n            if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer'\n                && !this.infiniteRenderMod) {\n                this.parent.showMaskRow(undefined, this.dialogObj.element);\n            }\n            if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n                this.showMask();\n            }\n        }\n        else {\n            if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n                this.getAllData();\n                return;\n            }\n            if (this.infiniteRenderMod) {\n                this.cBox.style.marginTop = getListHeight(this.cBox) + 'px';\n            }\n        }\n        if (!(this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer')) {\n            createSpinner({ target: this.spinner, cssClass: this.parent.cssClass ? this.parent.cssClass : null }, this.parent.createElement);\n            showSpinner(this.spinner);\n        }\n        this.getAllData();\n    };\n    CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n        if (options.isResponsiveFilter) {\n            this.dialogObj.buttons = [{}];\n            this.dialogObj.position = { X: '', Y: '' };\n            this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            this.dialogObj.width = '100%';\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n        if (this.options.isResponsiveFilter) {\n            this.dialogObj.element.style.left = '0px';\n        }\n        else {\n            if (!Browser.isDevice) {\n                getFilterMenuPostion(this.options.target, this.dialogObj, this.parent);\n            }\n            else {\n                this.dialogObj.position = { X: 'center', Y: 'center' };\n            }\n        }\n        if (this.options.column.showColumnMenu) {\n            this.parent.notify(events.filterDialogCreated, e);\n        }\n    };\n    CheckBoxFilterBase.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilterBase.prototype.closeDialog = function () {\n        if (this.infiniteRenderMod && this.infinitePermenantLocalData.length && !this.options.isRemote) {\n            this.options.dataSource.dataSource.json = this.infinitePermenantLocalData;\n        }\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            this.isBlanks = false;\n            var filterTemplateCol = this.options.columns.filter(function (col) { return col.getFilterItemTemplate(); });\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var registeredTemplate = this.parent.registeredTemplate;\n            if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            if ((this.parent.isReact || this.parent.isVue) && this.parent.destroyTemplate !== undefined) {\n                clearReactVueTemplates(this.parent, ['filterItemTemplate']);\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.unWireEvents();\n            if (this.searchInputArgs && this.searchInputArgs.element && this.searchInputArgs.element.parentElement) {\n                Input.destroy(this.searchInputArgs);\n                remove(this.searchInputArgs.element);\n            }\n            this.searchInputArgs = null;\n            this.sInput = null;\n            if (this.parent.isReact && this.options.column.filter && typeof (this.options.column.filter.itemTemplate) !== 'string'\n                && (this.options.column.filter.type === 'CheckBox' || this.options.column.filter.type === 'Excel')) {\n                this.dialogObj.element.querySelector('.e-dlg-content').innerHTML = '';\n            }\n            this.dialogObj.destroy();\n            if (this.dialogObj['dlgClosedBy'] === 'escape') {\n                this.parent.isColumnMenuFilterClosing = true;\n            }\n            if (this.dlg && this.dlg.parentElement) {\n                remove(this.dlg);\n                var gridPopup = document.getElementById(this.parent.element.id + '_e-popup');\n                if (!isNullOrUndefined(gridPopup)) {\n                    remove(gridPopup);\n                    gridPopup = null;\n                }\n            }\n            this.dlg = null;\n            this.parent.notify(events.filterDialogClose, {});\n        }\n    };\n    /**\n     * @param {Column} col - Defines column details\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.clearFilter = function (col) {\n        // eslint-disable-next-line max-len\n        var args = { instance: this, handler: this.clearFilter, cancel: false };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: col ? col.field : this.options.field });\n    };\n    CheckBoxFilterBase.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if ((e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput')) ||\n                e.keyCode === 13) {\n                if (!this.isCheckboxFilterTemplate) {\n                    this.fltrBtnHandler();\n                }\n            }\n            else {\n                var text = e.target.firstChild.textContent.toLowerCase();\n                if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                    if (!this.isCheckboxFilterTemplate) {\n                        this.fltrBtnHandler();\n                    }\n                }\n                else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                    this.clearFilter();\n                }\n            }\n            this.closeDialog();\n        }\n        else if (e.target && e.target.firstChild &&\n            e.target.firstChild.textContent.toLowerCase() === this.getLocalizedLabel('CancelButton').toLowerCase()) {\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n        if (this.options.column.showColumnMenu) {\n            this.parent.notify(events.afterFilterColumnMenuClose, {});\n        }\n        if (!isNullOrUndefined(this.parent.focusModule)) {\n            this.parent.focusModule.filterfocus();\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n        var _this = this;\n        if (this.infiniteRenderMod) {\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, this.infiniteLoadedElem.slice());\n        }\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)'));\n        var check = checked;\n        var optr = 'equal';\n        var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n        if (ddlValue) {\n            this.options.operator = optr = ddlValue.ej2_instances[0].value;\n        }\n        this.isMenuNotEqual = this.options.operator === 'notequal';\n        var searchInput;\n        if (!this.options.hideSearchbox) {\n            searchInput = this.searchBox.querySelector('.e-searchinput');\n        }\n        var caseSen = this.options.allowCaseSensitive;\n        var defaults = {\n            field: this.options.field, predicate: this.isMenuNotEqual ? 'and' : 'or', uid: this.options.uid,\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual && searchInput && searchInput.value === '') {\n            optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n            defaults.operator = optr;\n        }\n        var val;\n        var length;\n        var coll = [];\n        if ((checked.length !== this.itemsCnt || (searchInput && searchInput.value && searchInput.value !== ''))\n            || this.infiniteRenderMod) {\n            if (!this.infiniteRenderMod) {\n                coll = this.complexQueryPredicate(checked, defaults, isNotEqual);\n                if (isNullOrUndefined(coll)) {\n                    return;\n                }\n                coll = this.filterPreventColumns ? this.filterPreventColumns : coll;\n            }\n            else if (this.infiniteRenderMod &&\n                (!this.infiniteSearchPred || (this.infiniteSearchPred && !this.infiniteSearchPred.isComplex))) {\n                this.infiniteFltrBtnHandler(coll);\n            }\n            else {\n                if (this.infiniteSearchPred.isComplex) {\n                    coll = this.complexQueryPredicate(checked, defaults, isNotEqual);\n                }\n            }\n            if ((this.options.type === 'date' || this.options.type === 'dateonly' || this.options.type === 'datetime') && check.length) {\n                length = check.length - 1;\n                val = this.values[parentsUntil(check[parseInt(length.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n                if (isNullOrUndefined(val) && isNotEqual) {\n                    coll.push({\n                        field: defaults.field, matchCase: defaults.matchCase, operator: 'equal',\n                        predicate: 'or', value: null\n                    });\n                }\n            }\n            var addCurrSelection = this.infiniteRenderMod ? this.sBox.querySelector('.e-add-current') :\n                this.cBox.querySelector('.e-add-current');\n            if (addCurrSelection && addCurrSelection.classList.contains('e-check')) {\n                var existingPredicate_1 = this.existingPredicate[this.options.field];\n                if (existingPredicate_1) {\n                    var _loop_1 = function (j) {\n                        if (!coll.some(function (data) {\n                            return data\n                                .value === existingPredicate_1[parseInt(j.toString(), 10)].value;\n                        })) {\n                            coll.push(existingPredicate_1[parseInt(j.toString(), 10)]);\n                        }\n                    };\n                    for (var j = 0; j < existingPredicate_1.length; j++) {\n                        _loop_1(j);\n                    }\n                }\n                else {\n                    return;\n                }\n            }\n            if (!this.infiniteRenderMod) {\n                this.initiateFilter(coll);\n            }\n            else if (coll.length) {\n                this.initiateFilter(coll);\n            }\n            else if (this.sBox.querySelector('.e-selectall').classList.contains('e-check') && !coll.length) {\n                var isClearFilter = this.options.filteredColumns.some(function (value) {\n                    return _this.options.field === value.field;\n                });\n                if (isClearFilter) {\n                    this.clearFilter();\n                }\n            }\n        }\n        else {\n            var isClearFilter = this.options.filteredColumns.some(function (value) {\n                return _this.options.field === value.field;\n            });\n            if (isClearFilter) {\n                this.clearFilter();\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.complexQueryPredicate = function (checkBoxChecked, defaults, isNotEqual) {\n        var value;\n        var fObj;\n        var coll = [];\n        for (var i = 0; i < checkBoxChecked.length; i++) {\n            value = this.values[parentsUntil(checkBoxChecked[parseInt(i.toString(), 10)], 'e-ftrchk').getAttribute('uid')];\n            fObj = extend({}, { value: value }, defaults);\n            if (value && !value.toString().length) {\n                fObj.operator = isNotEqual ? 'notequal' : 'equal';\n            }\n            if (value === '' || isNullOrUndefined(value)) {\n                coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n            }\n            else {\n                coll.push(fObj);\n            }\n        }\n        var filterColumns = this.filterPreventColumns && this.filterPreventColumns.length ?\n            this.filterPreventColumns[0] : fObj;\n        if (filterColumns && !this.notifyFilterPrevEvent(filterColumns)) {\n            this.filterPreventColumns = coll;\n            return null;\n        }\n        else {\n            return coll;\n        }\n    };\n    CheckBoxFilterBase.prototype.infiniteFltrBtnHandler = function (coll) {\n        var value;\n        if (this.infiniteManualSelectMaintainPred.length) {\n            for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n                var pred = this.infiniteManualSelectMaintainPred[i];\n                value = pred.value + '';\n                if (value === '' || isNullOrUndefined(value)) {\n                    var dummyDefaults = { predicate: pred.predicate, field: pred.field, type: pred.type, uid: pred.uid, operator: pred.operator,\n                        matchCase: pred.matchCase, ignoreAccent: pred.ignoreAccent };\n                    coll.push.apply(coll, CheckBoxFilterBase.generateNullValuePredicates(dummyDefaults));\n                }\n                else {\n                    coll.push(this.infiniteManualSelectMaintainPred[i]);\n                }\n                this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i]);\n            }\n        }\n        if (!this.localInfiniteSelectAllClicked && this.sInput.value === '' && !(!this.options.parentCurrentViewDataCount && coll.length)) {\n            for (var i = 0; i < this.infiniteUnloadParentExistPred.length; i++) {\n                coll.unshift(this.infiniteUnloadParentExistPred[i]);\n                this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);\n            }\n        }\n        if (this.sInput.value !== '' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {\n            this.infiniteSearchPred['predicate'] = 'or';\n            coll.unshift(this.infiniteSearchPred);\n            this.notifyFilterPrevEvent(this.infiniteSearchPred);\n        }\n    };\n    CheckBoxFilterBase.prototype.notifyFilterPrevEvent = function (predicate) {\n        var args = {\n            instance: this, handler: this.fltrBtnHandler, arg1: predicate.field, arg2: predicate.predicate, arg3: predicate.operator,\n            arg4: predicate.matchCase, arg5: predicate.ignoreAccent, arg6: predicate.value, cancel: false\n        };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return false;\n        }\n        return true;\n    };\n    // eslint-disable-next-line\n    /** @hidden */\n    CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n        var coll = [];\n        if (defaults.type === 'string') {\n            coll.push({\n                field: defaults.field, ignoreAccent: defaults.ignoreAccent, matchCase: defaults.matchCase,\n                operator: defaults.operator, predicate: defaults.predicate, value: ''\n            });\n        }\n        coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase, operator: defaults.operator, predicate: defaults.predicate, value: null\n        });\n        coll.push({\n            field: defaults.field, matchCase: defaults.matchCase, operator: defaults.operator,\n            predicate: defaults.predicate, value: undefined\n        });\n        return coll;\n    };\n    // eslint-disable-next-line\n    /** @hidden */\n    CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[parseInt(j.toString(), 10)].ejpredicate !== undefined ?\n                    predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].ejpredicate) :\n                    predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].field, fColl[parseInt(j.toString(), 10)].operator, fColl[parseInt(j.toString(), 10)].value, !fColl[parseInt(j.toString(), 10)].matchCase, fColl[parseInt(j.toString(), 10)].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n        return col.isForeignColumn ? col.isForeignColumn() : false;\n    };\n    CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        var pred = query.queries.filter(function (e) { return e && e.fn === 'onWhere'; })[0];\n        query.queries = [];\n        foreignQuery.queries = [];\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.options.isRemote ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'contains' : 'equal');\n        var matchCase = true;\n        var ignoreAccent = this.options.ignoreAccent;\n        var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var coll = [];\n        var defaults = {\n            field: field, predicate: 'or', uid: this.options.uid,\n            operator: 'equal', type: this.options.type, matchCase: matchCase, ignoreAccent: ignoreAccent\n        };\n        var predicte;\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? true : 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? false : 'false';\n            }\n            operator = 'equal';\n        }\n        if ((this.options.type === 'date' || this.options.type === 'datetime' || this.options.type === 'dateonly') && this.options.format) {\n            var intl = new Internationalization();\n            var format = typeof (this.options.format) === 'string' ? this.options.format :\n                this.options.format.format;\n            if (format) {\n                parsed = intl.parseDate(val, { format: format }) || new Date(val);\n            }\n            else {\n                parsed = new Date(val);\n            }\n            if (this.options.type === 'dateonly') {\n                parsed = parsed.getFullYear() + '-' + padZero(parsed.getMonth() + 1) + '-' + padZero(parsed.getDate());\n            }\n        }\n        this.infiniteSearchValChange = true;\n        this.infiniteLoadedElem = [];\n        this.infiniteLocalSelectAll = true;\n        this.localInfiniteSelectAllClicked = false;\n        this.localInfiniteSelectionInteracted = false;\n        this.infiniteSkipCnt = 0;\n        this.infiniteDataCount = 0;\n        this.infiniteManualSelectMaintainPred = [];\n        if (this.sInput.value === '') {\n            this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];\n        }\n        else {\n            this.infiniteUnloadParentExistPred = [];\n        }\n        if (!this.isForeignColumn(column)) {\n            this.addDistinct(query);\n        }\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query, value: parsed, cancel: false\n        };\n        if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n            args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n        }\n        this.parent.trigger(events.actionBegin, args, function (filterargs) {\n            if (filterargs.cancel) {\n                return;\n            }\n            // eslint-disable-next-line no-self-assign\n            filterargs.operator = filterargs.operator;\n            predicte = new Predicate(field, filterargs.operator, args.value, filterargs.matchCase, filterargs.ignoreAccent);\n            if (_this.options.type === 'date' || _this.options.type === 'datetime' || _this.options.type === 'dateonly') {\n                operator = 'equal';\n                var filterObj = {\n                    field: field, operator: operator, value: parsed, matchCase: matchCase,\n                    ignoreAccent: ignoreAccent\n                };\n                if (!isNullOrUndefined(parsed)) {\n                    predicte = getDatePredicate(filterObj, _this.options.type);\n                }\n            }\n            if (val && typeof val === 'string' && _this.isBlanks &&\n                _this.getLocalizedLabel('Blanks').toLowerCase().indexOf(val.toLowerCase()) >= 0) {\n                coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n                var emptyValPredicte = CheckBoxFilterBase.generatePredicate(coll);\n                emptyValPredicte.predicates.push(predicte);\n                predicte = emptyValPredicte;\n                query.where(emptyValPredicte);\n            }\n            else if (val.length) {\n                predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n                query.where(predicte);\n            }\n            else if (!isNullOrUndefined(pred)) {\n                predicte = pred.e;\n                query.where(pred.e);\n            }\n            _this.infiniteSearchPred = predicte;\n            filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n            if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== filterargs.filterChoiceCount) {\n                _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n            }\n            var fPredicate = {};\n            showSpinner(_this.spinner);\n            _this.renderEmpty = false;\n            if (_this.isForeignColumn(column) && val.length) {\n                var colData = ('result' in column.dataSource) ? new DataManager(column.dataSource.result) :\n                    column.dataSource;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                colData.executeQuery(query).then(function (e) {\n                    var columnData = _this.options.column.columnData;\n                    _this.options.column.columnData = e.result;\n                    _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                    if (fPredicate.predicate.predicates.length) {\n                        foreignQuery.where(fPredicate.predicate);\n                    }\n                    else {\n                        _this.renderEmpty = true;\n                    }\n                    _this.options.column.columnData = columnData;\n                    if (_this.infiniteRenderMod) {\n                        _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n                        _this.makeInfiniteScrollRequest(foreignQuery);\n                        foreignQuery.requiresCount();\n                    }\n                    else {\n                        foreignQuery.take(filterargs.filterChoiceCount);\n                    }\n                    _this.search(filterargs, foreignQuery);\n                });\n            }\n            else {\n                if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount) {\n                    _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n                    _this.makeInfiniteScrollRequest(query);\n                    query.requiresCount();\n                }\n                else {\n                    query.take(filterargs.filterChoiceCount);\n                }\n                _this.search(filterargs, query);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns, isExecuteLocal) {\n        var predicates = CheckBoxFilterBase.getPredicate(columns, isExecuteLocal);\n        var predicateList = [];\n        var fPredicate = {};\n        var isGrid = this.parent.getForeignKeyColumns !== undefined;\n        var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = void 0;\n            if (isGrid && !this.parent.getColumnByField(prop)) {\n                col = getColumnByForeignKeyValue(prop, foreignColumn);\n            }\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[\"\" + prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilterBase.prototype.getQuery = function () {\n        return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n    };\n    CheckBoxFilterBase.prototype.getAllData = function () {\n        var _this = this;\n        this.customQuery = false;\n        var query = this.getQuery();\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (!(!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === 'ODataV4Adaptor')) {\n            query.requiresCount(); //consider take query\n        }\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null\n        };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n            args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n        }\n        this.parent.trigger(events.actionBegin, args, function (args) {\n            args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n            if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== args.filterChoiceCount) {\n                _this.parent.filterSettings.itemsCount = args.filterChoiceCount;\n            }\n            if (!_this.infiniteRenderMod) {\n                query.take(args.filterChoiceCount);\n            }\n            if (!args.query.distincts.length || _this.infiniteRenderMod) {\n                _this.customQuery = true;\n                _this.queryGenerate(query);\n            }\n            if (_this.infiniteRenderMod) {\n                _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;\n                _this.makeInfiniteScrollRequest(query);\n            }\n            if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.filterEvent(args, query);\n            }\n            else {\n                _this.processDataOperation(query, true);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.addDistinct = function (query) {\n        var _this = this;\n        var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (moduleName && moduleName() === 'ODataV4Adaptor' && this.parent &&\n            this.parent.query instanceof Query) {\n            var gridQuery = this.parent.query;\n            for (var i = 0; i < gridQuery.queries.length; i++) {\n                var queryOptions = gridQuery.queries[parseInt(i.toString(), 10)];\n                if (queryOptions.fn === 'onWhere') {\n                    this.getPredicateFields(queryOptions.e);\n                    this.queryFilteredColumn.map(function (field) {\n                        if (filteredColumn.indexOf(field) === -1) {\n                            filteredColumn.push(field);\n                        }\n                    });\n                    this.queryFilteredColumn = [];\n                }\n            }\n        }\n        if (!this.infiniteRenderMod) {\n            query.distinct(filteredColumn);\n        }\n        if (this.infiniteRenderMod && !this.options.isRemote && this.sInput.value === '') {\n            this.options.dataSource = this.options.dataSource instanceof DataManager ?\n                this.options.dataSource : new DataManager(this.options.dataSource);\n            this.infinitePermenantLocalData = this.options.dataSource.dataSource.json.slice();\n            var query1 = new Query();\n            this.queryGenerate(query1);\n            var result = new DataManager(this.options.dataSource.dataSource).executeLocal(query1);\n            this.options.dataSource = new DataManager(DataUtil.distinct(result, this.options.column.field, true));\n            if (this.isForeignColumn(this.options.column)) {\n                this.options.column.dataSource = this.options.column.dataSource instanceof DataManager ?\n                    this.options.column.dataSource : new DataManager(this.options.column.dataSource);\n                this.options.dataSource.dataSource.json = this.options.dataSource.dataSource.json.map(function (item, i) {\n                    return Object.assign({}, item, _this.options.column.dataSource.dataSource.json[i]);\n                });\n            }\n        }\n        else if (this.infiniteRenderMod && this.options.isRemote) {\n            query.select(this.options.column.field);\n            query.sortBy(this.options.column.field, 'ascending');\n            var moduleName_1 = this.options.dataManager.adaptor.getModuleName;\n            if (moduleName_1 && moduleName_1() && (moduleName_1() === 'ODataV4Adaptor' || moduleName_1() === 'WebApiAdaptor'\n                || moduleName_1() === 'CustomDataAdaptor' || moduleName_1() === 'GraphQLAdaptor' || moduleName_1() === 'ODataAdaptor')) {\n                query.distinct(filteredColumn);\n            }\n        }\n        return query;\n    };\n    CheckBoxFilterBase.prototype.getPredicateFields = function (query) {\n        var _this = this;\n        if (query.isComplex && query.predicates) {\n            query.predicates.forEach(function (predicate) {\n                if (Array.isArray(predicate)) {\n                    predicate.forEach(function (p) { return _this.getPredicateFields(p); });\n                }\n                else {\n                    _this.getPredicateFields(predicate);\n                }\n            });\n        }\n        else {\n            if (query.field && !query.isComplex) {\n                if (this.queryFilteredColumn.indexOf(query.field) <= -1) {\n                    this.queryFilteredColumn = this.queryFilteredColumn.concat(DataUtil.distinct([query.field], 'field'));\n                }\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var defObj = eventPromise(args, query);\n        this.parent.trigger(events.dataStateChange, defObj.state);\n        this.addInfiniteScrollEvent(query);\n        var def = defObj.deffered;\n        def.promise.then(function (e) {\n            _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e['count'] : _this.infiniteDataCount;\n            var dataResult = _this.infiniteRenderMod ? e['result'] : e;\n            _this.dataSuccess(dataResult);\n        });\n    };\n    CheckBoxFilterBase.prototype.addInfiniteScrollEvent = function (query) {\n        if (this.infiniteRenderMod) {\n            this.infiniteQuery = query.clone();\n            if (this.infiniteInitialLoad) {\n                this.cBox.classList.add('e-checkbox-infinitescroll');\n                EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n                EventHandler.add(this.cBox, 'mouseup', this.infiniteScrollMouseKeyUpHandler, this);\n                EventHandler.add(this.cBox, 'mousedown', this.infiniteScrollMouseKeyDownHandler, this);\n            }\n            else if (this.infiniteSearchValChange) {\n                this.cBox.innerHTML = '';\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.infiniteScrollMouseKeyDownHandler = function () {\n        EventHandler.remove(this.cBox, 'scroll', this.infiniteScrollHandler);\n    };\n    CheckBoxFilterBase.prototype.infiniteScrollMouseKeyUpHandler = function (e) {\n        var _this = this;\n        EventHandler.add(this.cBox, 'scroll', this.infiniteScrollHandler, this);\n        var target = this.cBox;\n        if (target.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight || target.scrollTop <= 0)) {\n            this.infiniteScrollHandler();\n        }\n        Global.timer = setTimeout(function () { _this.clickHandler(e); Global.timer = null; }, 0);\n    };\n    CheckBoxFilterBase.prototype.getShimmerTemplate = function () {\n        return '<span class=\"e-mask e-skeleton e-skeleton-text e-shimmer-wave\"></span>';\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.showMask = function () {\n        var maskRowCount = 5;\n        var maskItemHeight;\n        var maskList = this.parent.createElement('div', { id: this.id + this.options.type + '_CheckBoxMaskList',\n            className: 'e-checkboxlist e-fields e-infinite-list e-masklist' });\n        maskList.style.zIndex = '10';\n        var wrapperElem = this.cBox;\n        this.removeMask();\n        if (wrapperElem) {\n            var computedStyle = getComputedStyle(wrapperElem);\n            var liHeight = getListHeight(wrapperElem);\n            var height = wrapperElem.children.length ? parseInt(computedStyle.height, 10) :\n                Math.floor(parseInt(computedStyle.height.split('px')[0], 10)) - 5;\n            if (this.parent.enableAdaptiveUI && this.infiniteRenderMod) {\n                maskList.style.height = (height - liHeight) + 'px';\n                this.dlg.querySelector('.e-dlg-content').style.overflow = 'hidden';\n            }\n            var backgroundColor = this.isExcel && !wrapperElem.children.length && !this.dlg.classList.contains('e-excelfilter') ?\n                '' : getComputedStyle(this.dlg.querySelector('.e-dlg-content')).backgroundColor;\n            maskList.style.cssText = 'width: ' + computedStyle.width + '; min-height: ' + computedStyle.minHeight + '; height: ' +\n                height + 'px; margin: ' + computedStyle.margin + '; border-style: ' + computedStyle.borderStyle + '; border-width: '\n                + computedStyle.borderWidth + '; border-color: ' + computedStyle.borderColor + '; position: absolute; background-color: ' +\n                backgroundColor + ';';\n            maskRowCount = Math.floor(height / liHeight);\n            maskRowCount = wrapperElem.children.length > maskRowCount ? wrapperElem.children.length : maskRowCount;\n            maskItemHeight = liHeight + 'px';\n        }\n        var maskTemplate = '<div class=\"e-ftrchk e-mask-ftrchk\">'\n            + '<div class=\"e-checkbox-wrapper\"><input class=\"e-chk-hidden\">'\n            + this.getShimmerTemplate() + this.getShimmerTemplate() + '</div></div>';\n        maskList.innerHTML = '';\n        if (!wrapperElem.children.length) {\n            this.spinner.insertAdjacentHTML('beforebegin', maskTemplate);\n            this.spinner.parentElement.querySelector('.e-ftrchk.e-mask-ftrchk').style.cssText =\n                'width: 100%; height: ' + maskItemHeight + ';';\n            this.spinner.parentElement.querySelector('.e-checkbox-wrapper').style.width = '100%';\n            var maskSpan = [].slice.call(this.spinner.parentElement\n                .querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n            maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n            maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n        }\n        this.spinner.insertBefore(maskList, this.cBox);\n        for (var i = 0; maskRowCount && i < maskRowCount; i++) {\n            maskList.innerHTML += maskTemplate;\n            maskList.lastElementChild.style.cssText =\n                'width: 100%; height: ' + maskItemHeight + ';';\n            maskList.lastElementChild.querySelector('.e-checkbox-wrapper').style.width = '100%';\n            var maskSpan = [].slice.call(maskList\n                .querySelectorAll('.e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)'));\n            maskSpan[0].classList.add('e-mask-checkbox-filter-intent');\n            maskSpan[1].classList.add('e-mask-checkbox-filter-span-intent');\n        }\n        if (this.cBox) {\n            maskList.scrollTop = this.cBox.scrollTop;\n        }\n    };\n    CheckBoxFilterBase.prototype.removeMask = function () {\n        var maskLists = this.dialogObj.element.querySelectorAll('.e-mask-ftrchk');\n        if (maskLists.length) {\n            for (var i = 0; i < maskLists.length; i++) {\n                remove(maskLists[i]);\n            }\n        }\n        var maskParent = this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist');\n        if (maskParent) {\n            remove(this.dialogObj.element.querySelector('.e-checkboxlist.e-masklist'));\n        }\n    };\n    CheckBoxFilterBase.prototype.infiniteScrollHandler = function () {\n        var target = this.cBox;\n        if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending\n            && this.infiniteLoadedElem.length <= (this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)\n            && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3\n            && (!this.infiniteDataCount || this.infiniteDataCount > (this.infiniteSkipCnt + this.parent.filterSettings.itemsCount))) {\n            this.makeInfiniteScrollRequest();\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending\n            && this.infiniteLoadedElem.length > (this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)\n            && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.cBox.children)).splice(0, this.parent.filterSettings.itemsCount));\n            this.infiniteSkipCnt += this.prevInfiniteScrollDirection === 'down' ? this.parent.filterSettings.itemsCount :\n                (this.parent.filterSettings.itemsCount * 3);\n            appendChildren(this.cBox, this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.parent.filterSettings.itemsCount +\n                this.infiniteSkipCnt));\n            this.prevInfiniteScrollDirection = 'down';\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt\n            && this.infiniteLoadedElem.length && this.infiniteLoadedElem.length > this.parent.filterSettings.itemsCount * 3\n            && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.cBox.children)).splice((this.parent.filterSettings\n                .itemsCount * 2), this.parent.filterSettings.itemsCount));\n            this.infiniteSkipCnt -= this.prevInfiniteScrollDirection === 'up' ? this.parent.filterSettings.itemsCount :\n                (this.parent.filterSettings.itemsCount * 3);\n            infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt +\n                this.parent.filterSettings.itemsCount)), this.cBox);\n            this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n            this.prevInfiniteScrollDirection = 'up';\n        }\n        else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt\n            && this.infiniteLoadedElem.length && this.cBox.children.length < this.parent.filterSettings.itemsCount * 3) {\n            infiniteRemoveElements(([].slice.call(this.cBox.children)).splice((this.parent.filterSettings\n                .itemsCount * 2), this.infiniteDataCount % this.parent.filterSettings.itemsCount));\n            this.infiniteSkipCnt = (Math.floor(this.infiniteDataCount / this.parent.filterSettings.itemsCount) - 3) *\n                this.parent.filterSettings.itemsCount;\n            infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt +\n                this.parent.filterSettings.itemsCount)), this.cBox);\n            this.cBox.scrollTop = this.infiniteScrollAppendDiff;\n            this.prevInfiniteScrollDirection = 'up';\n        }\n    };\n    CheckBoxFilterBase.prototype.makeInfiniteScrollRequest = function (query) {\n        var _this = this;\n        if (!this.infiniteInitialLoad && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            setTimeout(function () {\n                if (_this.infiniteQueryExecutionPending) {\n                    _this.showMask();\n                }\n            }, 500);\n        }\n        else if (!this.infiniteInitialLoad) {\n            createSpinner({ target: this.spinner, cssClass: this.parent.cssClass ? this.parent.cssClass : null }, this.parent\n                .createElement);\n            showSpinner(this.spinner);\n        }\n        var fName = 'fn';\n        if (this.infiniteQuery && this.infiniteQuery.queries && this.infiniteQuery.queries.length) {\n            for (var i = 0; i < this.infiniteQuery.queries.length; i++) {\n                if (this.infiniteQuery.queries[i][\"\" + fName] === 'onTake'\n                    || this.infiniteQuery.queries[i][\"\" + fName] === 'onSkip') {\n                    this.infiniteQuery.queries.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        var existQuery = query ? true : false;\n        query = query ? query : this.infiniteQuery;\n        if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n            this.infiniteSkipCnt = 0;\n        }\n        else {\n            this.infiniteSkipCnt += this.parent.filterSettings.itemsCount;\n        }\n        query.skip(this.infiniteSkipCnt);\n        if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n            query.take(this.parent.filterSettings.itemsCount * 3);\n            this.infiniteSkipCnt += this.parent.filterSettings.itemsCount * 2;\n        }\n        else {\n            query.take(this.parent.filterSettings.itemsCount);\n        }\n        if (!existQuery) {\n            if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n                var args = {\n                    requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null, filterModel: this\n                };\n                if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {\n                    args.filterChoiceCount = this.parent.filterSettings.itemsCount;\n                }\n                this.filterEvent(args, query);\n            }\n            else {\n                this.processDataOperation(query);\n                this.infiniteQueryExecutionPending = true;\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.isForeignColumn(this.options.column) && isInitial) {\n            var colData = ('result' in this.options.column.dataSource) ?\n                new DataManager(this.options.column.dataSource.result) :\n                this.options.column.dataSource;\n            this.foreignKeyQuery.params = query.params;\n            allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        this.addInfiniteScrollEvent(query);\n        if (this.infiniteRenderMod && this.infiniteInitialLoad && !this.options.isRemote) {\n            var field = this.isForeignColumn(this.options.column) ? this.options.foreignKeyValue :\n                this.options.column.field;\n            this.options.dataSource.executeQuery(new Query().sortBy(field, DataUtil.fnAscending)).then(function (e) {\n                _this.options.dataSource.dataSource.json = e.result;\n                _this.executeQueryOperations(query, allPromise, runArray);\n            });\n        }\n        else {\n            this.executeQueryOperations(query, allPromise, runArray);\n        }\n    };\n    CheckBoxFilterBase.prototype.executeQueryOperations = function (query, allPromise, runArray) {\n        var _this = this;\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            _this.infiniteQueryExecutionPending = _this.infiniteRenderMod ? false : _this.infiniteQueryExecutionPending;\n            for (var j = 0; j < e.length; j++) {\n                _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e[j].count : _this.infiniteDataCount;\n                runArray[i++](e[parseInt(j.toString(), 10)].result);\n            }\n        }).catch(function () {\n            if (_this.infiniteRenderMod && _this.parent.filterSettings && _this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n                _this.parent.showMaskRow(undefined, _this.dialogObj.element);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n        if (!this.infiniteInitialLoad && this.infiniteDataCount && ((this.infiniteSkipCnt >= this.infiniteDataCount\n            && !this.infiniteSearchValChange) || (e.length === 0))) {\n            return;\n        }\n        this.fullData = e;\n        var args1 = { dataSource: this.fullData, executeQuery: true, field: this.options.field };\n        this.parent.notify(events.beforeCheckboxRenderer, args1);\n        if (args1.executeQuery) {\n            var query = new Query();\n            if (!this.customQuery) {\n                this.isExecuteLocal = true;\n                this.queryGenerate(query);\n                this.isExecuteLocal = false;\n            }\n            // query.select(this.options.field);\n            var result = new DataManager(args1.dataSource).executeLocal(query);\n            var col = this.options.column;\n            this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData, this).records || [];\n        }\n        var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n        this.processDataSource(null, true, data, args1);\n        if ((this.infiniteRenderMod && this.infiniteInitialLoad) || !this.infiniteRenderMod) {\n            if (this.sInput) {\n                this.sInput.focus();\n            }\n            else if (this.dlg.querySelector('.e-chk-hidden') && this.dlg.querySelector('.e-ftrchk')) {\n                this.dlg.querySelector('.e-chk-hidden').focus();\n                this.dlg.querySelector('.e-ftrchk').classList.add('e-chkfocus');\n            }\n        }\n        if (this.infiniteInitialLoad || this.infiniteSearchValChange) {\n            this.infiniteInitialLoad = false;\n            this.infiniteSearchValChange = false;\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n        if (this.isCheckboxFilterTemplate) {\n            hideSpinner(this.spinner);\n        }\n    };\n    CheckBoxFilterBase.prototype.queryGenerate = function (query) {\n        if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n            var moduleName = this.options.dataManager.adaptor.getModuleName;\n            if (!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === 'ODataV4Adaptor') {\n                this.parent.getDataModule().searchQuery(query);\n            }\n            else {\n                var searchSettings = this.parent.searchSettings;\n                var fields = searchSettings.fields.length ? searchSettings.fields\n                    : this.options.columns.map(function (f) { return f.field; });\n                query.search(searchSettings.key, fields, searchSettings.operator, searchSettings.ignoreCase, searchSettings.ignoreAccent);\n            }\n        }\n        if ((this.options.filteredColumns.length)) {\n            var cols = [];\n            for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                var filterColumn = this.options.filteredColumns[parseInt(i.toString(), 10)];\n                if (this.options.uid) {\n                    filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n                    if (filterColumn.uid !== this.options.uid) {\n                        cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n                    }\n                }\n                else {\n                    if (filterColumn.field !== this.options.field) {\n                        cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);\n                    }\n                }\n            }\n            var predicate = this.getPredicateFromCols(cols, this.isExecuteLocal);\n            if (predicate) {\n                query.where(predicate);\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.isExecuteLocal = true;\n        this.updateResult();\n        this.isExecuteLocal = false;\n        var args1 = { dataSource: this.fullData, isCheckboxFilterTemplate: false, column: this.options.column,\n            element: this.cBox, type: this.options.type, format: this.options.type, btnObj: this.options.isResponsiveFilter ? null :\n                this.dialogObj.btnObj[0], searchBox: this.searchBox };\n        this.parent.notify(events.beforeCheckboxfilterRenderer, args1);\n        this.isCheckboxFilterTemplate = args1.isCheckboxFilterTemplate;\n        if (!this.isCheckboxFilterTemplate) {\n            this.createFilterItems(dataSource, isInitial, args);\n        }\n        else if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            this.removeMask();\n        }\n    };\n    CheckBoxFilterBase.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilterBase.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.infiniteRenderMod && this.existingPredicate[this.options.field] ?\n            this.getPredicateFromCols(this.existingPredicate[this.options.field], this.isExecuteLocal) :\n            this.getPredicateFromCols(this.options.filteredColumns, this.isExecuteLocal);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        this.parent.notify(events.beforeCheckboxRendererQuery, { query: query });\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getObject(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilterBase.prototype.clickHandler = function (e) {\n        var _a;\n        if (!isNullOrUndefined(Global.timer)) {\n            clearTimeout(Global.timer);\n        }\n        var target = e.target;\n        if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === 'Shimmer'\n            && parentsUntil(target, 'e-mask-ftrchk')) {\n            return;\n        }\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem && !this.isCheckboxFilterTemplate) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n                if (this.infiniteRenderMod && !elem.parentElement.querySelector('.e-add-current')) {\n                    this.localInfiniteSelectionInteracted = true;\n                    var caseSen = this.options.allowCaseSensitive;\n                    var span = elem.parentElement.querySelector('.e-frame');\n                    var input = span.previousSibling;\n                    var optr = input.checked ? 'equal' : 'notequal';\n                    var pred = input.checked ? 'or' : 'and';\n                    var defaults = { field: this.options.field, predicate: pred, uid: this.options.uid,\n                        operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n                    };\n                    var value = this.values[parentsUntil(input, 'e-ftrchk').getAttribute('uid')];\n                    this.updateInfiniteManualSelectPred(defaults, value);\n                    if (this.infiniteRenderMod && !this.options.isRemote && this.options.parentTotalDataCount\n                        && this.infiniteUnloadParentExistPred.length) {\n                        var predicate = this.getPredicateFromCols((_a = this.options.filteredColumns).concat.apply(_a, this.infiniteManualSelectMaintainPred), true);\n                        var query = new Query();\n                        if (predicate) {\n                            query.where(predicate);\n                        }\n                        var result = new DataManager(this.infinitePermenantLocalData).executeLocal(query);\n                        if (this.options.parentTotalDataCount !== result.length) {\n                            this.options.parentTotalDataCount = result.length;\n                        }\n                        if (!this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {\n                            this.infiniteUnloadParentExistPred = [];\n                        }\n                    }\n                    if (this.infiniteUnloadParentExistPred.length && (this.options.parentTotalDataCount === this.infiniteDataCount\n                        || !this.options.parentTotalDataCount)) {\n                        this.infiniteUnloadParentExistPred = [];\n                    }\n                }\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n        this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.updateInfiniteManualSelectPred = function (defaults, value) {\n        for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {\n            var predmdl = this.infiniteManualSelectMaintainPred[i];\n            if (predmdl.value + '' === value + '' && (predmdl.operator === 'equal' || predmdl.operator === 'notequal')) {\n                this.infiniteManualSelectMaintainPred.splice(i, 1);\n                break;\n            }\n        }\n        if ((defaults.predicate === 'or' && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll))\n            || (defaults.predicate === 'and' && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll))) {\n            this.infiniteManualSelectMaintainPred.push(extend({}, { value: value }, defaults));\n            if (defaults.predicate === 'or') {\n                this.options.parentTotalDataCount++;\n            }\n            else {\n                this.options.parentTotalDataCount--;\n            }\n        }\n    };\n    /**\n     * Method to set the next target element on keyboard navigation using arrow keys.\n     *\n     * @param {KeyboardEventArgs} e - Defines the Keyboard event argument\n     * @param {HTMLElement[]} focusableElements - Defines the Focusable elements\n     * @returns {void}\n     */\n    CheckBoxFilterBase.prototype.focusNextOrPrev = function (e, focusableElements) {\n        var nextIndex = (e.key === 'ArrowUp') ? focusableElements.indexOf(document.activeElement) - 1\n            : focusableElements.indexOf(document.activeElement) + 1;\n        var nextElement = focusableElements[((nextIndex + focusableElements.length) % focusableElements.length)];\n        // Set focus on the next / previous element\n        if (nextElement) {\n            nextElement.focus();\n            var target = nextElement.classList.contains('e-chk-hidden') ? parentsUntil(nextElement, 'e-ftrchk') : nextElement;\n            this.setFocus(target);\n        }\n    };\n    CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n        if (e.key === 'Tab' || ((e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey)) {\n            this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n        }\n        if ((e.key === 'ArrowUp' || e.key === 'ArrowDown') && !e.altKey && this.parent.filterSettings\n            && this.parent.filterSettings.type === 'CheckBox') {\n            e.preventDefault();\n            var focusableElements = Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex=\"-1\"])'));\n            this.focusNextOrPrev(e, focusableElements);\n        }\n    };\n    CheckBoxFilterBase.prototype.setFocus = function (elem) {\n        var prevElem = this.dlg.querySelector('.e-chkfocus');\n        if (prevElem) {\n            prevElem.classList.remove('e-chkfocus');\n        }\n        if (elem && elem !== prevElem) {\n            elem.classList.add('e-chkfocus');\n        }\n    };\n    CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n        if (this.infiniteRenderMod) {\n            this.localInfiniteSelectAllClicked = true;\n            this.infiniteLocalSelectAll = checked;\n            this.infiniteUnloadParentExistPred = [];\n            this.infiniteManualSelectMaintainPred = [];\n        }\n        var cBoxes = this.infiniteRenderMod ?\n            this.infiniteLoadedElem.map(function (arr) {\n                return arr.querySelector('.e-frame');\n            }) : [].slice.call(this.cBox.querySelectorAll('.e-frame:not(.e-add-current)'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n            setChecked(cBox.previousSibling, checked);\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            if (!this.options.isResponsiveFilter) {\n                this.dialogObj.element.querySelector('.e-btn').focus();\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        setChecked(elem.querySelector('input'), checked);\n        var label = elem.querySelector('.e-label');\n        var dummyData = extendObjWithFn({}, data, { column: this.options.column, parent: this.parent });\n        var innerText = this.options.disableHtmlEncode ? 'textContent' : 'innerHTML';\n        label[\"\" + innerText] = !isNullOrUndefined(value) && value.toString().length ?\n            this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(value) : value : this.getLocalizedLabel('Blanks');\n        var checkboxUid = getUid('cbox');\n        label.setAttribute('id', checkboxUid + 'cboxLabel');\n        elem.querySelector('input').setAttribute('aria-labelledby', label.id);\n        if (label.innerHTML === this.getLocalizedLabel('Blanks')) {\n            this.isBlanks = true;\n        }\n        if (typeof value === 'boolean') {\n            label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n        }\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll')\n            && data[this.options.column.field] !== this.getLocalizedLabel('AddCurrentSelection')) {\n            label.innerHTML = '';\n            var isReactCompiler = this.parent.isReact && this.options.column.filter\n                && typeof (this.options.column.filter.itemTemplate) !== 'string' &&\n                !(this.options.column.filter.itemTemplate.prototype && this.options.column.filter.itemTemplate.prototype.CSPTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj &&\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.parent.parentDetails.parentInstObj.isReact;\n            if (isReactCompiler || isReactChild) {\n                this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, null, this.parent.root));\n            }\n        }\n        return elem;\n    };\n    CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.infiniteRenderMod ? this.infiniteLoadedElem.length : this.cBox.children.length - 1;\n        var className = [];\n        var disabled = false;\n        var elem = this.infiniteRenderMod ? this.sBox.querySelector('.e-selectall') : this.cBox.querySelector('.e-selectall');\n        var selected = this.infiniteRenderMod ? this.infiniteLoadedElem.filter(function (arr) { return arr.querySelector('.e-check'); }).length :\n            this.cBox.querySelectorAll('.e-check:not(.e-selectall):not(.e-add-current)').length;\n        if (this.cBox.querySelector('.e-add-current')) {\n            cnt -= 1;\n        }\n        var btn;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n            btn.disabled = false;\n        }\n        var input = elem.previousSibling;\n        setChecked(input, false);\n        input.indeterminate = false;\n        if (this.infiniteRenderMod && this.sInput.value === '' && !this.options.parentCurrentViewDataCount && !this.localInfiniteSelectionInteracted\n            && (!this.localInfiniteSelectAllClicked || (!this.infiniteLocalSelectAll && !selected)) && (cnt !== selected || cnt === selected)) {\n            selected = 0;\n        }\n        else if (this.infiniteRenderMod && this.infiniteLoadedElem.length < this.infiniteDataCount\n            && this.infiniteUnloadParentExistPred.length && (!selected || cnt === selected) && this.infiniteLocalSelectAll) {\n            if (!selected) {\n                selected += this.infiniteUnloadParentExistPred.length;\n            }\n            else {\n                cnt += this.infiniteUnloadParentExistPred.length;\n            }\n        }\n        if (cnt === selected) {\n            if (this.infiniteRenderMod) {\n                this.infiniteLocalSelectAll = true;\n                this.localInfiniteSelectAllClicked = true;\n                this.infiniteManualSelectMaintainPred = [];\n            }\n            className = ['e-check'];\n            setChecked(input, true);\n        }\n        else if (selected) {\n            className = ['e-stop'];\n            input.indeterminate = true;\n        }\n        else {\n            if (this.infiniteRenderMod) {\n                this.infiniteLocalSelectAll = false;\n                this.localInfiniteSelectAllClicked = true;\n                this.infiniteManualSelectMaintainPred = [];\n            }\n            className = ['e-uncheck'];\n            disabled = true;\n            if (btn) {\n                btn.disabled = true;\n            }\n        }\n        if (btn) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n    };\n    CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n        var _a, _b, _c;\n        var cBoxes = this.parent.createElement('div');\n        var btn;\n        var disabled = false;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n        }\n        var nullCounter = -1;\n        var key = 'ejValue';\n        if (!args1.executeQuery) {\n            key = args1.field;\n        }\n        for (var i = 0; i < data.length; i++) {\n            var val = getValue(key, data[parseInt(i.toString(), 10)]);\n            if (val === '' || isNullOrUndefined(val)) {\n                nullCounter = nullCounter + 1;\n            }\n        }\n        if (!this.infiniteRenderMod) {\n            this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n        }\n        if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === 'Shimmer') {\n            this.removeMask();\n        }\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var innerDiv = this.cBox.querySelector('.e-checkfltrnmdiv');\n            if (innerDiv) {\n                innerDiv.classList.remove('e-checkfltrnmdiv');\n            }\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            if (this.parent.cssClass) {\n                if (this.parent.cssClass.indexOf(' ') !== -1) {\n                    addClass([checkBox], this.parent.cssClass.split(' '));\n                }\n                else {\n                    addClass([checkBox], [this.parent.cssClass]);\n                }\n            }\n            if (this.infiniteInitialLoad || !this.infiniteRenderMod) {\n                var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n                selectAll.querySelector('.e-frame').classList.add('e-selectall');\n                if (this.infiniteRenderMod) {\n                    selectAll.classList.add('e-infinitescroll');\n                    if (this.parent.enableAdaptiveUI) {\n                        this.spinner.style.height = (this.spinner.offsetHeight - getListHeight(this.cBox)) + 'px';\n                    }\n                    this.sBox.insertBefore(selectAll, this.spinner);\n                }\n                else {\n                    cBoxes.appendChild(selectAll);\n                }\n            }\n            else if (this.sBox.querySelector('.e-ftrchk .e-selectall')) {\n                this.sBox.querySelector('.e-ftrchk .e-selectall').previousSibling.disabled = false;\n                this.sBox.querySelector('.e-ftrchk .e-selectall').parentElement.classList.remove('e-checkbox-disabled');\n            }\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            if (this.sInput && this.sInput.value) {\n                var predicateCheckBox = this.createCheckbox(this.getLocalizedLabel('AddCurrentSelection'), false, (_b = {},\n                    _b[this.options.field] = this.getLocalizedLabel('AddCurrentSelection'),\n                    _b));\n                if (this.parent.cssClass) {\n                    if (this.parent.cssClass.indexOf(' ') !== -1) {\n                        addClass([predicateCheckBox], this.parent.cssClass.split(' '));\n                    }\n                    else {\n                        addClass([predicateCheckBox], [this.parent.cssClass]);\n                    }\n                }\n                if ((this.infiniteRenderMod && (!isNullOrUndefined(this.sBox.children[2])\n                    && this.sBox.children[2].innerText !== this.getLocalizedLabel('AddCurrentSelection'))) || !this.infiniteRenderMod) {\n                    var predicateElement = createCboxWithWrap(getUid('cbox'), predicateCheckBox, 'e-ftrchk');\n                    predicateElement.querySelector('.e-frame').classList.add('e-add-current');\n                    if (this.infiniteRenderMod) {\n                        predicateElement.classList.add('e-infinitescroll');\n                        this.sBox.insertBefore(predicateElement, this.spinner);\n                        var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n                        var reduceHeight = Math.ceil(predicateElement.getBoundingClientRect().height);\n                        checkBoxListElem.style.height = (parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0], 10) - reduceHeight)\n                            + 'px';\n                        checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n                    }\n                    else {\n                        cBoxes.appendChild(predicateElement);\n                    }\n                }\n                else if (this.sBox.querySelector('.e-ftrchk .e-add-current')) {\n                    this.sBox.querySelector('.e-ftrchk .e-add-current').previousSibling.disabled = false;\n                    this.sBox.querySelector('.e-ftrchk .e-add-current').parentElement.classList.remove('e-checkbox-disabled');\n                }\n            }\n            else if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2])\n                && this.sBox.children[2].innerText === this.getLocalizedLabel('AddCurrentSelection')) {\n                var checkBoxListElem = this.spinner.querySelector('.e-checkboxlist');\n                var increaseHeight = Math.ceil(this.sBox.children[2].getBoundingClientRect().height);\n                checkBoxListElem.style.height = (parseInt(getComputedStyle(checkBoxListElem).height.split('px')[0], 10) + increaseHeight)\n                    + 'px';\n                checkBoxListElem.style.minHeight = checkBoxListElem.style.height;\n                remove(this.sBox.children[2]);\n            }\n            var isRndere = void 0;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[\"\" + uid] = getValue(key, data[parseInt(i.toString(), 10)]);\n                var value = getValue(this.options.field, data[parseInt(i.toString(), 10)]);\n                if (this.options.formatFn) {\n                    value = this.valueFormatter.toView(value, this.options.formatFn);\n                }\n                var args_1 = { value: value, column: this.options.column, data: data[parseInt(i.toString(), 10)] };\n                this.parent.notify(events.filterCboxValue, args_1);\n                value = args_1.value;\n                if ((value === '' || isNullOrUndefined(value))) {\n                    if (isRndere) {\n                        continue;\n                    }\n                    isRndere = true;\n                }\n                if (this.infiniteRenderMod) {\n                    this.updateInfiniteUnLoadedCheckboxExistPred(value, this.infiniteUnloadParentExistPred);\n                }\n                var checkbox = this.localInfiniteSelectAllClicked ?\n                    this.createCheckbox(value, this.infiniteLocalSelectAll, getValue('dataObj', data[i])) :\n                    this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[\"\" + uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n                if (this.infiniteRenderMod) {\n                    cBoxes.lastChild.style.height = getListHeight(this.cBox) + 'px';\n                }\n            }\n            var scrollTop = this.cBox.scrollTop;\n            if (!this.infiniteRenderMod || this.infiniteSearchValChange) {\n                this.cBox.innerHTML = '';\n            }\n            else if (this.infiniteRenderMod && this.cBox.children.length) {\n                infiniteRemoveElements(([].slice.call(this.cBox.children)).splice(0, this.parent.filterSettings.itemsCount));\n            }\n            if (this.infiniteRenderMod) {\n                (_c = this.infiniteLoadedElem).push.apply(_c, [].slice.call(cBoxes.children));\n                this.itemsCnt = nullCounter !== -1 ? this.infiniteLoadedElem.length - nullCounter : this.infiniteLoadedElem.length;\n            }\n            if (this.infiniteUnloadParentExistPred.length && (this.infiniteLoadedElem.length >= this.infiniteDataCount\n                || !this.options.parentCurrentViewDataCount || (this.options.parentTotalDataCount === this.infiniteDataCount\n                && this.options.parentCurrentViewDataCount))) {\n                this.infiniteUnloadParentExistPred = [];\n            }\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            if (this.infiniteRenderMod && !this.infiniteScrollAppendDiff) {\n                this.infiniteScrollAppendDiff = Math.round(scrollTop - this.cBox.scrollTop);\n            }\n            this.updateIndeterminatenBtn();\n            if (!this.infiniteRenderMod) {\n                if (btn) {\n                    btn.disabled = false;\n                }\n                disabled = false;\n            }\n            else {\n                if (btn && btn.disabled) {\n                    disabled = true;\n                }\n                else {\n                    disabled = false;\n                }\n            }\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            if (this.infiniteRenderMod) {\n                var selectAll = this.sBox.querySelector('.e-ftrchk .e-selectall');\n                if (selectAll) {\n                    var selectAllParent = selectAll.parentElement.parentElement;\n                    if (selectAll.classList.contains('e-check')) {\n                        toogleCheckbox(selectAllParent);\n                    }\n                    else if (selectAll.classList.contains('e-stop')) {\n                        toogleCheckbox(selectAllParent);\n                        selectAll.classList.remove('e-stop');\n                        toogleCheckbox(selectAllParent);\n                    }\n                    selectAll.previousSibling.disabled = true;\n                    selectAll.parentElement.classList.add('e-checkbox-disabled');\n                }\n                var addCurrSelection = this.sBox.querySelector('.e-ftrchk .e-add-current');\n                if (addCurrSelection) {\n                    var addCurrSelectionParent = addCurrSelection.parentElement.parentElement;\n                    if (addCurrSelection.classList.contains('e-check')) {\n                        toogleCheckbox(addCurrSelectionParent);\n                    }\n                    addCurrSelection.previousSibling.disabled = true;\n                    addCurrSelection.parentElement.classList.add('e-checkbox-disabled');\n                }\n            }\n            this.cBox.appendChild(this.parent.createElement('div', { className: 'e-checkfltrnmdiv' }));\n            appendChildren(this.cBox.children[0], [].slice.call(cBoxes.children));\n            if (btn) {\n                btn.disabled = true;\n            }\n            disabled = true;\n            this.filterState = !disabled;\n        }\n        if (btn && data.length) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        var args = { requestType: events.filterChoiceRequest, dataSource: this.renderEmpty ? [] : data };\n        var filterModel = 'filterModel';\n        args[\"\" + filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n        if (this.infiniteRenderMod && this.infiniteInitialLoad) {\n            this.cBox.style.marginTop = '0px';\n        }\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilterBase.prototype.updateInfiniteUnLoadedCheckboxExistPred = function (value, updatePredArr) {\n        for (var j = 0; j < updatePredArr.length; j++) {\n            var pred = updatePredArr[j];\n            var predValue = pred.value instanceof Date ?\n                this.valueFormatter.toView(pred.value, this.options.formatFn) : pred.value;\n            var column = this.options.column;\n            if (column.isForeignColumn()) {\n                var foreignDataObj = getForeignData(column, {}, predValue, this.foreignKeyData)[0];\n                value = getValue(column.foreignKeyField, foreignDataObj);\n            }\n            if (value === predValue && (pred.operator === 'equal' || pred.operator === 'notequal')) {\n                this.infiniteManualSelectMaintainPred.push(updatePredArr[j]);\n                updatePredArr.splice(j, 1);\n                j--;\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            var checkState = this.sInput && this.sInput.value ? true : this.result[\"\" + value];\n            if (this.infiniteRenderMod) {\n                return checkState;\n            }\n            else {\n                return this.options.operator === 'notequal' ? !checkState : checkState;\n            }\n        }\n    };\n    CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData, checkboxFilter) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n        while (len--) {\n            value = json[parseInt(len.toString(), 10)];\n            if (column && column.type === 'dateonly' && typeof value[\"\" + field] === 'string' && value[\"\" + field]) {\n                var arr = value[\"\" + field].split(/[^0-9.]/);\n                value[\"\" + field] = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10));\n            }\n            value = getObject(field, value); //local remote diff, check with mdu\n            var currentFilterValue = (typeof value === 'string') && !(isNullOrUndefined(checkboxFilter)) &&\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                !(isNullOrUndefined(checkboxFilter.parent)) && !(isNullOrUndefined(checkboxFilter.parent.filterSettings)) &&\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                !(isNullOrUndefined(checkboxFilter.parent.filterSettings.enableCaseSensitivity)) ? value.toLowerCase() : value;\n            if (!(currentFilterValue in lookup)) {\n                var obj = {};\n                obj[\"\" + ejValue] = value;\n                lookup[\"\" + currentFilterValue] = true;\n                if (isForeignKey) {\n                    var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                    setValue(events.foreignKeyData, foreignDataObj, json[parseInt(len.toString(), 10)]);\n                    value = getValue(column.foreignKeyValue, foreignDataObj);\n                }\n                setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                setValue('dataObj', json[parseInt(len.toString(), 10)], obj);\n                result.push(obj);\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilterBase.getPredicate = function (columns, isExecuteLocal) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[parseInt(i.toString(), 10)].field));\n            if (collection.length !== 0) {\n                pred[cols[parseInt(i.toString(), 10)].field] = CheckBoxFilterBase.generatePredicate(collection, isExecuteLocal);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilterBase.generatePredicate = function (cols, isExecuteLocal) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var operate = 'or';\n        var first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime' || first.type === 'dateonly') {\n            predicate = getDatePredicate(first, first.type, isExecuteLocal);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[parseInt(p.toString(), 10)] = CheckBoxFilterBase.updateDateFilter(cols[parseInt(p.toString(), 10)]);\n            if (len > 2 && p > 1 && ((cols[p].predicate === 'or' && cols[p - 1].predicate === 'or')\n                || (cols[p].predicate === 'and' && cols[p - 1].predicate === 'and'))) {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n                    predicate.predicates.push(getDatePredicate(cols[parseInt(p.toString(), 10)], cols[p].type, isExecuteLocal));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime' || cols[p].type === 'dateonly') {\n                    if (cols[parseInt(p.toString(), 10)].predicate === 'and' && cols[parseInt(p.toString(), 10)].operator === 'equal') {\n                        predicate = predicate[\"\" + operate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n                    }\n                    else {\n                        predicate = predicate[(cols[parseInt(p.toString(), 10)].predicate)](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);\n                    }\n                }\n                else {\n                    predicate = cols[parseInt(p.toString(), 10)].ejpredicate ?\n                        predicate[cols[parseInt(p.toString(), 10)]\n                            .predicate](cols[parseInt(p.toString(), 10)].ejpredicate) :\n                        predicate[(cols[parseInt(p.toString(), 10)].predicate)](cols[parseInt(p.toString(), 10)].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilterBase.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof (filter.value) === 'string') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilterBase.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.type === 'dateonly' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    return CheckBoxFilterBase;\n}());\nexport { CheckBoxFilterBase };\n"],"mappings":"AAAA;AACA,SAASA,YAAY,EAAEC,iBAAiB,EAAEC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,QAAQ,QAAQ,sBAAsB;AAC7I,SAASC,YAAY,EAAEC,MAAM,EAAEC,cAAc,EAAEC,gBAAgB,EAAEC,SAAS,EAAEC,eAAe,EAAEC,YAAY,EAAEC,UAAU,EAAEC,sBAAsB,EAAEC,OAAO,EAAEC,MAAM,QAAQ,cAAc;AACpL,SAASC,MAAM,EAAEC,QAAQ,EAAEC,oBAAoB,EAAEC,kBAAkB,QAAQ,sBAAsB;AACjG,SAASC,QAAQ,EAAEC,KAAK,EAAEC,WAAW,EAAEC,SAAS,QAAQ,sBAAsB;AAC9E,SAASC,cAAc,QAAQ,yBAAyB;AACxD,OAAO,KAAKC,MAAM,MAAM,kBAAkB;AAC1C,SAASC,cAAc,QAAQ,6BAA6B;AAC5D,SAASC,cAAc,EAAEC,iBAAiB,QAAQ,cAAc;AAChE,SAASC,MAAM,QAAQ,wBAAwB;AAC/C,SAASC,KAAK,QAAQ,wBAAwB;AAC9C,SAASC,aAAa,EAAEC,WAAW,EAAEC,WAAW,QAAQ,wBAAwB;AAChF,SAASC,oBAAoB,EAAEC,cAAc,EAAEC,kBAAkB,EAAEC,oBAAoB,EAAEC,0BAA0B,EAAEC,aAAa,EAAEC,sBAAsB,EAAEC,sBAAsB,QAAQ,cAAc;AACxM;AACA;AACA;AACA;AACA,IAAIC,kBAAkB,GAAG,aAAe,YAAY;EAChD;AACJ;AACA;AACA;AACA;AACA;EACI,SAASA,kBAAkBA,CAACC,MAAM,EAAE;IAChC,IAAI,CAACC,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACC,cAAc,GAAG,KAAK;IAC3B,IAAI,CAACC,mBAAmB,GAAG,EAAE;IAC7B,IAAI,CAACC,iBAAiB,GAAG,CAAC,CAAC;IAC3B,IAAI,CAACC,eAAe,GAAG,IAAI3B,KAAK,CAAC,CAAC;IAClC;IACA,IAAI,CAAC4B,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,MAAM,GAAG,CAAC,CAAC;IAChB,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,wBAAwB,GAAG,KAAK;IACrC,IAAI,CAACC,iBAAiB,GAAG,KAAK;IAC9B;IACA,IAAI,CAACC,mBAAmB,GAAG,KAAK;IAChC,IAAI,CAACC,uBAAuB,GAAG,KAAK;IACpC,IAAI,CAACC,0BAA0B,GAAG,EAAE;IACpC,IAAI,CAACC,6BAA6B,GAAG,KAAK;IAC1C,IAAI,CAACC,eAAe,GAAG,CAAC;IACxB,IAAI,CAACC,wBAAwB,GAAG,CAAC;IACjC,IAAI,CAACC,2BAA2B,GAAG,EAAE;IACrC,IAAI,CAACC,kBAAkB,GAAG,EAAE;IAC5B,IAAI,CAACC,iBAAiB,GAAG,CAAC;IAC1B,IAAI,CAACC,sBAAsB,GAAG,IAAI;IAClC,IAAI,CAACC,6BAA6B,GAAG,KAAK;IAC1C,IAAI,CAACC,gCAAgC,GAAG,KAAK;IAC7C,IAAI,CAACC,gCAAgC,GAAG,EAAE;IAC1C,IAAI,CAACvB,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACwB,EAAE,GAAG,IAAI,CAACxB,MAAM,CAACyB,OAAO,CAACD,EAAE;IAChC,IAAI,CAACE,cAAc,GAAG,IAAI3C,cAAc,CAAC,IAAI,CAACiB,MAAM,CAAC2B,MAAM,CAAC;IAC5D,IAAI,CAACC,QAAQ,GAAG/C,cAAc,CAAC,IAAI,CAACmB,MAAM,CAAC6B,aAAa,EAAE,KAAK,EAAE;MAAEC,OAAO,EAAE,IAAI;MAAEC,KAAK,EAAE;IAAI,CAAC,CAAC;IAC/F,IAAI,CAACC,SAAS,GAAGnD,cAAc,CAAC,IAAI,CAACmB,MAAM,CAAC6B,aAAa,EAAE,KAAK,EAAE;MAAEC,OAAO,EAAE,KAAK;MAAEC,KAAK,EAAE;IAAI,CAAC,CAAC;IACjG,IAAI,CAACH,QAAQ,CAACK,YAAY,CAAC,IAAI,CAACjC,MAAM,CAAC6B,aAAa,CAAC,OAAO,EAAE;MAC1DK,SAAS,EAAE,cAAc;MAAEC,KAAK,EAAE;QAAEC,IAAI,EAAE;MAAW;IACzD,CAAC,CAAC,EAAE,IAAI,CAACR,QAAQ,CAACS,UAAU,CAAC;IAC7B,IAAI,CAACL,SAAS,CAACC,YAAY,CAAC,IAAI,CAACjC,MAAM,CAAC6B,aAAa,CAAC,OAAO,EAAE;MAC3DK,SAAS,EAAE,cAAc;MAAEC,KAAK,EAAE;QAAE,MAAM,EAAE;MAAW;IAC3D,CAAC,CAAC,EAAE,IAAI,CAACH,SAAS,CAACK,UAAU,CAAC;IAC9B,IAAI,CAACL,SAAS,CAACM,aAAa,CAAC,UAAU,CAAC,CAAClF,SAAS,CAACmF,GAAG,CAAC,WAAW,CAAC;IACnE,IAAI,IAAI,CAACvC,MAAM,CAACwC,SAAS,EAAE;MACvBnF,QAAQ,CAAC,CAAC,IAAI,CAACuE,QAAQ,EAAE,IAAI,CAACI,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;IACxD;IACA,IAAI,IAAI,CAAChC,MAAM,CAACyC,QAAQ,EAAE;MACtB,IAAI,IAAI,CAACzC,MAAM,CAACyC,QAAQ,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;QAC1CrF,QAAQ,CAAC,CAAC,IAAI,CAACuE,QAAQ,EAAE,IAAI,CAACI,SAAS,CAAC,EAAE,IAAI,CAAChC,MAAM,CAACyC,QAAQ,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC;MAC9E,CAAC,MACI;QACDtF,QAAQ,CAAC,CAAC,IAAI,CAACuE,QAAQ,EAAE,IAAI,CAACI,SAAS,CAAC,EAAE,CAAC,IAAI,CAAChC,MAAM,CAACyC,QAAQ,CAAC,CAAC;MACrE;IACJ;EACJ;EACA;AACJ;AACA;AACA;EACI1C,kBAAkB,CAAC6C,SAAS,CAACC,OAAO,GAAG,YAAY;IAC/C,IAAI,CAACC,WAAW,CAAC,CAAC;EACtB,CAAC;EACD/C,kBAAkB,CAAC6C,SAAS,CAACG,UAAU,GAAG,YAAY;IAClD9F,YAAY,CAACsF,GAAG,CAAC,IAAI,CAACS,GAAG,EAAE,OAAO,EAAE,IAAI,CAACC,YAAY,EAAE,IAAI,CAAC;IAC5DhG,YAAY,CAACsF,GAAG,CAAC,IAAI,CAACS,GAAG,EAAE,OAAO,EAAE,IAAI,CAACE,YAAY,EAAE,IAAI,CAAC;IAC5D,IAAI,CAACC,aAAa,GAAG7E,QAAQ,CAAC,IAAI,CAAC8E,cAAc,EAAE,GAAG,CAAC;IACvD,IAAIC,IAAI,GAAG,IAAI,CAACC,SAAS,CAAC7B,OAAO,CAACa,aAAa,CAAC,gBAAgB,CAAC;IACjE,IAAIe,IAAI,EAAE;MACNpG,YAAY,CAACsF,GAAG,CAACc,IAAI,EAAE,OAAO,EAAE,IAAI,CAACF,aAAa,EAAE,IAAI,CAAC;MACzDlG,YAAY,CAACsF,GAAG,CAACc,IAAI,EAAE,OAAO,EAAE,IAAI,CAACF,aAAa,EAAE,IAAI,CAAC;IAC7D;EACJ,CAAC;EACDpD,kBAAkB,CAAC6C,SAAS,CAACW,YAAY,GAAG,YAAY;IACpDtG,YAAY,CAACoB,MAAM,CAAC,IAAI,CAAC2E,GAAG,EAAE,OAAO,EAAE,IAAI,CAACC,YAAY,CAAC;IACzDhG,YAAY,CAACoB,MAAM,CAAC,IAAI,CAAC2E,GAAG,EAAE,OAAO,EAAE,IAAI,CAACE,YAAY,CAAC;IACzD,IAAIG,IAAI,GAAG,IAAI,CAACC,SAAS,CAAC7B,OAAO,CAACa,aAAa,CAAC,gBAAgB,CAAC;IACjE,IAAIe,IAAI,EAAE;MACNpG,YAAY,CAACoB,MAAM,CAACgF,IAAI,EAAE,OAAO,EAAE,IAAI,CAACF,aAAa,CAAC;MACtDlG,YAAY,CAACoB,MAAM,CAACgF,IAAI,EAAE,OAAO,EAAE,IAAI,CAACF,aAAa,CAAC;IAC1D;EACJ,CAAC;EACDpD,kBAAkB,CAAC6C,SAAS,CAACY,gBAAgB,GAAG,UAAUC,IAAI,EAAEC,KAAK,EAAEC,UAAU,EAAE;IAC/E,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAIC,UAAU,GAAG,CAAC,CAAC;IACnB,IAAIC,gBAAgB,GAAG,EAAE;IACzB,IAAIC,KAAK,GAAG,IAAI,CAAC1D,eAAe,CAAC2D,KAAK,CAAC,CAAC;IACxC,IAAI,CAACC,OAAO,CAACC,MAAM,CAACC,UAAU,CAC1BC,YAAY,CAACL,KAAK,CAACM,KAAK,CAACV,UAAU,CAAC,CAAC,CAACW,IAAI,CAAC,UAAUC,CAAC,EAAE;MACxDX,KAAK,CAACK,OAAO,CAACC,MAAM,CAACM,UAAU,GAAGD,CAAC,CAACE,MAAM;MAC1Cb,KAAK,CAAC5D,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAAC6F,aAAa,EAAE;QAAEC,SAAS,EAAEf,UAAU;QAAEK,MAAM,EAAEN,KAAK,CAACK,OAAO,CAACC;MAAO,CAAC,CAAC;MAClGT,IAAI,CAACoB,WAAW,GAAGhB,UAAU,CAACe,SAAS,CAACE,UAAU;MAClD,IAAIC,KAAK,GAAGlB,UAAU,CAACe,SAAS,CAACE,UAAU;MAC3C,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,KAAK,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;QACnClB,gBAAgB,CAACoB,IAAI,CAAC;UAClBC,KAAK,EAAEJ,KAAK,CAACK,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACF,KAAK;UAC9CP,SAAS,EAAE,IAAI;UACfU,SAAS,EAAEP,KAAK,CAACK,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACE,UAAU;UACvDC,YAAY,EAAET,KAAK,CAACK,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,YAAY;UAC5DC,QAAQ,EAAEV,KAAK,CAACK,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACI,QAAQ;UACpDC,KAAK,EAAEX,KAAK,CAACK,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACK,KAAK;UAC9CtD,IAAI,EAAEwB,KAAK,CAACK,OAAO,CAAC7B;QACxB,CAAC,CAAC;MACN;MACAqB,IAAI,CAACK,gBAAgB,GAAGA,gBAAgB,CAACmB,MAAM,GAAGnB,gBAAgB,GAC9DJ,KAAK,CAACiC,MAAM,CAAC,UAAUC,GAAG,EAAE;QAAE,OAAOA,GAAG,CAACT,KAAK,GAAGvB,KAAK,CAACK,OAAO,CAACkB,KAAK;MAAE,CAAC,CAAC;MAC5EvB,KAAK,CAACK,OAAO,CAAC4B,OAAO,CAACpC,IAAI,CAAC;IAC/B,CAAC,CAAC;EACN,CAAC;EACD1D,kBAAkB,CAAC6C,SAAS,CAACkD,cAAc,GAAG,UAAUvB,CAAC,EAAE;IACvD,IAAIwB,MAAM,GAAGxB,CAAC,CAACwB,MAAM;IACrB,IAAIA,MAAM,CAAC3I,SAAS,CAAC4I,QAAQ,CAAC,eAAe,CAAC,EAAE;MAC5C,IAAI,CAACC,MAAM,CAACP,KAAK,GAAGK,MAAM,CAAC3I,SAAS,CAAC4I,QAAQ,CAAC,kBAAkB,CAAC,GAAG,EAAE,GAAG,IAAI,CAACC,MAAM,CAACP,KAAK;MAC1F,IAAI,IAAI,CAACjF,wBAAwB,EAAE;QAC/B,IAAI,CAACT,MAAM,CAAC0E,MAAM,CAAC,iBAAiB,EAAE;UAAEwB,KAAK,EAAE3B;QAAE,CAAC,CAAC;MACvD,CAAC,MACI;QACD,IAAI,CAAC4B,iBAAiB,CAAC,CAAC;MAC5B;MACA,IAAI,CAACC,gBAAgB,CAAC,CAAC;MACvB,IAAI,CAACH,MAAM,CAACI,KAAK,CAAC,CAAC;IACvB;EACJ,CAAC;EACDtG,kBAAkB,CAAC6C,SAAS,CAACQ,cAAc,GAAG,UAAUmB,CAAC,EAAE;IACvD,IAAIrH,iBAAiB,CAAC,IAAI,CAAC+I,MAAM,CAAC,EAAE;MAChC;IACJ;IACA,IAAI/I,iBAAiB,CAACqH,CAAC,CAAC,IAAKA,CAAC,CAAC+B,GAAG,KAAK,SAAS,IAAI/B,CAAC,CAAC+B,GAAG,KAAK,WAAW,IAAI/B,CAAC,CAAC+B,GAAG,KAAK,KAAK,IAAI,EAAE/B,CAAC,CAAC+B,GAAG,KAAK,KAAK,IAAI/B,CAAC,CAACgC,QAAQ,CAAE,EAAE;MAC/H,IAAI,CAACrJ,iBAAiB,CAAC,IAAI,CAAC8C,MAAM,CAACwG,gBAAgB,CAAC,IAAI,IAAI,CAACxG,MAAM,CAACwG,gBAAgB,CAACC,aAAa,KAAK,SAAS,EAAE;QAC9G,IAAI,CAACzG,MAAM,CAAC0G,WAAW,CAACC,SAAS,EAAE,IAAI,CAACrD,SAAS,CAAC7B,OAAO,CAAC;MAC9D;MACA,IAAI,IAAI,CAAChB,wBAAwB,EAAE;QAC/B,IAAI,CAACT,MAAM,CAAC0E,MAAM,CAAC,iBAAiB,EAAE;UAAEwB,KAAK,EAAE3B;QAAE,CAAC,CAAC;MACvD,CAAC,MACI;QACD,IAAI,CAAC4B,iBAAiB,CAAC,CAAC;MAC5B;MACA,IAAI,CAACC,gBAAgB,CAAC,CAAC;IAC3B;EACJ,CAAC;EACDrG,kBAAkB,CAAC6C,SAAS,CAACwD,gBAAgB,GAAG,YAAY;IACxD,IAAI,IAAI,CAACH,MAAM,CAACP,KAAK,CAACT,MAAM,EAAE;MAC1B7H,SAAS,CAAC,IAAI,CAACwJ,KAAK,EAAE,CAAC,kBAAkB,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC;MAC9D,IAAI,CAAC1J,iBAAiB,CAAC2J,QAAQ,CAACC,IAAI,CAACxE,aAAa,CAAC,mBAAmB,CAAC,CAAC,EAAE;QACtEuE,QAAQ,CAACC,IAAI,CAACxE,aAAa,CAAC,mBAAmB,CAAC,CAACyE,YAAY,CAAC,OAAO,EAAE,IAAI,CAACC,SAAS,CAACC,WAAW,CAAC,OAAO,CAAC,CAAC;MAC/G;IACJ,CAAC,MACI;MACD7J,SAAS,CAAC,IAAI,CAACwJ,KAAK,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC;MAC9D,IAAI,CAAC1J,iBAAiB,CAAC2J,QAAQ,CAACC,IAAI,CAACxE,aAAa,CAAC,8BAA8B,CAAC,CAAC,EAAE;QACjFuE,QAAQ,CAACC,IAAI,CAACxE,aAAa,CAAC,8BAA8B,CAAC,CAACyE,YAAY,CAAC,OAAO,EAAE,IAAI,CAACC,SAAS,CAACC,WAAW,CAAC,QAAQ,CAAC,CAAC;MAC3H;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIlH,kBAAkB,CAAC6C,SAAS,CAACsE,iBAAiB,GAAG,UAAUZ,GAAG,EAAE;IAC5D,OAAO,IAAI,CAACU,SAAS,CAACC,WAAW,CAACX,GAAG,CAAC;EAC1C,CAAC;EACDvG,kBAAkB,CAAC6C,SAAS,CAACuE,gBAAgB,GAAG,YAAY;IACxD,IAAIhD,UAAU,GAAG,IAAI,CAACF,OAAO,CAACE,UAAU;IACxC,IAAIiD,GAAG,GAAG,QAAQ;IAClB,IAAI,EAAEjD,UAAU,YAAYxF,WAAW,CAAC,EAAE;MACtC,KAAK,IAAIqG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGb,UAAU,CAACc,MAAM,EAAED,CAAC,EAAE,EAAE;QACxC;QACA,IAAI,OAAOb,UAAU,KAAKiD,GAAG,EAAE;UAC3B,IAAIC,GAAG,GAAG,CAAC,CAAC;UACZA,GAAG,CAAC,IAAI,CAACpD,OAAO,CAACkB,KAAK,CAAC,GAAGhB,UAAU,CAACiB,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;UAChElB,UAAU,CAACiB,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAGgC,GAAG;QAChD;MACJ;IACJ;EACJ,CAAC;EACDtH,kBAAkB,CAAC6C,SAAS,CAAC0E,WAAW,GAAG,UAAUrD,OAAO,EAAE;IAC1D,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAC7D,iBAAiB,GAAG6D,OAAO,CAACsD,eAAe,IAAI,CAAC,CAAC;IACtD,IAAI,CAACtD,OAAO,CAACE,UAAU,GAAGF,OAAO,CAACE,UAAU;IAC5C,IAAI,CAACF,OAAO,CAACuD,WAAW,GAAGvD,OAAO,CAACuD,WAAW,GAAGvD,OAAO,CAACuD,WAAW,GAAGvD,OAAO,CAACE,UAAU;IACzF,IAAI,CAACgD,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAAClD,OAAO,CAAC7B,IAAI,GAAG6B,OAAO,CAAC7B,IAAI;IAChC,IAAI,CAAC6B,OAAO,CAACwD,MAAM,GAAGxD,OAAO,CAACwD,MAAM,IAAI,EAAE;IAC1C,IAAI,CAACxD,OAAO,CAACuB,YAAY,GAAGvB,OAAO,CAACuB,YAAY,IAAI,KAAK;IACzD,IAAI,CAACvB,OAAO,CAACyD,eAAe,GAAGzD,OAAO,CAACyD,eAAe,IAAI,IAAI,CAAC1H,MAAM,CAAC2H,cAAc,CAACC,OAAO;IAC5F,IAAI,CAAC3D,OAAO,CAACF,KAAK,GAAGE,OAAO,CAACF,KAAK,IAAI,IAAIrF,KAAK,CAAC,CAAC;IACjD,IAAI,CAACuF,OAAO,CAAC4D,kBAAkB,GAAG5D,OAAO,CAAC4D,kBAAkB,IAAI,KAAK;IACrE,IAAI,CAAC5D,OAAO,CAAC6D,GAAG,GAAG7D,OAAO,CAACC,MAAM,CAAC4D,GAAG;IACrC,IAAI,CAAC7D,OAAO,CAAC8D,iBAAiB,GAAG9D,OAAO,CAACC,MAAM,CAAC6D,iBAAiB,IAAI,KAAK;IAC1E,IAAI,CAACxH,MAAM,GAAG,CAAC,CAAC;IAChB,IAAI,CAACyG,SAAS,GAAG/C,OAAO,CAAC+C,SAAS;IAClC,IAAI,CAACgB,UAAU,GAAG/D,OAAO,CAACyD,eAAe,CAACzC,MAAM;IAChD,IAAI,CAACvE,iBAAiB,GAAG,IAAI,CAACV,MAAM,CAAC2H,cAAc,IAAI,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACM,uBAAuB,GAAG,IAAI,GAAG,KAAK;IACxH,IAAI,CAACC,6BAA6B,GAAG,IAAI,CAACxH,iBAAiB,IAAI,IAAI,CAACN,iBAAiB,CAAC,IAAI,CAAC6D,OAAO,CAACC,MAAM,CAACiB,KAAK,CAAC,GAAG,IAAI,CAAC/E,iBAAiB,CAAC,IAAI,CAAC6D,OAAO,CAACC,MAAM,CAACiB,KAAK,CAAC,CAACgD,KAAK,CAAC,CAAC,GAAG,EAAE;EACrL,CAAC;EACDpI,kBAAkB,CAAC6C,SAAS,CAACwF,gBAAgB,GAAG,UAAUnE,OAAO,EAAE;IAC/D,IAAI,CAACjB,GAAG,GAAG,IAAI,CAAChD,MAAM,CAAC6B,aAAa,CAAC,KAAK,EAAE;MACxCL,EAAE,EAAE,IAAI,CAACA,EAAE,GAAG,IAAI,CAACyC,OAAO,CAAC7B,IAAI,GAAG,WAAW;MAC7CD,KAAK,EAAE;QAAE2F,GAAG,EAAE,IAAI,CAAC7D,OAAO,CAACC,MAAM,CAAC4D;MAAI,CAAC;MACvC5F,SAAS,EAAE;IACf,CAAC,CAAC;IACF,IAAI,CAACmG,IAAI,GAAG,IAAI,CAACrI,MAAM,CAAC6B,aAAa,CAAC,KAAK,EAAE;MAAEK,SAAS,EAAE;IAAoB,CAAC,CAAC;IAChF,IAAI,CAAC+B,OAAO,CAACqE,aAAa,EAAE;MACxB,IAAI,CAACrC,MAAM,GAAG,IAAI,CAACjG,MAAM,CAAC6B,aAAa,CAAC,OAAO,EAAE;QAC7CL,EAAE,EAAE,IAAI,CAACA,EAAE,GAAG,YAAY;QAC1BU,SAAS,EAAE;MACf,CAAC,CAAC;MACF,IAAI,CAAC0E,KAAK,GAAG,IAAI,CAAC5G,MAAM,CAAC6B,aAAa,CAAC,MAAM,EAAE;QAC3CK,SAAS,EAAE,wDAAwD;QAAEC,KAAK,EAAE;UACxEC,IAAI,EAAE,MAAM;UAAEmG,KAAK,EAAE,IAAI,CAACrB,iBAAiB,CAAC,QAAQ;QACxD;MACJ,CAAC,CAAC;MACF,IAAI,CAACsB,SAAS,GAAG,IAAI,CAACxI,MAAM,CAAC6B,aAAa,CAAC,MAAM,EAAE;QAAEK,SAAS,EAAE;MAAuB,CAAC,CAAC;MACzF,IAAI,CAACsG,SAAS,CAACC,WAAW,CAAC,IAAI,CAACxC,MAAM,CAAC;MACvC,IAAI,CAACoC,IAAI,CAACI,WAAW,CAAC,IAAI,CAACD,SAAS,CAAC;MACrC,IAAI,CAACvI,eAAe,GAAG;QACnBwB,OAAO,EAAE,IAAI,CAACwE,MAAM;QAAEyC,cAAc,EAAE,OAAO;QAAEC,UAAU,EAAE;UACvDC,WAAW,EAAE,IAAI,CAAC1B,iBAAiB,CAAC,QAAQ,CAAC;UAC7CzE,QAAQ,EAAE,IAAI,CAACzC,MAAM,CAACyC;QAC1B;MACJ,CAAC;MACDtD,KAAK,CAAC0J,WAAW,CAAC,IAAI,CAAC5I,eAAe,EAAE,IAAI,CAACD,MAAM,CAAC6B,aAAa,CAAC;MAClE,IAAI,CAAC2G,SAAS,CAAClG,aAAa,CAAC,gBAAgB,CAAC,CAACmG,WAAW,CAAC,IAAI,CAAC7B,KAAK,CAAC;IAC1E;IACA,IAAI,CAACkC,OAAO,GAAG,IAAI,CAAC9I,MAAM,CAAC6B,aAAa,CAAC,KAAK,EAAE;MAAEK,SAAS,EAAE;IAAY,CAAC,CAAC,CAAC,CAAC;IAC7E,IAAI,CAAC6G,IAAI,GAAG,IAAI,CAAC/I,MAAM,CAAC6B,aAAa,CAAC,KAAK,EAAE;MACzCL,EAAE,EAAE,IAAI,CAACA,EAAE,GAAG,IAAI,CAACyC,OAAO,CAAC7B,IAAI,GAAG,eAAe;MACjDF,SAAS,EAAE;IACf,CAAC,CAAC;IACF,IAAI,CAAC4G,OAAO,CAACL,WAAW,CAAC,IAAI,CAACM,IAAI,CAAC;IACnC,IAAI,CAACV,IAAI,CAACI,WAAW,CAAC,IAAI,CAACK,OAAO,CAAC;IACnC,OAAO,IAAI,CAACT,IAAI;EACpB,CAAC;EACDtI,kBAAkB,CAAC6C,SAAS,CAACoG,UAAU,GAAG,UAAU/E,OAAO,EAAE;IACzD,IAAIR,IAAI,GAAG;MACPwF,WAAW,EAAEnK,MAAM,CAACoK,gBAAgB;MACpCC,UAAU,EAAE,IAAI,CAAClF,OAAO,CAACkB,KAAK;MAAEiE,UAAU,EAAE,IAAI,CAACnF,OAAO,CAAC7B,IAAI;MAAEiH,MAAM,EAAE;IAC3E,CAAC;IACD,IAAIC,WAAW,GAAG,aAAa;IAC/B7F,IAAI,CAAC,EAAE,GAAG6F,WAAW,CAAC,GAAG,IAAI;IAC7B,IAAI,CAACtJ,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACyK,aAAa,EAAE9F,IAAI,CAAC;IAC9C,IAAIA,IAAI,CAAC4F,MAAM,EAAE;MACbpF,OAAO,CAACoF,MAAM,GAAG5F,IAAI,CAAC4F,MAAM;MAC5B;IACJ;IACA,IAAI,CAAC/F,SAAS,GAAG,IAAIpE,MAAM,CAAC;MACxBsK,OAAO,EAAE,KAAK;MAAEC,OAAO,EAAE,IAAI,CAACpB,IAAI;MAClCqB,KAAK,EAAE,IAAI,CAAC5G,WAAW,CAAC6G,IAAI,CAAC,IAAI,CAAC;MAClCnH,SAAS,EAAE,IAAI,CAACxC,MAAM,CAACwC,SAAS;MAChCoH,KAAK,EAAG,CAAC1M,iBAAiB,CAACQ,YAAY,CAACuG,OAAO,CAAC8B,MAAM,EAAE,UAAU,CAAC,CAAC,IAC7D,IAAI,CAAC/F,MAAM,CAACyB,OAAO,CAACrE,SAAS,CAAC4I,QAAQ,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,GAAG;MACrED,MAAM,EAAE,IAAI,CAAC/F,MAAM,CAACyB,OAAO;MAAEoI,iBAAiB,EAAE;QAAEC,MAAM,EAAE;MAAO,CAAC;MAClEC,OAAO,EAAE,CAAC;QACFC,KAAK,EAAE,IAAI,CAACC,QAAQ,CAACN,IAAI,CAAC,IAAI,CAAC;QAC/BO,WAAW,EAAE;UACTT,OAAO,EAAE,IAAI,CAACvC,iBAAiB,CAAC,IAAI,CAACiD,OAAO,GAAG,UAAU,GAAG,cAAc,CAAC;UAC3E1H,QAAQ,EAAE,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG,WAAW,GAAG,GAAG,GAAG,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG,WAAW;UACvF2H,SAAS,EAAE;QACf;MACJ,CAAC,EACD;QACIJ,KAAK,EAAE,IAAI,CAACC,QAAQ,CAACN,IAAI,CAAC,IAAI,CAAC;QAC/BO,WAAW,EAAE;UAAEzH,QAAQ,EAAE,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG,QAAQ,GAAG,GAAG,GAAG,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG,QAAQ;UAC5FgH,OAAO,EAAE,IAAI,CAACvC,iBAAiB,CAAC,IAAI,CAACiD,OAAO,GAAG,cAAc,GAAG,aAAa;QAAE;MACvF,CAAC,CAAC;MACNE,OAAO,EAAE,IAAI,CAACC,aAAa,CAACX,IAAI,CAAC,IAAI,CAAC;MACtCY,IAAI,EAAE,IAAI,CAACC,UAAU,CAACb,IAAI,CAAC,IAAI,CAAC;MAChClH,QAAQ,EAAE,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG;IAC5D,CAAC,CAAC;IACF,IAAIgI,gBAAgB,GAAG,kBAAkB;IACzC,IAAI,CAACnH,SAAS,CAAC,EAAE,GAAGmH,gBAAgB,CAAC,GAAG,IAAI;IAC5C,IAAI,CAACC,sBAAsB,CAACzG,OAAO,CAAC;IACpC,IAAI0G,WAAW,GAAG,IAAI,CAAC3K,MAAM,CAAC2H,cAAc,IAAI,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACvF,IAAI,KAAK,UAAU,GAC1F,IAAI,CAAC8E,iBAAiB,CAAC,0BAA0B,CAAC,GAAG,IAAI,CAACA,iBAAiB,CAAC,uBAAuB,CAAC;IACxG,IAAI,CAAClE,GAAG,CAAC+D,YAAY,CAAC,YAAY,EAAE4D,WAAW,CAAC;IAChD,IAAI1G,OAAO,CAAC2G,kBAAkB,EAAE;MAC5B,IAAIC,aAAa,GAAGhE,QAAQ,CAACvE,aAAa,CAAC,0DAA0D,CAAC;MACtGuI,aAAa,CAACpC,WAAW,CAAC,IAAI,CAACzF,GAAG,CAAC;IACvC,CAAC,MACI;MACD,IAAI,CAAChD,MAAM,CAACyB,OAAO,CAACgH,WAAW,CAAC,IAAI,CAACzF,GAAG,CAAC;IAC7C;IACA,IAAI,CAACM,SAAS,CAACwH,QAAQ,CAAC,IAAI,CAAC9H,GAAG,CAAC;IACjC,IAAI,CAACM,SAAS,CAAC7B,OAAO,CAACsJ,KAAK,CAACC,SAAS,GAAG/G,OAAO,CAAC2G,kBAAkB,GAAG,MAAM,GAAG,IAAI,CAAC3G,OAAO,CAACgH,MAAM,GAAG,IAAI;IACzG,IAAI,CAAC3H,SAAS,CAAC4H,IAAI,CAAC,CAAC;IACrB,IAAI,IAAI,CAAClL,MAAM,IAAI,IAAI,CAACA,MAAM,CAAC2H,cAAc,KAAK,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACvF,IAAI,KAAK,UAAU,IACxF,IAAI,CAAC6B,OAAO,CAACC,MAAM,IAAI,IAAI,CAACD,OAAO,CAACC,MAAM,CAACyB,MAAM,IAAI,IAAI,CAAC1B,OAAO,CAACC,MAAM,CAACyB,MAAM,CAACvD,IAAI,KAAK,UAAW,CAAC,IACzG,IAAI,CAACpC,MAAM,CAACmL,UAAU,CAAC,CAAC,CAACC,iBAAiB,CAACC,YAAY,GAAG,IAAI,CAAC/H,SAAS,CAAC7B,OAAO,CAAC4J,YAAY,IAC7F,CAAC3N,YAAY,CAAC,IAAI,CAACsC,MAAM,CAACyB,OAAO,EAAE,gBAAgB,CAAC,EAAE;MACtDxC,iBAAiB,CAAC,IAAI,CAACe,MAAM,EAAE,IAAI,CAACsD,SAAS,CAAC;IAClD;IACA,IAAImG,OAAO,GAAG,IAAI,CAACnG,SAAS,CAAC7B,OAAO,CAACa,aAAa,CAAC,gBAAgB,CAAC;IACpEmH,OAAO,CAAChB,WAAW,CAAC,IAAI,CAACJ,IAAI,CAAC;IAC9B,IAAI,CAACtF,UAAU,CAAC,CAAC;IACjB,IAAI,CAAC,IAAI,CAAC/C,MAAM,CAACsL,gBAAgB,EAAE;MAC/B,IAAI,CAACpO,iBAAiB,CAAC,IAAI,CAAC8C,MAAM,CAACwG,gBAAgB,CAAC,IAAI,IAAI,CAACxG,MAAM,CAACwG,gBAAgB,CAACC,aAAa,KAAK,SAAS,IACzG,CAAC,IAAI,CAAC/F,iBAAiB,EAAE;QAC5B,IAAI,CAACV,MAAM,CAAC0G,WAAW,CAACC,SAAS,EAAE,IAAI,CAACrD,SAAS,CAAC7B,OAAO,CAAC;MAC9D;MACA,IAAI,IAAI,CAACf,iBAAiB,IAAI,IAAI,CAACV,MAAM,CAAC2H,cAAc,IAAI,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACnB,gBAAgB,KAAK,SAAS,EAAE;QACnH,IAAI,CAAC+E,QAAQ,CAAC,CAAC;MACnB;IACJ,CAAC,MACI;MACD,IAAI,IAAI,CAAC7K,iBAAiB,IAAI,IAAI,CAACV,MAAM,CAAC2H,cAAc,IAAI,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACnB,gBAAgB,KAAK,SAAS,EAAE;QACnH,IAAI,CAACgF,UAAU,CAAC,CAAC;QACjB;MACJ;MACA,IAAI,IAAI,CAAC9K,iBAAiB,EAAE;QACxB,IAAI,CAACqI,IAAI,CAACgC,KAAK,CAACU,SAAS,GAAG7L,aAAa,CAAC,IAAI,CAACmJ,IAAI,CAAC,GAAG,IAAI;MAC/D;IACJ;IACA,IAAI,EAAE,IAAI,CAACrI,iBAAiB,IAAI,IAAI,CAACV,MAAM,CAAC2H,cAAc,IAAI,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACnB,gBAAgB,KAAK,SAAS,CAAC,EAAE;MACtHpH,aAAa,CAAC;QAAE2G,MAAM,EAAE,IAAI,CAAC+C,OAAO;QAAErG,QAAQ,EAAE,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG;MAAK,CAAC,EAAE,IAAI,CAACzC,MAAM,CAAC6B,aAAa,CAAC;MAChIvC,WAAW,CAAC,IAAI,CAACwJ,OAAO,CAAC;IAC7B;IACA,IAAI,CAAC0C,UAAU,CAAC,CAAC;EACrB,CAAC;EACDzL,kBAAkB,CAAC6C,SAAS,CAAC8H,sBAAsB,GAAG,UAAUzG,OAAO,EAAE;IACrE,IAAIA,OAAO,CAAC2G,kBAAkB,EAAE;MAC5B,IAAI,CAACtH,SAAS,CAACyG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;MAC7B,IAAI,CAACzG,SAAS,CAACoI,QAAQ,GAAG;QAAEC,CAAC,EAAE,EAAE;QAAEC,CAAC,EAAE;MAAG,CAAC;MAC1C,IAAI,CAACtI,SAAS,CAACyC,MAAM,GAAGc,QAAQ,CAACvE,aAAa,CAAC,kDAAkD,CAAC;MAClG,IAAI,CAACgB,SAAS,CAACsG,KAAK,GAAG,MAAM;IACjC;EACJ,CAAC;EACD7J,kBAAkB,CAAC6C,SAAS,CAAC0H,aAAa,GAAG,UAAU/F,CAAC,EAAE;IACtD,IAAI,IAAI,CAACN,OAAO,CAAC2G,kBAAkB,EAAE;MACjC,IAAI,CAACtH,SAAS,CAAC7B,OAAO,CAACsJ,KAAK,CAACc,IAAI,GAAG,KAAK;IAC7C,CAAC,MACI;MACD,IAAI,CAACtO,OAAO,CAACuO,QAAQ,EAAE;QACnBvM,oBAAoB,CAAC,IAAI,CAAC0E,OAAO,CAAC8B,MAAM,EAAE,IAAI,CAACzC,SAAS,EAAE,IAAI,CAACtD,MAAM,CAAC;MAC1E,CAAC,MACI;QACD,IAAI,CAACsD,SAAS,CAACoI,QAAQ,GAAG;UAAEC,CAAC,EAAE,QAAQ;UAAEC,CAAC,EAAE;QAAS,CAAC;MAC1D;IACJ;IACA,IAAI,IAAI,CAAC3H,OAAO,CAACC,MAAM,CAAC6H,cAAc,EAAE;MACpC,IAAI,CAAC/L,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACkN,mBAAmB,EAAEzH,CAAC,CAAC;IACrD;EACJ,CAAC;EACDxE,kBAAkB,CAAC6C,SAAS,CAACqJ,UAAU,GAAG,UAAUhI,OAAO,EAAE;IACzD,IAAI,CAACqD,WAAW,CAACrD,OAAO,CAAC;IACzB,IAAI,CAACmE,gBAAgB,CAACnE,OAAO,CAAC;IAC9B,IAAI,CAAC+E,UAAU,CAAC/E,OAAO,CAAC;EAC5B,CAAC;EACDlE,kBAAkB,CAAC6C,SAAS,CAACE,WAAW,GAAG,YAAY;IACnD,IAAI,IAAI,CAACpC,iBAAiB,IAAI,IAAI,CAACG,0BAA0B,CAACoE,MAAM,IAAI,CAAC,IAAI,CAAChB,OAAO,CAACiI,QAAQ,EAAE;MAC5F,IAAI,CAACjI,OAAO,CAACE,UAAU,CAACA,UAAU,CAACgI,IAAI,GAAG,IAAI,CAACtL,0BAA0B;IAC7E;IACA,IAAI,IAAI,CAACyC,SAAS,IAAI,CAAC,IAAI,CAACA,SAAS,CAAC8I,WAAW,EAAE;MAC/C,IAAI,CAACC,QAAQ,GAAG,KAAK;MACrB,IAAIC,iBAAiB,GAAG,IAAI,CAACrI,OAAO,CAAC2D,OAAO,CAACjC,MAAM,CAAC,UAAUC,GAAG,EAAE;QAAE,OAAOA,GAAG,CAAC2G,qBAAqB,CAAC,CAAC;MAAE,CAAC,CAAC;MAC3G;MACA,IAAIC,kBAAkB,GAAG,IAAI,CAACxM,MAAM,CAACwM,kBAAkB;MACvD,IAAIF,iBAAiB,CAACrH,MAAM,IAAI,CAAC/H,iBAAiB,CAACsP,kBAAkB,CAAC,IAAIA,kBAAkB,CAACC,kBAAkB,EAAE;QAC7G,IAAI,CAACzM,MAAM,CAAC0M,eAAe,CAAC,CAAC,oBAAoB,CAAC,CAAC;MACvD;MACA,IAAI,CAAC,IAAI,CAAC1M,MAAM,CAAC2M,OAAO,IAAI,IAAI,CAAC3M,MAAM,CAAC4M,KAAK,KAAK,IAAI,CAAC5M,MAAM,CAAC0M,eAAe,KAAK/F,SAAS,EAAE;QACzFzI,sBAAsB,CAAC,IAAI,CAAC8B,MAAM,EAAE,CAAC,oBAAoB,CAAC,CAAC;MAC/D;MACA,IAAI,CAACA,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAAC+N,eAAe,EAAE;QAAE1H,KAAK,EAAE,IAAI,CAAClB,OAAO,CAACkB;MAAM,CAAC,CAAC;MACzE,IAAI,CAAC5B,YAAY,CAAC,CAAC;MACnB,IAAI,IAAI,CAACtD,eAAe,IAAI,IAAI,CAACA,eAAe,CAACwB,OAAO,IAAI,IAAI,CAACxB,eAAe,CAACwB,OAAO,CAACqL,aAAa,EAAE;QACpG3N,KAAK,CAAC0D,OAAO,CAAC,IAAI,CAAC5C,eAAe,CAAC;QACnC5B,MAAM,CAAC,IAAI,CAAC4B,eAAe,CAACwB,OAAO,CAAC;MACxC;MACA,IAAI,CAACxB,eAAe,GAAG,IAAI;MAC3B,IAAI,CAACgG,MAAM,GAAG,IAAI;MAClB,IAAI,IAAI,CAACjG,MAAM,CAAC2M,OAAO,IAAI,IAAI,CAAC1I,OAAO,CAACC,MAAM,CAACyB,MAAM,IAAI,OAAQ,IAAI,CAAC1B,OAAO,CAACC,MAAM,CAACyB,MAAM,CAACoH,YAAa,KAAK,QAAQ,KAC9G,IAAI,CAAC9I,OAAO,CAACC,MAAM,CAACyB,MAAM,CAACvD,IAAI,KAAK,UAAU,IAAI,IAAI,CAAC6B,OAAO,CAACC,MAAM,CAACyB,MAAM,CAACvD,IAAI,KAAK,OAAO,CAAC,EAAE;QACpG,IAAI,CAACkB,SAAS,CAAC7B,OAAO,CAACa,aAAa,CAAC,gBAAgB,CAAC,CAAC0K,SAAS,GAAG,EAAE;MACzE;MACA,IAAI,CAAC1J,SAAS,CAACT,OAAO,CAAC,CAAC;MACxB,IAAI,IAAI,CAACS,SAAS,CAAC,aAAa,CAAC,KAAK,QAAQ,EAAE;QAC5C,IAAI,CAACtD,MAAM,CAACiN,yBAAyB,GAAG,IAAI;MAChD;MACA,IAAI,IAAI,CAACjK,GAAG,IAAI,IAAI,CAACA,GAAG,CAAC8J,aAAa,EAAE;QACpCzO,MAAM,CAAC,IAAI,CAAC2E,GAAG,CAAC;QAChB,IAAIkK,SAAS,GAAGrG,QAAQ,CAACsG,cAAc,CAAC,IAAI,CAACnN,MAAM,CAACyB,OAAO,CAACD,EAAE,GAAG,UAAU,CAAC;QAC5E,IAAI,CAACtE,iBAAiB,CAACgQ,SAAS,CAAC,EAAE;UAC/B7O,MAAM,CAAC6O,SAAS,CAAC;UACjBA,SAAS,GAAG,IAAI;QACpB;MACJ;MACA,IAAI,CAAClK,GAAG,GAAG,IAAI;MACf,IAAI,CAAChD,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACsO,iBAAiB,EAAE,CAAC,CAAC,CAAC;IACpD;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIrN,kBAAkB,CAAC6C,SAAS,CAACyK,WAAW,GAAG,UAAUzH,GAAG,EAAE;IACtD;IACA,IAAInC,IAAI,GAAG;MAAE6J,QAAQ,EAAE,IAAI;MAAEzH,OAAO,EAAE,IAAI,CAACwH,WAAW;MAAEhE,MAAM,EAAE;IAAM,CAAC;IACvE,IAAI,CAACrJ,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACyO,WAAW,EAAE9J,IAAI,CAAC;IAC5C,IAAIA,IAAI,CAAC4F,MAAM,EAAE;MACb;IACJ;IACA,IAAI,CAACpF,OAAO,CAAC4B,OAAO,CAAC;MAAE2H,MAAM,EAAE,cAAc;MAAErI,KAAK,EAAES,GAAG,GAAGA,GAAG,CAACT,KAAK,GAAG,IAAI,CAAClB,OAAO,CAACkB;IAAM,CAAC,CAAC;EACjG,CAAC;EACDpF,kBAAkB,CAAC6C,SAAS,CAACqH,QAAQ,GAAG,UAAU1F,CAAC,EAAE;IACjD,IAAI,IAAI,CAACjE,WAAW,EAAE;MAClB,IAAKiE,CAAC,CAACwB,MAAM,CAAC0H,OAAO,CAACC,WAAW,CAAC,CAAC,KAAK,OAAO,IAAInJ,CAAC,CAACwB,MAAM,CAAC3I,SAAS,CAAC4I,QAAQ,CAAC,eAAe,CAAC,IAC3FzB,CAAC,CAACoJ,OAAO,KAAK,EAAE,EAAE;QAClB,IAAI,CAAC,IAAI,CAAClN,wBAAwB,EAAE;UAChC,IAAI,CAACmN,cAAc,CAAC,CAAC;QACzB;MACJ,CAAC,MACI;QACD,IAAIC,IAAI,GAAGtJ,CAAC,CAACwB,MAAM,CAAC1D,UAAU,CAACyL,WAAW,CAACJ,WAAW,CAAC,CAAC;QACxD,IAAI,IAAI,CAACxG,iBAAiB,CAAC,IAAI,CAACiD,OAAO,GAAG,UAAU,GAAG,cAAc,CAAC,CAACuD,WAAW,CAAC,CAAC,KAAKG,IAAI,EAAE;UAC3F,IAAI,CAAC,IAAI,CAACpN,wBAAwB,EAAE;YAChC,IAAI,CAACmN,cAAc,CAAC,CAAC;UACzB;QACJ,CAAC,MACI,IAAI,IAAI,CAAC1G,iBAAiB,CAAC,aAAa,CAAC,CAACwG,WAAW,CAAC,CAAC,KAAKG,IAAI,EAAE;UACnE,IAAI,CAACR,WAAW,CAAC,CAAC;QACtB;MACJ;MACA,IAAI,CAACvK,WAAW,CAAC,CAAC;IACtB,CAAC,MACI,IAAIyB,CAAC,CAACwB,MAAM,IAAIxB,CAAC,CAACwB,MAAM,CAAC1D,UAAU,IACpCkC,CAAC,CAACwB,MAAM,CAAC1D,UAAU,CAACyL,WAAW,CAACJ,WAAW,CAAC,CAAC,KAAK,IAAI,CAACxG,iBAAiB,CAAC,cAAc,CAAC,CAACwG,WAAW,CAAC,CAAC,EAAE;MACxG,IAAI,CAAC5K,WAAW,CAAC,CAAC;IACtB,CAAC,MACI,IAAI,EAAEyB,CAAC,CAACwB,MAAM,CAAC0H,OAAO,CAACC,WAAW,CAAC,CAAC,KAAK,OAAO,CAAC,EAAE;MACpD,IAAI,CAACL,WAAW,CAAC,CAAC;MAClB,IAAI,CAACvK,WAAW,CAAC,CAAC;IACtB;IACA,IAAI,IAAI,CAACmB,OAAO,CAACC,MAAM,CAAC6H,cAAc,EAAE;MACpC,IAAI,CAAC/L,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACiP,0BAA0B,EAAE,CAAC,CAAC,CAAC;IAC7D;IACA,IAAI,CAAC7Q,iBAAiB,CAAC,IAAI,CAAC8C,MAAM,CAACgO,WAAW,CAAC,EAAE;MAC7C,IAAI,CAAChO,MAAM,CAACgO,WAAW,CAACC,WAAW,CAAC,CAAC;IACzC;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACIlO,kBAAkB,CAAC6C,SAAS,CAACgL,cAAc,GAAG,YAAY;IACtD,IAAIhK,KAAK,GAAG,IAAI;IAChB,IAAI,IAAI,CAAClD,iBAAiB,EAAE;MACxB,IAAI,CAACqI,IAAI,CAACiE,SAAS,GAAG,EAAE;MACxBpP,cAAc,CAAC,IAAI,CAACmL,IAAI,EAAE,IAAI,CAAC7H,kBAAkB,CAACiH,KAAK,CAAC,CAAC,CAAC;IAC9D;IACA,IAAIrG,OAAO,GAAG,EAAE,CAACqG,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAACnF,IAAI,CAACoF,gBAAgB,CAAC,gDAAgD,CAAC,CAAC;IACzG,IAAIC,KAAK,GAAGtM,OAAO;IACnB,IAAIuM,IAAI,GAAG,OAAO;IAClB,IAAIC,QAAQ,GAAG,IAAI,CAAChL,SAAS,CAAC7B,OAAO,CAACa,aAAa,CAAC,iBAAiB,CAAC;IACtE,IAAIgM,QAAQ,EAAE;MACV,IAAI,CAACrK,OAAO,CAACwB,QAAQ,GAAG4I,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,CAAC,CAAC,CAAC7I,KAAK;IAClE;IACA,IAAI,CAAC8I,cAAc,GAAG,IAAI,CAACvK,OAAO,CAACwB,QAAQ,KAAK,UAAU;IAC1D,IAAIgJ,WAAW;IACf,IAAI,CAAC,IAAI,CAACxK,OAAO,CAACqE,aAAa,EAAE;MAC7BmG,WAAW,GAAG,IAAI,CAACjG,SAAS,CAAClG,aAAa,CAAC,gBAAgB,CAAC;IAChE;IACA,IAAIoM,OAAO,GAAG,IAAI,CAACzK,OAAO,CAAC4D,kBAAkB;IAC7C,IAAI8G,QAAQ,GAAG;MACXxJ,KAAK,EAAE,IAAI,CAAClB,OAAO,CAACkB,KAAK;MAAEP,SAAS,EAAE,IAAI,CAAC4J,cAAc,GAAG,KAAK,GAAG,IAAI;MAAE1G,GAAG,EAAE,IAAI,CAAC7D,OAAO,CAAC6D,GAAG;MAC/FrC,QAAQ,EAAE4I,IAAI;MAAEjM,IAAI,EAAE,IAAI,CAAC6B,OAAO,CAAC7B,IAAI;MAAEkD,SAAS,EAAEoJ,OAAO;MAAElJ,YAAY,EAAE,IAAI,CAACvB,OAAO,CAACuB;IAC5F,CAAC;IACD,IAAIoJ,UAAU,GAAG,IAAI,CAACC,QAAQ,KAAK/M,OAAO,CAACmD,MAAM,IAAI,IAAI,CAAC4J,QAAQ,GAAG/M,OAAO,CAACmD,MAAM,GAAGnD,OAAO,CAACmD,MAAM;IACpG,IAAI2J,UAAU,IAAIH,WAAW,IAAIA,WAAW,CAAC/I,KAAK,KAAK,EAAE,EAAE;MACvD2I,IAAI,GAAG,IAAI,CAACG,cAAc,GAAG,OAAO,GAAG,UAAU;MACjD1M,OAAO,GAAG,EAAE,CAACqG,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAACnF,IAAI,CAACoF,gBAAgB,CAAC,8BAA8B,CAAC,CAAC;MACnFQ,QAAQ,CAAC/J,SAAS,GAAG,IAAI,CAAC4J,cAAc,GAAG,IAAI,GAAG,KAAK;MACvDG,QAAQ,CAAClJ,QAAQ,GAAG4I,IAAI;IAC5B;IACA,IAAIS,GAAG;IACP,IAAI7J,MAAM;IACV,IAAI8J,IAAI,GAAG,EAAE;IACb,IAAKjN,OAAO,CAACmD,MAAM,KAAK,IAAI,CAAC4J,QAAQ,IAAKJ,WAAW,IAAIA,WAAW,CAAC/I,KAAK,IAAI+I,WAAW,CAAC/I,KAAK,KAAK,EAAG,IAChG,IAAI,CAAChF,iBAAiB,EAAE;MAC3B,IAAI,CAAC,IAAI,CAACA,iBAAiB,EAAE;QACzBqO,IAAI,GAAG,IAAI,CAACC,qBAAqB,CAAClN,OAAO,EAAE6M,QAAQ,EAAEC,UAAU,CAAC;QAChE,IAAI1R,iBAAiB,CAAC6R,IAAI,CAAC,EAAE;UACzB;QACJ;QACAA,IAAI,GAAG,IAAI,CAACE,oBAAoB,GAAG,IAAI,CAACA,oBAAoB,GAAGF,IAAI;MACvE,CAAC,MACI,IAAI,IAAI,CAACrO,iBAAiB,KAC1B,CAAC,IAAI,CAACwO,kBAAkB,IAAK,IAAI,CAACA,kBAAkB,IAAI,CAAC,IAAI,CAACA,kBAAkB,CAACC,SAAU,CAAC,EAAE;QAC/F,IAAI,CAACC,sBAAsB,CAACL,IAAI,CAAC;MACrC,CAAC,MACI;QACD,IAAI,IAAI,CAACG,kBAAkB,CAACC,SAAS,EAAE;UACnCJ,IAAI,GAAG,IAAI,CAACC,qBAAqB,CAAClN,OAAO,EAAE6M,QAAQ,EAAEC,UAAU,CAAC;QACpE;MACJ;MACA,IAAI,CAAC,IAAI,CAAC3K,OAAO,CAAC7B,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC6B,OAAO,CAAC7B,IAAI,KAAK,UAAU,IAAI,IAAI,CAAC6B,OAAO,CAAC7B,IAAI,KAAK,UAAU,KAAKgM,KAAK,CAACnJ,MAAM,EAAE;QACxHA,MAAM,GAAGmJ,KAAK,CAACnJ,MAAM,GAAG,CAAC;QACzB6J,GAAG,GAAG,IAAI,CAACvO,MAAM,CAAC7C,YAAY,CAAC0Q,KAAK,CAAChJ,QAAQ,CAACH,MAAM,CAACI,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,UAAU,CAAC,CAACgK,YAAY,CAAC,KAAK,CAAC,CAAC;QACvG,IAAInS,iBAAiB,CAAC4R,GAAG,CAAC,IAAIF,UAAU,EAAE;UACtCG,IAAI,CAAC7J,IAAI,CAAC;YACNC,KAAK,EAAEwJ,QAAQ,CAACxJ,KAAK;YAAEG,SAAS,EAAEqJ,QAAQ,CAACrJ,SAAS;YAAEG,QAAQ,EAAE,OAAO;YACvEb,SAAS,EAAE,IAAI;YAAEc,KAAK,EAAE;UAC5B,CAAC,CAAC;QACN;MACJ;MACA,IAAI4J,gBAAgB,GAAG,IAAI,CAAC5O,iBAAiB,GAAG,IAAI,CAAC2H,IAAI,CAAC/F,aAAa,CAAC,gBAAgB,CAAC,GACrF,IAAI,CAACyG,IAAI,CAACzG,aAAa,CAAC,gBAAgB,CAAC;MAC7C,IAAIgN,gBAAgB,IAAIA,gBAAgB,CAAClS,SAAS,CAAC4I,QAAQ,CAAC,SAAS,CAAC,EAAE;QACpE,IAAIuJ,mBAAmB,GAAG,IAAI,CAACnP,iBAAiB,CAAC,IAAI,CAAC6D,OAAO,CAACkB,KAAK,CAAC;QACpE,IAAIoK,mBAAmB,EAAE;UACrB,IAAIC,OAAO,GAAG,SAAAA,CAAUC,CAAC,EAAE;YACvB,IAAI,CAACV,IAAI,CAACW,IAAI,CAAC,UAAUC,IAAI,EAAE;cAC3B,OAAOA,IAAI,CACNjK,KAAK,KAAK6J,mBAAmB,CAACnK,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACK,KAAK;YACxE,CAAC,CAAC,EAAE;cACAqJ,IAAI,CAAC7J,IAAI,CAACqK,mBAAmB,CAACnK,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;YAC9D;UACJ,CAAC;UACD,KAAK,IAAIoK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,mBAAmB,CAACtK,MAAM,EAAEwK,CAAC,EAAE,EAAE;YACjDD,OAAO,CAACC,CAAC,CAAC;UACd;QACJ,CAAC,MACI;UACD;QACJ;MACJ;MACA,IAAI,CAAC,IAAI,CAAC/O,iBAAiB,EAAE;QACzB,IAAI,CAACkP,cAAc,CAACb,IAAI,CAAC;MAC7B,CAAC,MACI,IAAIA,IAAI,CAAC9J,MAAM,EAAE;QAClB,IAAI,CAAC2K,cAAc,CAACb,IAAI,CAAC;MAC7B,CAAC,MACI,IAAI,IAAI,CAAC1G,IAAI,CAAC/F,aAAa,CAAC,cAAc,CAAC,CAAClF,SAAS,CAAC4I,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC+I,IAAI,CAAC9J,MAAM,EAAE;QAC5F,IAAI4K,aAAa,GAAG,IAAI,CAAC5L,OAAO,CAACyD,eAAe,CAACgI,IAAI,CAAC,UAAUhK,KAAK,EAAE;UACnE,OAAO9B,KAAK,CAACK,OAAO,CAACkB,KAAK,KAAKO,KAAK,CAACP,KAAK;QAC9C,CAAC,CAAC;QACF,IAAI0K,aAAa,EAAE;UACf,IAAI,CAACxC,WAAW,CAAC,CAAC;QACtB;MACJ;IACJ,CAAC,MACI;MACD,IAAIwC,aAAa,GAAG,IAAI,CAAC5L,OAAO,CAACyD,eAAe,CAACgI,IAAI,CAAC,UAAUhK,KAAK,EAAE;QACnE,OAAO9B,KAAK,CAACK,OAAO,CAACkB,KAAK,KAAKO,KAAK,CAACP,KAAK;MAC9C,CAAC,CAAC;MACF,IAAI0K,aAAa,EAAE;QACf,IAAI,CAACxC,WAAW,CAAC,CAAC;MACtB;IACJ;EACJ,CAAC;EACDtN,kBAAkB,CAAC6C,SAAS,CAACoM,qBAAqB,GAAG,UAAUc,eAAe,EAAEnB,QAAQ,EAAEC,UAAU,EAAE;IAClG,IAAIlJ,KAAK;IACT,IAAIqK,IAAI;IACR,IAAIhB,IAAI,GAAG,EAAE;IACb,KAAK,IAAI/J,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8K,eAAe,CAAC7K,MAAM,EAAED,CAAC,EAAE,EAAE;MAC7CU,KAAK,GAAG,IAAI,CAACnF,MAAM,CAAC7C,YAAY,CAACoS,eAAe,CAAC1K,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,UAAU,CAAC,CAACgK,YAAY,CAAC,KAAK,CAAC,CAAC;MAC9GU,IAAI,GAAG5S,MAAM,CAAC,CAAC,CAAC,EAAE;QAAEuI,KAAK,EAAEA;MAAM,CAAC,EAAEiJ,QAAQ,CAAC;MAC7C,IAAIjJ,KAAK,IAAI,CAACA,KAAK,CAACL,QAAQ,CAAC,CAAC,CAACJ,MAAM,EAAE;QACnC8K,IAAI,CAACtK,QAAQ,GAAGmJ,UAAU,GAAG,UAAU,GAAG,OAAO;MACrD;MACA,IAAIlJ,KAAK,KAAK,EAAE,IAAIxI,iBAAiB,CAACwI,KAAK,CAAC,EAAE;QAC1CqJ,IAAI,GAAGA,IAAI,CAACiB,MAAM,CAACjQ,kBAAkB,CAACkQ,2BAA2B,CAACtB,QAAQ,CAAC,CAAC;MAChF,CAAC,MACI;QACDI,IAAI,CAAC7J,IAAI,CAAC6K,IAAI,CAAC;MACnB;IACJ;IACA,IAAIG,aAAa,GAAG,IAAI,CAACjB,oBAAoB,IAAI,IAAI,CAACA,oBAAoB,CAAChK,MAAM,GAC7E,IAAI,CAACgK,oBAAoB,CAAC,CAAC,CAAC,GAAGc,IAAI;IACvC,IAAIG,aAAa,IAAI,CAAC,IAAI,CAACC,qBAAqB,CAACD,aAAa,CAAC,EAAE;MAC7D,IAAI,CAACjB,oBAAoB,GAAGF,IAAI;MAChC,OAAO,IAAI;IACf,CAAC,MACI;MACD,OAAOA,IAAI;IACf;EACJ,CAAC;EACDhP,kBAAkB,CAAC6C,SAAS,CAACwM,sBAAsB,GAAG,UAAUL,IAAI,EAAE;IAClE,IAAIrJ,KAAK;IACT,IAAI,IAAI,CAACnE,gCAAgC,CAAC0D,MAAM,EAAE;MAC9C,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACzD,gCAAgC,CAAC0D,MAAM,EAAED,CAAC,EAAE,EAAE;QACnE,IAAIoL,IAAI,GAAG,IAAI,CAAC7O,gCAAgC,CAACyD,CAAC,CAAC;QACnDU,KAAK,GAAG0K,IAAI,CAAC1K,KAAK,GAAG,EAAE;QACvB,IAAIA,KAAK,KAAK,EAAE,IAAIxI,iBAAiB,CAACwI,KAAK,CAAC,EAAE;UAC1C,IAAI2K,aAAa,GAAG;YAAEzL,SAAS,EAAEwL,IAAI,CAACxL,SAAS;YAAEO,KAAK,EAAEiL,IAAI,CAACjL,KAAK;YAAE/C,IAAI,EAAEgO,IAAI,CAAChO,IAAI;YAAE0F,GAAG,EAAEsI,IAAI,CAACtI,GAAG;YAAErC,QAAQ,EAAE2K,IAAI,CAAC3K,QAAQ;YACvHH,SAAS,EAAE8K,IAAI,CAAC9K,SAAS;YAAEE,YAAY,EAAE4K,IAAI,CAAC5K;UAAa,CAAC;UAChEuJ,IAAI,CAAC7J,IAAI,CAACoL,KAAK,CAACvB,IAAI,EAAEhP,kBAAkB,CAACkQ,2BAA2B,CAACI,aAAa,CAAC,CAAC;QACxF,CAAC,MACI;UACDtB,IAAI,CAAC7J,IAAI,CAAC,IAAI,CAAC3D,gCAAgC,CAACyD,CAAC,CAAC,CAAC;QACvD;QACA,IAAI,CAACmL,qBAAqB,CAAC,IAAI,CAAC5O,gCAAgC,CAACyD,CAAC,CAAC,CAAC;MACxE;IACJ;IACA,IAAI,CAAC,IAAI,CAAC3D,6BAA6B,IAAI,IAAI,CAAC4E,MAAM,CAACP,KAAK,KAAK,EAAE,IAAI,EAAE,CAAC,IAAI,CAACzB,OAAO,CAACsM,0BAA0B,IAAIxB,IAAI,CAAC9J,MAAM,CAAC,EAAE;MAC/H,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACkD,6BAA6B,CAACjD,MAAM,EAAED,CAAC,EAAE,EAAE;QAChE+J,IAAI,CAACyB,OAAO,CAAC,IAAI,CAACtI,6BAA6B,CAAClD,CAAC,CAAC,CAAC;QACnD,IAAI,CAACmL,qBAAqB,CAAC,IAAI,CAAC/P,iBAAiB,CAAC,IAAI,CAAC6D,OAAO,CAACkB,KAAK,CAAC,CAACH,CAAC,CAAC,CAAC;MAC7E;IACJ;IACA,IAAI,IAAI,CAACiB,MAAM,CAACP,KAAK,KAAK,EAAE,KAAK,CAAC,IAAI,CAACrE,6BAA6B,IAAI,IAAI,CAACD,sBAAsB,CAAC,EAAE;MAClG,IAAI,CAAC8N,kBAAkB,CAAC,WAAW,CAAC,GAAG,IAAI;MAC3CH,IAAI,CAACyB,OAAO,CAAC,IAAI,CAACtB,kBAAkB,CAAC;MACrC,IAAI,CAACiB,qBAAqB,CAAC,IAAI,CAACjB,kBAAkB,CAAC;IACvD;EACJ,CAAC;EACDnP,kBAAkB,CAAC6C,SAAS,CAACuN,qBAAqB,GAAG,UAAUvL,SAAS,EAAE;IACtE,IAAInB,IAAI,GAAG;MACP6J,QAAQ,EAAE,IAAI;MAAEzH,OAAO,EAAE,IAAI,CAAC+H,cAAc;MAAE6C,IAAI,EAAE7L,SAAS,CAACO,KAAK;MAAEuL,IAAI,EAAE9L,SAAS,CAACA,SAAS;MAAE+L,IAAI,EAAE/L,SAAS,CAACa,QAAQ;MACxHmL,IAAI,EAAEhM,SAAS,CAACU,SAAS;MAAEuL,IAAI,EAAEjM,SAAS,CAACY,YAAY;MAAEsL,IAAI,EAAElM,SAAS,CAACc,KAAK;MAAE2D,MAAM,EAAE;IAC5F,CAAC;IACD,IAAI,CAACrJ,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACyO,WAAW,EAAE9J,IAAI,CAAC;IAC5C,IAAIA,IAAI,CAAC4F,MAAM,EAAE;MACb,OAAO,KAAK;IAChB;IACA,OAAO,IAAI;EACf,CAAC;EACD;EACA;EACAtJ,kBAAkB,CAACkQ,2BAA2B,GAAG,UAAUtB,QAAQ,EAAE;IACjE,IAAII,IAAI,GAAG,EAAE;IACb,IAAIJ,QAAQ,CAACvM,IAAI,KAAK,QAAQ,EAAE;MAC5B2M,IAAI,CAAC7J,IAAI,CAAC;QACNC,KAAK,EAAEwJ,QAAQ,CAACxJ,KAAK;QAAEK,YAAY,EAAEmJ,QAAQ,CAACnJ,YAAY;QAAEF,SAAS,EAAEqJ,QAAQ,CAACrJ,SAAS;QACzFG,QAAQ,EAAEkJ,QAAQ,CAAClJ,QAAQ;QAAEb,SAAS,EAAE+J,QAAQ,CAAC/J,SAAS;QAAEc,KAAK,EAAE;MACvE,CAAC,CAAC;IACN;IACAqJ,IAAI,CAAC7J,IAAI,CAAC;MACNC,KAAK,EAAEwJ,QAAQ,CAACxJ,KAAK;MACrBG,SAAS,EAAEqJ,QAAQ,CAACrJ,SAAS;MAAEG,QAAQ,EAAEkJ,QAAQ,CAAClJ,QAAQ;MAAEb,SAAS,EAAE+J,QAAQ,CAAC/J,SAAS;MAAEc,KAAK,EAAE;IACtG,CAAC,CAAC;IACFqJ,IAAI,CAAC7J,IAAI,CAAC;MACNC,KAAK,EAAEwJ,QAAQ,CAACxJ,KAAK;MAAEG,SAAS,EAAEqJ,QAAQ,CAACrJ,SAAS;MAAEG,QAAQ,EAAEkJ,QAAQ,CAAClJ,QAAQ;MACjFb,SAAS,EAAE+J,QAAQ,CAAC/J,SAAS;MAAEc,KAAK,EAAEiB;IAC1C,CAAC,CAAC;IACF,OAAOoI,IAAI;EACf,CAAC;EACD;EACA;EACAhP,kBAAkB,CAAC6C,SAAS,CAACgN,cAAc,GAAG,UAAUlM,KAAK,EAAE;IAC3D,IAAIqN,QAAQ,GAAGrN,KAAK,CAAC,CAAC,CAAC;IACvB,IAAIkB,SAAS;IACb,IAAI,CAAC1H,iBAAiB,CAAC6T,QAAQ,CAAC,EAAE;MAC9BnM,SAAS,GAAGmM,QAAQ,CAAClM,WAAW,GAAGkM,QAAQ,CAAClM,WAAW,GACnD,IAAIjG,SAAS,CAACmS,QAAQ,CAAC5L,KAAK,EAAE4L,QAAQ,CAACtL,QAAQ,EAAEsL,QAAQ,CAACrL,KAAK,EAAE,CAACqL,QAAQ,CAACzL,SAAS,EAAEyL,QAAQ,CAACvL,YAAY,CAAC;MAChH,KAAK,IAAIiK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG/L,KAAK,CAACuB,MAAM,EAAEwK,CAAC,EAAE,EAAE;QACnC7K,SAAS,GAAGlB,KAAK,CAAC0B,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACR,WAAW,KAAK8B,SAAS,GACnE/B,SAAS,CAAClB,KAAK,CAAC0B,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACT,SAAS,CAAC,CAAClB,KAAK,CAAC0B,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACR,WAAW,CAAC,GACrGD,SAAS,CAAClB,KAAK,CAAC0B,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACT,SAAS,CAAC,CAAClB,KAAK,CAAC0B,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACF,KAAK,EAAEzB,KAAK,CAAC0B,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACI,QAAQ,EAAE/B,KAAK,CAAC0B,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACK,KAAK,EAAE,CAAChC,KAAK,CAAC0B,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,SAAS,EAAE5B,KAAK,CAAC0B,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,YAAY,CAAC;MAC1R;MACA,IAAI/B,IAAI,GAAG;QACP+J,MAAM,EAAE,WAAW;QAAE1J,gBAAgB,EAAEJ,KAAK;QAAEyB,KAAK,EAAE,IAAI,CAAClB,OAAO,CAACkB,KAAK;QACvEN,WAAW,EAAEjG,SAAS,CAACoS,EAAE,CAACpM,SAAS;MACvC,CAAC;MACD,IAAI,CAACX,OAAO,CAAC4B,OAAO,CAACpC,IAAI,CAAC;IAC9B;EACJ,CAAC;EACD1D,kBAAkB,CAAC6C,SAAS,CAACqO,eAAe,GAAG,UAAUrL,GAAG,EAAE;IAC1D,OAAOA,GAAG,CAACqL,eAAe,GAAGrL,GAAG,CAACqL,eAAe,CAAC,CAAC,GAAG,KAAK;EAC9D,CAAC;EACDlR,kBAAkB,CAAC6C,SAAS,CAACuD,iBAAiB,GAAG,YAAY;IACzD,IAAIvC,KAAK,GAAG,IAAI;IAChB,IAAIkL,GAAG,GAAG,IAAI,CAAC7I,MAAM,CAACP,KAAK;IAC3B,IAAIxB,MAAM,GAAG,IAAI,CAACD,OAAO,CAACC,MAAM;IAChC,IAAIH,KAAK,GAAG,IAAI,CAACkN,eAAe,CAAC/M,MAAM,CAAC,GAAG,IAAI,CAAC7D,eAAe,CAAC2D,KAAK,CAAC,CAAC,GAAG,IAAI,CAACC,OAAO,CAACF,KAAK,CAACC,KAAK,CAAC,CAAC;IACpG,IAAIkN,YAAY,GAAG,IAAI,CAACjN,OAAO,CAACF,KAAK,CAACC,KAAK,CAAC,CAAC;IAC7C,IAAIoM,IAAI,GAAGrM,KAAK,CAACoN,OAAO,CAACxL,MAAM,CAAC,UAAUpB,CAAC,EAAE;MAAE,OAAOA,CAAC,IAAIA,CAAC,CAAC6M,EAAE,KAAK,SAAS;IAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACpFrN,KAAK,CAACoN,OAAO,GAAG,EAAE;IAClBD,YAAY,CAACC,OAAO,GAAG,EAAE;IACzB,IAAIE,MAAM,GAAI,IAAI,CAACpN,OAAO,CAAC7B,IAAI,KAAK,QAAQ,IAAIkP,UAAU,CAACxC,GAAG,CAAC,GAAIwC,UAAU,CAACxC,GAAG,CAAC,GAAGA,GAAG;IACxF,IAAIrJ,QAAQ,GAAG,IAAI,CAACxB,OAAO,CAACiI,QAAQ,GAC/B,IAAI,CAACjI,OAAO,CAAC7B,IAAI,KAAK,QAAQ,GAAG,UAAU,GAAG,OAAO,GAAK,IAAI,CAAC6B,OAAO,CAAC7B,IAAI,GAAG,UAAU,GAAG,OAAQ;IACxG,IAAIkD,SAAS,GAAG,IAAI;IACpB,IAAIE,YAAY,GAAG,IAAI,CAACvB,OAAO,CAACuB,YAAY;IAC5C,IAAIL,KAAK,GAAG,IAAI,CAAC8L,eAAe,CAAC/M,MAAM,CAAC,GAAGA,MAAM,CAACqN,eAAe,GAAGrN,MAAM,CAACiB,KAAK;IAChFkM,MAAM,GAAIA,MAAM,KAAK,EAAE,IAAIA,MAAM,KAAK1K,SAAS,GAAIA,SAAS,GAAG0K,MAAM;IACrE,IAAItC,IAAI,GAAG,EAAE;IACb,IAAIJ,QAAQ,GAAG;MACXxJ,KAAK,EAAEA,KAAK;MAAEP,SAAS,EAAE,IAAI;MAAEkD,GAAG,EAAE,IAAI,CAAC7D,OAAO,CAAC6D,GAAG;MACpDrC,QAAQ,EAAE,OAAO;MAAErD,IAAI,EAAE,IAAI,CAAC6B,OAAO,CAAC7B,IAAI;MAAEkD,SAAS,EAAEA,SAAS;MAAEE,YAAY,EAAEA;IACpF,CAAC;IACD,IAAIgM,QAAQ;IACZ,IAAIC,UAAU,GAAG,IAAI,CAACxN,OAAO,CAACuD,WAAW,CAACkK,OAAO,CAACC,aAAa;IAC/D,IAAI,IAAI,CAAC1N,OAAO,CAAC7B,IAAI,KAAK,SAAS,EAAE;MACjC,IAAIiP,MAAM,KAAK1K,SAAS,IACpB,IAAI,CAACO,iBAAiB,CAAC,YAAY,CAAC,CAACwG,WAAW,CAAC,CAAC,CAAChL,OAAO,CAAC2O,MAAM,CAAC3D,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;QACzF2D,MAAM,GAAG,MAAM;MACnB,CAAC,MACI,IAAIA,MAAM,KAAK1K,SAAS,IACzB,IAAI,CAACO,iBAAiB,CAAC,aAAa,CAAC,CAACwG,WAAW,CAAC,CAAC,CAAChL,OAAO,CAAC2O,MAAM,CAAC3D,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;QAC1F2D,MAAM,GAAG,OAAO;MACpB;MACA,IAAIA,MAAM,KAAK1K,SAAS,IACpB,IAAI,CAACO,iBAAiB,CAAC,YAAY,CAAC,CAACwG,WAAW,CAAC,CAAC,CAAChL,OAAO,CAAC2O,MAAM,CAAC3D,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI+D,UAAU,EAAE;QACvG;QACAJ,MAAM,GAAII,UAAU,CAAC,CAAC,KAAK,cAAc,IAAI,gBAAgB,GAAI,IAAI,GAAG,MAAM;MAClF,CAAC,MACI,IAAIJ,MAAM,KAAK1K,SAAS,IACzB,IAAI,CAACO,iBAAiB,CAAC,aAAa,CAAC,CAACwG,WAAW,CAAC,CAAC,CAAChL,OAAO,CAAC2O,MAAM,CAAC3D,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI+D,UAAU,EAAE;QACxG;QACAJ,MAAM,GAAII,UAAU,CAAC,CAAC,KAAK,cAAc,IAAI,gBAAgB,GAAI,KAAK,GAAG,OAAO;MACpF;MACAhM,QAAQ,GAAG,OAAO;IACtB;IACA,IAAI,CAAC,IAAI,CAACxB,OAAO,CAAC7B,IAAI,KAAK,MAAM,IAAI,IAAI,CAAC6B,OAAO,CAAC7B,IAAI,KAAK,UAAU,IAAI,IAAI,CAAC6B,OAAO,CAAC7B,IAAI,KAAK,UAAU,KAAK,IAAI,CAAC6B,OAAO,CAACwD,MAAM,EAAE;MAC/H,IAAImK,IAAI,GAAG,IAAIrT,oBAAoB,CAAC,CAAC;MACrC,IAAIkJ,MAAM,GAAG,OAAQ,IAAI,CAACxD,OAAO,CAACwD,MAAO,KAAK,QAAQ,GAAG,IAAI,CAACxD,OAAO,CAACwD,MAAM,GACxE,IAAI,CAACxD,OAAO,CAACwD,MAAM,CAACA,MAAM;MAC9B,IAAIA,MAAM,EAAE;QACR4J,MAAM,GAAGO,IAAI,CAACC,SAAS,CAAC/C,GAAG,EAAE;UAAErH,MAAM,EAAEA;QAAO,CAAC,CAAC,IAAI,IAAIqK,IAAI,CAAChD,GAAG,CAAC;MACrE,CAAC,MACI;QACDuC,MAAM,GAAG,IAAIS,IAAI,CAAChD,GAAG,CAAC;MAC1B;MACA,IAAI,IAAI,CAAC7K,OAAO,CAAC7B,IAAI,KAAK,UAAU,EAAE;QAClCiP,MAAM,GAAGA,MAAM,CAACU,WAAW,CAAC,CAAC,GAAG,GAAG,GAAG5T,OAAO,CAACkT,MAAM,CAACW,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG7T,OAAO,CAACkT,MAAM,CAACY,OAAO,CAAC,CAAC,CAAC;MAC1G;IACJ;IACA,IAAI,CAACrR,uBAAuB,GAAG,IAAI;IACnC,IAAI,CAACM,kBAAkB,GAAG,EAAE;IAC5B,IAAI,CAACE,sBAAsB,GAAG,IAAI;IAClC,IAAI,CAACC,6BAA6B,GAAG,KAAK;IAC1C,IAAI,CAACC,gCAAgC,GAAG,KAAK;IAC7C,IAAI,CAACP,eAAe,GAAG,CAAC;IACxB,IAAI,CAACI,iBAAiB,GAAG,CAAC;IAC1B,IAAI,CAACI,gCAAgC,GAAG,EAAE;IAC1C,IAAI,IAAI,CAAC0E,MAAM,CAACP,KAAK,KAAK,EAAE,EAAE;MAC1B,IAAI,CAACwC,6BAA6B,GAAG,IAAI,CAACxH,iBAAiB,IAAI,IAAI,CAACN,iBAAiB,CAAC,IAAI,CAAC6D,OAAO,CAACC,MAAM,CAACiB,KAAK,CAAC,GAAG,IAAI,CAAC/E,iBAAiB,CAAC,IAAI,CAAC6D,OAAO,CAACC,MAAM,CAACiB,KAAK,CAAC,CAACgD,KAAK,CAAC,CAAC,GAAG,EAAE;IACrL,CAAC,MACI;MACD,IAAI,CAACD,6BAA6B,GAAG,EAAE;IAC3C;IACA,IAAI,CAAC,IAAI,CAAC+I,eAAe,CAAC/M,MAAM,CAAC,EAAE;MAC/B,IAAI,CAACgO,WAAW,CAACnO,KAAK,CAAC;IAC3B;IACA,IAAIN,IAAI,GAAG;MACPwF,WAAW,EAAEnK,MAAM,CAACqT,iBAAiB;MACrC7I,WAAW,EAAE,IAAI;MAAEH,UAAU,EAAEhE,KAAK;MAAEjB,MAAM,EAAEA,MAAM;MACpDuB,QAAQ,EAAEA,QAAQ;MAAEH,SAAS,EAAEA,SAAS;MAAEE,YAAY,EAAEA,YAAY;MAAE4M,iBAAiB,EAAE,IAAI;MAC7FrO,KAAK,EAAEA,KAAK;MAAE2B,KAAK,EAAE2L,MAAM;MAAEhI,MAAM,EAAE;IACzC,CAAC;IACD,IAAI,IAAI,CAAC3I,iBAAiB,IAAI,IAAI,CAACV,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,EAAE;MACjE5O,IAAI,CAAC2O,iBAAiB,GAAG,IAAI,CAACpS,MAAM,CAAC2H,cAAc,CAAC0K,UAAU;IAClE;IACA,IAAI,CAACrS,MAAM,CAACsS,OAAO,CAACxT,MAAM,CAACyT,WAAW,EAAE9O,IAAI,EAAE,UAAU+O,UAAU,EAAE;MAChE,IAAIA,UAAU,CAACnJ,MAAM,EAAE;QACnB;MACJ;MACA;MACAmJ,UAAU,CAAC/M,QAAQ,GAAG+M,UAAU,CAAC/M,QAAQ;MACzC+L,QAAQ,GAAG,IAAI5S,SAAS,CAACuG,KAAK,EAAEqN,UAAU,CAAC/M,QAAQ,EAAEhC,IAAI,CAACiC,KAAK,EAAE8M,UAAU,CAAClN,SAAS,EAAEkN,UAAU,CAAChN,YAAY,CAAC;MAC/G,IAAI5B,KAAK,CAACK,OAAO,CAAC7B,IAAI,KAAK,MAAM,IAAIwB,KAAK,CAACK,OAAO,CAAC7B,IAAI,KAAK,UAAU,IAAIwB,KAAK,CAACK,OAAO,CAAC7B,IAAI,KAAK,UAAU,EAAE;QACzGqD,QAAQ,GAAG,OAAO;QAClB,IAAIgN,SAAS,GAAG;UACZtN,KAAK,EAAEA,KAAK;UAAEM,QAAQ,EAAEA,QAAQ;UAAEC,KAAK,EAAE2L,MAAM;UAAE/L,SAAS,EAAEA,SAAS;UACrEE,YAAY,EAAEA;QAClB,CAAC;QACD,IAAI,CAACtI,iBAAiB,CAACmU,MAAM,CAAC,EAAE;UAC5BG,QAAQ,GAAG3T,gBAAgB,CAAC4U,SAAS,EAAE7O,KAAK,CAACK,OAAO,CAAC7B,IAAI,CAAC;QAC9D;MACJ;MACA,IAAI0M,GAAG,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAIlL,KAAK,CAACyI,QAAQ,IAChDzI,KAAK,CAACsD,iBAAiB,CAAC,QAAQ,CAAC,CAACwG,WAAW,CAAC,CAAC,CAAChL,OAAO,CAACoM,GAAG,CAACpB,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;QACjFqB,IAAI,GAAGA,IAAI,CAACiB,MAAM,CAACjQ,kBAAkB,CAACkQ,2BAA2B,CAACtB,QAAQ,CAAC,CAAC;QAC5E,IAAI+D,gBAAgB,GAAG3S,kBAAkB,CAAC4S,iBAAiB,CAAC5D,IAAI,CAAC;QACjE2D,gBAAgB,CAAC5N,UAAU,CAACI,IAAI,CAACsM,QAAQ,CAAC;QAC1CA,QAAQ,GAAGkB,gBAAgB;QAC3B3O,KAAK,CAACM,KAAK,CAACqO,gBAAgB,CAAC;MACjC,CAAC,MACI,IAAI5D,GAAG,CAAC7J,MAAM,EAAE;QACjBuM,QAAQ,GAAG,CAACtU,iBAAiB,CAACkT,IAAI,CAAC,GAAGoB,QAAQ,CAACoB,GAAG,CAACxC,IAAI,CAAC7L,CAAC,CAAC,GAAGiN,QAAQ;QACrEzN,KAAK,CAACM,KAAK,CAACmN,QAAQ,CAAC;MACzB,CAAC,MACI,IAAI,CAACtU,iBAAiB,CAACkT,IAAI,CAAC,EAAE;QAC/BoB,QAAQ,GAAGpB,IAAI,CAAC7L,CAAC;QACjBR,KAAK,CAACM,KAAK,CAAC+L,IAAI,CAAC7L,CAAC,CAAC;MACvB;MACAX,KAAK,CAACsL,kBAAkB,GAAGsC,QAAQ;MACnCgB,UAAU,CAACJ,iBAAiB,GAAG,CAAClV,iBAAiB,CAACsV,UAAU,CAACJ,iBAAiB,CAAC,GAAGI,UAAU,CAACJ,iBAAiB,GAAG,IAAI;MACrH,IAAIxO,KAAK,CAAClD,iBAAiB,IAAIkD,KAAK,CAAC5D,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,KAAKG,UAAU,CAACJ,iBAAiB,EAAE;QACpGxO,KAAK,CAAC5D,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG5O,IAAI,CAAC2O,iBAAiB;MACnE;MACA,IAAIvO,UAAU,GAAG,CAAC,CAAC;MACnBvE,WAAW,CAACsE,KAAK,CAACkF,OAAO,CAAC;MAC1BlF,KAAK,CAACpD,WAAW,GAAG,KAAK;MACzB,IAAIoD,KAAK,CAACqN,eAAe,CAAC/M,MAAM,CAAC,IAAI4K,GAAG,CAAC7J,MAAM,EAAE;QAC7C,IAAI4N,OAAO,GAAI,QAAQ,IAAI3O,MAAM,CAACC,UAAU,GAAI,IAAIxF,WAAW,CAACuF,MAAM,CAACC,UAAU,CAACM,MAAM,CAAC,GACrFP,MAAM,CAACC,UAAU;QACrB;QACA0O,OAAO,CAACzO,YAAY,CAACL,KAAK,CAAC,CAACO,IAAI,CAAC,UAAUC,CAAC,EAAE;UAC1C,IAAIC,UAAU,GAAGZ,KAAK,CAACK,OAAO,CAACC,MAAM,CAACM,UAAU;UAChDZ,KAAK,CAACK,OAAO,CAACC,MAAM,CAACM,UAAU,GAAGD,CAAC,CAACE,MAAM;UAC1Cb,KAAK,CAAC5D,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAAC6F,aAAa,EAAE;YAAEC,SAAS,EAAEf,UAAU;YAAEK,MAAM,EAAEA;UAAO,CAAC,CAAC;UACpF,IAAIL,UAAU,CAACe,SAAS,CAACE,UAAU,CAACG,MAAM,EAAE;YACxCiM,YAAY,CAAC7M,KAAK,CAACR,UAAU,CAACe,SAAS,CAAC;UAC5C,CAAC,MACI;YACDhB,KAAK,CAACpD,WAAW,GAAG,IAAI;UAC5B;UACAoD,KAAK,CAACK,OAAO,CAACC,MAAM,CAACM,UAAU,GAAGA,UAAU;UAC5C,IAAIZ,KAAK,CAAClD,iBAAiB,EAAE;YACzBkD,KAAK,CAACjD,mBAAmB,GAAGzD,iBAAiB,CAAC0G,KAAK,CAACkP,QAAQ,CAAC,GAAG,IAAI,GAAG,KAAK;YAC5ElP,KAAK,CAACmP,yBAAyB,CAAC7B,YAAY,CAAC;YAC7CA,YAAY,CAAC8B,aAAa,CAAC,CAAC;UAChC,CAAC,MACI;YACD9B,YAAY,CAAC+B,IAAI,CAACT,UAAU,CAACJ,iBAAiB,CAAC;UACnD;UACAxO,KAAK,CAACsP,MAAM,CAACV,UAAU,EAAEtB,YAAY,CAAC;QAC1C,CAAC,CAAC;MACN,CAAC,MACI;QACD,IAAItN,KAAK,CAAClD,iBAAiB,IAAIkD,KAAK,CAAC5D,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,EAAE;UACnEzO,KAAK,CAACjD,mBAAmB,GAAGzD,iBAAiB,CAAC0G,KAAK,CAACkP,QAAQ,CAAC,GAAG,IAAI,GAAG,KAAK;UAC5ElP,KAAK,CAACmP,yBAAyB,CAAChP,KAAK,CAAC;UACtCA,KAAK,CAACiP,aAAa,CAAC,CAAC;QACzB,CAAC,MACI;UACDjP,KAAK,CAACkP,IAAI,CAACT,UAAU,CAACJ,iBAAiB,CAAC;QAC5C;QACAxO,KAAK,CAACsP,MAAM,CAACV,UAAU,EAAEzO,KAAK,CAAC;MACnC;IACJ,CAAC,CAAC;EACN,CAAC;EACDhE,kBAAkB,CAAC6C,SAAS,CAACsQ,MAAM,GAAG,UAAUzP,IAAI,EAAEM,KAAK,EAAE;IACzD,IAAI,IAAI,CAAC/D,MAAM,CAACmE,UAAU,IAAI,QAAQ,IAAI,IAAI,CAACnE,MAAM,CAACmE,UAAU,EAAE;MAC9D,IAAI,CAACgP,WAAW,CAAC1P,IAAI,EAAEM,KAAK,CAAC;IACjC,CAAC,MACI;MACD,IAAI,CAACqP,aAAa,CAACrP,KAAK,CAAC;IAC7B;EACJ,CAAC;EACDhE,kBAAkB,CAAC6C,SAAS,CAACyQ,oBAAoB,GAAG,UAAUzL,OAAO,EAAE1H,cAAc,EAAE;IACnF,IAAI4E,UAAU,GAAG/E,kBAAkB,CAACuT,YAAY,CAAC1L,OAAO,EAAE1H,cAAc,CAAC;IACzE,IAAIqT,aAAa,GAAG,EAAE;IACtB,IAAI1P,UAAU,GAAG,CAAC,CAAC;IACnB,IAAI2P,MAAM,GAAG,IAAI,CAACxT,MAAM,CAACyT,oBAAoB,KAAK9M,SAAS;IAC3D,IAAI+M,aAAa,GAAGF,MAAM,GAAG,IAAI,CAACxT,MAAM,CAACyT,oBAAoB,CAAC,CAAC,GAAG,EAAE;IACpE,KAAK,IAAIE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGC,MAAM,CAACC,IAAI,CAAChP,UAAU,CAAC,EAAE6O,EAAE,GAAGC,EAAE,CAAC3O,MAAM,EAAE0O,EAAE,EAAE,EAAE;MACjE,IAAII,IAAI,GAAGH,EAAE,CAACD,EAAE,CAAC;MACjB,IAAI/N,GAAG,GAAG,KAAK,CAAC;MAChB,IAAI4N,MAAM,IAAI,CAAC,IAAI,CAACxT,MAAM,CAACgU,gBAAgB,CAACD,IAAI,CAAC,EAAE;QAC/CnO,GAAG,GAAGjG,0BAA0B,CAACoU,IAAI,EAAEL,aAAa,CAAC;MACzD;MACA,IAAI9N,GAAG,EAAE;QACL,IAAI,CAAC5F,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAAC6F,aAAa,EAAE;UAAEC,SAAS,EAAEf,UAAU;UAAEK,MAAM,EAAE0B;QAAI,CAAC,CAAC;QAChF,IAAI/B,UAAU,CAACe,SAAS,CAACE,UAAU,CAACG,MAAM,EAAE;UACxCsO,aAAa,CAACrO,IAAI,CAACtG,SAAS,CAACoS,EAAE,CAACnN,UAAU,CAACe,SAAS,CAACE,UAAU,CAAC,CAAC;QACrE;MACJ,CAAC,MACI;QACDyO,aAAa,CAACrO,IAAI,CAACJ,UAAU,CAAC,EAAE,GAAGiP,IAAI,CAAC,CAAC;MAC7C;IACJ;IACA,OAAOR,aAAa,CAACtO,MAAM,IAAIrG,SAAS,CAACgU,GAAG,CAACW,aAAa,CAAC;EAC/D,CAAC;EACDxT,kBAAkB,CAAC6C,SAAS,CAACqR,QAAQ,GAAG,YAAY;IAChD,OAAO,IAAI,CAACjU,MAAM,CAACiU,QAAQ,GAAG,IAAI,CAACjU,MAAM,CAACiU,QAAQ,CAAC,CAAC,CAACjQ,KAAK,CAAC,CAAC,GAAG,IAAItF,KAAK,CAAC,CAAC;EAC9E,CAAC;EACDqB,kBAAkB,CAAC6C,SAAS,CAAC4I,UAAU,GAAG,YAAY;IAClD,IAAI5H,KAAK,GAAG,IAAI;IAChB,IAAI,CAACsQ,WAAW,GAAG,KAAK;IACxB,IAAInQ,KAAK,GAAG,IAAI,CAACkQ,QAAQ,CAAC,CAAC;IAC3B,IAAIxC,UAAU,GAAG,IAAI,CAACxN,OAAO,CAACuD,WAAW,CAACkK,OAAO,CAACC,aAAa;IAC/D,IAAI,EAAE,CAACzU,iBAAiB,CAAC,IAAI,CAAC8C,MAAM,CAACmU,aAAa,CAAC,IAAI1C,UAAU,IAAIA,UAAU,CAAC,CAAC,KAAK,gBAAgB,CAAC,EAAE;MACrG1N,KAAK,CAACiP,aAAa,CAAC,CAAC,CAAC,CAAC;IAC3B;IACA,IAAI,CAACd,WAAW,CAACnO,KAAK,CAAC;IACvB,IAAIN,IAAI,GAAG;MACPwF,WAAW,EAAEnK,MAAM,CAACsV,mBAAmB;MAAErQ,KAAK,EAAEA,KAAK;MAAEqO,iBAAiB,EAAE;IAC9E,CAAC;IACD,IAAI9I,WAAW,GAAG,aAAa;IAC/B7F,IAAI,CAAC,EAAE,GAAG6F,WAAW,CAAC,GAAG,IAAI;IAC7B,IAAI,IAAI,CAAC5I,iBAAiB,IAAI,IAAI,CAACV,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,EAAE;MACjE5O,IAAI,CAAC2O,iBAAiB,GAAG,IAAI,CAACpS,MAAM,CAAC2H,cAAc,CAAC0K,UAAU;IAClE;IACA,IAAI,CAACrS,MAAM,CAACsS,OAAO,CAACxT,MAAM,CAACyT,WAAW,EAAE9O,IAAI,EAAE,UAAUA,IAAI,EAAE;MAC1DA,IAAI,CAAC2O,iBAAiB,GAAG,CAAClV,iBAAiB,CAACuG,IAAI,CAAC2O,iBAAiB,CAAC,GAAG3O,IAAI,CAAC2O,iBAAiB,GAAG,IAAI;MACnG,IAAIxO,KAAK,CAAClD,iBAAiB,IAAIkD,KAAK,CAAC5D,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,KAAK5O,IAAI,CAAC2O,iBAAiB,EAAE;QAC9FxO,KAAK,CAAC5D,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG5O,IAAI,CAAC2O,iBAAiB;MACnE;MACA,IAAI,CAACxO,KAAK,CAAClD,iBAAiB,EAAE;QAC1BqD,KAAK,CAACkP,IAAI,CAACxP,IAAI,CAAC2O,iBAAiB,CAAC;MACtC;MACA,IAAI,CAAC3O,IAAI,CAACM,KAAK,CAACsQ,SAAS,CAACpP,MAAM,IAAIrB,KAAK,CAAClD,iBAAiB,EAAE;QACzDkD,KAAK,CAACsQ,WAAW,GAAG,IAAI;QACxBtQ,KAAK,CAAC0Q,aAAa,CAACvQ,KAAK,CAAC;MAC9B;MACA,IAAIH,KAAK,CAAClD,iBAAiB,EAAE;QACzBkD,KAAK,CAACjD,mBAAmB,GAAGzD,iBAAiB,CAAC0G,KAAK,CAACkP,QAAQ,CAAC,GAAG,IAAI,GAAG,KAAK;QAC5ElP,KAAK,CAACmP,yBAAyB,CAAChP,KAAK,CAAC;MAC1C;MACA,IAAIH,KAAK,CAAC5D,MAAM,CAACmE,UAAU,IAAI,QAAQ,IAAIP,KAAK,CAAC5D,MAAM,CAACmE,UAAU,EAAE;QAChEP,KAAK,CAACuP,WAAW,CAAC1P,IAAI,EAAEM,KAAK,CAAC;MAClC,CAAC,MACI;QACDH,KAAK,CAAC2Q,oBAAoB,CAACxQ,KAAK,EAAE,IAAI,CAAC;MAC3C;IACJ,CAAC,CAAC;EACN,CAAC;EACDhE,kBAAkB,CAAC6C,SAAS,CAACsP,WAAW,GAAG,UAAUnO,KAAK,EAAE;IACxD,IAAIH,KAAK,GAAG,IAAI;IAChB,IAAI4Q,cAAc,GAAG/V,QAAQ,CAACgW,QAAQ,CAAC,IAAI,CAACxQ,OAAO,CAACyD,eAAe,EAAE,OAAO,CAAC;IAC7E,IAAI8M,cAAc,CAAC9R,OAAO,CAAC,IAAI,CAACuB,OAAO,CAACC,MAAM,CAACiB,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE;MACzDqP,cAAc,GAAGA,cAAc,CAACxE,MAAM,CAAC,IAAI,CAAC/L,OAAO,CAACC,MAAM,CAACiB,KAAK,CAAC;IACrE;IACA,IAAIsM,UAAU,GAAG,IAAI,CAACxN,OAAO,CAACuD,WAAW,CAACkK,OAAO,CAACC,aAAa;IAC/D,IAAIF,UAAU,IAAIA,UAAU,CAAC,CAAC,KAAK,gBAAgB,IAAI,IAAI,CAACzR,MAAM,IAC9D,IAAI,CAACA,MAAM,CAAC+D,KAAK,YAAYrF,KAAK,EAAE;MACpC,IAAIgW,SAAS,GAAG,IAAI,CAAC1U,MAAM,CAAC+D,KAAK;MACjC,KAAK,IAAIiB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0P,SAAS,CAACvD,OAAO,CAAClM,MAAM,EAAED,CAAC,EAAE,EAAE;QAC/C,IAAI2P,YAAY,GAAGD,SAAS,CAACvD,OAAO,CAAC/L,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAChE,IAAIsP,YAAY,CAACvD,EAAE,KAAK,SAAS,EAAE;UAC/B,IAAI,CAACwD,kBAAkB,CAACD,YAAY,CAACpQ,CAAC,CAAC;UACvC,IAAI,CAACpE,mBAAmB,CAAC0U,GAAG,CAAC,UAAU1P,KAAK,EAAE;YAC1C,IAAIqP,cAAc,CAAC9R,OAAO,CAACyC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;cACtCqP,cAAc,CAACtP,IAAI,CAACC,KAAK,CAAC;YAC9B;UACJ,CAAC,CAAC;UACF,IAAI,CAAChF,mBAAmB,GAAG,EAAE;QACjC;MACJ;IACJ;IACA,IAAI,CAAC,IAAI,CAACO,iBAAiB,EAAE;MACzBqD,KAAK,CAAC0Q,QAAQ,CAACD,cAAc,CAAC;IAClC;IACA,IAAI,IAAI,CAAC9T,iBAAiB,IAAI,CAAC,IAAI,CAACuD,OAAO,CAACiI,QAAQ,IAAI,IAAI,CAACjG,MAAM,CAACP,KAAK,KAAK,EAAE,EAAE;MAC9E,IAAI,CAACzB,OAAO,CAACE,UAAU,GAAG,IAAI,CAACF,OAAO,CAACE,UAAU,YAAYxF,WAAW,GACpE,IAAI,CAACsF,OAAO,CAACE,UAAU,GAAG,IAAIxF,WAAW,CAAC,IAAI,CAACsF,OAAO,CAACE,UAAU,CAAC;MACtE,IAAI,CAACtD,0BAA0B,GAAG,IAAI,CAACoD,OAAO,CAACE,UAAU,CAACA,UAAU,CAACgI,IAAI,CAAChE,KAAK,CAAC,CAAC;MACjF,IAAI2M,MAAM,GAAG,IAAIpW,KAAK,CAAC,CAAC;MACxB,IAAI,CAAC4V,aAAa,CAACQ,MAAM,CAAC;MAC1B,IAAIrQ,MAAM,GAAG,IAAI9F,WAAW,CAAC,IAAI,CAACsF,OAAO,CAACE,UAAU,CAACA,UAAU,CAAC,CAAC4Q,YAAY,CAACD,MAAM,CAAC;MACrF,IAAI,CAAC7Q,OAAO,CAACE,UAAU,GAAG,IAAIxF,WAAW,CAACF,QAAQ,CAACgW,QAAQ,CAAChQ,MAAM,EAAE,IAAI,CAACR,OAAO,CAACC,MAAM,CAACiB,KAAK,EAAE,IAAI,CAAC,CAAC;MACrG,IAAI,IAAI,CAAC8L,eAAe,CAAC,IAAI,CAAChN,OAAO,CAACC,MAAM,CAAC,EAAE;QAC3C,IAAI,CAACD,OAAO,CAACC,MAAM,CAACC,UAAU,GAAG,IAAI,CAACF,OAAO,CAACC,MAAM,CAACC,UAAU,YAAYxF,WAAW,GAClF,IAAI,CAACsF,OAAO,CAACC,MAAM,CAACC,UAAU,GAAG,IAAIxF,WAAW,CAAC,IAAI,CAACsF,OAAO,CAACC,MAAM,CAACC,UAAU,CAAC;QACpF,IAAI,CAACF,OAAO,CAACE,UAAU,CAACA,UAAU,CAACgI,IAAI,GAAG,IAAI,CAAClI,OAAO,CAACE,UAAU,CAACA,UAAU,CAACgI,IAAI,CAAC0I,GAAG,CAAC,UAAUG,IAAI,EAAEhQ,CAAC,EAAE;UACrG,OAAO6O,MAAM,CAACoB,MAAM,CAAC,CAAC,CAAC,EAAED,IAAI,EAAEpR,KAAK,CAACK,OAAO,CAACC,MAAM,CAACC,UAAU,CAACA,UAAU,CAACgI,IAAI,CAACnH,CAAC,CAAC,CAAC;QACtF,CAAC,CAAC;MACN;IACJ,CAAC,MACI,IAAI,IAAI,CAACtE,iBAAiB,IAAI,IAAI,CAACuD,OAAO,CAACiI,QAAQ,EAAE;MACtDnI,KAAK,CAACmR,MAAM,CAAC,IAAI,CAACjR,OAAO,CAACC,MAAM,CAACiB,KAAK,CAAC;MACvCpB,KAAK,CAACoR,MAAM,CAAC,IAAI,CAAClR,OAAO,CAACC,MAAM,CAACiB,KAAK,EAAE,WAAW,CAAC;MACpD,IAAIiQ,YAAY,GAAG,IAAI,CAACnR,OAAO,CAACuD,WAAW,CAACkK,OAAO,CAACC,aAAa;MACjE,IAAIyD,YAAY,IAAIA,YAAY,CAAC,CAAC,KAAKA,YAAY,CAAC,CAAC,KAAK,gBAAgB,IAAIA,YAAY,CAAC,CAAC,KAAK,eAAe,IACzGA,YAAY,CAAC,CAAC,KAAK,mBAAmB,IAAIA,YAAY,CAAC,CAAC,KAAK,gBAAgB,IAAIA,YAAY,CAAC,CAAC,KAAK,cAAc,CAAC,EAAE;QACxHrR,KAAK,CAAC0Q,QAAQ,CAACD,cAAc,CAAC;MAClC;IACJ;IACA,OAAOzQ,KAAK;EAChB,CAAC;EACDhE,kBAAkB,CAAC6C,SAAS,CAACgS,kBAAkB,GAAG,UAAU7Q,KAAK,EAAE;IAC/D,IAAIH,KAAK,GAAG,IAAI;IAChB,IAAIG,KAAK,CAACoL,SAAS,IAAIpL,KAAK,CAACe,UAAU,EAAE;MACrCf,KAAK,CAACe,UAAU,CAACuQ,OAAO,CAAC,UAAUzQ,SAAS,EAAE;QAC1C,IAAI0Q,KAAK,CAACC,OAAO,CAAC3Q,SAAS,CAAC,EAAE;UAC1BA,SAAS,CAACyQ,OAAO,CAAC,UAAUG,CAAC,EAAE;YAAE,OAAO5R,KAAK,CAACgR,kBAAkB,CAACY,CAAC,CAAC;UAAE,CAAC,CAAC;QAC3E,CAAC,MACI;UACD5R,KAAK,CAACgR,kBAAkB,CAAChQ,SAAS,CAAC;QACvC;MACJ,CAAC,CAAC;IACN,CAAC,MACI;MACD,IAAIb,KAAK,CAACoB,KAAK,IAAI,CAACpB,KAAK,CAACoL,SAAS,EAAE;QACjC,IAAI,IAAI,CAAChP,mBAAmB,CAACuC,OAAO,CAACqB,KAAK,CAACoB,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE;UACrD,IAAI,CAAChF,mBAAmB,GAAG,IAAI,CAACA,mBAAmB,CAAC6P,MAAM,CAACvR,QAAQ,CAACgW,QAAQ,CAAC,CAAC1Q,KAAK,CAACoB,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;QACzG;MACJ;IACJ;EACJ,CAAC;EACDpF,kBAAkB,CAAC6C,SAAS,CAACuQ,WAAW,GAAG,UAAU1P,IAAI,EAAEM,KAAK,EAAE;IAC9D,IAAIH,KAAK,GAAG,IAAI;IAChB,IAAI6R,MAAM,GAAGzX,YAAY,CAACyF,IAAI,EAAEM,KAAK,CAAC;IACtC,IAAI,CAAC/D,MAAM,CAACsS,OAAO,CAACxT,MAAM,CAAC4W,eAAe,EAAED,MAAM,CAACE,KAAK,CAAC;IACzD,IAAI,CAACC,sBAAsB,CAAC7R,KAAK,CAAC;IAClC,IAAI8R,GAAG,GAAGJ,MAAM,CAACK,QAAQ;IACzBD,GAAG,CAACE,OAAO,CAACzR,IAAI,CAAC,UAAUC,CAAC,EAAE;MAC1BX,KAAK,CAACzC,iBAAiB,GAAGyC,KAAK,CAAClD,iBAAiB,IAAI,CAACkD,KAAK,CAACzC,iBAAiB,GAAGoD,CAAC,CAAC,OAAO,CAAC,GAAGX,KAAK,CAACzC,iBAAiB;MACpH,IAAI6U,UAAU,GAAGpS,KAAK,CAAClD,iBAAiB,GAAG6D,CAAC,CAAC,QAAQ,CAAC,GAAGA,CAAC;MAC1DX,KAAK,CAACqS,WAAW,CAACD,UAAU,CAAC;IACjC,CAAC,CAAC;EACN,CAAC;EACDjW,kBAAkB,CAAC6C,SAAS,CAACgT,sBAAsB,GAAG,UAAU7R,KAAK,EAAE;IACnE,IAAI,IAAI,CAACrD,iBAAiB,EAAE;MACxB,IAAI,CAACwV,aAAa,GAAGnS,KAAK,CAACC,KAAK,CAAC,CAAC;MAClC,IAAI,IAAI,CAACrD,mBAAmB,EAAE;QAC1B,IAAI,CAACoI,IAAI,CAAC3L,SAAS,CAACmF,GAAG,CAAC,2BAA2B,CAAC;QACpDtF,YAAY,CAACsF,GAAG,CAAC,IAAI,CAACwG,IAAI,EAAE,QAAQ,EAAE,IAAI,CAACoN,qBAAqB,EAAE,IAAI,CAAC;QACvElZ,YAAY,CAACsF,GAAG,CAAC,IAAI,CAACwG,IAAI,EAAE,SAAS,EAAE,IAAI,CAACqN,+BAA+B,EAAE,IAAI,CAAC;QAClFnZ,YAAY,CAACsF,GAAG,CAAC,IAAI,CAACwG,IAAI,EAAE,WAAW,EAAE,IAAI,CAACsN,iCAAiC,EAAE,IAAI,CAAC;MAC1F,CAAC,MACI,IAAI,IAAI,CAACzV,uBAAuB,EAAE;QACnC,IAAI,CAACmI,IAAI,CAACiE,SAAS,GAAG,EAAE;MAC5B;IACJ;EACJ,CAAC;EACDjN,kBAAkB,CAAC6C,SAAS,CAACyT,iCAAiC,GAAG,YAAY;IACzEpZ,YAAY,CAACoB,MAAM,CAAC,IAAI,CAAC0K,IAAI,EAAE,QAAQ,EAAE,IAAI,CAACoN,qBAAqB,CAAC;EACxE,CAAC;EACDpW,kBAAkB,CAAC6C,SAAS,CAACwT,+BAA+B,GAAG,UAAU7R,CAAC,EAAE;IACxE,IAAIX,KAAK,GAAG,IAAI;IAChB3G,YAAY,CAACsF,GAAG,CAAC,IAAI,CAACwG,IAAI,EAAE,QAAQ,EAAE,IAAI,CAACoN,qBAAqB,EAAE,IAAI,CAAC;IACvE,IAAIpQ,MAAM,GAAG,IAAI,CAACgD,IAAI;IACtB,IAAIhD,MAAM,CAACuQ,QAAQ,CAACrR,MAAM,GAAG,CAAC,KAAKc,MAAM,CAACwQ,SAAS,IAAIxQ,MAAM,CAACyQ,YAAY,GAAGzQ,MAAM,CAACsF,YAAY,IAAItF,MAAM,CAACwQ,SAAS,IAAI,CAAC,CAAC,EAAE;MACxH,IAAI,CAACJ,qBAAqB,CAAC,CAAC;IAChC;IACA/X,MAAM,CAACqY,KAAK,GAAGC,UAAU,CAAC,YAAY;MAAE9S,KAAK,CAACX,YAAY,CAACsB,CAAC,CAAC;MAAEnG,MAAM,CAACqY,KAAK,GAAG,IAAI;IAAE,CAAC,EAAE,CAAC,CAAC;EAC7F,CAAC;EACD1W,kBAAkB,CAAC6C,SAAS,CAAC+T,kBAAkB,GAAG,YAAY;IAC1D,OAAO,wEAAwE;EACnF,CAAC;EACD;AACJ;AACA;AACA;EACI5W,kBAAkB,CAAC6C,SAAS,CAAC2I,QAAQ,GAAG,YAAY;IAChD,IAAIqL,YAAY,GAAG,CAAC;IACpB,IAAIC,cAAc;IAClB,IAAIC,QAAQ,GAAG,IAAI,CAAC9W,MAAM,CAAC6B,aAAa,CAAC,KAAK,EAAE;MAAEL,EAAE,EAAE,IAAI,CAACA,EAAE,GAAG,IAAI,CAACyC,OAAO,CAAC7B,IAAI,GAAG,mBAAmB;MACnGF,SAAS,EAAE;IAAqD,CAAC,CAAC;IACtE4U,QAAQ,CAAC/L,KAAK,CAACgM,MAAM,GAAG,IAAI;IAC5B,IAAIC,WAAW,GAAG,IAAI,CAACjO,IAAI;IAC3B,IAAI,CAACkO,UAAU,CAAC,CAAC;IACjB,IAAID,WAAW,EAAE;MACb,IAAIE,aAAa,GAAGC,gBAAgB,CAACH,WAAW,CAAC;MACjD,IAAII,QAAQ,GAAGxX,aAAa,CAACoX,WAAW,CAAC;MACzC,IAAI/L,MAAM,GAAG+L,WAAW,CAACV,QAAQ,CAACrR,MAAM,GAAGG,QAAQ,CAAC8R,aAAa,CAACjM,MAAM,EAAE,EAAE,CAAC,GACzEoM,IAAI,CAACC,KAAK,CAAClS,QAAQ,CAAC8R,aAAa,CAACjM,MAAM,CAACtI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC;MACrE,IAAI,IAAI,CAAC3C,MAAM,CAACsL,gBAAgB,IAAI,IAAI,CAAC5K,iBAAiB,EAAE;QACxDoW,QAAQ,CAAC/L,KAAK,CAACE,MAAM,GAAIA,MAAM,GAAGmM,QAAQ,GAAI,IAAI;QAClD,IAAI,CAACpU,GAAG,CAACV,aAAa,CAAC,gBAAgB,CAAC,CAACyI,KAAK,CAACwM,QAAQ,GAAG,QAAQ;MACtE;MACA,IAAIC,eAAe,GAAG,IAAI,CAACrN,OAAO,IAAI,CAAC6M,WAAW,CAACV,QAAQ,CAACrR,MAAM,IAAI,CAAC,IAAI,CAACjC,GAAG,CAAC5F,SAAS,CAAC4I,QAAQ,CAAC,eAAe,CAAC,GAC/G,EAAE,GAAGmR,gBAAgB,CAAC,IAAI,CAACnU,GAAG,CAACV,aAAa,CAAC,gBAAgB,CAAC,CAAC,CAACkV,eAAe;MACnFV,QAAQ,CAAC/L,KAAK,CAAC0M,OAAO,GAAG,SAAS,GAAGP,aAAa,CAACtN,KAAK,GAAG,gBAAgB,GAAGsN,aAAa,CAACQ,SAAS,GAAG,YAAY,GAChHzM,MAAM,GAAG,cAAc,GAAGiM,aAAa,CAACS,MAAM,GAAG,kBAAkB,GAAGT,aAAa,CAACU,WAAW,GAAG,kBAAkB,GAClHV,aAAa,CAACW,WAAW,GAAG,kBAAkB,GAAGX,aAAa,CAACY,WAAW,GAAG,0CAA0C,GACzHN,eAAe,GAAG,GAAG;MACzBZ,YAAY,GAAGS,IAAI,CAACC,KAAK,CAACrM,MAAM,GAAGmM,QAAQ,CAAC;MAC5CR,YAAY,GAAGI,WAAW,CAACV,QAAQ,CAACrR,MAAM,GAAG2R,YAAY,GAAGI,WAAW,CAACV,QAAQ,CAACrR,MAAM,GAAG2R,YAAY;MACtGC,cAAc,GAAGO,QAAQ,GAAG,IAAI;IACpC;IACA,IAAIW,YAAY,GAAG,sCAAsC,GACnD,8DAA8D,GAC9D,IAAI,CAACpB,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAACA,kBAAkB,CAAC,CAAC,GAAG,cAAc;IAC5EG,QAAQ,CAAC9J,SAAS,GAAG,EAAE;IACvB,IAAI,CAACgK,WAAW,CAACV,QAAQ,CAACrR,MAAM,EAAE;MAC9B,IAAI,CAAC6D,OAAO,CAACkP,kBAAkB,CAAC,aAAa,EAAED,YAAY,CAAC;MAC5D,IAAI,CAACjP,OAAO,CAACgE,aAAa,CAACxK,aAAa,CAAC,yBAAyB,CAAC,CAACyI,KAAK,CAAC0M,OAAO,GAC7E,uBAAuB,GAAGZ,cAAc,GAAG,GAAG;MAClD,IAAI,CAAC/N,OAAO,CAACgE,aAAa,CAACxK,aAAa,CAAC,qBAAqB,CAAC,CAACyI,KAAK,CAACnB,KAAK,GAAG,MAAM;MACpF,IAAIqO,QAAQ,GAAG,EAAE,CAAC9P,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAACpF,OAAO,CAACgE,aAAa,CAClDqB,gBAAgB,CAAC,sFAAsF,CAAC,CAAC;MAC9G8J,QAAQ,CAAC,CAAC,CAAC,CAAC7a,SAAS,CAACmF,GAAG,CAAC,+BAA+B,CAAC;MAC1D0V,QAAQ,CAAC,CAAC,CAAC,CAAC7a,SAAS,CAACmF,GAAG,CAAC,oCAAoC,CAAC;IACnE;IACA,IAAI,CAACuG,OAAO,CAAC7G,YAAY,CAAC6U,QAAQ,EAAE,IAAI,CAAC/N,IAAI,CAAC;IAC9C,KAAK,IAAI/D,CAAC,GAAG,CAAC,EAAE4R,YAAY,IAAI5R,CAAC,GAAG4R,YAAY,EAAE5R,CAAC,EAAE,EAAE;MACnD8R,QAAQ,CAAC9J,SAAS,IAAI+K,YAAY;MAClCjB,QAAQ,CAACoB,gBAAgB,CAACnN,KAAK,CAAC0M,OAAO,GACnC,uBAAuB,GAAGZ,cAAc,GAAG,GAAG;MAClDC,QAAQ,CAACoB,gBAAgB,CAAC5V,aAAa,CAAC,qBAAqB,CAAC,CAACyI,KAAK,CAACnB,KAAK,GAAG,MAAM;MACnF,IAAIqO,QAAQ,GAAG,EAAE,CAAC9P,KAAK,CAAC+F,IAAI,CAAC4I,QAAQ,CAChC3I,gBAAgB,CAAC,sFAAsF,CAAC,CAAC;MAC9G8J,QAAQ,CAAC,CAAC,CAAC,CAAC7a,SAAS,CAACmF,GAAG,CAAC,+BAA+B,CAAC;MAC1D0V,QAAQ,CAAC,CAAC,CAAC,CAAC7a,SAAS,CAACmF,GAAG,CAAC,oCAAoC,CAAC;IACnE;IACA,IAAI,IAAI,CAACwG,IAAI,EAAE;MACX+N,QAAQ,CAACP,SAAS,GAAG,IAAI,CAACxN,IAAI,CAACwN,SAAS;IAC5C;EACJ,CAAC;EACDxW,kBAAkB,CAAC6C,SAAS,CAACqU,UAAU,GAAG,YAAY;IAClD,IAAIkB,SAAS,GAAG,IAAI,CAAC7U,SAAS,CAAC7B,OAAO,CAAC0M,gBAAgB,CAAC,gBAAgB,CAAC;IACzE,IAAIgK,SAAS,CAAClT,MAAM,EAAE;MAClB,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmT,SAAS,CAAClT,MAAM,EAAED,CAAC,EAAE,EAAE;QACvC3G,MAAM,CAAC8Z,SAAS,CAACnT,CAAC,CAAC,CAAC;MACxB;IACJ;IACA,IAAIoT,UAAU,GAAG,IAAI,CAAC9U,SAAS,CAAC7B,OAAO,CAACa,aAAa,CAAC,4BAA4B,CAAC;IACnF,IAAI8V,UAAU,EAAE;MACZ/Z,MAAM,CAAC,IAAI,CAACiF,SAAS,CAAC7B,OAAO,CAACa,aAAa,CAAC,4BAA4B,CAAC,CAAC;IAC9E;EACJ,CAAC;EACDvC,kBAAkB,CAAC6C,SAAS,CAACuT,qBAAqB,GAAG,YAAY;IAC7D,IAAIpQ,MAAM,GAAG,IAAI,CAACgD,IAAI;IACtB,IAAIhD,MAAM,CAACwQ,SAAS,IAAIxQ,MAAM,CAACyQ,YAAY,GAAGzQ,MAAM,CAACsF,YAAY,IAAI,CAAC,IAAI,CAACvK,6BAA6B,IACjG,IAAI,CAACI,kBAAkB,CAAC+D,MAAM,IAAK,IAAI,CAAClE,eAAe,GAAG,IAAI,CAACf,MAAM,CAAC2H,cAAc,CAAC0K,UAAW,IAChG,IAAI,CAACtJ,IAAI,CAACuN,QAAQ,CAACrR,MAAM,KAAK,IAAI,CAACjF,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG,CAAC,KACtE,CAAC,IAAI,CAAClR,iBAAiB,IAAI,IAAI,CAACA,iBAAiB,GAAI,IAAI,CAACJ,eAAe,GAAG,IAAI,CAACf,MAAM,CAAC2H,cAAc,CAAC0K,UAAW,CAAC,EAAE;MACzH,IAAI,CAACU,yBAAyB,CAAC,CAAC;MAChC,IAAI,CAAC9R,2BAA2B,GAAG,MAAM;IAC7C,CAAC,MACI,IAAI8E,MAAM,CAACwQ,SAAS,IAAIxQ,MAAM,CAACyQ,YAAY,GAAGzQ,MAAM,CAACsF,YAAY,IAAI,CAAC,IAAI,CAACvK,6BAA6B,IACtG,IAAI,CAACI,kBAAkB,CAAC+D,MAAM,GAAI,IAAI,CAAClE,eAAe,GAAG,IAAI,CAACf,MAAM,CAAC2H,cAAc,CAAC0K,UAAW,IAC/F,IAAI,CAACtJ,IAAI,CAACuN,QAAQ,CAACrR,MAAM,KAAK,IAAI,CAACjF,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG,CAAC,EAAE;MAC5ExS,sBAAsB,CAAE,EAAE,CAACsI,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAACnF,IAAI,CAACuN,QAAQ,CAAC,CAAE+B,MAAM,CAAC,CAAC,EAAE,IAAI,CAACrY,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,CAAC,CAAC;MAC5G,IAAI,CAACtR,eAAe,IAAI,IAAI,CAACE,2BAA2B,KAAK,MAAM,GAAG,IAAI,CAACjB,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GACtG,IAAI,CAACrS,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG,CAAE;MAC/CzU,cAAc,CAAC,IAAI,CAACmL,IAAI,EAAE,IAAI,CAAC7H,kBAAkB,CAACiH,KAAK,CAAC,IAAI,CAACpH,eAAe,EAAE,IAAI,CAACf,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAC/G,IAAI,CAACtR,eAAe,CAAC,CAAC;MAC1B,IAAI,CAACE,2BAA2B,GAAG,MAAM;IAC7C,CAAC,MACI,IAAI8E,MAAM,CAACwQ,SAAS,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC5V,mBAAmB,IAAI,CAAC,IAAI,CAACC,uBAAuB,IAAI,IAAI,CAACG,eAAe,IAC9G,IAAI,CAACG,kBAAkB,CAAC+D,MAAM,IAAI,IAAI,CAAC/D,kBAAkB,CAAC+D,MAAM,GAAG,IAAI,CAACjF,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG,CAAC,IAC5G,IAAI,CAACtJ,IAAI,CAACuN,QAAQ,CAACrR,MAAM,KAAK,IAAI,CAACjF,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG,CAAC,EAAE;MAC5ExS,sBAAsB,CAAE,EAAE,CAACsI,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAACnF,IAAI,CAACuN,QAAQ,CAAC,CAAE+B,MAAM,CAAE,IAAI,CAACrY,MAAM,CAAC2H,cAAc,CACxF0K,UAAU,GAAG,CAAC,EAAG,IAAI,CAACrS,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,CAAC,CAAC;MAC7D,IAAI,CAACtR,eAAe,IAAI,IAAI,CAACE,2BAA2B,KAAK,IAAI,GAAG,IAAI,CAACjB,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GACpG,IAAI,CAACrS,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG,CAAE;MAC/CvS,sBAAsB,CAAC,EAAE,CAACqI,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAAChN,kBAAkB,CAACiH,KAAK,CAAC,IAAI,CAACpH,eAAe,EAAE,IAAI,CAACA,eAAe,GACzG,IAAI,CAACf,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,CAAC,CAAC,EAAE,IAAI,CAACtJ,IAAI,CAAC;MACvD,IAAI,CAACA,IAAI,CAACwN,SAAS,GAAG,IAAI,CAACvV,wBAAwB;MACnD,IAAI,CAACC,2BAA2B,GAAG,IAAI;IAC3C,CAAC,MACI,IAAI8E,MAAM,CAACwQ,SAAS,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC5V,mBAAmB,IAAI,CAAC,IAAI,CAACC,uBAAuB,IAAI,IAAI,CAACG,eAAe,IAC9G,IAAI,CAACG,kBAAkB,CAAC+D,MAAM,IAAI,IAAI,CAAC8D,IAAI,CAACuN,QAAQ,CAACrR,MAAM,GAAG,IAAI,CAACjF,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG,CAAC,EAAE;MAC5GxS,sBAAsB,CAAE,EAAE,CAACsI,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAACnF,IAAI,CAACuN,QAAQ,CAAC,CAAE+B,MAAM,CAAE,IAAI,CAACrY,MAAM,CAAC2H,cAAc,CACxF0K,UAAU,GAAG,CAAC,EAAG,IAAI,CAAClR,iBAAiB,GAAG,IAAI,CAACnB,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,CAAC,CAAC;MACtF,IAAI,CAACtR,eAAe,GAAG,CAACsW,IAAI,CAACC,KAAK,CAAC,IAAI,CAACnW,iBAAiB,GAAG,IAAI,CAACnB,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,CAAC,GAAG,CAAC,IAClG,IAAI,CAACrS,MAAM,CAAC2H,cAAc,CAAC0K,UAAU;MACzCvS,sBAAsB,CAAC,EAAE,CAACqI,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAAChN,kBAAkB,CAACiH,KAAK,CAAC,IAAI,CAACpH,eAAe,EAAE,IAAI,CAACA,eAAe,GACzG,IAAI,CAACf,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,CAAC,CAAC,EAAE,IAAI,CAACtJ,IAAI,CAAC;MACvD,IAAI,CAACA,IAAI,CAACwN,SAAS,GAAG,IAAI,CAACvV,wBAAwB;MACnD,IAAI,CAACC,2BAA2B,GAAG,IAAI;IAC3C;EACJ,CAAC;EACDlB,kBAAkB,CAAC6C,SAAS,CAACmQ,yBAAyB,GAAG,UAAUhP,KAAK,EAAE;IACtE,IAAIH,KAAK,GAAG,IAAI;IAChB,IAAI,CAAC,IAAI,CAACjD,mBAAmB,IAAI,IAAI,CAACX,MAAM,CAAC2H,cAAc,IAAI,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACnB,gBAAgB,KAAK,SAAS,EAAE;MACtHkQ,UAAU,CAAC,YAAY;QACnB,IAAI9S,KAAK,CAAC9C,6BAA6B,EAAE;UACrC8C,KAAK,CAAC2H,QAAQ,CAAC,CAAC;QACpB;MACJ,CAAC,EAAE,GAAG,CAAC;IACX,CAAC,MACI,IAAI,CAAC,IAAI,CAAC5K,mBAAmB,EAAE;MAChCvB,aAAa,CAAC;QAAE2G,MAAM,EAAE,IAAI,CAAC+C,OAAO;QAAErG,QAAQ,EAAE,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG,IAAI,CAACzC,MAAM,CAACyC,QAAQ,GAAG;MAAK,CAAC,EAAE,IAAI,CAACzC,MAAM,CAC5G6B,aAAa,CAAC;MACnBvC,WAAW,CAAC,IAAI,CAACwJ,OAAO,CAAC;IAC7B;IACA,IAAIwP,KAAK,GAAG,IAAI;IAChB,IAAI,IAAI,CAACpC,aAAa,IAAI,IAAI,CAACA,aAAa,CAAC/E,OAAO,IAAI,IAAI,CAAC+E,aAAa,CAAC/E,OAAO,CAAClM,MAAM,EAAE;MACvF,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACkR,aAAa,CAAC/E,OAAO,CAAClM,MAAM,EAAED,CAAC,EAAE,EAAE;QACxD,IAAI,IAAI,CAACkR,aAAa,CAAC/E,OAAO,CAACnM,CAAC,CAAC,CAAC,EAAE,GAAGsT,KAAK,CAAC,KAAK,QAAQ,IACnD,IAAI,CAACpC,aAAa,CAAC/E,OAAO,CAACnM,CAAC,CAAC,CAAC,EAAE,GAAGsT,KAAK,CAAC,KAAK,QAAQ,EAAE;UAC3D,IAAI,CAACpC,aAAa,CAAC/E,OAAO,CAACkH,MAAM,CAACrT,CAAC,EAAE,CAAC,CAAC;UACvCA,CAAC,EAAE;QACP;MACJ;IACJ;IACA,IAAIuT,UAAU,GAAGxU,KAAK,GAAG,IAAI,GAAG,KAAK;IACrCA,KAAK,GAAGA,KAAK,GAAGA,KAAK,GAAG,IAAI,CAACmS,aAAa;IAC1C,IAAI,IAAI,CAACvV,mBAAmB,IAAI,IAAI,CAACC,uBAAuB,EAAE;MAC1D,IAAI,CAACG,eAAe,GAAG,CAAC;IAC5B,CAAC,MACI;MACD,IAAI,CAACA,eAAe,IAAI,IAAI,CAACf,MAAM,CAAC2H,cAAc,CAAC0K,UAAU;IACjE;IACAtO,KAAK,CAACyU,IAAI,CAAC,IAAI,CAACzX,eAAe,CAAC;IAChC,IAAI,IAAI,CAACJ,mBAAmB,IAAI,IAAI,CAACC,uBAAuB,EAAE;MAC1DmD,KAAK,CAACkP,IAAI,CAAC,IAAI,CAACjT,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG,CAAC,CAAC;MACrD,IAAI,CAACtR,eAAe,IAAI,IAAI,CAACf,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,GAAG,CAAC;IACrE,CAAC,MACI;MACDtO,KAAK,CAACkP,IAAI,CAAC,IAAI,CAACjT,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,CAAC;IACrD;IACA,IAAI,CAACkG,UAAU,EAAE;MACb,IAAI,IAAI,CAACvY,MAAM,CAACmE,UAAU,IAAI,QAAQ,IAAI,IAAI,CAACnE,MAAM,CAACmE,UAAU,EAAE;QAC9D,IAAIV,IAAI,GAAG;UACPwF,WAAW,EAAEnK,MAAM,CAACsV,mBAAmB;UAAErQ,KAAK,EAAEA,KAAK;UAAEqO,iBAAiB,EAAE,IAAI;UAAE9I,WAAW,EAAE;QACjG,CAAC;QACD,IAAI,IAAI,CAAC5I,iBAAiB,IAAI,IAAI,CAACV,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,EAAE;UACjE5O,IAAI,CAAC2O,iBAAiB,GAAG,IAAI,CAACpS,MAAM,CAAC2H,cAAc,CAAC0K,UAAU;QAClE;QACA,IAAI,CAACc,WAAW,CAAC1P,IAAI,EAAEM,KAAK,CAAC;MACjC,CAAC,MACI;QACD,IAAI,CAACwQ,oBAAoB,CAACxQ,KAAK,CAAC;QAChC,IAAI,CAACjD,6BAA6B,GAAG,IAAI;MAC7C;IACJ;EACJ,CAAC;EACDf,kBAAkB,CAAC6C,SAAS,CAAC2R,oBAAoB,GAAG,UAAUxQ,KAAK,EAAE0U,SAAS,EAAE;IAC5E,IAAI7U,KAAK,GAAG,IAAI;IAChB,IAAI,CAACK,OAAO,CAACE,UAAU,GAAG,IAAI,CAACF,OAAO,CAACE,UAAU,YAAYxF,WAAW,GACpE,IAAI,CAACsF,OAAO,CAACE,UAAU,GAAG,IAAIxF,WAAW,CAAC,IAAI,CAACsF,OAAO,CAACE,UAAU,CAAC;IACtE,IAAIuU,UAAU,GAAG,EAAE;IACnB,IAAIC,QAAQ,GAAG,EAAE;IACjB,IAAI,IAAI,CAAC1H,eAAe,CAAC,IAAI,CAAChN,OAAO,CAACC,MAAM,CAAC,IAAIuU,SAAS,EAAE;MACxD,IAAI5F,OAAO,GAAI,QAAQ,IAAI,IAAI,CAAC5O,OAAO,CAACC,MAAM,CAACC,UAAU,GACrD,IAAIxF,WAAW,CAAC,IAAI,CAACsF,OAAO,CAACC,MAAM,CAACC,UAAU,CAACM,MAAM,CAAC,GACtD,IAAI,CAACR,OAAO,CAACC,MAAM,CAACC,UAAU;MAClC,IAAI,CAAC9D,eAAe,CAACuY,MAAM,GAAG7U,KAAK,CAAC6U,MAAM;MAC1CF,UAAU,CAACxT,IAAI,CAAC2N,OAAO,CAACzO,YAAY,CAAC,IAAI,CAAC/D,eAAe,CAAC,CAAC;MAC3DsY,QAAQ,CAACzT,IAAI,CAAC,UAAUyK,IAAI,EAAE;QAAE,OAAO/L,KAAK,CAACiV,cAAc,GAAGlJ,IAAI;MAAE,CAAC,CAAC;IAC1E;IACA,IAAI,CAACiG,sBAAsB,CAAC7R,KAAK,CAAC;IAClC,IAAI,IAAI,CAACrD,iBAAiB,IAAI,IAAI,CAACC,mBAAmB,IAAI,CAAC,IAAI,CAACsD,OAAO,CAACiI,QAAQ,EAAE;MAC9E,IAAI/G,KAAK,GAAG,IAAI,CAAC8L,eAAe,CAAC,IAAI,CAAChN,OAAO,CAACC,MAAM,CAAC,GAAG,IAAI,CAACD,OAAO,CAACsN,eAAe,GAChF,IAAI,CAACtN,OAAO,CAACC,MAAM,CAACiB,KAAK;MAC7B,IAAI,CAAClB,OAAO,CAACE,UAAU,CAACC,YAAY,CAAC,IAAI1F,KAAK,CAAC,CAAC,CAACyW,MAAM,CAAChQ,KAAK,EAAE1G,QAAQ,CAACqa,WAAW,CAAC,CAAC,CAACxU,IAAI,CAAC,UAAUC,CAAC,EAAE;QACpGX,KAAK,CAACK,OAAO,CAACE,UAAU,CAACA,UAAU,CAACgI,IAAI,GAAG5H,CAAC,CAACE,MAAM;QACnDb,KAAK,CAACmV,sBAAsB,CAAChV,KAAK,EAAE2U,UAAU,EAAEC,QAAQ,CAAC;MAC7D,CAAC,CAAC;IACN,CAAC,MACI;MACD,IAAI,CAACI,sBAAsB,CAAChV,KAAK,EAAE2U,UAAU,EAAEC,QAAQ,CAAC;IAC5D;EACJ,CAAC;EACD5Y,kBAAkB,CAAC6C,SAAS,CAACmW,sBAAsB,GAAG,UAAUhV,KAAK,EAAE2U,UAAU,EAAEC,QAAQ,EAAE;IACzF,IAAI/U,KAAK,GAAG,IAAI;IAChB8U,UAAU,CAACxT,IAAI,CAAC,IAAI,CAACjB,OAAO,CAACE,UAAU,CAACC,YAAY,CAACL,KAAK,CAAC,CAAC;IAC5D4U,QAAQ,CAACzT,IAAI,CAAC,IAAI,CAAC+Q,WAAW,CAACtM,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1C,IAAI3E,CAAC,GAAG,CAAC;IACTgU,OAAO,CAACC,GAAG,CAACP,UAAU,CAAC,CAACpU,IAAI,CAAC,UAAUC,CAAC,EAAE;MACtCX,KAAK,CAAC9C,6BAA6B,GAAG8C,KAAK,CAAClD,iBAAiB,GAAG,KAAK,GAAGkD,KAAK,CAAC9C,6BAA6B;MAC3G,KAAK,IAAI2O,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGlL,CAAC,CAACU,MAAM,EAAEwK,CAAC,EAAE,EAAE;QAC/B7L,KAAK,CAACzC,iBAAiB,GAAGyC,KAAK,CAAClD,iBAAiB,IAAI,CAACkD,KAAK,CAACzC,iBAAiB,GAAGoD,CAAC,CAACkL,CAAC,CAAC,CAACyJ,KAAK,GAAGtV,KAAK,CAACzC,iBAAiB;QACpHwX,QAAQ,CAAC3T,CAAC,EAAE,CAAC,CAACT,CAAC,CAACa,QAAQ,CAACqK,CAAC,CAACpK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACZ,MAAM,CAAC;MACvD;IACJ,CAAC,CAAC,CAAC0U,KAAK,CAAC,YAAY;MACjB,IAAIvV,KAAK,CAAClD,iBAAiB,IAAIkD,KAAK,CAAC5D,MAAM,CAAC2H,cAAc,IAAI/D,KAAK,CAAC5D,MAAM,CAAC2H,cAAc,CAACnB,gBAAgB,KAAK,SAAS,EAAE;QACtH5C,KAAK,CAAC5D,MAAM,CAAC0G,WAAW,CAACC,SAAS,EAAE/C,KAAK,CAACN,SAAS,CAAC7B,OAAO,CAAC;MAChE;IACJ,CAAC,CAAC;EACN,CAAC;EACD1B,kBAAkB,CAAC6C,SAAS,CAACqT,WAAW,GAAG,UAAU1R,CAAC,EAAE;IACpD,IAAI,CAAC,IAAI,CAAC5D,mBAAmB,IAAI,IAAI,CAACQ,iBAAiB,KAAM,IAAI,CAACJ,eAAe,IAAI,IAAI,CAACI,iBAAiB,IACpG,CAAC,IAAI,CAACP,uBAAuB,IAAM2D,CAAC,CAACU,MAAM,KAAK,CAAE,CAAC,EAAE;MACxD;IACJ;IACA,IAAI,CAAC6N,QAAQ,GAAGvO,CAAC;IACjB,IAAI6U,KAAK,GAAG;MAAEjV,UAAU,EAAE,IAAI,CAAC2O,QAAQ;MAAE1O,YAAY,EAAE,IAAI;MAAEe,KAAK,EAAE,IAAI,CAAClB,OAAO,CAACkB;IAAM,CAAC;IACxF,IAAI,CAACnF,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACua,sBAAsB,EAAED,KAAK,CAAC;IACxD,IAAIA,KAAK,CAAChV,YAAY,EAAE;MACpB,IAAIL,KAAK,GAAG,IAAIrF,KAAK,CAAC,CAAC;MACvB,IAAI,CAAC,IAAI,CAACwV,WAAW,EAAE;QACnB,IAAI,CAAChU,cAAc,GAAG,IAAI;QAC1B,IAAI,CAACoU,aAAa,CAACvQ,KAAK,CAAC;QACzB,IAAI,CAAC7D,cAAc,GAAG,KAAK;MAC/B;MACA;MACA,IAAIuE,MAAM,GAAG,IAAI9F,WAAW,CAACya,KAAK,CAACjV,UAAU,CAAC,CAAC4Q,YAAY,CAAChR,KAAK,CAAC;MAClE,IAAI6B,GAAG,GAAG,IAAI,CAAC3B,OAAO,CAACC,MAAM;MAC7B,IAAI,CAACoV,YAAY,GAAGvZ,kBAAkB,CAACwZ,WAAW,CAAC9U,MAAM,EAAE,IAAI,CAACR,OAAO,CAACkB,KAAK,EAAES,GAAG,EAAE,IAAI,CAACiT,cAAc,EAAE,IAAI,CAAC,CAACW,OAAO,IAAI,EAAE;IAChI;IACA,IAAI7J,IAAI,GAAGyJ,KAAK,CAAChV,YAAY,GAAG,IAAI,CAACkV,YAAY,GAAGF,KAAK,CAACjV,UAAU;IACpE,IAAI,CAACsV,iBAAiB,CAAC,IAAI,EAAE,IAAI,EAAE9J,IAAI,EAAEyJ,KAAK,CAAC;IAC/C,IAAK,IAAI,CAAC1Y,iBAAiB,IAAI,IAAI,CAACC,mBAAmB,IAAK,CAAC,IAAI,CAACD,iBAAiB,EAAE;MACjF,IAAI,IAAI,CAACuF,MAAM,EAAE;QACb,IAAI,CAACA,MAAM,CAACI,KAAK,CAAC,CAAC;MACvB,CAAC,MACI,IAAI,IAAI,CAACrD,GAAG,CAACV,aAAa,CAAC,eAAe,CAAC,IAAI,IAAI,CAACU,GAAG,CAACV,aAAa,CAAC,WAAW,CAAC,EAAE;QACrF,IAAI,CAACU,GAAG,CAACV,aAAa,CAAC,eAAe,CAAC,CAAC+D,KAAK,CAAC,CAAC;QAC/C,IAAI,CAACrD,GAAG,CAACV,aAAa,CAAC,WAAW,CAAC,CAAClF,SAAS,CAACmF,GAAG,CAAC,YAAY,CAAC;MACnE;IACJ;IACA,IAAI,IAAI,CAAC5B,mBAAmB,IAAI,IAAI,CAACC,uBAAuB,EAAE;MAC1D,IAAI,CAACD,mBAAmB,GAAG,KAAK;MAChC,IAAI,CAACC,uBAAuB,GAAG,KAAK;IACxC;IACA,IAAI6C,IAAI,GAAG;MACPwF,WAAW,EAAEnK,MAAM,CAAC4a,eAAe;MACnCvQ,UAAU,EAAE,IAAI,CAAClF,OAAO,CAACkB,KAAK;MAAEiE,UAAU,EAAE,IAAI,CAACnF,OAAO,CAAC7B;IAC7D,CAAC;IACD,IAAIkH,WAAW,GAAG,aAAa;IAC/B7F,IAAI,CAAC,EAAE,GAAG6F,WAAW,CAAC,GAAG,IAAI;IAC7B,IAAI,CAACtJ,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAAC6a,gBAAgB,EAAElW,IAAI,CAAC;IACjD,IAAI,IAAI,CAAChD,wBAAwB,EAAE;MAC/BpB,WAAW,CAAC,IAAI,CAACyJ,OAAO,CAAC;IAC7B;EACJ,CAAC;EACD/I,kBAAkB,CAAC6C,SAAS,CAAC0R,aAAa,GAAG,UAAUvQ,KAAK,EAAE;IAC1D,IAAI,IAAI,CAAC/D,MAAM,CAAC4Z,cAAc,IAAI,IAAI,CAAC5Z,MAAM,CAAC4Z,cAAc,CAACtT,GAAG,CAACrB,MAAM,EAAE;MACrE,IAAIwM,UAAU,GAAG,IAAI,CAACxN,OAAO,CAACuD,WAAW,CAACkK,OAAO,CAACC,aAAa;MAC/D,IAAI,CAACzU,iBAAiB,CAAC,IAAI,CAAC8C,MAAM,CAACmU,aAAa,CAAC,IAAI1C,UAAU,IAAIA,UAAU,CAAC,CAAC,KAAK,gBAAgB,EAAE;QAClG,IAAI,CAACzR,MAAM,CAACmU,aAAa,CAAC,CAAC,CAAC0F,WAAW,CAAC9V,KAAK,CAAC;MAClD,CAAC,MACI;QACD,IAAI6V,cAAc,GAAG,IAAI,CAAC5Z,MAAM,CAAC4Z,cAAc;QAC/C,IAAIE,MAAM,GAAGF,cAAc,CAACE,MAAM,CAAC7U,MAAM,GAAG2U,cAAc,CAACE,MAAM,GAC3D,IAAI,CAAC7V,OAAO,CAAC2D,OAAO,CAACiN,GAAG,CAAC,UAAUkF,CAAC,EAAE;UAAE,OAAOA,CAAC,CAAC5U,KAAK;QAAE,CAAC,CAAC;QAChEpB,KAAK,CAACmP,MAAM,CAAC0G,cAAc,CAACtT,GAAG,EAAEwT,MAAM,EAAEF,cAAc,CAACnU,QAAQ,EAAEmU,cAAc,CAACrU,UAAU,EAAEqU,cAAc,CAACpU,YAAY,CAAC;MAC7H;IACJ;IACA,IAAK,IAAI,CAACvB,OAAO,CAACyD,eAAe,CAACzC,MAAM,EAAG;MACvC,IAAI+U,IAAI,GAAG,EAAE;MACb,KAAK,IAAIhV,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACf,OAAO,CAACyD,eAAe,CAACzC,MAAM,EAAED,CAAC,EAAE,EAAE;QAC1D,IAAIiV,YAAY,GAAG,IAAI,CAAChW,OAAO,CAACyD,eAAe,CAACtC,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAC3E,IAAI,IAAI,CAACpB,OAAO,CAAC6D,GAAG,EAAE;UAClBmS,YAAY,CAACnS,GAAG,GAAGmS,YAAY,CAACnS,GAAG,IAAI,IAAI,CAAC9H,MAAM,CAACgU,gBAAgB,CAACiG,YAAY,CAAC9U,KAAK,CAAC,CAAC2C,GAAG;UAC3F,IAAImS,YAAY,CAACnS,GAAG,KAAK,IAAI,CAAC7D,OAAO,CAAC6D,GAAG,EAAE;YACvCkS,IAAI,CAAC9U,IAAI,CAAC,IAAI,CAACjB,OAAO,CAACyD,eAAe,CAACtC,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;UACvE;QACJ,CAAC,MACI;UACD,IAAI4U,YAAY,CAAC9U,KAAK,KAAK,IAAI,CAAClB,OAAO,CAACkB,KAAK,EAAE;YAC3C6U,IAAI,CAAC9U,IAAI,CAAC,IAAI,CAACjB,OAAO,CAACyD,eAAe,CAACtC,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;UACvE;QACJ;MACJ;MACA,IAAIT,SAAS,GAAG,IAAI,CAACyO,oBAAoB,CAAC2G,IAAI,EAAE,IAAI,CAAC9Z,cAAc,CAAC;MACpE,IAAI0E,SAAS,EAAE;QACXb,KAAK,CAACM,KAAK,CAACO,SAAS,CAAC;MAC1B;IACJ;EACJ,CAAC;EACD7E,kBAAkB,CAAC6C,SAAS,CAAC6W,iBAAiB,GAAG,UAAU1V,KAAK,EAAE0U,SAAS,EAAEtU,UAAU,EAAEV,IAAI,EAAE;IAC3FnE,WAAW,CAAC,IAAI,CAACwJ,OAAO,CAAC;IACzB;IACA;IACA;IACA;IACA,IAAI,CAAC5I,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACga,YAAY,CAAC,CAAC;IACnB,IAAI,CAACha,cAAc,GAAG,KAAK;IAC3B,IAAIkZ,KAAK,GAAG;MAAEjV,UAAU,EAAE,IAAI,CAAC2O,QAAQ;MAAErS,wBAAwB,EAAE,KAAK;MAAEyD,MAAM,EAAE,IAAI,CAACD,OAAO,CAACC,MAAM;MACjGzC,OAAO,EAAE,IAAI,CAACsH,IAAI;MAAE3G,IAAI,EAAE,IAAI,CAAC6B,OAAO,CAAC7B,IAAI;MAAEqF,MAAM,EAAE,IAAI,CAACxD,OAAO,CAAC7B,IAAI;MAAE+X,MAAM,EAAE,IAAI,CAAClW,OAAO,CAAC2G,kBAAkB,GAAG,IAAI,GAClH,IAAI,CAACtH,SAAS,CAAC6W,MAAM,CAAC,CAAC,CAAC;MAAE3R,SAAS,EAAE,IAAI,CAACA;IAAU,CAAC;IAC7D,IAAI,CAACxI,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACsb,4BAA4B,EAAEhB,KAAK,CAAC;IAC9D,IAAI,CAAC3Y,wBAAwB,GAAG2Y,KAAK,CAAC3Y,wBAAwB;IAC9D,IAAI,CAAC,IAAI,CAACA,wBAAwB,EAAE;MAChC,IAAI,CAAC4Z,iBAAiB,CAAClW,UAAU,EAAEsU,SAAS,EAAEhV,IAAI,CAAC;IACvD,CAAC,MACI,IAAI,IAAI,CAAC/C,iBAAiB,IAAI,IAAI,CAACV,MAAM,CAAC2H,cAAc,IAAI,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACnB,gBAAgB,KAAK,SAAS,EAAE;MACxH,IAAI,CAACyQ,UAAU,CAAC,CAAC;IACrB;EACJ,CAAC;EACDlX,kBAAkB,CAAC6C,SAAS,CAACwQ,aAAa,GAAG,UAAUrP,KAAK,EAAE;IAC1D,IAAI,CAACwQ,oBAAoB,CAACxQ,KAAK,CAAC;EACpC,CAAC;EACDhE,kBAAkB,CAAC6C,SAAS,CAACsX,YAAY,GAAG,YAAY;IACpD,IAAI,CAACzV,MAAM,GAAG,CAAC,CAAC;IAChB,IAAIG,SAAS,GAAG,IAAI,CAAClE,iBAAiB,IAAI,IAAI,CAACN,iBAAiB,CAAC,IAAI,CAAC6D,OAAO,CAACkB,KAAK,CAAC,GAChF,IAAI,CAACkO,oBAAoB,CAAC,IAAI,CAACjT,iBAAiB,CAAC,IAAI,CAAC6D,OAAO,CAACkB,KAAK,CAAC,EAAE,IAAI,CAACjF,cAAc,CAAC,GAC1F,IAAI,CAACmT,oBAAoB,CAAC,IAAI,CAACpP,OAAO,CAACyD,eAAe,EAAE,IAAI,CAACxH,cAAc,CAAC;IAChF,IAAI6D,KAAK,GAAG,IAAIrF,KAAK,CAAC,CAAC;IACvB,IAAIkG,SAAS,EAAE;MACXb,KAAK,CAACM,KAAK,CAACO,SAAS,CAAC;IAC1B;IACA,IAAI,CAAC5E,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACwb,2BAA2B,EAAE;MAAEvW,KAAK,EAAEA;IAAM,CAAC,CAAC;IACxE,IAAIU,MAAM,GAAG,IAAI9F,WAAW,CAAC,IAAI,CAACmU,QAAQ,CAAC,CAACiC,YAAY,CAAChR,KAAK,CAAC;IAC/D,KAAK,IAAI4P,EAAE,GAAG,CAAC,EAAE4G,QAAQ,GAAG9V,MAAM,EAAEkP,EAAE,GAAG4G,QAAQ,CAACtV,MAAM,EAAE0O,EAAE,EAAE,EAAE;MAC5D,IAAI6G,GAAG,GAAGD,QAAQ,CAAC5G,EAAE,CAAC;MACtB,IAAI,CAAClP,MAAM,CAAC3G,SAAS,CAAC,IAAI,CAACmG,OAAO,CAACkB,KAAK,EAAEqV,GAAG,CAAC,CAAC,GAAG,IAAI;IAC1D;EACJ,CAAC;EACDza,kBAAkB,CAAC6C,SAAS,CAACK,YAAY,GAAG,UAAUsB,CAAC,EAAE;IACrD,IAAIqP,EAAE;IACN,IAAI,CAAC1W,iBAAiB,CAACkB,MAAM,CAACqY,KAAK,CAAC,EAAE;MAClCgE,YAAY,CAACrc,MAAM,CAACqY,KAAK,CAAC;IAC9B;IACA,IAAI1Q,MAAM,GAAGxB,CAAC,CAACwB,MAAM;IACrB,IAAI,CAAC7I,iBAAiB,CAAC,IAAI,CAAC8C,MAAM,CAACwG,gBAAgB,CAAC,IAAI,IAAI,CAACxG,MAAM,CAACwG,gBAAgB,CAACC,aAAa,KAAK,SAAS,IACzG/I,YAAY,CAACqI,MAAM,EAAE,eAAe,CAAC,EAAE;MAC1C;IACJ;IACA,IAAI1C,IAAI,GAAG3F,YAAY,CAACqI,MAAM,EAAE,oBAAoB,CAAC;IACrD,IAAIrI,YAAY,CAACqI,MAAM,EAAE,aAAa,CAAC,EAAE;MACrC,IAAI,CAACD,cAAc,CAACvB,CAAC,CAAC;IAC1B;IACA,IAAIlB,IAAI,IAAI,CAAC,IAAI,CAAC5C,wBAAwB,EAAE;MACxC,IAAIia,SAAS,GAAGrX,IAAI,CAACf,aAAa,CAAC,cAAc,CAAC;MAClD,IAAIoY,SAAS,EAAE;QACX,IAAI,CAACC,eAAe,CAAC,CAACD,SAAS,CAACtd,SAAS,CAAC4I,QAAQ,CAAC,SAAS,CAAC,CAAC;MAClE,CAAC,MACI;QACDxG,cAAc,CAAC6D,IAAI,CAACyJ,aAAa,CAAC;QAClC,IAAI,IAAI,CAACpM,iBAAiB,IAAI,CAAC2C,IAAI,CAACyJ,aAAa,CAACxK,aAAa,CAAC,gBAAgB,CAAC,EAAE;UAC/E,IAAI,CAAChB,gCAAgC,GAAG,IAAI;UAC5C,IAAIoN,OAAO,GAAG,IAAI,CAACzK,OAAO,CAAC4D,kBAAkB;UAC7C,IAAI+S,IAAI,GAAGvX,IAAI,CAACyJ,aAAa,CAACxK,aAAa,CAAC,UAAU,CAAC;UACvD,IAAIuY,KAAK,GAAGD,IAAI,CAACE,eAAe;UAChC,IAAIzM,IAAI,GAAGwM,KAAK,CAAC/Y,OAAO,GAAG,OAAO,GAAG,UAAU;UAC/C,IAAIsO,IAAI,GAAGyK,KAAK,CAAC/Y,OAAO,GAAG,IAAI,GAAG,KAAK;UACvC,IAAI6M,QAAQ,GAAG;YAAExJ,KAAK,EAAE,IAAI,CAAClB,OAAO,CAACkB,KAAK;YAAEP,SAAS,EAAEwL,IAAI;YAAEtI,GAAG,EAAE,IAAI,CAAC7D,OAAO,CAAC6D,GAAG;YAC9ErC,QAAQ,EAAE4I,IAAI;YAAEjM,IAAI,EAAE,IAAI,CAAC6B,OAAO,CAAC7B,IAAI;YAAEkD,SAAS,EAAEoJ,OAAO;YAAElJ,YAAY,EAAE,IAAI,CAACvB,OAAO,CAACuB;UAC5F,CAAC;UACD,IAAIE,KAAK,GAAG,IAAI,CAACnF,MAAM,CAAC7C,YAAY,CAACmd,KAAK,EAAE,UAAU,CAAC,CAACxL,YAAY,CAAC,KAAK,CAAC,CAAC;UAC5E,IAAI,CAAC0L,8BAA8B,CAACpM,QAAQ,EAAEjJ,KAAK,CAAC;UACpD,IAAI,IAAI,CAAChF,iBAAiB,IAAI,CAAC,IAAI,CAACuD,OAAO,CAACiI,QAAQ,IAAI,IAAI,CAACjI,OAAO,CAAC+W,oBAAoB,IAClF,IAAI,CAAC9S,6BAA6B,CAACjD,MAAM,EAAE;YAC9C,IAAIL,SAAS,GAAG,IAAI,CAACyO,oBAAoB,CAAC,CAACO,EAAE,GAAG,IAAI,CAAC3P,OAAO,CAACyD,eAAe,EAAEsI,MAAM,CAACM,KAAK,CAACsD,EAAE,EAAE,IAAI,CAACrS,gCAAgC,CAAC,EAAE,IAAI,CAAC;YAC5I,IAAIwC,KAAK,GAAG,IAAIrF,KAAK,CAAC,CAAC;YACvB,IAAIkG,SAAS,EAAE;cACXb,KAAK,CAACM,KAAK,CAACO,SAAS,CAAC;YAC1B;YACA,IAAIH,MAAM,GAAG,IAAI9F,WAAW,CAAC,IAAI,CAACkC,0BAA0B,CAAC,CAACkU,YAAY,CAAChR,KAAK,CAAC;YACjF,IAAI,IAAI,CAACE,OAAO,CAAC+W,oBAAoB,KAAKvW,MAAM,CAACQ,MAAM,EAAE;cACrD,IAAI,CAAChB,OAAO,CAAC+W,oBAAoB,GAAGvW,MAAM,CAACQ,MAAM;YACrD;YACA,IAAI,CAAC,IAAI,CAAChB,OAAO,CAAC+W,oBAAoB,IAAI,IAAI,CAAC9S,6BAA6B,CAACjD,MAAM,EAAE;cACjF,IAAI,CAACiD,6BAA6B,GAAG,EAAE;YAC3C;UACJ;UACA,IAAI,IAAI,CAACA,6BAA6B,CAACjD,MAAM,KAAK,IAAI,CAAChB,OAAO,CAAC+W,oBAAoB,KAAK,IAAI,CAAC7Z,iBAAiB,IACvG,CAAC,IAAI,CAAC8C,OAAO,CAAC+W,oBAAoB,CAAC,EAAE;YACxC,IAAI,CAAC9S,6BAA6B,GAAG,EAAE;UAC3C;QACJ;MACJ;MACA,IAAI,CAAC+S,uBAAuB,CAAC,CAAC;MAC9B5X,IAAI,CAACf,aAAa,CAAC,eAAe,CAAC,CAAC+D,KAAK,CAAC,CAAC;IAC/C;IACA,IAAI,CAAC6U,QAAQ,CAACxd,YAAY,CAAC2F,IAAI,EAAE,UAAU,CAAC,CAAC;EACjD,CAAC;EACDtD,kBAAkB,CAAC6C,SAAS,CAACmY,8BAA8B,GAAG,UAAUpM,QAAQ,EAAEjJ,KAAK,EAAE;IACrF,KAAK,IAAIV,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACzD,gCAAgC,CAAC0D,MAAM,EAAED,CAAC,EAAE,EAAE;MACnE,IAAImW,OAAO,GAAG,IAAI,CAAC5Z,gCAAgC,CAACyD,CAAC,CAAC;MACtD,IAAImW,OAAO,CAACzV,KAAK,GAAG,EAAE,KAAKA,KAAK,GAAG,EAAE,KAAKyV,OAAO,CAAC1V,QAAQ,KAAK,OAAO,IAAI0V,OAAO,CAAC1V,QAAQ,KAAK,UAAU,CAAC,EAAE;QACxG,IAAI,CAAClE,gCAAgC,CAAC8W,MAAM,CAACrT,CAAC,EAAE,CAAC,CAAC;QAClD;MACJ;IACJ;IACA,IAAK2J,QAAQ,CAAC/J,SAAS,KAAK,IAAI,KAAK,CAAC,IAAI,CAACvD,6BAA6B,IAAI,CAAC,IAAI,CAACD,sBAAsB,CAAC,IACjGuN,QAAQ,CAAC/J,SAAS,KAAK,KAAK,KAAK,CAAC,IAAI,CAACvD,6BAA6B,IAAI,IAAI,CAACD,sBAAsB,CAAE,EAAE;MAC3G,IAAI,CAACG,gCAAgC,CAAC2D,IAAI,CAAC/H,MAAM,CAAC,CAAC,CAAC,EAAE;QAAEuI,KAAK,EAAEA;MAAM,CAAC,EAAEiJ,QAAQ,CAAC,CAAC;MAClF,IAAIA,QAAQ,CAAC/J,SAAS,KAAK,IAAI,EAAE;QAC7B,IAAI,CAACX,OAAO,CAAC+W,oBAAoB,EAAE;MACvC,CAAC,MACI;QACD,IAAI,CAAC/W,OAAO,CAAC+W,oBAAoB,EAAE;MACvC;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIjb,kBAAkB,CAAC6C,SAAS,CAACwY,eAAe,GAAG,UAAU7W,CAAC,EAAE8W,iBAAiB,EAAE;IAC3E,IAAIC,SAAS,GAAI/W,CAAC,CAAC+B,GAAG,KAAK,SAAS,GAAI+U,iBAAiB,CAAC3Y,OAAO,CAACmE,QAAQ,CAAC0U,aAAa,CAAC,GAAG,CAAC,GACvFF,iBAAiB,CAAC3Y,OAAO,CAACmE,QAAQ,CAAC0U,aAAa,CAAC,GAAG,CAAC;IAC3D,IAAIC,WAAW,GAAGH,iBAAiB,CAAE,CAACC,SAAS,GAAGD,iBAAiB,CAACpW,MAAM,IAAIoW,iBAAiB,CAACpW,MAAM,CAAE;IACxG;IACA,IAAIuW,WAAW,EAAE;MACbA,WAAW,CAACnV,KAAK,CAAC,CAAC;MACnB,IAAIN,MAAM,GAAGyV,WAAW,CAACpe,SAAS,CAAC4I,QAAQ,CAAC,cAAc,CAAC,GAAGtI,YAAY,CAAC8d,WAAW,EAAE,UAAU,CAAC,GAAGA,WAAW;MACjH,IAAI,CAACN,QAAQ,CAACnV,MAAM,CAAC;IACzB;EACJ,CAAC;EACDhG,kBAAkB,CAAC6C,SAAS,CAACM,YAAY,GAAG,UAAUqB,CAAC,EAAE;IACrD,IAAIA,CAAC,CAAC+B,GAAG,KAAK,KAAK,IAAK,CAAC/B,CAAC,CAAC+B,GAAG,KAAK,SAAS,IAAI/B,CAAC,CAAC+B,GAAG,KAAK,WAAW,KAAK,CAAC/B,CAAC,CAACkX,MAAO,EAAE;MAClF,IAAI,CAACP,QAAQ,CAACxd,YAAY,CAAC6G,CAAC,CAACwB,MAAM,EAAE,UAAU,CAAC,CAAC;IACrD;IACA,IAAI,CAACxB,CAAC,CAAC+B,GAAG,KAAK,SAAS,IAAI/B,CAAC,CAAC+B,GAAG,KAAK,WAAW,KAAK,CAAC/B,CAAC,CAACkX,MAAM,IAAI,IAAI,CAACzb,MAAM,CAAC2H,cAAc,IACtF,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACvF,IAAI,KAAK,UAAU,EAAE;MACnDmC,CAAC,CAACmX,cAAc,CAAC,CAAC;MAClB,IAAIL,iBAAiB,GAAG/F,KAAK,CAACqG,IAAI,CAAC,IAAI,CAAC3Y,GAAG,CAACmL,gBAAgB,CAAC,gDAAgD,CAAC,CAAC;MAC/G,IAAI,CAACiN,eAAe,CAAC7W,CAAC,EAAE8W,iBAAiB,CAAC;IAC9C;EACJ,CAAC;EACDtb,kBAAkB,CAAC6C,SAAS,CAACsY,QAAQ,GAAG,UAAU7X,IAAI,EAAE;IACpD,IAAIuY,QAAQ,GAAG,IAAI,CAAC5Y,GAAG,CAACV,aAAa,CAAC,aAAa,CAAC;IACpD,IAAIsZ,QAAQ,EAAE;MACVA,QAAQ,CAACxe,SAAS,CAACiB,MAAM,CAAC,YAAY,CAAC;IAC3C;IACA,IAAIgF,IAAI,IAAIA,IAAI,KAAKuY,QAAQ,EAAE;MAC3BvY,IAAI,CAACjG,SAAS,CAACmF,GAAG,CAAC,YAAY,CAAC;IACpC;EACJ,CAAC;EACDxC,kBAAkB,CAAC6C,SAAS,CAAC+X,eAAe,GAAG,UAAU7Y,OAAO,EAAE;IAC9D,IAAI,IAAI,CAACpB,iBAAiB,EAAE;MACxB,IAAI,CAACW,6BAA6B,GAAG,IAAI;MACzC,IAAI,CAACD,sBAAsB,GAAGU,OAAO;MACrC,IAAI,CAACoG,6BAA6B,GAAG,EAAE;MACvC,IAAI,CAAC3G,gCAAgC,GAAG,EAAE;IAC9C;IACA,IAAIsa,MAAM,GAAG,IAAI,CAACnb,iBAAiB,GAC/B,IAAI,CAACQ,kBAAkB,CAAC2T,GAAG,CAAC,UAAUiH,GAAG,EAAE;MACvC,OAAOA,GAAG,CAACxZ,aAAa,CAAC,UAAU,CAAC;IACxC,CAAC,CAAC,GAAG,EAAE,CAAC6F,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAACnF,IAAI,CAACoF,gBAAgB,CAAC,8BAA8B,CAAC,CAAC;IAClF,KAAK,IAAIwF,EAAE,GAAG,CAAC,EAAEoI,QAAQ,GAAGF,MAAM,EAAElI,EAAE,GAAGoI,QAAQ,CAAC9W,MAAM,EAAE0O,EAAE,EAAE,EAAE;MAC5D,IAAI5K,IAAI,GAAGgT,QAAQ,CAACpI,EAAE,CAAC;MACvBjU,oBAAoB,CAACqJ,IAAI,EAAEjH,OAAO,CAAC;MACnC7D,UAAU,CAAC8K,IAAI,CAAC+R,eAAe,EAAEhZ,OAAO,CAAC;IAC7C;EACJ,CAAC;EACD/B,kBAAkB,CAAC6C,SAAS,CAAC4H,UAAU,GAAG,YAAY;IAClD,IAAI,IAAI,CAACxK,MAAM,CAACyB,OAAO,CAACrE,SAAS,CAAC4I,QAAQ,CAAC,UAAU,CAAC,EAAE;MACpD,IAAI,CAAC1C,SAAS,CAAC7B,OAAO,CAACa,aAAa,CAAC,gBAAgB,CAAC,CAAClF,SAAS,CAACiB,MAAM,CAAC,eAAe,CAAC;MACxF,IAAI,CAAC,IAAI,CAAC4F,OAAO,CAAC2G,kBAAkB,EAAE;QAClC,IAAI,CAACtH,SAAS,CAAC7B,OAAO,CAACa,aAAa,CAAC,QAAQ,CAAC,CAAC+D,KAAK,CAAC,CAAC;MAC1D;IACJ;EACJ,CAAC;EACDtG,kBAAkB,CAAC6C,SAAS,CAACoZ,cAAc,GAAG,UAAUtW,KAAK,EAAE5D,OAAO,EAAE6N,IAAI,EAAE;IAC1E,IAAItM,IAAI,GAAGvB,OAAO,GAAG,IAAI,CAACF,QAAQ,CAACqa,SAAS,CAAC,IAAI,CAAC,GAC9C,IAAI,CAACja,SAAS,CAACia,SAAS,CAAC,IAAI,CAAC;IAClChe,UAAU,CAACoF,IAAI,CAACf,aAAa,CAAC,OAAO,CAAC,EAAER,OAAO,CAAC;IAChD,IAAIC,KAAK,GAAGsB,IAAI,CAACf,aAAa,CAAC,UAAU,CAAC;IAC1C,IAAI4Z,SAAS,GAAGne,eAAe,CAAC,CAAC,CAAC,EAAE4R,IAAI,EAAE;MAAEzL,MAAM,EAAE,IAAI,CAACD,OAAO,CAACC,MAAM;MAAElE,MAAM,EAAE,IAAI,CAACA;IAAO,CAAC,CAAC;IAC/F,IAAImc,SAAS,GAAG,IAAI,CAAClY,OAAO,CAAC8D,iBAAiB,GAAG,aAAa,GAAG,WAAW;IAC5EhG,KAAK,CAAC,EAAE,GAAGoa,SAAS,CAAC,GAAG,CAACjf,iBAAiB,CAACwI,KAAK,CAAC,IAAIA,KAAK,CAACL,QAAQ,CAAC,CAAC,CAACJ,MAAM,GACxE,IAAI,CAACjF,MAAM,CAACoc,mBAAmB,GAAG5d,kBAAkB,CAAC6d,QAAQ,CAAC3W,KAAK,CAAC,GAAGA,KAAK,GAAG,IAAI,CAACwB,iBAAiB,CAAC,QAAQ,CAAC;IACnH,IAAIoV,WAAW,GAAG3e,MAAM,CAAC,MAAM,CAAC;IAChCoE,KAAK,CAACgF,YAAY,CAAC,IAAI,EAAEuV,WAAW,GAAG,WAAW,CAAC;IACnDjZ,IAAI,CAACf,aAAa,CAAC,OAAO,CAAC,CAACyE,YAAY,CAAC,iBAAiB,EAAEhF,KAAK,CAACP,EAAE,CAAC;IACrE,IAAIO,KAAK,CAACiL,SAAS,KAAK,IAAI,CAAC9F,iBAAiB,CAAC,QAAQ,CAAC,EAAE;MACtD,IAAI,CAACmF,QAAQ,GAAG,IAAI;IACxB;IACA,IAAI,OAAO3G,KAAK,KAAK,SAAS,EAAE;MAC5B3D,KAAK,CAACiL,SAAS,GAAGtH,KAAK,KAAK,IAAI,GAAG,IAAI,CAACwB,iBAAiB,CAAC,YAAY,CAAC,GAAG,IAAI,CAACA,iBAAiB,CAAC,aAAa,CAAC;IACnH;IACA7J,QAAQ,CAAC,CAAC0E,KAAK,CAAC,EAAE,CAAC,sBAAsB,CAAC,CAAC;IAC3C,IAAI,IAAI,CAACkC,OAAO,CAACsY,QAAQ,IAAI5M,IAAI,CAAC,IAAI,CAAC1L,OAAO,CAACC,MAAM,CAACiB,KAAK,CAAC,KAAK,IAAI,CAAC+B,iBAAiB,CAAC,WAAW,CAAC,IAC7FyI,IAAI,CAAC,IAAI,CAAC1L,OAAO,CAACC,MAAM,CAACiB,KAAK,CAAC,KAAK,IAAI,CAAC+B,iBAAiB,CAAC,qBAAqB,CAAC,EAAE;MACtFnF,KAAK,CAACiL,SAAS,GAAG,EAAE;MACpB,IAAIwP,eAAe,GAAG,IAAI,CAACxc,MAAM,CAAC2M,OAAO,IAAI,IAAI,CAAC1I,OAAO,CAACC,MAAM,CAACyB,MAAM,IAChE,OAAQ,IAAI,CAAC1B,OAAO,CAACC,MAAM,CAACyB,MAAM,CAACoH,YAAa,KAAK,QAAQ,IAChE,EAAE,IAAI,CAAC9I,OAAO,CAACC,MAAM,CAACyB,MAAM,CAACoH,YAAY,CAACnK,SAAS,IAAI,IAAI,CAACqB,OAAO,CAACC,MAAM,CAACyB,MAAM,CAACoH,YAAY,CAACnK,SAAS,CAAC6Z,WAAW,CAAC;MACzH;MACA,IAAIC,YAAY,GAAG,IAAI,CAAC1c,MAAM,CAAC2c,aAAa,IAAI,IAAI,CAAC3c,MAAM,CAAC2c,aAAa,CAACC,aAAa;MACnF;MACA,IAAI,CAAC5c,MAAM,CAAC2c,aAAa,CAACC,aAAa,CAACjQ,OAAO;MACnD,IAAI6P,eAAe,IAAIE,YAAY,EAAE;QACjC,IAAI,CAACzY,OAAO,CAACsY,QAAQ,CAACL,SAAS,EAAE,IAAI,CAAClc,MAAM,EAAE,oBAAoB,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE+B,KAAK,CAAC;QAC5F,IAAI,CAAC/B,MAAM,CAAC6c,eAAe,CAAC,CAAC;MACjC,CAAC,MACI;QACDjf,cAAc,CAACmE,KAAK,EAAE,IAAI,CAACkC,OAAO,CAACsY,QAAQ,CAACL,SAAS,EAAE,IAAI,CAAClc,MAAM,EAAE,oBAAoB,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAACA,MAAM,CAAC8c,IAAI,CAAC,CAAC;MACxI;IACJ;IACA,OAAOzZ,IAAI;EACf,CAAC;EACDtD,kBAAkB,CAAC6C,SAAS,CAACqY,uBAAuB,GAAG,YAAY;IAC/D,IAAI8B,GAAG,GAAG,IAAI,CAACrc,iBAAiB,GAAG,IAAI,CAACQ,kBAAkB,CAAC+D,MAAM,GAAG,IAAI,CAAC8D,IAAI,CAACuN,QAAQ,CAACrR,MAAM,GAAG,CAAC;IACjG,IAAI/C,SAAS,GAAG,EAAE;IAClB,IAAI8a,QAAQ,GAAG,KAAK;IACpB,IAAI3Z,IAAI,GAAG,IAAI,CAAC3C,iBAAiB,GAAG,IAAI,CAAC2H,IAAI,CAAC/F,aAAa,CAAC,cAAc,CAAC,GAAG,IAAI,CAACyG,IAAI,CAACzG,aAAa,CAAC,cAAc,CAAC;IACrH,IAAI2a,QAAQ,GAAG,IAAI,CAACvc,iBAAiB,GAAG,IAAI,CAACQ,kBAAkB,CAACyE,MAAM,CAAC,UAAUmW,GAAG,EAAE;MAAE,OAAOA,GAAG,CAACxZ,aAAa,CAAC,UAAU,CAAC;IAAE,CAAC,CAAC,CAAC2C,MAAM,GACnI,IAAI,CAAC8D,IAAI,CAACoF,gBAAgB,CAAC,gDAAgD,CAAC,CAAClJ,MAAM;IACvF,IAAI,IAAI,CAAC8D,IAAI,CAACzG,aAAa,CAAC,gBAAgB,CAAC,EAAE;MAC3Cya,GAAG,IAAI,CAAC;IACZ;IACA,IAAIG,GAAG;IACP,IAAI,CAAC,IAAI,CAACjZ,OAAO,CAAC2G,kBAAkB,EAAE;MAClCsS,GAAG,GAAG,IAAI,CAAC5Z,SAAS,CAAC6W,MAAM,CAAC,CAAC,CAAC;MAC9B+C,GAAG,CAACF,QAAQ,GAAG,KAAK;IACxB;IACA,IAAInC,KAAK,GAAGxX,IAAI,CAACyX,eAAe;IAChC7c,UAAU,CAAC4c,KAAK,EAAE,KAAK,CAAC;IACxBA,KAAK,CAACsC,aAAa,GAAG,KAAK;IAC3B,IAAI,IAAI,CAACzc,iBAAiB,IAAI,IAAI,CAACuF,MAAM,CAACP,KAAK,KAAK,EAAE,IAAI,CAAC,IAAI,CAACzB,OAAO,CAACsM,0BAA0B,IAAI,CAAC,IAAI,CAACjP,gCAAgC,KACpI,CAAC,IAAI,CAACD,6BAA6B,IAAK,CAAC,IAAI,CAACD,sBAAsB,IAAI,CAAC6b,QAAS,CAAC,KAAKF,GAAG,KAAKE,QAAQ,IAAIF,GAAG,KAAKE,QAAQ,CAAC,EAAE;MACnIA,QAAQ,GAAG,CAAC;IAChB,CAAC,MACI,IAAI,IAAI,CAACvc,iBAAiB,IAAI,IAAI,CAACQ,kBAAkB,CAAC+D,MAAM,GAAG,IAAI,CAAC9D,iBAAiB,IACnF,IAAI,CAAC+G,6BAA6B,CAACjD,MAAM,KAAK,CAACgY,QAAQ,IAAIF,GAAG,KAAKE,QAAQ,CAAC,IAAI,IAAI,CAAC7b,sBAAsB,EAAE;MAChH,IAAI,CAAC6b,QAAQ,EAAE;QACXA,QAAQ,IAAI,IAAI,CAAC/U,6BAA6B,CAACjD,MAAM;MACzD,CAAC,MACI;QACD8X,GAAG,IAAI,IAAI,CAAC7U,6BAA6B,CAACjD,MAAM;MACpD;IACJ;IACA,IAAI8X,GAAG,KAAKE,QAAQ,EAAE;MAClB,IAAI,IAAI,CAACvc,iBAAiB,EAAE;QACxB,IAAI,CAACU,sBAAsB,GAAG,IAAI;QAClC,IAAI,CAACC,6BAA6B,GAAG,IAAI;QACzC,IAAI,CAACE,gCAAgC,GAAG,EAAE;MAC9C;MACAW,SAAS,GAAG,CAAC,SAAS,CAAC;MACvBjE,UAAU,CAAC4c,KAAK,EAAE,IAAI,CAAC;IAC3B,CAAC,MACI,IAAIoC,QAAQ,EAAE;MACf/a,SAAS,GAAG,CAAC,QAAQ,CAAC;MACtB2Y,KAAK,CAACsC,aAAa,GAAG,IAAI;IAC9B,CAAC,MACI;MACD,IAAI,IAAI,CAACzc,iBAAiB,EAAE;QACxB,IAAI,CAACU,sBAAsB,GAAG,KAAK;QACnC,IAAI,CAACC,6BAA6B,GAAG,IAAI;QACzC,IAAI,CAACE,gCAAgC,GAAG,EAAE;MAC9C;MACAW,SAAS,GAAG,CAAC,WAAW,CAAC;MACzB8a,QAAQ,GAAG,IAAI;MACf,IAAIE,GAAG,EAAE;QACLA,GAAG,CAACF,QAAQ,GAAG,IAAI;MACvB;IACJ;IACA,IAAIE,GAAG,EAAE;MACL,IAAI,CAAC5c,WAAW,GAAG,CAAC4c,GAAG,CAACF,QAAQ;MAChCE,GAAG,CAACE,QAAQ,CAAC,CAAC;IAClB;IACA9f,WAAW,CAAC,CAAC+F,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;IACvDhG,QAAQ,CAAC,CAACgG,IAAI,CAAC,EAAEnB,SAAS,CAAC;IAC3B,IAAI,CAAClC,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACue,wBAAwB,EAAE;MAAEL,QAAQ,EAAEA;IAAS,CAAC,CAAC;EAC/E,CAAC;EACDjd,kBAAkB,CAAC6C,SAAS,CAACyX,iBAAiB,GAAG,UAAU1K,IAAI,EAAE8I,SAAS,EAAEW,KAAK,EAAE;IAC/E,IAAIxF,EAAE,EAAE0J,EAAE,EAAEC,EAAE;IACd,IAAI1B,MAAM,GAAG,IAAI,CAAC7b,MAAM,CAAC6B,aAAa,CAAC,KAAK,CAAC;IAC7C,IAAIqb,GAAG;IACP,IAAIF,QAAQ,GAAG,KAAK;IACpB,IAAI,CAAC,IAAI,CAAC/Y,OAAO,CAAC2G,kBAAkB,EAAE;MAClCsS,GAAG,GAAG,IAAI,CAAC5Z,SAAS,CAAC6W,MAAM,CAAC,CAAC,CAAC;IAClC;IACA,IAAIqD,WAAW,GAAG,CAAC,CAAC;IACpB,IAAIlX,GAAG,GAAG,SAAS;IACnB,IAAI,CAAC8S,KAAK,CAAChV,YAAY,EAAE;MACrBkC,GAAG,GAAG8S,KAAK,CAACjU,KAAK;IACrB;IACA,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2K,IAAI,CAAC1K,MAAM,EAAED,CAAC,EAAE,EAAE;MAClC,IAAI8J,GAAG,GAAGtR,QAAQ,CAAC8I,GAAG,EAAEqJ,IAAI,CAACvK,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;MACzD,IAAIyJ,GAAG,KAAK,EAAE,IAAI5R,iBAAiB,CAAC4R,GAAG,CAAC,EAAE;QACtC0O,WAAW,GAAGA,WAAW,GAAG,CAAC;MACjC;IACJ;IACA,IAAI,CAAC,IAAI,CAAC9c,iBAAiB,EAAE;MACzB,IAAI,CAACmO,QAAQ,GAAG2O,WAAW,KAAK,CAAC,CAAC,GAAG7N,IAAI,CAAC1K,MAAM,GAAGuY,WAAW,GAAG7N,IAAI,CAAC1K,MAAM;IAChF;IACA,IAAI,IAAI,CAACvE,iBAAiB,IAAI,IAAI,CAACV,MAAM,CAAC2H,cAAc,IAAI,IAAI,CAAC3H,MAAM,CAAC2H,cAAc,CAACnB,gBAAgB,KAAK,SAAS,EAAE;MACnH,IAAI,CAACyQ,UAAU,CAAC,CAAC;IACrB;IACA,IAAItH,IAAI,CAAC1K,MAAM,IAAI,CAAC,IAAI,CAACzE,WAAW,EAAE;MAClC,IAAIid,cAAc,GAAG,IAAI,CAACvW,iBAAiB,CAAC,WAAW,CAAC;MACxD,IAAIwW,QAAQ,GAAG,IAAI,CAAC3U,IAAI,CAACzG,aAAa,CAAC,mBAAmB,CAAC;MAC3D,IAAIob,QAAQ,EAAE;QACVA,QAAQ,CAACtgB,SAAS,CAACiB,MAAM,CAAC,kBAAkB,CAAC;MACjD;MACA,IAAIsf,QAAQ,GAAG,IAAI,CAAC3B,cAAc,CAACyB,cAAc,EAAE,KAAK,GAAG7J,EAAE,GAAG,CAAC,CAAC,EAAEA,EAAE,CAAC,IAAI,CAAC3P,OAAO,CAACkB,KAAK,CAAC,GAAGsY,cAAc,EAAE7J,EAAE,CAAC,CAAC;MACjH,IAAI,IAAI,CAAC5T,MAAM,CAACyC,QAAQ,EAAE;QACtB,IAAI,IAAI,CAACzC,MAAM,CAACyC,QAAQ,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;UAC1CrF,QAAQ,CAAC,CAACsgB,QAAQ,CAAC,EAAE,IAAI,CAAC3d,MAAM,CAACyC,QAAQ,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC;QACzD,CAAC,MACI;UACDtF,QAAQ,CAAC,CAACsgB,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC3d,MAAM,CAACyC,QAAQ,CAAC,CAAC;QAChD;MACJ;MACA,IAAI,IAAI,CAAC9B,mBAAmB,IAAI,CAAC,IAAI,CAACD,iBAAiB,EAAE;QACrD,IAAIga,SAAS,GAAGjb,kBAAkB,CAAC9B,MAAM,CAAC,MAAM,CAAC,EAAEggB,QAAQ,EAAE,UAAU,CAAC;QACxEjD,SAAS,CAACpY,aAAa,CAAC,UAAU,CAAC,CAAClF,SAAS,CAACmF,GAAG,CAAC,aAAa,CAAC;QAChE,IAAI,IAAI,CAAC7B,iBAAiB,EAAE;UACxBga,SAAS,CAACtd,SAAS,CAACmF,GAAG,CAAC,kBAAkB,CAAC;UAC3C,IAAI,IAAI,CAACvC,MAAM,CAACsL,gBAAgB,EAAE;YAC9B,IAAI,CAACxC,OAAO,CAACiC,KAAK,CAACE,MAAM,GAAI,IAAI,CAACnC,OAAO,CAACuC,YAAY,GAAGzL,aAAa,CAAC,IAAI,CAACmJ,IAAI,CAAC,GAAI,IAAI;UAC7F;UACA,IAAI,CAACV,IAAI,CAACpG,YAAY,CAACyY,SAAS,EAAE,IAAI,CAAC5R,OAAO,CAAC;QACnD,CAAC,MACI;UACD+S,MAAM,CAACpT,WAAW,CAACiS,SAAS,CAAC;QACjC;MACJ,CAAC,MACI,IAAI,IAAI,CAACrS,IAAI,CAAC/F,aAAa,CAAC,wBAAwB,CAAC,EAAE;QACxD,IAAI,CAAC+F,IAAI,CAAC/F,aAAa,CAAC,wBAAwB,CAAC,CAACwY,eAAe,CAACkC,QAAQ,GAAG,KAAK;QAClF,IAAI,CAAC3U,IAAI,CAAC/F,aAAa,CAAC,wBAAwB,CAAC,CAACwK,aAAa,CAAC1P,SAAS,CAACiB,MAAM,CAAC,qBAAqB,CAAC;MAC3G;MACA,IAAIuG,SAAS,GAAG,IAAIhG,SAAS,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAACqF,OAAO,CAACkB,KAAK,CAAC;MACnE,IAAI,IAAI,CAAClB,OAAO,CAACsN,eAAe,EAAE;QAC9B3M,SAAS,GAAGA,SAAS,CAACoM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC/M,OAAO,CAACsN,eAAe,CAAC;MAC5E;MACA,IAAIqM,aAAa,GAAG,IAAIjf,WAAW,CAAC,IAAI,CAACsF,OAAO,CAACyD,eAAe,CAAC,CAACqN,YAAY,CAAC,IAAIrW,KAAK,CAAC,CAAC,CAAC2F,KAAK,CAACO,SAAS,CAAC,CAAC,CAACK,MAAM;MACnH,IAAI,IAAI,CAACgB,MAAM,IAAI,IAAI,CAACA,MAAM,CAACP,KAAK,EAAE;QAClC,IAAImY,iBAAiB,GAAG,IAAI,CAAC7B,cAAc,CAAC,IAAI,CAAC9U,iBAAiB,CAAC,qBAAqB,CAAC,EAAE,KAAK,GAAGoW,EAAE,GAAG,CAAC,CAAC,EACtGA,EAAE,CAAC,IAAI,CAACrZ,OAAO,CAACkB,KAAK,CAAC,GAAG,IAAI,CAAC+B,iBAAiB,CAAC,qBAAqB,CAAC,EACtEoW,EAAE,CAAC,CAAC;QACR,IAAI,IAAI,CAACtd,MAAM,CAACyC,QAAQ,EAAE;UACtB,IAAI,IAAI,CAACzC,MAAM,CAACyC,QAAQ,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;YAC1CrF,QAAQ,CAAC,CAACwgB,iBAAiB,CAAC,EAAE,IAAI,CAAC7d,MAAM,CAACyC,QAAQ,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC;UAClE,CAAC,MACI;YACDtF,QAAQ,CAAC,CAACwgB,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC7d,MAAM,CAACyC,QAAQ,CAAC,CAAC;UACzD;QACJ;QACA,IAAK,IAAI,CAAC/B,iBAAiB,IAAK,CAACxD,iBAAiB,CAAC,IAAI,CAACmL,IAAI,CAACiO,QAAQ,CAAC,CAAC,CAAC,CAAC,IAClE,IAAI,CAACjO,IAAI,CAACiO,QAAQ,CAAC,CAAC,CAAC,CAAC6F,SAAS,KAAK,IAAI,CAACjV,iBAAiB,CAAC,qBAAqB,CAAE,IAAK,CAAC,IAAI,CAACxG,iBAAiB,EAAE;UACnH,IAAIod,gBAAgB,GAAGre,kBAAkB,CAAC9B,MAAM,CAAC,MAAM,CAAC,EAAEkgB,iBAAiB,EAAE,UAAU,CAAC;UACxFC,gBAAgB,CAACxb,aAAa,CAAC,UAAU,CAAC,CAAClF,SAAS,CAACmF,GAAG,CAAC,eAAe,CAAC;UACzE,IAAI,IAAI,CAAC7B,iBAAiB,EAAE;YACxBod,gBAAgB,CAAC1gB,SAAS,CAACmF,GAAG,CAAC,kBAAkB,CAAC;YAClD,IAAI,CAAC8F,IAAI,CAACpG,YAAY,CAAC6b,gBAAgB,EAAE,IAAI,CAAChV,OAAO,CAAC;YACtD,IAAIiV,gBAAgB,GAAG,IAAI,CAACjV,OAAO,CAACxG,aAAa,CAAC,iBAAiB,CAAC;YACpE,IAAI0b,YAAY,GAAG3G,IAAI,CAAC4G,IAAI,CAACH,gBAAgB,CAACI,qBAAqB,CAAC,CAAC,CAACjT,MAAM,CAAC;YAC7E8S,gBAAgB,CAAChT,KAAK,CAACE,MAAM,GAAI7F,QAAQ,CAAC+R,gBAAgB,CAAC4G,gBAAgB,CAAC,CAAC9S,MAAM,CAACtI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAGqb,YAAY,GAChH,IAAI;YACVD,gBAAgB,CAAChT,KAAK,CAAC2M,SAAS,GAAGqG,gBAAgB,CAAChT,KAAK,CAACE,MAAM;UACpE,CAAC,MACI;YACD4Q,MAAM,CAACpT,WAAW,CAACqV,gBAAgB,CAAC;UACxC;QACJ,CAAC,MACI,IAAI,IAAI,CAACzV,IAAI,CAAC/F,aAAa,CAAC,0BAA0B,CAAC,EAAE;UAC1D,IAAI,CAAC+F,IAAI,CAAC/F,aAAa,CAAC,0BAA0B,CAAC,CAACwY,eAAe,CAACkC,QAAQ,GAAG,KAAK;UACpF,IAAI,CAAC3U,IAAI,CAAC/F,aAAa,CAAC,0BAA0B,CAAC,CAACwK,aAAa,CAAC1P,SAAS,CAACiB,MAAM,CAAC,qBAAqB,CAAC;QAC7G;MACJ,CAAC,MACI,IAAI,IAAI,CAACqC,iBAAiB,IAAI,CAACxD,iBAAiB,CAAC,IAAI,CAACmL,IAAI,CAACiO,QAAQ,CAAC,CAAC,CAAC,CAAC,IACrE,IAAI,CAACjO,IAAI,CAACiO,QAAQ,CAAC,CAAC,CAAC,CAAC6F,SAAS,KAAK,IAAI,CAACjV,iBAAiB,CAAC,qBAAqB,CAAC,EAAE;QACtF,IAAI6W,gBAAgB,GAAG,IAAI,CAACjV,OAAO,CAACxG,aAAa,CAAC,iBAAiB,CAAC;QACpE,IAAI6b,cAAc,GAAG9G,IAAI,CAAC4G,IAAI,CAAC,IAAI,CAAC5V,IAAI,CAACiO,QAAQ,CAAC,CAAC,CAAC,CAAC4H,qBAAqB,CAAC,CAAC,CAACjT,MAAM,CAAC;QACpF8S,gBAAgB,CAAChT,KAAK,CAACE,MAAM,GAAI7F,QAAQ,CAAC+R,gBAAgB,CAAC4G,gBAAgB,CAAC,CAAC9S,MAAM,CAACtI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAGwb,cAAc,GAClH,IAAI;QACVJ,gBAAgB,CAAChT,KAAK,CAAC2M,SAAS,GAAGqG,gBAAgB,CAAChT,KAAK,CAACE,MAAM;QAChE5M,MAAM,CAAC,IAAI,CAACgK,IAAI,CAACiO,QAAQ,CAAC,CAAC,CAAC,CAAC;MACjC;MACA,IAAI8H,QAAQ,GAAG,KAAK,CAAC;MACrB,KAAK,IAAIpZ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2K,IAAI,CAAC1K,MAAM,EAAED,CAAC,EAAE,EAAE;QAClC,IAAI8C,GAAG,GAAGnK,MAAM,CAAC,MAAM,CAAC;QACxB,IAAI,CAAC4C,MAAM,CAAC,EAAE,GAAGuH,GAAG,CAAC,GAAGtK,QAAQ,CAAC8I,GAAG,EAAEqJ,IAAI,CAACvK,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACvE,IAAIK,KAAK,GAAGlI,QAAQ,CAAC,IAAI,CAACyG,OAAO,CAACkB,KAAK,EAAEwK,IAAI,CAACvK,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAC1E,IAAI,IAAI,CAACpB,OAAO,CAACoa,QAAQ,EAAE;UACvB3Y,KAAK,GAAG,IAAI,CAAChE,cAAc,CAAC4c,MAAM,CAAC5Y,KAAK,EAAE,IAAI,CAACzB,OAAO,CAACoa,QAAQ,CAAC;QACpE;QACA,IAAIE,MAAM,GAAG;UAAE7Y,KAAK,EAAEA,KAAK;UAAExB,MAAM,EAAE,IAAI,CAACD,OAAO,CAACC,MAAM;UAAEyL,IAAI,EAAEA,IAAI,CAACvK,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC;QAAE,CAAC;QAClG,IAAI,CAACrF,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAAC0f,eAAe,EAAED,MAAM,CAAC;QAClD7Y,KAAK,GAAG6Y,MAAM,CAAC7Y,KAAK;QACpB,IAAKA,KAAK,KAAK,EAAE,IAAIxI,iBAAiB,CAACwI,KAAK,CAAC,EAAG;UAC5C,IAAI0Y,QAAQ,EAAE;YACV;UACJ;UACAA,QAAQ,GAAG,IAAI;QACnB;QACA,IAAI,IAAI,CAAC1d,iBAAiB,EAAE;UACxB,IAAI,CAAC+d,uCAAuC,CAAC/Y,KAAK,EAAE,IAAI,CAACwC,6BAA6B,CAAC;QAC3F;QACA,IAAIwW,QAAQ,GAAG,IAAI,CAACrd,6BAA6B,GAC7C,IAAI,CAAC2a,cAAc,CAACtW,KAAK,EAAE,IAAI,CAACtE,sBAAsB,EAAE5D,QAAQ,CAAC,SAAS,EAAEmS,IAAI,CAAC3K,CAAC,CAAC,CAAC,CAAC,GACrF,IAAI,CAACgX,cAAc,CAACtW,KAAK,EAAE,IAAI,CAACiZ,eAAe,CAACf,aAAa,EAAE,IAAI,CAACrd,MAAM,CAAC,EAAE,GAAGuH,GAAG,CAAC,CAAC,EAAEtK,QAAQ,CAAC,SAAS,EAAEmS,IAAI,CAAC3K,CAAC,CAAC,CAAC,CAAC;QACxH6W,MAAM,CAACpT,WAAW,CAAChJ,kBAAkB,CAACqI,GAAG,EAAE4W,QAAQ,EAAE,UAAU,CAAC,CAAC;QACjE,IAAI,IAAI,CAAChe,iBAAiB,EAAE;UACxBmb,MAAM,CAAC+C,SAAS,CAAC7T,KAAK,CAACE,MAAM,GAAGrL,aAAa,CAAC,IAAI,CAACmJ,IAAI,CAAC,GAAG,IAAI;QACnE;MACJ;MACA,IAAIwN,SAAS,GAAG,IAAI,CAACxN,IAAI,CAACwN,SAAS;MACnC,IAAI,CAAC,IAAI,CAAC7V,iBAAiB,IAAI,IAAI,CAACE,uBAAuB,EAAE;QACzD,IAAI,CAACmI,IAAI,CAACiE,SAAS,GAAG,EAAE;MAC5B,CAAC,MACI,IAAI,IAAI,CAACtM,iBAAiB,IAAI,IAAI,CAACqI,IAAI,CAACuN,QAAQ,CAACrR,MAAM,EAAE;QAC1DpF,sBAAsB,CAAE,EAAE,CAACsI,KAAK,CAAC+F,IAAI,CAAC,IAAI,CAACnF,IAAI,CAACuN,QAAQ,CAAC,CAAE+B,MAAM,CAAC,CAAC,EAAE,IAAI,CAACrY,MAAM,CAAC2H,cAAc,CAAC0K,UAAU,CAAC,CAAC;MAChH;MACA,IAAI,IAAI,CAAC3R,iBAAiB,EAAE;QACxB,CAAC6c,EAAE,GAAG,IAAI,CAACrc,kBAAkB,EAAEgE,IAAI,CAACoL,KAAK,CAACiN,EAAE,EAAE,EAAE,CAACpV,KAAK,CAAC+F,IAAI,CAAC2N,MAAM,CAACvF,QAAQ,CAAC,CAAC;QAC7E,IAAI,CAACzH,QAAQ,GAAG2O,WAAW,KAAK,CAAC,CAAC,GAAG,IAAI,CAACtc,kBAAkB,CAAC+D,MAAM,GAAGuY,WAAW,GAAG,IAAI,CAACtc,kBAAkB,CAAC+D,MAAM;MACtH;MACA,IAAI,IAAI,CAACiD,6BAA6B,CAACjD,MAAM,KAAK,IAAI,CAAC/D,kBAAkB,CAAC+D,MAAM,IAAI,IAAI,CAAC9D,iBAAiB,IACnG,CAAC,IAAI,CAAC8C,OAAO,CAACsM,0BAA0B,IAAK,IAAI,CAACtM,OAAO,CAAC+W,oBAAoB,KAAK,IAAI,CAAC7Z,iBAAiB,IACzG,IAAI,CAAC8C,OAAO,CAACsM,0BAA2B,CAAC,EAAE;QAC9C,IAAI,CAACrI,6BAA6B,GAAG,EAAE;MAC3C;MACAtK,cAAc,CAAC,IAAI,CAACmL,IAAI,EAAE,EAAE,CAACZ,KAAK,CAAC+F,IAAI,CAAC2N,MAAM,CAACvF,QAAQ,CAAC,CAAC;MACzD,IAAI,IAAI,CAAC5V,iBAAiB,IAAI,CAAC,IAAI,CAACM,wBAAwB,EAAE;QAC1D,IAAI,CAACA,wBAAwB,GAAGqW,IAAI,CAACwH,KAAK,CAACtI,SAAS,GAAG,IAAI,CAACxN,IAAI,CAACwN,SAAS,CAAC;MAC/E;MACA,IAAI,CAAC0E,uBAAuB,CAAC,CAAC;MAC9B,IAAI,CAAC,IAAI,CAACva,iBAAiB,EAAE;QACzB,IAAIwc,GAAG,EAAE;UACLA,GAAG,CAACF,QAAQ,GAAG,KAAK;QACxB;QACAA,QAAQ,GAAG,KAAK;MACpB,CAAC,MACI;QACD,IAAIE,GAAG,IAAIA,GAAG,CAACF,QAAQ,EAAE;UACrBA,QAAQ,GAAG,IAAI;QACnB,CAAC,MACI;UACDA,QAAQ,GAAG,KAAK;QACpB;MACJ;IACJ,CAAC,MACI;MACDnB,MAAM,CAACpT,WAAW,CAAC,IAAI,CAACzI,MAAM,CAAC6B,aAAa,CAAC,MAAM,EAAE;QAAEmL,SAAS,EAAE,IAAI,CAAC9F,iBAAiB,CAAC,UAAU;MAAE,CAAC,CAAC,CAAC;MACxG,IAAI,CAAC6B,IAAI,CAACiE,SAAS,GAAG,EAAE;MACxB,IAAI,IAAI,CAACtM,iBAAiB,EAAE;QACxB,IAAIga,SAAS,GAAG,IAAI,CAACrS,IAAI,CAAC/F,aAAa,CAAC,wBAAwB,CAAC;QACjE,IAAIoY,SAAS,EAAE;UACX,IAAIoE,eAAe,GAAGpE,SAAS,CAAC5N,aAAa,CAACA,aAAa;UAC3D,IAAI4N,SAAS,CAACtd,SAAS,CAAC4I,QAAQ,CAAC,SAAS,CAAC,EAAE;YACzCxG,cAAc,CAACsf,eAAe,CAAC;UACnC,CAAC,MACI,IAAIpE,SAAS,CAACtd,SAAS,CAAC4I,QAAQ,CAAC,QAAQ,CAAC,EAAE;YAC7CxG,cAAc,CAACsf,eAAe,CAAC;YAC/BpE,SAAS,CAACtd,SAAS,CAACiB,MAAM,CAAC,QAAQ,CAAC;YACpCmB,cAAc,CAACsf,eAAe,CAAC;UACnC;UACApE,SAAS,CAACI,eAAe,CAACkC,QAAQ,GAAG,IAAI;UACzCtC,SAAS,CAAC5N,aAAa,CAAC1P,SAAS,CAACmF,GAAG,CAAC,qBAAqB,CAAC;QAChE;QACA,IAAI+M,gBAAgB,GAAG,IAAI,CAACjH,IAAI,CAAC/F,aAAa,CAAC,0BAA0B,CAAC;QAC1E,IAAIgN,gBAAgB,EAAE;UAClB,IAAIyP,sBAAsB,GAAGzP,gBAAgB,CAACxC,aAAa,CAACA,aAAa;UACzE,IAAIwC,gBAAgB,CAAClS,SAAS,CAAC4I,QAAQ,CAAC,SAAS,CAAC,EAAE;YAChDxG,cAAc,CAACuf,sBAAsB,CAAC;UAC1C;UACAzP,gBAAgB,CAACwL,eAAe,CAACkC,QAAQ,GAAG,IAAI;UAChD1N,gBAAgB,CAACxC,aAAa,CAAC1P,SAAS,CAACmF,GAAG,CAAC,qBAAqB,CAAC;QACvE;MACJ;MACA,IAAI,CAACwG,IAAI,CAACN,WAAW,CAAC,IAAI,CAACzI,MAAM,CAAC6B,aAAa,CAAC,KAAK,EAAE;QAAEK,SAAS,EAAE;MAAmB,CAAC,CAAC,CAAC;MAC1FtE,cAAc,CAAC,IAAI,CAACmL,IAAI,CAACuN,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAE,CAACnO,KAAK,CAAC+F,IAAI,CAAC2N,MAAM,CAACvF,QAAQ,CAAC,CAAC;MACrE,IAAI4G,GAAG,EAAE;QACLA,GAAG,CAACF,QAAQ,GAAG,IAAI;MACvB;MACAA,QAAQ,GAAG,IAAI;MACf,IAAI,CAAC1c,WAAW,GAAG,CAAC0c,QAAQ;IAChC;IACA,IAAIE,GAAG,IAAIvN,IAAI,CAAC1K,MAAM,EAAE;MACpB,IAAI,CAAC3E,WAAW,GAAG,CAAC4c,GAAG,CAACF,QAAQ;MAChCE,GAAG,CAACE,QAAQ,CAAC,CAAC;IAClB;IACA,IAAI3Z,IAAI,GAAG;MAAEwF,WAAW,EAAEnK,MAAM,CAACsV,mBAAmB;MAAEjQ,UAAU,EAAE,IAAI,CAAC3D,WAAW,GAAG,EAAE,GAAGmP;IAAK,CAAC;IAChG,IAAIrG,WAAW,GAAG,aAAa;IAC/B7F,IAAI,CAAC,EAAE,GAAG6F,WAAW,CAAC,GAAG,IAAI;IAC7B,IAAI,CAACtJ,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAAC6a,gBAAgB,EAAElW,IAAI,CAAC;IACjD,IAAI,CAACzD,MAAM,CAAC0E,MAAM,CAAC5F,MAAM,CAACue,wBAAwB,EAAE;MAAEL,QAAQ,EAAEA;IAAS,CAAC,CAAC;IAC3E,IAAI,IAAI,CAACtc,iBAAiB,IAAI,IAAI,CAACC,mBAAmB,EAAE;MACpD,IAAI,CAACoI,IAAI,CAACgC,KAAK,CAACU,SAAS,GAAG,KAAK;IACrC;IACApM,WAAW,CAAC,IAAI,CAACyJ,OAAO,CAAC;EAC7B,CAAC;EACD/I,kBAAkB,CAAC6C,SAAS,CAAC6b,uCAAuC,GAAG,UAAU/Y,KAAK,EAAEsZ,aAAa,EAAE;IACnG,KAAK,IAAIvP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuP,aAAa,CAAC/Z,MAAM,EAAEwK,CAAC,EAAE,EAAE;MAC3C,IAAIW,IAAI,GAAG4O,aAAa,CAACvP,CAAC,CAAC;MAC3B,IAAIwP,SAAS,GAAG7O,IAAI,CAAC1K,KAAK,YAAYoM,IAAI,GACtC,IAAI,CAACpQ,cAAc,CAAC4c,MAAM,CAAClO,IAAI,CAAC1K,KAAK,EAAE,IAAI,CAACzB,OAAO,CAACoa,QAAQ,CAAC,GAAGjO,IAAI,CAAC1K,KAAK;MAC9E,IAAIxB,MAAM,GAAG,IAAI,CAACD,OAAO,CAACC,MAAM;MAChC,IAAIA,MAAM,CAAC+M,eAAe,CAAC,CAAC,EAAE;QAC1B,IAAIiO,cAAc,GAAGlgB,cAAc,CAACkF,MAAM,EAAE,CAAC,CAAC,EAAE+a,SAAS,EAAE,IAAI,CAACpG,cAAc,CAAC,CAAC,CAAC,CAAC;QAClFnT,KAAK,GAAGlI,QAAQ,CAAC0G,MAAM,CAACib,eAAe,EAAED,cAAc,CAAC;MAC5D;MACA,IAAIxZ,KAAK,KAAKuZ,SAAS,KAAK7O,IAAI,CAAC3K,QAAQ,KAAK,OAAO,IAAI2K,IAAI,CAAC3K,QAAQ,KAAK,UAAU,CAAC,EAAE;QACpF,IAAI,CAAClE,gCAAgC,CAAC2D,IAAI,CAAC8Z,aAAa,CAACvP,CAAC,CAAC,CAAC;QAC5DuP,aAAa,CAAC3G,MAAM,CAAC5I,CAAC,EAAE,CAAC,CAAC;QAC1BA,CAAC,EAAE;MACP;IACJ;EACJ,CAAC;EACD1P,kBAAkB,CAAC6C,SAAS,CAAC+b,eAAe,GAAG,UAAUf,aAAa,EAAElY,KAAK,EAAE;IAC3E,IAAI,CAAC,IAAI,CAACsC,UAAU,IAAI,CAAC4V,aAAa,EAAE;MACpC,OAAO,IAAI;IACf,CAAC,MACI;MACD,IAAIwB,UAAU,GAAG,IAAI,CAACnZ,MAAM,IAAI,IAAI,CAACA,MAAM,CAACP,KAAK,GAAG,IAAI,GAAG,IAAI,CAACjB,MAAM,CAAC,EAAE,GAAGiB,KAAK,CAAC;MAClF,IAAI,IAAI,CAAChF,iBAAiB,EAAE;QACxB,OAAO0e,UAAU;MACrB,CAAC,MACI;QACD,OAAO,IAAI,CAACnb,OAAO,CAACwB,QAAQ,KAAK,UAAU,GAAG,CAAC2Z,UAAU,GAAGA,UAAU;MAC1E;IACJ;EACJ,CAAC;EACDrf,kBAAkB,CAACwZ,WAAW,GAAG,UAAUpN,IAAI,EAAEhH,KAAK,EAAEjB,MAAM,EAAE2U,cAAc,EAAEwG,cAAc,EAAE;IAC5F,IAAIC,GAAG,GAAGnT,IAAI,CAAClH,MAAM;IACrB,IAAIR,MAAM,GAAG,EAAE;IACf,IAAIiB,KAAK;IACT,IAAI6Z,OAAO,GAAG,SAAS;IACvB,IAAIC,MAAM,GAAG,CAAC,CAAC;IACf,IAAIC,YAAY,GAAGvb,MAAM,IAAIA,MAAM,CAAC+M,eAAe,GAAG/M,MAAM,CAAC+M,eAAe,CAAC,CAAC,GAAG,KAAK;IACtF,OAAOqO,GAAG,EAAE,EAAE;MACV5Z,KAAK,GAAGyG,IAAI,CAAC/G,QAAQ,CAACka,GAAG,CAACja,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAC1C,IAAInB,MAAM,IAAIA,MAAM,CAAC9B,IAAI,KAAK,UAAU,IAAI,OAAOsD,KAAK,CAAC,EAAE,GAAGP,KAAK,CAAC,KAAK,QAAQ,IAAIO,KAAK,CAAC,EAAE,GAAGP,KAAK,CAAC,EAAE;QACpG,IAAI2W,GAAG,GAAGpW,KAAK,CAAC,EAAE,GAAGP,KAAK,CAAC,CAACxC,KAAK,CAAC,SAAS,CAAC;QAC5C+C,KAAK,CAAC,EAAE,GAAGP,KAAK,CAAC,GAAG,IAAI2M,IAAI,CAAC1M,QAAQ,CAAC0W,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE1W,QAAQ,CAAC0W,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE1W,QAAQ,CAAC0W,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MACtG;MACApW,KAAK,GAAG5H,SAAS,CAACqH,KAAK,EAAEO,KAAK,CAAC,CAAC,CAAC;MACjC,IAAIga,kBAAkB,GAAI,OAAOha,KAAK,KAAK,QAAQ,IAAK,CAAExI,iBAAiB,CAACmiB,cAAc,CAAE;MACxF;MACA,CAAEniB,iBAAiB,CAACmiB,cAAc,CAACrf,MAAM,CAAE,IAAI,CAAE9C,iBAAiB,CAACmiB,cAAc,CAACrf,MAAM,CAAC2H,cAAc,CAAE;MACzG;MACA,CAAEzK,iBAAiB,CAACmiB,cAAc,CAACrf,MAAM,CAAC2H,cAAc,CAACgY,qBAAqB,CAAE,GAAGja,KAAK,CAACgI,WAAW,CAAC,CAAC,GAAGhI,KAAK;MAClH,IAAI,EAAEga,kBAAkB,IAAIF,MAAM,CAAC,EAAE;QACjC,IAAInY,GAAG,GAAG,CAAC,CAAC;QACZA,GAAG,CAAC,EAAE,GAAGkY,OAAO,CAAC,GAAG7Z,KAAK;QACzB8Z,MAAM,CAAC,EAAE,GAAGE,kBAAkB,CAAC,GAAG,IAAI;QACtC,IAAID,YAAY,EAAE;UACd,IAAIP,cAAc,GAAGlgB,cAAc,CAACkF,MAAM,EAAE,CAAC,CAAC,EAAEwB,KAAK,EAAEmT,cAAc,CAAC,CAAC,CAAC,CAAC;UACzEpb,QAAQ,CAACqB,MAAM,CAAC+Z,cAAc,EAAEqG,cAAc,EAAE/S,IAAI,CAAC/G,QAAQ,CAACka,GAAG,CAACja,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;UACnFK,KAAK,GAAGlI,QAAQ,CAAC0G,MAAM,CAACqN,eAAe,EAAE2N,cAAc,CAAC;QAC5D;QACAzhB,QAAQ,CAAC0H,KAAK,EAAEjI,iBAAiB,CAACwI,KAAK,CAAC,GAAG,IAAI,GAAGA,KAAK,EAAE2B,GAAG,CAAC;QAC7D5J,QAAQ,CAAC,SAAS,EAAE0O,IAAI,CAAC/G,QAAQ,CAACka,GAAG,CAACja,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAEgC,GAAG,CAAC;QAC5D5C,MAAM,CAACS,IAAI,CAACmC,GAAG,CAAC;MACpB;IACJ;IACA,OAAO5I,QAAQ,CAACmhB,KAAK,CAACnhB,QAAQ,CAACohB,IAAI,CAACpb,MAAM,EAAEU,KAAK,EAAE1G,QAAQ,CAACqa,WAAW,CAAC,EAAE,SAAS,CAAC;EACxF,CAAC;EACD/Y,kBAAkB,CAACuT,YAAY,GAAG,UAAU1L,OAAO,EAAE1H,cAAc,EAAE;IACjE,IAAI8Z,IAAI,GAAGvb,QAAQ,CAACgW,QAAQ,CAAC7M,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,IAAI,EAAE;IAC1D,IAAIkY,UAAU,GAAG,EAAE;IACnB,IAAI1P,IAAI,GAAG,CAAC,CAAC;IACb,KAAK,IAAIpL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgV,IAAI,CAAC/U,MAAM,EAAED,CAAC,EAAE,EAAE;MAClC8a,UAAU,GAAG,IAAInhB,WAAW,CAACiJ,OAAO,CAAC,CAACmN,YAAY,CAAC,IAAIrW,KAAK,CAAC,CAAC,CAAC2F,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE2V,IAAI,CAAC5U,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACF,KAAK,CAAC,CAAC;MAC/H,IAAI2a,UAAU,CAAC7a,MAAM,KAAK,CAAC,EAAE;QACzBmL,IAAI,CAAC4J,IAAI,CAAC5U,QAAQ,CAACJ,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACF,KAAK,CAAC,GAAGpF,kBAAkB,CAAC4S,iBAAiB,CAACmN,UAAU,EAAE5f,cAAc,CAAC;MACnH;IACJ;IACA,OAAOkQ,IAAI;EACf,CAAC;EACDrQ,kBAAkB,CAAC4S,iBAAiB,GAAG,UAAUqH,IAAI,EAAE9Z,cAAc,EAAE;IACnE,IAAIof,GAAG,GAAGtF,IAAI,GAAGA,IAAI,CAAC/U,MAAM,GAAG,CAAC;IAChC,IAAIL,SAAS;IACb,IAAImb,OAAO,GAAG,IAAI;IAClB,IAAIC,KAAK,GAAGjgB,kBAAkB,CAACkgB,gBAAgB,CAACjG,IAAI,CAAC,CAAC,CAAC,CAAC;IACxDgG,KAAK,CAACxa,YAAY,GAAG,CAACtI,iBAAiB,CAAC8iB,KAAK,CAACxa,YAAY,CAAC,GAAGwa,KAAK,CAACxa,YAAY,GAAG,KAAK;IACxF,IAAIwa,KAAK,CAAC5d,IAAI,KAAK,MAAM,IAAI4d,KAAK,CAAC5d,IAAI,KAAK,UAAU,IAAI4d,KAAK,CAAC5d,IAAI,KAAK,UAAU,EAAE;MACjFwC,SAAS,GAAG/G,gBAAgB,CAACmiB,KAAK,EAAEA,KAAK,CAAC5d,IAAI,EAAElC,cAAc,CAAC;IACnE,CAAC,MACI;MACD0E,SAAS,GAAGob,KAAK,CAACnb,WAAW,GAAGmb,KAAK,CAACnb,WAAW,GAC7C,IAAIjG,SAAS,CAACohB,KAAK,CAAC7a,KAAK,EAAE6a,KAAK,CAACva,QAAQ,EAAEua,KAAK,CAACta,KAAK,EAAE,CAAC3F,kBAAkB,CAACmgB,YAAY,CAACF,KAAK,CAAC,EAAEA,KAAK,CAACxa,YAAY,CAAC;IAC5H;IACA,KAAK,IAAIgQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8J,GAAG,EAAE9J,CAAC,EAAE,EAAE;MAC1BwE,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAGtF,kBAAkB,CAACkgB,gBAAgB,CAACjG,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;MACxG,IAAIia,GAAG,GAAG,CAAC,IAAI9J,CAAC,GAAG,CAAC,KAAMwE,IAAI,CAACxE,CAAC,CAAC,CAAC5Q,SAAS,KAAK,IAAI,IAAIoV,IAAI,CAACxE,CAAC,GAAG,CAAC,CAAC,CAAC5Q,SAAS,KAAK,IAAI,IAC9EoV,IAAI,CAACxE,CAAC,CAAC,CAAC5Q,SAAS,KAAK,KAAK,IAAIoV,IAAI,CAACxE,CAAC,GAAG,CAAC,CAAC,CAAC5Q,SAAS,KAAK,KAAM,CAAC,EAAE;QACtE,IAAIoV,IAAI,CAACxE,CAAC,CAAC,CAACpT,IAAI,KAAK,MAAM,IAAI4X,IAAI,CAACxE,CAAC,CAAC,CAACpT,IAAI,KAAK,UAAU,IAAI4X,IAAI,CAACxE,CAAC,CAAC,CAACpT,IAAI,KAAK,UAAU,EAAE;UACvFwC,SAAS,CAACE,UAAU,CAACI,IAAI,CAACrH,gBAAgB,CAACmc,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE2U,IAAI,CAACxE,CAAC,CAAC,CAACpT,IAAI,EAAElC,cAAc,CAAC,CAAC;QAC/G,CAAC,MACI;UACD0E,SAAS,CAACE,UAAU,CAACI,IAAI,CAAC,IAAItG,SAAS,CAACob,IAAI,CAACxE,CAAC,CAAC,CAACrQ,KAAK,EAAE6U,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACI,QAAQ,EAAEuU,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACK,KAAK,EAAE,CAAC3F,kBAAkB,CAACmgB,YAAY,CAAClG,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE2U,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,YAAY,CAAC,CAAC;QACjQ;MACJ,CAAC,MACI;QACD,IAAIwU,IAAI,CAACxE,CAAC,CAAC,CAACpT,IAAI,KAAK,MAAM,IAAI4X,IAAI,CAACxE,CAAC,CAAC,CAACpT,IAAI,KAAK,UAAU,IAAI4X,IAAI,CAACxE,CAAC,CAAC,CAACpT,IAAI,KAAK,UAAU,EAAE;UACvF,IAAI4X,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACT,SAAS,KAAK,KAAK,IAAIoV,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACI,QAAQ,KAAK,OAAO,EAAE;YAC/Gb,SAAS,GAAGA,SAAS,CAAC,EAAE,GAAGmb,OAAO,CAAC,CAACliB,gBAAgB,CAACmc,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE2U,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACjD,IAAI,EAAElC,cAAc,CAAC,EAAE8Z,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACjD,IAAI,EAAE4X,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,YAAY,CAAC;UACxO,CAAC,MACI;YACDZ,SAAS,GAAGA,SAAS,CAAEoV,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACT,SAAS,CAAE,CAAC/G,gBAAgB,CAACmc,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE2U,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACjD,IAAI,EAAElC,cAAc,CAAC,EAAE8Z,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACjD,IAAI,EAAE4X,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,YAAY,CAAC;UACxQ;QACJ,CAAC,MACI;UACDZ,SAAS,GAAGoV,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACR,WAAW,GACpDD,SAAS,CAACoV,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CACrCT,SAAS,CAAC,CAACoV,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACR,WAAW,CAAC,GAC7DD,SAAS,CAAEoV,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACT,SAAS,CAAE,CAACoV,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACF,KAAK,EAAE6U,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACI,QAAQ,EAAEuU,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACK,KAAK,EAAE,CAAC3F,kBAAkB,CAACmgB,YAAY,CAAClG,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE2U,IAAI,CAAC5U,QAAQ,CAACoQ,CAAC,CAACnQ,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACG,YAAY,CAAC;QAC7S;MACJ;IACJ;IACA,OAAOZ,SAAS,IAAI,IAAI;EAC5B,CAAC;EACD7E,kBAAkB,CAACmgB,YAAY,GAAG,UAAUva,MAAM,EAAE;IAChD,IAAIzI,iBAAiB,CAACyI,MAAM,CAACL,SAAS,CAAC,EAAE;MACrC,IAAIK,MAAM,CAACvD,IAAI,KAAK,QAAQ,IAAIlF,iBAAiB,CAACyI,MAAM,CAACvD,IAAI,CAAC,IAAI,OAAQuD,MAAM,CAACD,KAAM,KAAK,QAAQ,EAAE;QAClG,OAAO,KAAK;MAChB,CAAC,MACI;QACD,OAAO,IAAI;MACf;IACJ,CAAC,MACI;MACD,OAAOC,MAAM,CAACL,SAAS;IAC3B;EACJ,CAAC;EACDvF,kBAAkB,CAACkgB,gBAAgB,GAAG,UAAUta,MAAM,EAAE;IACpD,IAAKA,MAAM,CAACvD,IAAI,KAAK,MAAM,IAAIuD,MAAM,CAACvD,IAAI,KAAK,UAAU,IAAIuD,MAAM,CAACvD,IAAI,KAAK,UAAU,IAAIuD,MAAM,CAACD,KAAK,YAAYoM,IAAI,EAAG;MACtHnM,MAAM,CAACvD,IAAI,GAAGuD,MAAM,CAACvD,IAAI,IAAI,MAAM;IACvC;IACA,OAAOuD,MAAM;EACjB,CAAC;EACD,OAAO5F,kBAAkB;AAC7B,CAAC,CAAC,CAAE;AACJ,SAASA,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}