{"ast":null,"code":"import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren, addFixedColumnBorder, clearReactVueTemplates } from '../base/util';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc, jsdoc/require-param\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar HeaderRender = /** @class */function () {\n  /**\n   * Constructor for header renderer module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   */\n  function HeaderRender(parent, serviceLocator) {\n    var _this = this;\n    this.frzIdx = 0;\n    this.notfrzIdx = 0;\n    this.isFirstCol = false;\n    this.isReplaceDragEle = true;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    this.helper = function (e) {\n      var gObj = _this.parent;\n      var target = _this.draggable.currentStateTarget;\n      var parentEle = parentsUntil(target, 'e-headercell');\n      if (!(gObj.allowReordering || gObj.allowGrouping) || !isNullOrUndefined(parentEle) && parentEle.getElementsByClassName('e-checkselectall').length > 0) {\n        return false;\n      }\n      var visualElement = _this.parent.createElement('div', {\n        className: 'e-cloneproperties e-dragclone e-headerclone'\n      });\n      var element = target.classList.contains('e-headercell') ? target : parentEle;\n      if (!element || !gObj.allowReordering && element.classList.contains('e-stackedheadercell')) {\n        return false;\n      }\n      var height = element.offsetHeight;\n      var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n      var col;\n      if (headercelldiv) {\n        if (element.querySelector('.e-stackedheadercelldiv')) {\n          col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n        } else {\n          col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n        }\n        _this.column = col;\n        if (_this.column.lockColumn) {\n          return false;\n        }\n        visualElement.setAttribute('e-mappinguid', _this.column.uid);\n      }\n      if (col && !isNullOrUndefined(col.headerTemplate)) {\n        if (!isNullOrUndefined(col.headerTemplate)) {\n          var colIndex = gObj.getColumnIndexByField(col.field);\n          var result = col.getHeaderTemplate()(extend({\n            'index': colIndex\n          }, col), gObj, 'headerTemplate', null, null, null, null, gObj.root);\n          var isReactCompiler = gObj.isReact && typeof col.headerTemplate !== 'string';\n          var isReactChild = gObj.parentDetails && gObj.parentDetails.parentInstObj && gObj.parentDetails.parentInstObj.isReact;\n          if (isReactCompiler || isReactChild) {\n            gObj.renderTemplates();\n          }\n          appendChildren(visualElement, result);\n        } else {\n          visualElement.innerHTML = col.headerTemplate;\n        }\n        if (!isNullOrUndefined(visualElement.firstChild) && visualElement.firstChild.nodeType === 1) {\n          visualElement.firstChild.style.pointerEvents = 'none';\n        }\n      } else {\n        visualElement.innerHTML = headercelldiv ? col.headerText : element.firstElementChild.innerHTML;\n      }\n      visualElement.style.width = element.offsetWidth + 'px';\n      visualElement.style.height = element.offsetHeight + 'px';\n      visualElement.style.lineHeight = (height - 6).toString() + 'px';\n      gObj.element.appendChild(visualElement);\n      return visualElement;\n    };\n    this.dragStart = function (e) {\n      var gObj = _this.parent;\n      gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n      gObj.notify(events.columnDragStart, {\n        target: _this.draggable.currentStateTarget,\n        column: _this.column,\n        event: e.event\n      });\n    };\n    this.drag = function (e) {\n      var gObj = _this.parent;\n      var target = e.target;\n      if (target) {\n        var closest = getClosest(target, '.e-grid');\n        var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n        if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n          classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n          if (gObj.allowReordering) {\n            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n          }\n          if (!gObj.groupSettings.allowReordering) {\n            return;\n          }\n        }\n        gObj.notify(events.columnDrag, {\n          target: e.target,\n          column: _this.column,\n          event: e.event\n        });\n      }\n    };\n    this.dragStop = function (e) {\n      var gObj = _this.parent;\n      var cancel;\n      gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n      if (!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea') || !gObj.allowReordering && parentsUntil(e.target, 'e-headercell') || !e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea')) {\n        remove(e.helper);\n        cancel = true;\n      }\n      gObj.notify(events.columnDragStop, {\n        target: e.target,\n        event: e.event,\n        column: _this.column,\n        cancel: cancel\n      });\n    };\n    this.drop = function (e) {\n      var gObj = _this.parent;\n      var uid = e.droppedElement.getAttribute('e-mappinguid');\n      var closest = getClosest(e.target, '.e-grid');\n      remove(e.droppedElement);\n      if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') || !(gObj.allowReordering || gObj.allowGrouping)) {\n        return;\n      }\n      gObj.notify(events.headerDrop, {\n        target: e.target,\n        uid: uid,\n        droppedElement: e.droppedElement\n      });\n    };\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.ariaService = this.serviceLocator.getService('ariaService');\n    this.widthService = this.serviceLocator.getService('widthService');\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    if (!this.parent.enableColumnVirtualization) {\n      this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    }\n    this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n    if (this.parent.rowRenderingMode === 'Vertical') {\n      this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n    }\n  }\n  /**\n   * The function is used to render grid header div\n   *\n   * @returns {void}\n   */\n  HeaderRender.prototype.renderPanel = function () {\n    var div = this.parent.element.querySelector('.' + literals.gridHeader);\n    var isRendered = div != null;\n    div = isRendered ? div : this.parent.createElement('div', {\n      className: 'e-gridheader'\n    });\n    var innerDiv = isRendered ? div.querySelector('.' + literals.headerContent) : this.parent.createElement('div', {\n      className: literals.headerContent\n    });\n    this.toggleStackClass(div);\n    div.appendChild(innerDiv);\n    this.setPanel(div);\n    if (!isRendered) {\n      this.parent.element.appendChild(div);\n    }\n  };\n  /**\n   * The function is used to render grid header div\n   *\n   * @returns {void}\n   */\n  HeaderRender.prototype.renderTable = function () {\n    var headerDiv = this.getPanel();\n    headerDiv.appendChild(this.createHeaderTable());\n    this.setTable(headerDiv.querySelector('.' + literals.table));\n    this.initializeHeaderDrag();\n    this.initializeHeaderDrop();\n    this.parent.notify(events.headerRefreshed, {\n      rows: this.rows\n    });\n  };\n  /**\n   * Get the header content div element of grid\n   *\n   * @returns {Element} returns the element\n   */\n  HeaderRender.prototype.getPanel = function () {\n    return this.headerPanel;\n  };\n  /**\n   * Set the header content div element of grid\n   *\n   * @param  {Element} panel - specifies the panel element\n   * @returns {void}\n   */\n  HeaderRender.prototype.setPanel = function (panel) {\n    this.headerPanel = panel;\n  };\n  /**\n   * Get the header table element of grid\n   *\n   * @returns {Element} returns the element\n   */\n  HeaderRender.prototype.getTable = function () {\n    return this.headerTable;\n  };\n  /**\n   * Set the header table element of grid\n   *\n   * @param  {Element} table - specifies the table element\n   * @returns {void}\n   */\n  HeaderRender.prototype.setTable = function (table) {\n    this.headerTable = table;\n  };\n  /**\n   * Get the header colgroup element\n   *\n   * @returns {Element} returns the element\n   */\n  HeaderRender.prototype.getColGroup = function () {\n    return this.colgroup;\n  };\n  /**\n   * Set the header colgroup element\n   *\n   * @param {Element} colGroup - specifies the colgroup\n   * @returns {Element} returns the element\n   */\n  HeaderRender.prototype.setColGroup = function (colGroup) {\n    return this.colgroup = colGroup;\n  };\n  /**\n   * Get the header row element collection.\n   *\n   * @returns {Element[]} returns the element\n   */\n  HeaderRender.prototype.getRows = function () {\n    var table = this.getTable();\n    return table.tHead.rows;\n  };\n  /**\n   * The function is used to create header table elements\n   *\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  HeaderRender.prototype.createHeaderTable = function () {\n    var table = this.createTable();\n    var innerDiv = this.getPanel().querySelector('.' + literals.headerContent);\n    innerDiv.appendChild(table);\n    return innerDiv;\n  };\n  /**\n   * The function is used to create header table elements\n   *\n   * @param {Element} tableEle - specifies the table Element\n   * @param {freezeTable} tableName - specifies the table name\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n    if (tableEle === void 0) {\n      tableEle = null;\n    }\n    var gObj = this.parent;\n    if (this.getTable()) {\n      remove(this.getTable());\n    }\n    var table = this.parent.createElement('table', {\n      className: literals.table,\n      attrs: {\n        role: 'presentation'\n      }\n    });\n    table.style.cssText = 'border-collapse: separate; border-spacing: .25px;';\n    var findHeaderRow = this.createHeaderContent(tableName);\n    var thead = findHeaderRow.thead;\n    var tbody = this.parent.createElement(literals.tbody, {\n      className: this.parent.frozenRows || (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.parent.editSettings.showAddNewRow ? '' : 'e-hide',\n      attrs: {\n        role: 'rowgroup'\n      }\n    });\n    this.caption = this.parent.createElement('caption', {\n      innerHTML: this.parent.element.id + '_header_table',\n      className: 'e-hide'\n    });\n    var colGroup = this.parent.createElement(literals.colGroup);\n    var rowBody = this.parent.createElement('tr', {\n      attrs: {\n        role: 'row'\n      },\n      className: (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.parent.editSettings.showAddNewRow ? 'e-hide' : ''\n    });\n    var bodyCell;\n    var rows = this.rows = findHeaderRow.rows;\n    for (var i = 0, len = rows.length; i < len; i++) {\n      for (var j = 0, len_1 = rows[parseInt(i.toString(), 10)].cells.length; j < len_1; j++) {\n        bodyCell = this.parent.createElement('td');\n        rowBody.appendChild(bodyCell);\n      }\n    }\n    if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n      table.classList.add('e-sortfilter');\n    }\n    this.updateColGroup(colGroup);\n    tbody.appendChild(rowBody);\n    table.appendChild(this.setColGroup(colGroup));\n    table.appendChild(thead);\n    table.appendChild(tbody);\n    table.appendChild(this.caption);\n    return table;\n  };\n  /**\n   * @param {Element} tableEle - specifies the column\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  HeaderRender.prototype.createTable = function (tableEle) {\n    if (tableEle === void 0) {\n      tableEle = null;\n    }\n    return this.createHeader(tableEle);\n  };\n  HeaderRender.prototype.createHeaderContent = function (tableName) {\n    var gObj = this.parent;\n    var columns = gObj.getColumns();\n    var thead = this.parent.createElement('thead', {\n      attrs: {\n        'role': 'rowgroup'\n      }\n    });\n    var colHeader = this.parent.createElement('tr', {\n      className: 'e-columnheader',\n      attrs: {\n        role: 'row'\n      }\n    });\n    var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n    rowRenderer.element = colHeader;\n    var rows = [];\n    var headerRow;\n    this.colDepth = measureColumnDepth(gObj.columns);\n    for (var i = 0, len = this.colDepth; i < len; i++) {\n      rows[parseInt(i.toString(), 10)] = this.generateRow(i);\n      rows[parseInt(i.toString(), 10)].cells = [];\n    }\n    rows = this.ensureColumns(rows);\n    rows = this.getHeaderCells(rows, tableName);\n    if (gObj.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n      for (var i = 0, len = rows.length; i < len; i++) {\n        rows[parseInt(i.toString(), 10)].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n      }\n    }\n    var headerTemplateColumn = columns.filter(function (a) {\n      return a.headerTemplate;\n    });\n    if (headerTemplateColumn.length && (this.parent.isReact || this.parent.isVue)) {\n      clearReactVueTemplates(this.parent, ['headerTemplate']);\n    }\n    for (var i = 0, len = this.colDepth; i < len; i++) {\n      headerRow = rowRenderer.render(rows[parseInt(i.toString(), 10)], columns);\n      if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n        headerRow.style.height = this.parent.rowHeight + 'px';\n      }\n      addFixedColumnBorder(headerRow);\n      thead.appendChild(headerRow);\n    }\n    var findHeaderRow = {\n      thead: thead,\n      rows: rows\n    };\n    return findHeaderRow;\n  };\n  HeaderRender.prototype.updateColGroup = function (colGroup) {\n    var cols = this.parent.getColumns();\n    var col;\n    var indexes = this.parent.getColumnIndexesInView();\n    colGroup.id = this.parent.element.id + literals.colGroup;\n    if (this.parent.allowGrouping) {\n      for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n        if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n          continue;\n        }\n        col = this.parent.createElement('col', {\n          className: 'e-group-intent'\n        });\n        colGroup.appendChild(col);\n      }\n    }\n    if (this.parent.detailTemplate || this.parent.childGrid) {\n      col = this.parent.createElement('col', {\n        className: 'e-detail-intent'\n      });\n      colGroup.appendChild(col);\n    }\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n      col = this.parent.createElement('col', {\n        className: 'e-drag-intent'\n      });\n      colGroup.appendChild(col);\n    }\n    for (var i = 0, len = cols.length; i < len; i++) {\n      col = this.parent.createElement('col');\n      if (cols[parseInt(i.toString(), 10)].visible === false) {\n        setStyleAttribute(col, {\n          'display': 'none'\n        });\n      }\n      colGroup.appendChild(col);\n    }\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n      col = this.parent.createElement('col', {\n        className: 'e-drag-intent'\n      });\n      colGroup.appendChild(col);\n    }\n    return colGroup;\n  };\n  HeaderRender.prototype.ensureColumns = function (rows) {\n    //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n    var gObj = this.parent;\n    var indexes = this.parent.getColumnIndexesInView();\n    for (var i = 0, len = rows.length; i < len; i++) {\n      if (gObj.allowGrouping) {\n        for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n          if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n            continue;\n          }\n          rows[parseInt(i.toString(), 10)].cells.push(this.generateCell({}, CellType.HeaderIndent));\n        }\n      }\n      if (gObj.detailTemplate || gObj.childGrid) {\n        var args = {};\n        this.parent.notify(events.detailIndentCellInfo, args);\n        rows[parseInt(i.toString(), 10)].cells.push(this.generateCell(args, CellType.DetailHeader));\n      }\n      if (gObj.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n        rows[parseInt(i.toString(), 10)].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n      }\n    }\n    return rows;\n  };\n  HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n    var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n    var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n    this.frzIdx = 0;\n    this.notfrzIdx = 0;\n    if (this.parent.lockcolPositionCount) {\n      for (var i = 0; i < (!isNullOrUndefined(cols) ? cols.length : 0); i++) {\n        this.lockColsRendered = false;\n        rows = this.appendCells(cols[parseInt(i.toString(), 10)], rows, 0, i === 0, false, i === cols.length - 1, thead, tableName, false);\n      }\n    }\n    for (var i = 0, len = !isNullOrUndefined(cols) ? cols.length : 0; i < len; i++) {\n      this.notfrzIdx = 0;\n      this.lockColsRendered = true;\n      rows = this.appendCells(cols[parseInt(i.toString(), 10)], rows, 0, i === 0, false, i === len - 1, thead, tableName, false);\n    }\n    return rows;\n  };\n  HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName, isStackLastCol) {\n    var lastCol = isLastCol ? isStackLastCol ? 'e-laststackcell' : 'e-lastcell' : '';\n    var isLockColumn = !this.parent.lockcolPositionCount || cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered;\n    if (!cols.columns) {\n      if (isLockColumn) {\n        rows[parseInt(index.toString(), 10)].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : isFirstCol ? 'e-firstcell' : '') + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n      }\n      if (this.parent.lockcolPositionCount) {\n        if (this.frzIdx + this.notfrzIdx < this.parent.frozenColumns && (cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered)) {\n          this.frzIdx++;\n        } else {\n          this.notfrzIdx++;\n        }\n      } else {\n        this.frzIdx++;\n      }\n    } else {\n      this.isFirstCol = false;\n      var colSpan = this.getCellCnt(cols, 0);\n      if (colSpan) {\n        var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n        var isStackedLockColumn = this.parent.lockcolPositionCount === 0 || !this.lockColsRendered && stackedLockColsCount !== 0 || this.lockColsRendered && colSpan - stackedLockColsCount !== 0;\n        if (isStackedLockColumn) {\n          rows[parseInt(index.toString(), 10)].cells.push(new Cell({\n            cellType: CellType.StackedHeader,\n            column: cols,\n            colSpan: this.getColSpan(colSpan, stackedLockColsCount),\n            className: isFirstObj ? '' : isFirstCol ? 'e-firstcell' : ''\n          }));\n        }\n      }\n      if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n        for (var i = 0; i < cols.columns.length; i++) {\n          rows = this.appendCells(cols.columns[parseInt(i.toString(), 10)], rows, index + 1, isFirstObj, i === 0, i === cols.columns.length - 1 && isLastCol, isMovable, tableName, false);\n        }\n      }\n      if (this.lockColsRendered) {\n        for (var i = 0, len = cols.columns.length; i < len; i++) {\n          isFirstObj = isFirstObj && i === 0;\n          var isFirstCol_1 = this.isFirstCol = cols.columns[parseInt(i.toString(), 10)].visible && !isFirstObj;\n          var isLaststackedCol = i === len - 1 && isLastCol;\n          rows = this.appendCells(cols.columns[parseInt(i.toString(), 10)], rows, index + 1, isFirstObj, isFirstCol_1 && !isLaststackedCol, isLaststackedCol, isMovable, tableName, true);\n        }\n      }\n    }\n    return rows;\n  };\n  HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n    if (col.columns) {\n      for (var i = 0; i < col.columns.length; i++) {\n        lockColsCount = this.getStackedLockColsCount(col.columns[parseInt(i.toString(), 10)], lockColsCount);\n      }\n    } else if (col.lockColumn) {\n      lockColsCount++;\n    }\n    return lockColsCount;\n  };\n  HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount) {\n    colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n    return colSpan;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  HeaderRender.prototype.generateRow = function (index) {\n    return new Row({});\n  };\n  HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n    var opt = {\n      'visible': column.visible,\n      'isDataCell': false,\n      'isTemplate': !isNullOrUndefined(column.headerTemplate),\n      'rowID': '',\n      'column': column,\n      'cellType': cellType,\n      'rowSpan': rowSpan,\n      'className': className,\n      'index': rowIndex,\n      'colIndex': colIndex\n    };\n    if (!opt.rowSpan || opt.rowSpan < 2) {\n      delete opt.rowSpan;\n    }\n    return new Cell(opt);\n  };\n  /**\n   * Function to hide header table column based on visible property\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   */\n  HeaderRender.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var displayVal;\n    var idx;\n    for (var c = 0, clen = columns.length; c < clen; c++) {\n      var column = columns[parseInt(c.toString(), 10)];\n      idx = gObj.getNormalizedColumnIndex(column.uid);\n      displayVal = column.visible ? '' : 'none';\n      setStyleAttribute(this.getColGroup().children[parseInt(idx.toString(), 10)], {\n        'display': displayVal\n      });\n      if (gObj.editSettings.showAddNewRow && gObj.element.querySelector('.e-addedrow')) {\n        setStyleAttribute(gObj.element.querySelector('.e-addedrow').querySelector('colgroup').childNodes[parseInt(idx.toString(), 10)], {\n          'display': displayVal\n        });\n      }\n    }\n    this.refreshUI();\n    if (this.parent.editSettings.showAddNewRow) {\n      this.parent.isAddNewRow = true;\n    }\n  };\n  HeaderRender.prototype.colPosRefresh = function () {\n    this.refreshUI();\n  };\n  /**\n   * Refresh the header of the Grid.\n   *\n   * @returns {void}\n   */\n  HeaderRender.prototype.refreshUI = function () {\n    var headerDiv = this.getPanel();\n    this.toggleStackClass(headerDiv);\n    var table = this.getTable();\n    var tableName = undefined;\n    if (table) {\n      remove(table);\n      if (this.parent.editSettings.showAddNewRow && !this.parent.isAddNewRow && table.querySelector('.e-addedrow') && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)) {\n        table.querySelector('.e-addedrow').classList.add('e-addrow-removed');\n        this.parent.isAddNewRow = true;\n      }\n      table.removeChild(table.firstChild);\n      table.removeChild(table.childNodes[0]);\n      var colGroup = this.parent.createElement(literals.colGroup);\n      var findHeaderRow = this.createHeaderContent(tableName);\n      this.rows = findHeaderRow.rows;\n      table.insertBefore(findHeaderRow.thead, table.firstChild);\n      this.updateColGroup(colGroup);\n      table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n      this.appendContent(table);\n      this.parent.notify(events.colGroupRefresh, {});\n      this.widthService.setWidthToColumns();\n      this.parent.updateDefaultCursor();\n      this.initializeHeaderDrag();\n      var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n      for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        var gCells = [].slice.call(row.getElementsByClassName('e-grouptopleftcell'));\n        if (gCells.length) {\n          gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n        }\n      }\n      this.parent.notify(events.headerRefreshed, {\n        rows: this.rows\n      });\n      if (this.parent.enableColumnVirtualization && parentsUntil(table, literals.movableHeader)) {\n        this.parent.notify(events.headerRefreshed, {\n          rows: this.rows,\n          args: {\n            isFrozen: false,\n            isXaxis: true\n          }\n        });\n      }\n      if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n        wrap(rows, true);\n      }\n    }\n    var firstHeaderCell = this.parent.getHeaderContent().querySelector('.e-headercell:not(.e-hide)');\n    if (!isNullOrUndefined(firstHeaderCell)) {\n      firstHeaderCell.tabIndex = 0;\n    }\n  };\n  HeaderRender.prototype.toggleStackClass = function (div) {\n    var column = this.parent.columns;\n    var stackedHdr = !isNullOrUndefined(column) ? column.some(function (column) {\n      return !isNullOrUndefined(column.columns);\n    }) : false;\n    if (stackedHdr) {\n      div.classList.add('e-stackedheader');\n    } else {\n      div.classList.remove('e-stackedheader');\n    }\n  };\n  HeaderRender.prototype.appendContent = function (table) {\n    this.getPanel().querySelector('.' + literals.headerContent).appendChild(table);\n  };\n  HeaderRender.prototype.getCellCnt = function (col, cnt) {\n    if (col.columns) {\n      for (var i = 0, len = col.columns.length; i < len; i++) {\n        cnt = this.getCellCnt(col.columns[parseInt(i.toString(), 10)], cnt);\n      }\n    } else {\n      if (col.visible) {\n        cnt++;\n      }\n    }\n    return cnt;\n  };\n  HeaderRender.prototype.initializeHeaderDrag = function () {\n    var gObj = this.parent;\n    if (!(this.parent.allowReordering || this.parent.allowGrouping && this.parent.groupSettings.showDropArea)) {\n      return;\n    }\n    this.draggable = new Draggable(gObj.getHeaderContent(), {\n      dragTarget: '.e-headercell',\n      distance: 5,\n      helper: this.helper,\n      dragStart: this.dragStart,\n      drag: this.drag,\n      dragStop: this.dragStop,\n      abort: '.e-rhandler',\n      isReplaceDragEle: this.isReplaceDragEle\n    });\n    this.parent.on(events.destroy, this.droppableDestroy, this);\n  };\n  HeaderRender.prototype.initializeHeaderDrop = function () {\n    var gObj = this.parent;\n    this.droppable = new Droppable(gObj.getHeaderContent(), {\n      accept: '.e-dragclone',\n      drop: this.drop\n    });\n    this.parent.on(events.destroy, this.droppableDestroy, this);\n  };\n  HeaderRender.prototype.droppableDestroy = function () {\n    if (this.droppable && !this.droppable.isDestroyed) {\n      this.droppable.destroy();\n    }\n    if (this.draggable && !this.draggable.isDestroyed) {\n      this.draggable.destroy();\n    }\n  };\n  HeaderRender.prototype.renderCustomToolbar = function () {\n    var _this = this;\n    var gObj = this.parent;\n    if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar && (gObj.allowSorting || gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar')) {\n      var div = gObj.createElement('div', {\n        className: 'e-res-toolbar e-toolbar'\n      });\n      var toolbarItems = gObj.createElement('div', {\n        className: 'e-toolbar-items'\n      });\n      var toolbarLeft = gObj.createElement('div', {\n        className: 'e-toolbar-left'\n      });\n      var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n      for (var i = 0; i < count; i++) {\n        var toolbarItem = gObj.createElement('div', {\n          className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align'\n        });\n        var cls = count === 1 ? this.parent.allowSorting ? 'sort' : 'filter' : i === 1 ? 'sort' : 'filter';\n        var button = gObj.createElement('button', {\n          className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn'\n        });\n        var span = gObj.createElement('span', {\n          className: 'e-btn-icon e-res' + cls + '-icon e-icons'\n        });\n        button.appendChild(span);\n        var btnObj = new Button({\n          cssClass: this.parent.cssClass ? this.parent.cssClass : ''\n        });\n        btnObj.appendTo(button);\n        button.onclick = function (e) {\n          if (e.target.classList.contains('e-ressort-btn') || e.target.classList.contains('e-ressort-icon') || e.target.querySelector('.e-ressort-icon')) {\n            _this.parent.showResponsiveCustomSort();\n          } else {\n            _this.parent.showResponsiveCustomFilter();\n          }\n        };\n        toolbarItem.appendChild(button);\n        toolbarLeft.appendChild(toolbarItem);\n      }\n      toolbarItems.appendChild(toolbarLeft);\n      div.appendChild(toolbarItems);\n      gObj.element.insertBefore(div, this.parent.element.querySelector('.' + literals.gridHeader));\n    } else {\n      if (gObj.enableAdaptiveUI && !gObj.toolbar) {\n        gObj.getContent().classList.add('e-responsive-header');\n      }\n    }\n  };\n  HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n    var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n    if (args.module === 'toolbar') {\n      if (resToolbar) {\n        remove(resToolbar);\n      } else {\n        this.renderCustomToolbar();\n      }\n    }\n  };\n  return HeaderRender;\n}();\nexport { HeaderRender };","map":{"version":3,"names":["isNullOrUndefined","extend","setStyleAttribute","closest","getClosest","remove","classList","CellType","RowRenderer","Cell","Row","events","Draggable","Droppable","Button","parentsUntil","wrap","measureColumnDepth","appendChildren","addFixedColumnBorder","clearReactVueTemplates","literals","HeaderRender","parent","serviceLocator","_this","frzIdx","notfrzIdx","isFirstCol","isReplaceDragEle","helper","e","gObj","target","draggable","currentStateTarget","parentEle","allowReordering","allowGrouping","getElementsByClassName","length","visualElement","createElement","className","element","contains","height","offsetHeight","headercelldiv","querySelector","col","getStackedHeaderColumnByHeaderText","innerText","trim","columns","getColumnByUid","getAttribute","column","lockColumn","setAttribute","uid","headerTemplate","colIndex","getColumnIndexByField","field","result","getHeaderTemplate","root","isReactCompiler","isReact","isReactChild","parentDetails","parentInstObj","renderTemplates","innerHTML","firstChild","nodeType","style","pointerEvents","headerText","firstElementChild","width","offsetWidth","lineHeight","toString","appendChild","dragStart","display","notify","columnDragStart","event","drag","cloneElement","groupSettings","columnDrag","dragStop","cancel","columnDragStop","drop","droppedElement","headerDrop","ariaService","getService","widthService","isDestroyed","enableColumnVirtualization","on","columnVisibilityChanged","setVisible","columnPositionChanged","colPosRefresh","initialEnd","renderCustomToolbar","rowRenderingMode","uiUpdate","updateCustomResponsiveToolbar","prototype","renderPanel","div","gridHeader","isRendered","innerDiv","headerContent","toggleStackClass","setPanel","renderTable","headerDiv","getPanel","createHeaderTable","setTable","table","initializeHeaderDrag","initializeHeaderDrop","headerRefreshed","rows","headerPanel","panel","getTable","headerTable","getColGroup","colgroup","setColGroup","colGroup","getRows","tHead","createTable","createHeader","tableEle","tableName","attrs","role","cssText","findHeaderRow","createHeaderContent","thead","tbody","frozenRows","enableVirtualization","enableInfiniteScrolling","editSettings","showAddNewRow","caption","id","rowBody","bodyCell","i","len","j","len_1","parseInt","cells","allowFiltering","allowSorting","add","updateColGroup","getColumns","colHeader","rowRenderer","Header","headerRow","colDepth","generateRow","ensureColumns","getHeaderCells","isRowDragable","getFrozenMode","push","generateCell","RowDragHIcon","headerTemplateColumn","filter","a","isVue","render","rowHeight","cols","indexes","getColumnIndexesInView","indexOf","detailTemplate","childGrid","visible","c","len_2","HeaderIndent","args","detailIndentCellInfo","DetailHeader","getHeaderTable","enablePersistence","lockcolPositionCount","lockColsRendered","appendCells","index","isFirstObj","isLastCol","isMovable","isStackLastCol","lastCol","isLockColumn","getColumnIndexByUid","frozenColumns","colSpan","getCellCnt","stackedLockColsCount","getStackedLockColsCount","isStackedLockColumn","cellType","StackedHeader","getColSpan","isFirstCol_1","isLaststackedCol","lockColsCount","rowSpan","rowIndex","opt","displayVal","idx","clen","getNormalizedColumnIndex","children","childNodes","refreshUI","isAddNewRow","undefined","removeChild","insertBefore","appendContent","colGroupRefresh","setWidthToColumns","updateDefaultCursor","slice","call","querySelectorAll","_i","rows_1","row","gCells","movableHeader","isFrozen","isXaxis","allowTextWrap","textWrapSettings","wrapMode","firstHeaderCell","getHeaderContent","tabIndex","stackedHdr","some","cnt","showDropArea","dragTarget","distance","abort","destroy","droppableDestroy","droppable","accept","toolbar","filterSettings","type","toolbarItems","toolbarLeft","count","toolbarItem","cls","button","span","btnObj","cssClass","appendTo","onclick","showResponsiveCustomSort","showResponsiveCustomFilter","enableAdaptiveUI","getContent","resToolbar","module"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/renderer/header-renderer.js"],"sourcesContent":["import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren, addFixedColumnBorder, clearReactVueTemplates } from '../base/util';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc, jsdoc/require-param\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        this.isFirstCol = false;\n        this.isReplaceDragEle = true;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.getElementsByClassName('e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                if (_this.column.lockColumn) {\n                    return false;\n                }\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (!isNullOrUndefined(col.headerTemplate)) {\n                    var colIndex = gObj.getColumnIndexByField(col.field);\n                    var result = col.getHeaderTemplate()(extend({ 'index': colIndex }, col), gObj, 'headerTemplate', null, null, null, null, gObj.root);\n                    var isReactCompiler = gObj.isReact && typeof (col.headerTemplate) !== 'string';\n                    var isReactChild = gObj.parentDetails && gObj.parentDetails.parentInstObj &&\n                        gObj.parentDetails.parentInstObj.isReact;\n                    if (isReactCompiler || isReactChild) {\n                        gObj.renderTemplates();\n                    }\n                    appendChildren(visualElement, result);\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n                if (!isNullOrUndefined(visualElement.firstChild) && visualElement.firstChild.nodeType === 1) {\n                    visualElement.firstChild.style.pointerEvents = 'none';\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: _this.draggable.currentStateTarget, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    if (!gObj.groupSettings.allowReordering) {\n                        return;\n                    }\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid, droppedElement: e.droppedElement });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n        this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n        }\n    }\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.element.querySelector('.' + literals.gridHeader);\n        var isRendered = (div != null);\n        div = isRendered ? div : this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = isRendered ? div.querySelector('.' + literals.headerContent) :\n            this.parent.createElement('div', { className: literals.headerContent });\n        this.toggleStackClass(div);\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (!isRendered) {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.' + literals.table));\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows });\n    };\n    /**\n     * Get the header content div element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     *\n     * @param  {Element} panel - specifies the panel element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     *\n     * @param  {Element} table - specifies the table element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     *\n     * @param {Element} colGroup - specifies the colgroup\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     *\n     * @returns {Element[]} returns the element\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().querySelector('.' + literals.headerContent);\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @param {Element} tableEle - specifies the table Element\n     * @param {freezeTable} tableName - specifies the table name\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n        if (tableEle === void 0) { tableEle = null; }\n        var gObj = this.parent;\n        if (this.getTable()) {\n            remove(this.getTable());\n        }\n        var table = this.parent.createElement('table', { className: literals.table, attrs: { role: 'presentation' } });\n        table.style.cssText = 'border-collapse: separate; border-spacing: .25px;';\n        var findHeaderRow = this.createHeaderContent(tableName);\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement(literals.tbody, { className: this.parent.frozenRows ||\n                ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.parent.editSettings.showAddNewRow) ? '' :\n                'e-hide', attrs: { role: 'rowgroup' } });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement(literals.colGroup);\n        var rowBody = this.parent.createElement('tr', { attrs: { role: 'row' }, className: (this.parent.enableVirtualization ||\n                this.parent.enableInfiniteScrolling) && this.parent.editSettings.showAddNewRow ? 'e-hide' : '' });\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[parseInt(i.toString(), 10)].cells.length; j < len_1; j++) {\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        return table;\n    };\n    /**\n     * @param {Element} tableEle - specifies the column\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function (tableEle) {\n        if (tableEle === void 0) { tableEle = null; }\n        return this.createHeader(tableEle);\n    };\n    HeaderRender.prototype.createHeaderContent = function (tableName) {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead', { attrs: { 'role': 'rowgroup' } });\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader', attrs: { role: 'row' } });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = measureColumnDepth(gObj.columns);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[parseInt(i.toString(), 10)] = this.generateRow(i);\n            rows[parseInt(i.toString(), 10)].cells = [];\n        }\n        rows = this.ensureColumns(rows);\n        rows = this.getHeaderCells(rows, tableName);\n        if (gObj.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            for (var i = 0, len = rows.length; i < len; i++) {\n                rows[parseInt(i.toString(), 10)].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        var headerTemplateColumn = columns.filter(function (a) { return a.headerTemplate; });\n        if (headerTemplateColumn.length && (this.parent.isReact || this.parent.isVue)) {\n            clearReactVueTemplates(this.parent, ['headerTemplate']);\n        }\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[parseInt(i.toString(), 10)], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            addFixedColumnBorder(headerRow);\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        colGroup.id = this.parent.element.id + literals.colGroup;\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col', { className: 'e-group-intent' });\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col', { className: 'e-detail-intent' });\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[parseInt(i.toString(), 10)].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[parseInt(i.toString(), 10)].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                var args = {};\n                this.parent.notify(events.detailIndentCellInfo, args);\n                rows[parseInt(i.toString(), 10)].cells.push(this.generateCell(args, CellType.DetailHeader));\n            }\n            if (gObj.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n                rows[parseInt(i.toString(), 10)].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ?\n            this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        if (this.parent.lockcolPositionCount) {\n            for (var i = 0; i < (!isNullOrUndefined(cols) ? cols.length : 0); i++) {\n                this.lockColsRendered = false;\n                rows = this.appendCells(cols[parseInt(i.toString(), 10)], rows, 0, i === 0, false, i === (cols.length - 1), thead, tableName, false);\n            }\n        }\n        for (var i = 0, len = (!isNullOrUndefined(cols) ? cols.length : 0); i < len; i++) {\n            this.notfrzIdx = 0;\n            this.lockColsRendered = true;\n            rows = this.appendCells(cols[parseInt(i.toString(), 10)], rows, 0, i === 0, false, i === (len - 1), thead, tableName, false);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName, isStackLastCol) {\n        var lastCol = isLastCol ? isStackLastCol ? 'e-laststackcell' : 'e-lastcell' : '';\n        var isLockColumn = !this.parent.lockcolPositionCount\n            || (cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered);\n        if (!cols.columns) {\n            if (isLockColumn) {\n                rows[parseInt(index.toString(), 10)].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            if (this.parent.lockcolPositionCount) {\n                if ((this.frzIdx + this.notfrzIdx < this.parent.frozenColumns) &&\n                    ((cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))) {\n                    this.frzIdx++;\n                }\n                else {\n                    this.notfrzIdx++;\n                }\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.isFirstCol = false;\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n                var isStackedLockColumn = this.parent.lockcolPositionCount === 0\n                    || (!this.lockColsRendered && stackedLockColsCount !== 0)\n                    || (this.lockColsRendered && (colSpan - stackedLockColsCount) !== 0);\n                if (isStackedLockColumn) {\n                    rows[parseInt(index.toString(), 10)].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, stackedLockColsCount),\n                        className: isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')\n                    }));\n                }\n            }\n            if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n                for (var i = 0; i < cols.columns.length; i++) {\n                    rows = this.appendCells(cols.columns[parseInt(i.toString(), 10)], rows, index + 1, isFirstObj, i === 0, i === (cols.columns.length - 1) && isLastCol, isMovable, tableName, false);\n                }\n            }\n            if (this.lockColsRendered) {\n                for (var i = 0, len = cols.columns.length; i < len; i++) {\n                    isFirstObj = isFirstObj && i === 0;\n                    var isFirstCol_1 = this.isFirstCol = cols.columns[parseInt(i.toString(), 10)].visible\n                        && !isFirstObj;\n                    var isLaststackedCol = i === (len - 1) && isLastCol;\n                    rows = this.appendCells(cols.columns[parseInt(i.toString(), 10)], rows, index + 1, isFirstObj, isFirstCol_1 && !isLaststackedCol, isLaststackedCol, isMovable, tableName, true);\n                }\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n        if (col.columns) {\n            for (var i = 0; i < col.columns.length; i++) {\n                lockColsCount = this.getStackedLockColsCount(col.columns[parseInt(i.toString(), 10)], lockColsCount);\n            }\n        }\n        else if (col.lockColumn) {\n            lockColsCount++;\n        }\n        return lockColsCount;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount) {\n        colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n        return colSpan;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[parseInt(c.toString(), 10)];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            setStyleAttribute(this.getColGroup().children[parseInt(idx.toString(), 10)], { 'display': displayVal });\n            if (gObj.editSettings.showAddNewRow && gObj.element.querySelector('.e-addedrow')) {\n                setStyleAttribute(gObj.element.querySelector('.e-addedrow').querySelector('colgroup').childNodes[parseInt(idx.toString(), 10)], { 'display': displayVal });\n            }\n        }\n        this.refreshUI();\n        if (this.parent.editSettings.showAddNewRow) {\n            this.parent.isAddNewRow = true;\n        }\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var headerDiv = this.getPanel();\n        this.toggleStackClass(headerDiv);\n        var table = this.getTable();\n        var tableName = undefined;\n        if (table) {\n            remove(table);\n            if (this.parent.editSettings.showAddNewRow && !this.parent.isAddNewRow && table.querySelector('.e-addedrow') &&\n                (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)) {\n                (table.querySelector('.e-addedrow')).classList.add('e-addrow-removed');\n                this.parent.isAddNewRow = true;\n            }\n            table.removeChild(table.firstChild);\n            table.removeChild(table.childNodes[0]);\n            var colGroup = this.parent.createElement(literals.colGroup);\n            var findHeaderRow = this.createHeaderContent(tableName);\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            this.appendContent(table);\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            this.initializeHeaderDrag();\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.getElementsByClassName('e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            this.parent.notify(events.headerRefreshed, { rows: this.rows });\n            if (this.parent.enableColumnVirtualization && parentsUntil(table, literals.movableHeader)) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false, isXaxis: true } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n        var firstHeaderCell = this.parent.getHeaderContent().querySelector('.e-headercell:not(.e-hide)');\n        if (!isNullOrUndefined(firstHeaderCell)) {\n            firstHeaderCell.tabIndex = 0;\n        }\n    };\n    HeaderRender.prototype.toggleStackClass = function (div) {\n        var column = this.parent.columns;\n        var stackedHdr = (!isNullOrUndefined(column) ? column.some(function (column) { return !isNullOrUndefined(column.columns); })\n            : false);\n        if (stackedHdr) {\n            div.classList.add('e-stackedheader');\n        }\n        else {\n            div.classList.remove('e-stackedheader');\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().querySelector('.' + literals.headerContent).appendChild(table);\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[parseInt(i.toString(), 10)], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        this.draggable = new Draggable(gObj.getHeaderContent(), {\n            dragTarget: '.e-headercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            abort: '.e-rhandler',\n            isReplaceDragEle: this.isReplaceDragEle\n        });\n        this.parent.on(events.destroy, this.droppableDestroy, this);\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        this.droppable = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n        this.parent.on(events.destroy, this.droppableDestroy, this);\n    };\n    HeaderRender.prototype.droppableDestroy = function () {\n        if (this.droppable && !this.droppable.isDestroyed) {\n            this.droppable.destroy();\n        }\n        if (this.draggable && !this.draggable.isDestroyed) {\n            this.draggable.destroy();\n        }\n    };\n    HeaderRender.prototype.renderCustomToolbar = function () {\n        var _this = this;\n        var gObj = this.parent;\n        if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar\n            && (gObj.allowSorting || (gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar'))) {\n            var div = gObj.createElement('div', { className: 'e-res-toolbar e-toolbar' });\n            var toolbarItems = gObj.createElement('div', { className: 'e-toolbar-items' });\n            var toolbarLeft = gObj.createElement('div', { className: 'e-toolbar-left' });\n            var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n            for (var i = 0; i < count; i++) {\n                var toolbarItem = gObj.createElement('div', { className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align' });\n                var cls = count === 1 ? this.parent.allowSorting ? 'sort'\n                    : 'filter' : i === 1 ? 'sort' : 'filter';\n                var button = gObj.createElement('button', { className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn' });\n                var span = gObj.createElement('span', { className: 'e-btn-icon e-res' + cls + '-icon e-icons' });\n                button.appendChild(span);\n                var btnObj = new Button({\n                    cssClass: this.parent.cssClass ? this.parent.cssClass : ''\n                });\n                btnObj.appendTo(button);\n                button.onclick = function (e) {\n                    if (e.target.classList.contains('e-ressort-btn')\n                        || e.target.classList.contains('e-ressort-icon') ||\n                        e.target.querySelector('.e-ressort-icon')) {\n                        _this.parent.showResponsiveCustomSort();\n                    }\n                    else {\n                        _this.parent.showResponsiveCustomFilter();\n                    }\n                };\n                toolbarItem.appendChild(button);\n                toolbarLeft.appendChild(toolbarItem);\n            }\n            toolbarItems.appendChild(toolbarLeft);\n            div.appendChild(toolbarItems);\n            gObj.element.insertBefore(div, this.parent.element.querySelector('.' + literals.gridHeader));\n        }\n        else {\n            if (gObj.enableAdaptiveUI && !gObj.toolbar) {\n                gObj.getContent().classList.add('e-responsive-header');\n            }\n        }\n    };\n    HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n        var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n        if (args.module === 'toolbar') {\n            if (resToolbar) {\n                remove(resToolbar);\n            }\n            else {\n                this.renderCustomToolbar();\n            }\n        }\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}