{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */function (_super) {\n  __extends(GroupLazyLoadRenderer, _super);\n  function GroupLazyLoadRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    _this.childCount = 0;\n    _this.scrollData = [];\n    _this.isFirstChildRow = false;\n    _this.isScrollDown = false;\n    _this.isScrollUp = false;\n    _this.groupCache = {};\n    _this.cacheRowsObj = {};\n    _this.startIndexes = {};\n    _this.captionCounts = {};\n    _this.rowsByUid = {};\n    _this.objIdxByUid = {};\n    _this.initialGroupCaptions = {};\n    _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete', 'filterBeforeOpen', 'filterchoicerequest', 'infiniteScroll', 'virtualscroll'];\n    _this.scrollTopCache = undefined;\n    /** @hidden */\n    _this.refRowsObj = {};\n    /** @hidden */\n    _this.cacheMode = false;\n    /** @hidden */\n    _this.cacheBlockSize = 5;\n    /** @hidden */\n    _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n    /** @hidden */\n    _this.allowCaseSensitive = false;\n    /** @hidden */\n    _this.lazyLoadQuery = [];\n    _this.locator = locator;\n    _this.groupGenerator = new GroupModelGenerator(_this.parent);\n    _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n    _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n    _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n    _this.eventListener();\n    return _this;\n  }\n  GroupLazyLoadRenderer.prototype.eventListener = function () {\n    this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n    this.parent.on(events.setGroupCache, this.setCache, this);\n    this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n    this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n    var _this = this;\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[parseInt(page.toString(), 10)];\n    var uid = tr.getAttribute('data-uid');\n    this.refreshCaches();\n    if ((!this.scrollTopCache || this.parent.scrollModule['content'].scrollTop > this.scrollTopCache) && !this.parent.enableVirtualization) {\n      this.scrollTopCache = this.parent.scrollModule['content'].scrollTop;\n    }\n    var oriIndex = this.getRowObjectIndexByUid(uid);\n    var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[parseInt(oriIndex.toString(), 10)].indent < rowsObject[oriIndex + 1].indent : false;\n    if (this.parent.enableVirtualization) {\n      isRowExist = this.cacheRowsObj[\"\" + uid] ? true : false;\n    }\n    var data = rowsObject[parseInt(oriIndex.toString(), 10)];\n    var key = getGroupKeysAndFields(oriIndex, rowsObject);\n    for (var i = 0; i < key.fields.length; i++) {\n      var column = this.parent.getColumnByField(key.fields[parseInt(i.toString(), 10)]);\n      if (column.enableGroupByFormat) {\n        key.keys[parseInt(i.toString(), 10)] = this.locator.getService('valueFormatter').fromView(key.keys[parseInt(i.toString(), 10)], column.getParser(), column.type === 'dateonly' ? 'date' : column.type);\n      }\n    }\n    var e = {\n      captionRowElement: tr,\n      groupInfo: data,\n      enableCaching: true,\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n      args.keys = key.keys;\n      args.fields = key.fields;\n      args.rowIndex = tr.rowIndex;\n      args.makeRequest = !args.enableCaching || !isRowExist;\n      if (!args.enableCaching && isRowExist) {\n        _this.clearCache([uid]);\n      }\n      args.skip = 0;\n      args.take = _this.pageSize;\n      data.isExpand = true;\n      if (_this.rowsByUid[parseInt(page.toString(), 10)][data.uid]) {\n        _this.rowsByUid[parseInt(page.toString(), 10)][data.uid].isExpand = true;\n      }\n      _this.captionRowExpand(args);\n    });\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n    var _this = this;\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var rowIdx = tr.rowIndex;\n    var uid = tr.getAttribute('data-uid');\n    this.refreshCaches();\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var e = {\n      captionRowElement: tr,\n      groupInfo: cache[parseInt(captionIndex.toString(), 10)],\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n      args.isExpand = false;\n      for (var i = 0; i < _this.lazyLoadQuery.length; i++) {\n        var query = _this.lazyLoadQuery[parseInt(i.toString(), 10)];\n        var where = query[0];\n        var removeCollapse = args.groupInfo.data;\n        if (removeCollapse['key'] === where['value']) {\n          _this.lazyLoadQuery.splice(i, 1);\n        }\n      }\n      _this.removeRows(captionIndex, rowIdx, uid);\n      if (_this.parent.enableInfiniteScrolling || _this.parent.enableVirtualization) {\n        _this.groupCache[_this.parent.pageSettings.currentPage] = extend([], _this.refRowsObj[_this.parent.pageSettings.currentPage]);\n        _this.refreshRowObjects([], captionIndex);\n      }\n    });\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n    this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n    this.blockSize = Math.ceil(this.pageSize / 2);\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n    this.clearCache();\n  };\n  GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n    uids = uids ? uids : this.getInitialCaptionIndexes();\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    if (uids.length) {\n      for (var i = 0; i < uids.length; i++) {\n        var capIdx = this.getRowObjectIndexByUid(uids[parseInt(i.toString(), 10)]);\n        var capRow = cache[parseInt(capIdx.toString(), 10)];\n        if (!capRow) {\n          continue;\n        }\n        if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n          for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n            if (cache[parseInt(i_1.toString(), 10)].indent === capRow.indent || cache[parseInt(i_1.toString(), 10)].indent < capRow.indent) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n              break;\n            }\n            if (cache[parseInt(i_1.toString(), 10)].isCaptionRow) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][cache[parseInt(i_1.toString(), 10)].uid];\n            }\n          }\n        }\n        if (capRow.isExpand) {\n          var tr = this.parent.getRowElementByUID(capRow.uid);\n          if (!tr) {\n            return;\n          }\n          this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n        }\n        var child = this.getNextChilds(capIdx);\n        if (!child.length) {\n          continue;\n        }\n        var subChild = [];\n        if (child[child.length - 1].isCaptionRow) {\n          subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n        }\n        var start = cache.indexOf(child[0]);\n        var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n        cache.splice(start, end - (start - 1));\n        this.refreshCaches();\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[parseInt(page.toString(), 10)];\n    if (this.parent.enableInfiniteScrolling) {\n      this.rowsByUid[parseInt(page.toString(), 10)] = [];\n      this.objIdxByUid[parseInt(page.toString(), 10)] = [];\n    } else {\n      this.rowsByUid = {};\n      this.objIdxByUid = {};\n    }\n    for (var i = 0; i < cache.length; i++) {\n      this.maintainRows(cache[parseInt(i.toString(), 10)], i);\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var uids = [];\n    for (var i = 0; i < this.initialGroupCaptions[parseInt(page.toString(), 10)].length; i++) {\n      uids.push(this.initialGroupCaptions[parseInt(page.toString(), 10)][parseInt(i.toString(), 10)].uid);\n    }\n    return uids;\n  };\n  /**\n   * @param {string} uid - specifies the uid\n   * @returns {number} returns the row object uid\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n    return this.objIdxByUid[this.parent.pageSettings.currentPage][\"\" + uid];\n  };\n  GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n    if (this.parent.groupSettings.columns.length && args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n      if (!args.collapse && parentsUntil(args.target, literals.row)) {\n        return;\n      }\n      var row = args.target.parentElement;\n      var uid = row.getAttribute('data-uid');\n      if (args.collapse) {\n        var rowObj = this.getRowByUid(uid);\n        var capRow = this.getRowByUid(rowObj.parentUid);\n        if (capRow.isCaptionRow && capRow.isExpand) {\n          var capEle = this.getRowElementByUid(rowObj.parentUid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n        }\n      } else {\n        var capRow = this.getRowByUid(uid);\n        if (capRow.isCaptionRow && !capRow.isExpand) {\n          var capEle = this.getRowElementByUid(uid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n    return this.rowsByUid[this.parent.pageSettings.currentPage][\"\" + uid];\n  };\n  GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n    if (!args.cancel) {\n      if (!this.requestType.some(function (value) {\n        return value === args.requestType;\n      })) {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n        if (this.parent.enableVirtualization) {\n          this.parent.contentModule.currentInfo = {};\n        }\n      }\n      if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n        var keys = Object.keys(this.groupCache);\n        for (var j = 0; j < keys.length; j++) {\n          var cache = this.groupCache[keys[parseInt(j.toString(), 10)]];\n          for (var i = 0; i < cache.length; i++) {\n            if (cache[parseInt(i.toString(), 10)].isCaptionRow && !this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(cache[parseInt(i.toString(), 10)], null, keys[parseInt(j.toString(), 10)]);\n            }\n            if (cache[parseInt(i.toString(), 10)].isDataRow) {\n              var from = args.fromIndex + cache[parseInt(i.toString(), 10)].indent;\n              var to = args.toIndex + cache[parseInt(i.toString(), 10)].indent;\n              this.moveCells(cache[parseInt(i.toString(), 10)].cells, from, to);\n            }\n          }\n        }\n      }\n      if (args.requestType === 'delete' || args.action === 'add' && args.requestType === 'save') {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n        if (this.parent.enableVirtualization) {\n          this.parent.contentModule.currentInfo = {};\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n    if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit' && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder' && args.requestType !== 'infiniteScroll') {\n      this.scrollReset();\n    }\n  };\n  GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n    this.startIndexes = {};\n    this.captionCounts = {};\n    this.rowsByUid = {};\n    this.objIdxByUid = {};\n    this.initialGroupCaptions = {};\n  };\n  GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n    if (from >= arr.length) {\n      var k = from - arr.length;\n      while (k-- + 1) {\n        arr.push(undefined);\n      }\n    }\n    arr.splice(from, 0, arr.splice(to, 1)[0]);\n  };\n  GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx, uid) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var aggUid;\n    var count = 0;\n    if (this.parent.aggregates.length) {\n      var agg = this.getAggregateByCaptionIndex(idx);\n      aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n    }\n    var indent = rows[parseInt(idx.toString(), 10)].indent;\n    this.addClass(this.getNextChilds(parseInt(idx.toString(), 10)));\n    rows[parseInt(idx.toString(), 10)].isExpand = false;\n    if (this.rowsByUid[parseInt(page.toString(), 10)][rows[parseInt(idx.toString(), 10)].uid]) {\n      this.rowsByUid[parseInt(page.toString(), 10)][rows[parseInt(idx.toString(), 10)].uid].isExpand = false;\n    }\n    var capUid;\n    for (var i = idx + 1; i < rows.length; i++) {\n      if (rows[parseInt(i.toString(), 10)].indent === indent || rows[parseInt(i.toString(), 10)].indent < indent) {\n        capUid = rows[parseInt(i.toString(), 10)].uid;\n        break;\n      }\n      if (rows[parseInt(i.toString(), 10)].isCaptionRow && rows[parseInt(i.toString(), 10)].isExpand) {\n        this.addClass(this.getNextChilds(i));\n      }\n    }\n    for (var i = trIdx + 1; i < trs.length; i++) {\n      if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === capUid) {\n        break;\n      } else if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === aggUid) {\n        remove(trs[parseInt(i.toString(), 10)]);\n        break;\n      } else {\n        remove(trs[parseInt(i.toString(), 10)]);\n        this.refRowsObj[parseInt(page.toString(), 10)].splice(trIdx + 1, 1);\n        count = count + 1;\n      }\n    }\n    if (this.parent.enableVirtualization) {\n      this.cacheRowsObj[\"\" + uid] = this.groupCache[parseInt(page.toString(), 10)].slice(idx + 1, idx + 1 + count);\n      this.groupCache[parseInt(page.toString(), 10)].splice(idx + 1, count);\n      this.parent.notify(events.refreshVirtualLazyLoadCache, {\n        rows: [],\n        uid: rows[parseInt(idx.toString(), 10)].uid,\n        count: count\n      });\n      this.parent.contentModule.setVirtualHeight();\n      this.parent.islazyloadRequest = false;\n    }\n    if (this.parent.scrollModule['content'].scrollTop > this.scrollTopCache && !this.parent.enableVirtualization) {\n      this.parent.scrollModule['content'].scrollTop = this.scrollTopCache;\n    }\n    if (this.parent.getContentTable().scrollHeight < this.parent.getContent().clientHeight && this.parent.height !== 'auto') {\n      this.parent.scrollModule.setLastRowCell();\n    }\n    this.parent.notify(events.refreshExpandandCollapse, {\n      rows: this.refRowsObj[parseInt(page.toString(), 10)]\n    });\n  };\n  GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n    var last = rows[this.blockSize];\n    if (last) {\n      last.lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n    var group = this.groupCache[this.parent.pageSettings.currentPage];\n    var rows = rowObjects ? rowObjects : group;\n    var indent = group[parseInt(index.toString(), 10)].indent + 1;\n    var childRows = [];\n    for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n      if (rows[parseInt(i.toString(), 10)].indent < indent) {\n        break;\n      }\n      if (rows[parseInt(i.toString(), 10)].indent === indent) {\n        childRows.push(rows[parseInt(i.toString(), 10)]);\n      }\n    }\n    return childRows;\n  };\n  GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n    this.setStartIndexes();\n    var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n    var uid = tr.getAttribute('data-uid');\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var captionRow = this.groupCache[this.parent.pageSettings.currentPage][parseInt(captionIndex.toString(), 10)];\n    var rows = args.isRowExist ? args.isScroll ? this.scrollData : this.parent.enableVirtualization ? this.cacheRowsObj[\"\" + uid] : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n    this.scrollData = [];\n    if (!args.isRowExist) {\n      this.setRowIndexes(captionIndex, captionRow);\n      this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][parseInt(captionIndex.toString(), 10)], args.count);\n      if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n        for (var i = 0; i < args.data.length; i++) {\n          var data = this.groupGenerator.generateCaptionRow(args.data[parseInt(i.toString(), 10)], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n          rows.push(data);\n          if (this.parent.aggregates.length) {\n            rows = rows.concat(this.summaryModelGen.generateRows(args.data[parseInt(i.toString(), 10)], {\n              level: args.level + 1,\n              parentUid: data.uid\n            }));\n          }\n        }\n      } else {\n        this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n        rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n      }\n    }\n    var trIdx = args.isScroll ? this.rowIndex : args.index;\n    var nxtChild = this.getNextChilds(captionIndex, rows);\n    var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n    if (!args.isRowExist && !lastRow) {\n      nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n    if (!lastRow) {\n      nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n    }\n    var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n    if (!args.up) {\n      if (!args.isRowExist || this.parent.enableVirtualization && args.isRowExist && this.cacheRowsObj[\"\" + uid]) {\n        this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n      }\n    }\n    if (this.parent.enableVirtualization) {\n      var uid_1 = args.isScroll ? this.groupCache[this.parent.pageSettings.currentPage][this.rowIndex].uid : captionRow.uid;\n      this.parent.notify(events.refreshVirtualLazyLoadCache, {\n        rows: rows,\n        uid: uid_1\n      });\n      this.parent.contentModule.setVirtualHeight();\n      this.parent.contentModule.isTop = false;\n    }\n    this.render(trIdx, rows, lastRow, aggregates);\n    if (this.isFirstChildRow && !args.up) {\n      this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n    }\n    this.isFirstChildRow = false;\n    this.rowIndex = undefined;\n    this.rowObjectIndex = undefined;\n    this.childCount = 0;\n    for (var i = 0; i < rows.length; i++) {\n      this.refRowsObj[this.parent.pageSettings.currentPage].splice(captionIndex + i + 1, 0, rows[parseInt(i.toString(), 10)]);\n    }\n    if (lastRow && tr.querySelector('.e-lastrowcell')) {\n      this.parent.groupModule.lastCaptionRowBorder();\n    }\n    this.parent.notify(events.refreshExpandandCollapse, {\n      rows: this.refRowsObj[this.parent.pageSettings.currentPage]\n    });\n    if (this.parent.enableVirtualMaskRow) {\n      this.parent.removeMaskRow();\n    }\n  };\n  GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n    if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n      this.captionCounts[this.parent.pageSettings.currentPage] = {};\n    }\n    if (row.isCaptionRow) {\n      this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[parseInt(page.toString(), 10)];\n    if (isScroll) {\n      return cache[this.rowObjectIndex].index + 1;\n    }\n    var count = 0;\n    var idx = 0;\n    var prevCapRow = this.getRowByUid(cache[parseInt(capIdx.toString(), 10)].parentUid);\n    if (prevCapRow) {\n      idx = this.prevCaptionCount(prevCapRow);\n    }\n    if (cache[parseInt(capIdx.toString(), 10)].indent > 0) {\n      for (var i = capIdx - 1; i >= 0; i--) {\n        if (cache[parseInt(i.toString(), 10)].indent < cache[parseInt(capIdx.toString(), 10)].indent) {\n          break;\n        }\n        if (cache[parseInt(i.toString(), 10)].isCaptionRow && cache[parseInt(i.toString(), 10)].indent === cache[parseInt(capIdx.toString(), 10)].indent) {\n          count = count + cache[parseInt(i.toString(), 10)].data.count;\n        }\n      }\n    }\n    var index = count + idx + this.startIndexes[parseInt(page.toString(), 10)][cache[parseInt(capIdx.toString(), 10)].parentGid];\n    return index;\n  };\n  GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[parseInt(page.toString(), 10)];\n    var idx = 0;\n    for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n      if (cache[parseInt(i.toString(), 10)].indent === 0) {\n        break;\n      }\n      if (cache[parseInt(i.toString(), 10)].indent < prevCapRow.indent) {\n        break;\n      }\n      if (cache[parseInt(i.toString(), 10)].isCaptionRow && cache[parseInt(i.toString(), 10)].indent === prevCapRow.indent) {\n        var count = this.captionCounts[parseInt(page.toString(), 10)][cache[parseInt(i.toString(), 10)].uid];\n        idx = idx + (count ? count : cache[parseInt(i.toString(), 10)].data.count);\n      }\n    }\n    var capRow = this.getRowByUid(prevCapRow.parentUid);\n    if (capRow) {\n      idx = idx + this.prevCaptionCount(capRow);\n    }\n    return idx;\n  };\n  GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n      var indexes = [];\n      var idx = void 0;\n      for (var i = 0; i < cache.length; i++) {\n        if (cache[parseInt(i.toString(), 10)].isCaptionRow) {\n          if (!indexes.length) {\n            indexes.push(0);\n          } else {\n            indexes.push(cache[parseInt(idx.toString(), 10)].data.count + indexes[indexes.length - 1]);\n          }\n          idx = i;\n        }\n      }\n      this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n    return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n  };\n  GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n    row.data.count = count;\n  };\n  GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n    var tr = this.parent.getContent().querySelectorAll('tr')[parseInt(trIdx.toString(), 10)];\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var rowHeight = this.parent.getRowHeight();\n    if (tr && aggregates.length) {\n      for (var i = aggregates.length - 1; i >= 0; i--) {\n        tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[parseInt(i.toString(), 10)], this.parent.getColumns()));\n      }\n    }\n    if (tr && rows.length) {\n      for (var i = rows.length - 1; i >= 0; i--) {\n        if (this.confirmRowRendering(rows[parseInt(i.toString(), 10)])) {\n          tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[parseInt(i.toString(), 10)], this.parent.getColumns()));\n          if (this.isScrollDown) {\n            scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n          }\n          if (this.isScrollUp) {\n            scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n          }\n        }\n      }\n    }\n    this.isScrollDown = false;\n    this.isScrollUp = false;\n  };\n  /**\n   * @param {Row<Column>} row - specifies the row\n   * @param {number} index - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n    if (!this.rowsByUid[parseInt(page.toString(), 10)]) {\n      this.rowsByUid[parseInt(page.toString(), 10)] = {};\n      this.objIdxByUid[parseInt(page.toString(), 10)] = {};\n    }\n    if (row.uid) {\n      this.rowsByUid[parseInt(page.toString(), 10)][row.uid] = row;\n    }\n    this.objIdxByUid[parseInt(page.toString(), 10)][row.uid] = index;\n  };\n  GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n    var check = true;\n    if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n      var cap = this.getRowByUid(row.parentUid);\n      if (cap.isCaptionRow && !cap.isExpand) {\n        check = false;\n      }\n    }\n    return check;\n  };\n  GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[parseInt(page.toString(), 10)];\n    this.rowsByUid[parseInt(page.toString(), 10)] = {};\n    this.objIdxByUid[parseInt(page.toString(), 10)] = {};\n    var newRowsObject = [];\n    var k = 0;\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (i === index) {\n        this.maintainRows(rowsObject[parseInt(i.toString(), 10)], k);\n        newRowsObject.push(rowsObject[parseInt(i.toString(), 10)]);\n        k++;\n        for (var j = 0; j < newRows.length; j++) {\n          this.maintainRows(newRows[parseInt(j.toString(), 10)], k);\n          newRowsObject.push(newRows[parseInt(j.toString(), 10)]);\n          k++;\n        }\n      } else {\n        this.maintainRows(rowsObject[parseInt(i.toString(), 10)], k);\n        newRowsObject.push(rowsObject[parseInt(i.toString(), 10)]);\n        k++;\n      }\n    }\n    this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n    this.updateCurrentViewData();\n  };\n  GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var parent = cache[parseInt(index.toString(), 10)];\n    var indent = parent.indent;\n    var uid = parent.uid;\n    var agg = [];\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[parseInt(i.toString(), 10)].indent === indent) {\n        break;\n      }\n      if (isNullOrUndefined(cache[parseInt(i.toString(), 10)].indent) && cache[parseInt(i.toString(), 10)].parentUid === uid) {\n        agg.push(cache[parseInt(i.toString(), 10)]);\n      }\n    }\n    return agg;\n  };\n  GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n    var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n    var parentRow = cache[parseInt(index.toString(), 10)];\n    var agg = [];\n    if (!parentRow.isCaptionRow || parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg) {\n      return [];\n    }\n    if (includeAgg && this.parent.aggregates.length) {\n      agg = this.getAggregateByCaptionIndex(index);\n    }\n    var indent = parentRow.indent;\n    var uid = parentRow.uid;\n    var rows = [];\n    var count = 0;\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[parseInt(i.toString(), 10)].parentUid === uid) {\n        if (isNullOrUndefined(cache[parseInt(i.toString(), 10)].indent)) {\n          continue;\n        }\n        count++;\n        rows.push(cache[parseInt(i.toString(), 10)]);\n        if (deep && cache[parseInt(i.toString(), 10)].isCaptionRow) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n        }\n        if (block && count === this.pageSize) {\n          break;\n        }\n      }\n      if (cache[parseInt(i.toString(), 10)].indent === indent) {\n        break;\n      }\n    }\n    return rows.concat(agg);\n  };\n  /**\n   * @param {boolean} isReorder - specifies the isreorder\n   * @returns {Row<Column>[]} returns the row\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n    var rows = [];\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    if (isReorder) {\n      return this.getRenderedRowsObject();\n    }\n    for (var i = 0; i < cache.length; i++) {\n      if (cache[parseInt(i.toString(), 10)].indent === 0) {\n        rows.push(cache[parseInt(i.toString(), 10)]);\n        rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n      }\n    }\n    return rows;\n  };\n  /**\n   * @returns {Row<Column>[]} retruns the row\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n    var rows = [];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    for (var i = 0; i < trs.length; i++) {\n      rows.push(this.getRowByUid(trs[parseInt(i.toString(), 10)].getAttribute('data-uid')));\n    }\n    return rows;\n  };\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var k = index;\n    for (var i = 0; i < this.pageSize; i++) {\n      if (!rowsObject[parseInt(k.toString(), 10)] || rowsObject[parseInt(k.toString(), 10)].indent < rowsObject[parseInt(index.toString(), 10)].indent) {\n        break;\n      }\n      if (rowsObject[parseInt(k.toString(), 10)].indent === rowsObject[parseInt(index.toString(), 10)].indent) {\n        rows.push(rowsObject[parseInt(k.toString(), 10)]);\n        if (rowsObject[parseInt(k.toString(), 10)].isCaptionRow && rowsObject[parseInt(k.toString(), 10)].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n        }\n      }\n      if (rowsObject[parseInt(k.toString(), 10)].indent > rowsObject[parseInt(index.toString(), 10)].indent || isNullOrUndefined(rowsObject[parseInt(k.toString(), 10)].indent)) {\n        i--;\n      }\n      k++;\n    }\n    return rows;\n  };\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var str = false;\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (str && (!rowsObject[parseInt(i.toString(), 10)] || rowsObject[parseInt(i.toString(), 10)].indent < rowsObject[parseInt(index.toString(), 10)].indent || rowsObject[parseInt(i.toString(), 10)].uid === end)) {\n        break;\n      }\n      if (!str && rowsObject[parseInt(i.toString(), 10)].uid === start) {\n        str = true;\n      }\n      if (str && rowsObject[parseInt(i.toString(), 10)].indent === rowsObject[parseInt(index.toString(), 10)].indent) {\n        rows.push(rowsObject[parseInt(i.toString(), 10)]);\n        if (rowsObject[parseInt(i.toString(), 10)].isCaptionRow && rowsObject[parseInt(i.toString(), 10)].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n        }\n      }\n    }\n    return rows;\n  };\n  GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n    if (this.parent.isDestroyed || this.childCount) {\n      return;\n    }\n    var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n    var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n    var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n    var tr;\n    var lazyLoadDown = false;\n    var lazyLoadUp = false;\n    var lazyLoadEnd = false;\n    if (e.scrollDown && downTrs.length) {\n      var result = this.findRowElements(downTrs);\n      tr = result.tr;\n      lazyLoadDown = result.entered;\n    }\n    if (!e.scrollDown && endTrs) {\n      for (var i = 0; i < endTrs.length; i++) {\n        var top_1 = endTrs[parseInt(i.toString(), 10)].getBoundingClientRect().top;\n        var scrollHeight = this.parent.getContent().scrollHeight;\n        if (top_1 > 0 && top_1 < scrollHeight) {\n          tr = endTrs[parseInt(i.toString(), 10)];\n          lazyLoadEnd = true;\n          this.rowIndex = tr.rowIndex;\n          break;\n        }\n      }\n    }\n    if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n      var result = this.findRowElements(upTrs);\n      tr = result.tr;\n      lazyLoadUp = result.entered;\n    }\n    if (tr && !tr.classList.contains('e-masked-row')) {\n      if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n        this.scrollDownHandler(tr);\n      }\n      if (!e.scrollDown && lazyLoadEnd && tr) {\n        this.scrollUpEndRowHandler(tr);\n      }\n      if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n        this.scrollUpHandler(tr);\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[parseInt(index.toString(), 10)];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n    if (currentPage === 1) {\n      return;\n    }\n    this.childCount = currentPage * this.pageSize;\n    index = this.getCurrentBlockEndIndex(childRow, index);\n    if (this.childCount < parentCapRow.data.count) {\n      tr.classList.remove('e-not-lazyload-end');\n      childRow.lazyLoadCssClass = '';\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n      var key = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: key.fields,\n        keys: key.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n      if (this.cacheMode && this.childCount >= this.pageSize * this.cacheBlockSize) {\n        var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_1.indexOf(rows[parseInt(idx.toString(), 10)]) / this.pageSize);\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n        this.removeBlock(uid, isRowExist, removeBlock, child_1);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[parseInt(index.toString(), 10)];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    if (child.length === 0) {\n      return;\n    }\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n    this.childCount = currentPage * this.pageSize;\n    if (isNullOrUndefined(child[this.childCount - 1])) {\n      return;\n    }\n    if (this.parent.enableVirtualization) {\n      this.parent.islazyloadRequest = true;\n    }\n    index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n    var lastchild = rows[parseInt(index.toString(), 10)];\n    var lastRow = this.getRowElementByUid(lastchild.uid);\n    this.rowIndex = lastRow.rowIndex;\n    index = this.getCurrentBlockEndIndex(lastchild, index);\n    if (this.childCount === parentCapRow.data.count) {\n      this.parent.islazyloadRequest = false;\n    }\n    if (this.childCount < parentCapRow.data.count) {\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n      if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n        this.parent.islazyloadRequest = false;\n        this.childCount = 0;\n        return;\n      }\n      if (currentPage > 1 || !this.cacheMode) {\n        tr.classList.remove('e-lazyload-middle-down');\n        lastRow.classList.remove('e-not-lazyload-end');\n        lastchild.lazyLoadCssClass = '';\n      }\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n      var query = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: query.fields,\n        keys: query.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n      if (this.cacheMode && this.childCount - this.pageSize >= this.pageSize * this.cacheBlockSize) {\n        this.isScrollDown = true;\n        var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_2.indexOf(rows[parseInt(idx.toString(), 10)]) / this.pageSize) - 1;\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1) + 1;\n        this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n      this.parent.islazyloadRequest = false;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    if (row.isCaptionRow) {\n      if (row.isExpand) {\n        var childCount = this.getChildRowsByParentIndex(index, true).length;\n        this.rowIndex = this.rowIndex + childCount;\n      }\n      var agg = this.getAggregateByCaptionIndex(index);\n      this.rowObjectIndex = this.rowObjectIndex + agg.length;\n      var idx = index;\n      for (var i = idx + 1; i < rows.length; i++) {\n        if (rows[parseInt(i.toString(), 10)].indent === rows[parseInt(index.toString(), 10)].indent || rows[parseInt(i.toString(), 10)].indent < rows[parseInt(index.toString(), 10)].indent) {\n          index = idx;\n          break;\n        } else {\n          idx++;\n        }\n      }\n    }\n    return index;\n  };\n  GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var uid1 = child[(removeBlock + 1) * this.pageSize - 1 - this.blockSize].uid;\n    var uid2 = child[removeBlock * this.pageSize - this.pageSize].uid;\n    var uid3 = child[removeBlock * this.pageSize].uid;\n    var firstIdx = this.getRowObjectIndexByUid(uid1);\n    rows[parseInt(firstIdx.toString(), 10)].lazyLoadCssClass = 'e-lazyload-middle-up';\n    this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n    if (lastchild) {\n      this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n      this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n      this.getRowByUid(uid2).lazyLoadCssClass = '';\n    }\n    if (isRowExist) {\n      this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n    } else {\n      this.uid1 = uid2;\n      this.uid2 = uid3;\n      this.uid3 = lastchild ? lastchild.uid : uid;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[parseInt(page.toString(), 10)];\n    var uid = tr.getAttribute('data-uid');\n    var row = this.getRowByUid(uid);\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var parentCapRow = this.getRowByUid(row.parentUid);\n    var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(rows[parseInt(index.toString(), 10)]);\n    var currenBlock = Math.floor(childIdx / this.pageSize);\n    var idx = this.blockSize;\n    if (this.blockSize * 2 > this.pageSize) {\n      idx = this.blockSize * 2 - this.pageSize;\n      idx = this.blockSize - idx;\n    }\n    var start = child[childIdx - (idx - 1) - this.pageSize].uid;\n    var end = child[childIdx - (idx - 1)].uid;\n    this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n    this.isFirstChildRow = currenBlock > 1;\n    if (this.isFirstChildRow) {\n      this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n    }\n    this.getRowByUid(end).lazyLoadCssClass = '';\n    this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n    var removeBlock = currenBlock + this.cacheBlockSize;\n    if (child.length !== parentCapRow.data.count && removeBlock * this.pageSize > child.length) {\n      this.isFirstChildRow = false;\n      this.scrollData[0].lazyLoadCssClass = '';\n      this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n      return;\n    }\n    var count = removeBlock * this.pageSize > parentCapRow.data.count ? parentCapRow.data.count : removeBlock * this.pageSize;\n    var size = removeBlock * this.pageSize > parentCapRow.data.count ? this.pageSize - (this.pageSize * removeBlock - parentCapRow.data.count) : this.pageSize;\n    var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n    var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[count - 1].uid;\n    var uid2 = child[count - size].uid;\n    var uid3 = child[count - size - 1].uid;\n    var lastIdx = this.objIdxByUid[parseInt(page.toString(), 10)][\"\" + uid2] - idx;\n    if (rows[parseInt(lastIdx.toString(), 10)].lazyLoadCssClass === 'e-lazyload-middle-down') {\n      var trEle = this.getRowElementByUid(rows[parseInt(lastIdx.toString(), 10)].uid);\n      if (trEle) {\n        trEle.classList.add('e-lazyload-middle-down');\n      }\n    }\n    this.getRowByUid(uid1).lazyLoadCssClass = '';\n    this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n    this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n    this.removeBottomRows(uid1, uid2, uid3);\n    this.rowIndex = tr.rowIndex - idx;\n    if (tr.classList.length > 1) {\n      tr.classList.remove('e-lazyload-middle-up');\n    } else {\n      tr.removeAttribute('class');\n    }\n    if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n      this.childCount = 0;\n      this.scrollData = [];\n      return;\n    }\n    var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n    var args = {\n      rowIndex: capRowEleIndex,\n      makeRequest: false,\n      groupInfo: parentCapRow,\n      fields: key.fields,\n      keys: key.keys,\n      skip: this.childCount,\n      take: this.pageSize,\n      isScroll: true,\n      scrollUp: true\n    };\n    this.isScrollUp = true;\n    this.captionRowExpand(args);\n  };\n  GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n    var entered = false;\n    var tr;\n    for (var i = 0; i < rows.length; i++) {\n      var rowIdx = rows[parseInt(i.toString(), 10)].rowIndex;\n      if (this.parent.enableVirtualization) {\n        var currentInfo = this.parent.contentModule.currentInfo;\n        if (currentInfo && currentInfo.blockIndexes && currentInfo.blockIndexes[0] > 1) {\n          rowIdx = rowIdx + this.parent.contentModule.offsets[currentInfo.blockIndexes[0] - 1] / this.parent.getRowHeight();\n        }\n      }\n      if (isRowEnteredInGrid(rowIdx, this.parent)) {\n        entered = true;\n        this.rowIndex = rowIdx;\n        tr = rows[parseInt(i.toString(), 10)];\n        break;\n      }\n    }\n    return {\n      entered: entered,\n      tr: tr\n    };\n  };\n  GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n    return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n  };\n  GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var start = false;\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid3) {\n        var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n        if (tr) {\n          this.rowIndex = tr.rowIndex;\n        }\n        break;\n      }\n      if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid2) {\n        start = true;\n      }\n      if (start) {\n        remove(trs[parseInt(i.toString(), 10)]);\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var trigger = false;\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid2) {\n        trigger = true;\n      }\n      if (trigger) {\n        remove(trs[parseInt(i.toString(), 10)]);\n        if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid1) {\n          break;\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.setCache = function (e) {\n    var page = this.parent.pageSettings.currentPage;\n    if (this.parent.enableVirtualization) {\n      this.parent.lazyLoadRender = this;\n    }\n    if (this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll' && e.args['prevPage'] !== e.args['currentPage']) {\n      this.groupCache[parseInt(page.toString(), 10)] = this.initialGroupCaptions[parseInt(page.toString(), 10)] = this.groupCache[e.args['prevPage']].concat(extend([], e.data));\n      var groupCacheKeys = Object.keys(this.groupCache);\n      for (var i = 0; i < groupCacheKeys.length; i++) {\n        if (e.args['currentPage'] !== parseInt(groupCacheKeys[parseInt(i.toString(), 10)], 10)) {\n          delete this.groupCache[\"\" + groupCacheKeys[parseInt(i.toString(), 10)]];\n          delete this.initialGroupCaptions[\"\" + groupCacheKeys[parseInt(i.toString(), 10)]];\n        }\n      }\n    } else {\n      this.groupCache[parseInt(page.toString(), 10)] = this.initialGroupCaptions[parseInt(page.toString(), 10)] = extend([], e.data);\n    }\n  };\n  GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n    var _this = this;\n    var captionRow = args.groupInfo;\n    var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n    var pred = generateExpandPredicates(args.fields, args.keys, this);\n    var predicateList = getPredicates(pred);\n    var lazyLoad = {\n      level: level,\n      skip: args.skip,\n      take: args.take,\n      where: predicateList\n    };\n    args.lazyLoadQuery = lazyLoad;\n    args.requestType = 'onDemandGroupInfo';\n    if (args.makeRequest) {\n      var query = this.parent.renderModule.data.generateQuery(true);\n      if (!query.isCountRequired) {\n        query.isCountRequired = true;\n      }\n      query.lazyLoad.push({\n        key: 'onDemandGroupInfo',\n        value: lazyLoad\n      });\n      this.lazyLoadQuery.push(lazyLoad['where']);\n      if (args.isScroll && this.parent.enableVirtualMaskRow) {\n        this.parent.showMaskRow();\n      } else {\n        this.parent.showSpinner();\n      }\n      this.parent.renderModule.data.getData(args, query).then(function (e) {\n        if (_this.parent.enableVirtualization) {\n          _this.parent.islazyloadRequest = true;\n        }\n        _this.parent.hideSpinner();\n        _this.parent.removeMaskRow();\n        if (e.result.length === 0) {\n          return;\n        }\n        if (_this.cacheMode && _this.uid1 && _this.uid2) {\n          _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n          _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n        }\n        _this.lazyLoadHandler({\n          data: e.result,\n          count: e.count,\n          level: level,\n          index: args.rowIndex,\n          isRowExist: false,\n          isScroll: args.isScroll,\n          up: false,\n          rowIndex: args.cachedRowIndex\n        });\n      }).catch(function (e) {\n        return _this.parent.renderModule.dataManagerFailure(e, {\n          requestType: 'grouping'\n        });\n      });\n    } else {\n      this.lazyLoadHandler({\n        data: null,\n        count: args.groupInfo.data.count,\n        level: level,\n        index: args.rowIndex,\n        isRowExist: true,\n        isScroll: args.isScroll,\n        up: args.scrollUp,\n        rowIndex: args.cachedRowIndex\n      });\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n    this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n  };\n  GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n    var records = [];\n    this.getRows().filter(function (row) {\n      if (row.isDataRow) {\n        records[row.index] = row.data;\n      }\n    });\n    this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n    return this.groupCache;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getRows = function () {\n    return this.groupCache[this.parent.pageSettings.currentPage] || [];\n  };\n  /**\n   * @returns {Element} returns the element\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getRowElements = function () {\n    return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n  };\n  /**\n   * @param {number} index - specifies the index\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n    var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    var row;\n    for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n      if (parseInt(tr[parseInt(i.toString(), 10)].getAttribute(literals.ariaRowIndex).toString(), 10) - 1 === index) {\n        row = tr[parseInt(i.toString(), 10)];\n        break;\n      }\n    }\n    return row;\n  };\n  /**\n   * Tucntion to set the column visibility\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var rows = this.getRows();\n    var testRow;\n    rows.some(function (r) {\n      if (r.isDataRow) {\n        testRow = r;\n      }\n      return r.isDataRow;\n    });\n    var contentrows = this.getRows().filter(function (row) {\n      return !row.isDetailRow;\n    });\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[parseInt(i.toString(), 10)];\n      var idx = this.parent.getNormalizedColumnIndex(column.uid);\n      var colIdx = this.parent.getColumnIndexByUid(column.uid);\n      var displayVal = column.visible === true ? '' : 'none';\n      if (idx !== -1 && testRow && idx < testRow.cells.length) {\n        setStyleAttribute(this.getColGroup().childNodes[parseInt(idx.toString(), 10)], {\n          'display': displayVal\n        });\n      }\n      this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n      if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n        this.parent.updateMediaColumns(column);\n      }\n      this.parent.invokedFromMedia = false;\n    }\n  };\n  /**\n   * Function to set display.\n   *\n   * @param {Object} tr - specifies the row object\n   * @param {number} idx - specifies the index\n   * @param {string} displayVal - specifies the display value\n   * @param {Row<Column>[]} rows - specifies the array of rows\n   * @param {number} oriIdx - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n    if (!this.parent.groupSettings.columns.length) {\n      setDisplayValue(tr, idx, displayVal, rows);\n    } else {\n      var keys = Object.keys(this.groupCache);\n      for (var j = 0; j < keys.length; j++) {\n        var uids = this.rowsByUid[keys[parseInt(j.toString(), 10)]];\n        var idxs = Object.keys(uids);\n        for (var i = 0; i < idxs.length; i++) {\n          var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[parseInt(i.toString(), 10)] + ']');\n          var row = uids[idxs[parseInt(i.toString(), 10)]];\n          if (row.isCaptionRow) {\n            if (!this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(row, tr_1, keys[parseInt(j.toString(), 10)]);\n            } else {\n              row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1 : row.cells[row.indent + 1].colSpan - 1;\n              if (tr_1) {\n                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n              }\n            }\n          }\n          if (row.isDataRow) {\n            this.showAndHideCells(tr_1, idx, displayVal, false);\n            row.cells[parseInt(oriIdx.toString(), 10)].visible = displayVal === '' ? true : false;\n          }\n          if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n            row.cells[parseInt(oriIdx.toString(), 10)].visible = displayVal === '' ? true : false;\n            row.visible = row.cells.some(function (cell) {\n              return cell.isDataCell && cell.visible;\n            });\n            this.showAndHideCells(tr_1, idx, displayVal, true, row);\n          }\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n    var capRow = row;\n    var captionData = row.data;\n    var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n    data.uid = row.uid;\n    data.isExpand = row.isExpand;\n    data.lazyLoadCssClass = row.lazyLoadCssClass;\n    this.rowsByUid[parseInt(index.toString(), 10)][row.uid] = data;\n    this.groupCache[parseInt(index.toString(), 10)][this.objIdxByUid[parseInt(index.toString(), 10)][row.uid]] = data;\n    if (tr) {\n      var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n      tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n    }\n  };\n  GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n    if (tr) {\n      var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n      setStyleAttribute(tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)], {\n        'display': displayVal\n      });\n      if (tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)].classList.contains('e-hide')) {\n        removeClass([tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)]], ['e-hide']);\n      }\n      if (isSummary) {\n        if (row.visible && tr.classList.contains('e-hide')) {\n          removeClass([tr], ['e-hide']);\n        } else if (!row.visible) {\n          addClass([tr], ['e-hide']);\n        }\n      }\n    }\n  };\n  return GroupLazyLoadRenderer;\n}(ContentRender);\nexport { GroupLazyLoadRenderer };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","remove","isNullOrUndefined","setStyleAttribute","removeClass","addClass","ContentRender","events","isRowEnteredInGrid","parentsUntil","setDisplayValue","generateExpandPredicates","getPredicates","getGroupKeysAndFields","RowRenderer","GroupModelGenerator","GroupSummaryModelGenerator","CaptionSummaryModelGenerator","literals","GroupLazyLoadRenderer","_super","parent","locator","_this","call","childCount","scrollData","isFirstChildRow","isScrollDown","isScrollUp","groupCache","cacheRowsObj","startIndexes","captionCounts","rowsByUid","objIdxByUid","initialGroupCaptions","requestType","scrollTopCache","undefined","refRowsObj","cacheMode","cacheBlockSize","ignoreAccent","allowFiltering","filterSettings","allowCaseSensitive","lazyLoadQuery","groupGenerator","summaryModelGen","captionModelGen","rowRenderer","eventListener","addEventListener","actionBegin","bind","actionComplete","on","initialEnd","setLazyLoadPageSize","setGroupCache","setCache","lazyLoadScrollHandler","scrollHandler","columnVisibilityChanged","setVisible","groupCollapse","collapseShortcut","captionExpand","tr","page","pageSettings","currentPage","rowsObject","parseInt","toString","uid","getAttribute","refreshCaches","scrollModule","scrollTop","enableVirtualization","oriIndex","getRowObjectIndexByUid","isRowExist","indent","data","key","i","fields","length","column","getColumnByField","enableGroupByFormat","keys","getService","fromView","getParser","type","e","captionRowElement","groupInfo","enableCaching","cancel","trigger","lazyLoadGroupExpand","args","rowIndex","makeRequest","clearCache","skip","take","pageSize","isExpand","captionRowExpand","captionCollapse","cache","rowIdx","captionIndex","lazyLoadGroupCollapse","query","where","removeCollapse","splice","removeRows","enableInfiniteScrolling","refreshRowObjects","scrollEle","getContent","firstElementChild","blockSize","Math","floor","offsetHeight","getRowHeight","ceil","clearLazyGroupCache","uids","getInitialCaptionIndexes","capIdx","capRow","i_1","isCaptionRow","getRowElementByUID","groupModule","expandCollapseRows","querySelector","child","getNextChilds","subChild","getChildRowsByParentIndex","indexOf","start","end","maintainRows","push","groupSettings","columns","target","content","parentElement","tagName","collapse","row","rowObj","getRowByUid","parentUid","capEle","getRowElementByUid","cells","some","value","resetRowMaintenance","contentModule","currentInfo","j","isEmpty","changeCaptionRow","isDataRow","from","fromIndex","to","toIndex","moveCells","action","scrollReset","arr","k","idx","trIdx","rows","trs","slice","querySelectorAll","aggUid","count","aggregates","agg","getAggregateByCaptionIndex","capUid","notify","refreshVirtualLazyLoadCache","setVirtualHeight","islazyloadRequest","getContentTable","scrollHeight","clientHeight","height","setLastRowCell","refreshExpandandCollapse","last","lazyLoadCssClass","index","rowObjects","group","childRows","lazyLoadHandler","setStartIndexes","captionRow","isScroll","setRowIndexes","refreshCaptionRowCount","generateCaptionRow","level","parentGid","concat","generateRows","getStartIndex","generateDataRows","nxtChild","lastRow","up","hasLastChildRow","rowObjectIndex","uid_1","isTop","render","lastCaptionRowBorder","enableVirtualMaskRow","removeMaskRow","prevCapRow","prevCaptionCount","indexes","captionCount","rowCount","rowHeight","insertAdjacentElement","getColumns","confirmRowRendering","check","cap","newRows","newRowsObject","updateCurrentViewData","deep","block","includeAgg","includeCollapseAgg","parentRow","initialGroupRows","isReorder","getRenderedRowsObject","getCacheRowsOnDownScroll","getCacheRowsOnUpScroll","str","isDestroyed","downTrs","getElementsByClassName","upTrs","endTrs","lazyLoadDown","lazyLoadUp","lazyLoadEnd","scrollDown","result","findRowElements","entered","top_1","getBoundingClientRect","top","classList","contains","scrollDownHandler","scrollUpEndRowHandler","scrollUpHandler","childRow","parentCapRow","capRowObjIdx","captionRowEle","capRowEleIndex","childIdx","getCurrentBlockEndIndex","child_1","currenBlock","removeBlock","cachedRowIndex","lastchild","child_2","uid1","uid2","uid3","firstIdx","add","removeTopRows","size","lastIdx","trEle","removeBottomRows","removeAttribute","scrollUp","blockIndexes","offsets","lazyLoadRender","groupCacheKeys","field","pred","predicateList","lazyLoad","renderModule","generateQuery","isCountRequired","showMaskRow","showSpinner","getData","then","hideSpinner","catch","dataManagerFailure","records","getRows","filter","currentViewData","getGroupCache","getRowElements","getRowByIndex","ariaRowIndex","gObj","testRow","r","contentrows","isDetailRow","getNormalizedColumnIndex","colIdx","getColumnIndexByUid","displayVal","visible","getColGroup","childNodes","setDisplayNone","getDataRows","invokedFromMedia","hideAtMedia","updateMediaColumns","oriIdx","idxs","tr_1","colSpan","showAndHideCells","cell","isDataCell","captionData","tIndex","tbody","replaceChild","isSummary","cls"],"sources":["D:/weektable/frontend/node_modules/@syncfusion/ej2-grids/src/grid/renderer/group-lazy-load-renderer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */ (function (_super) {\n    __extends(GroupLazyLoadRenderer, _super);\n    function GroupLazyLoadRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.childCount = 0;\n        _this.scrollData = [];\n        _this.isFirstChildRow = false;\n        _this.isScrollDown = false;\n        _this.isScrollUp = false;\n        _this.groupCache = {};\n        _this.cacheRowsObj = {};\n        _this.startIndexes = {};\n        _this.captionCounts = {};\n        _this.rowsByUid = {};\n        _this.objIdxByUid = {};\n        _this.initialGroupCaptions = {};\n        _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete',\n            'filterBeforeOpen', 'filterchoicerequest', 'infiniteScroll', 'virtualscroll'];\n        _this.scrollTopCache = undefined;\n        /** @hidden */\n        _this.refRowsObj = {};\n        /** @hidden */\n        _this.cacheMode = false;\n        /** @hidden */\n        _this.cacheBlockSize = 5;\n        /** @hidden */\n        _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n        /** @hidden */\n        _this.allowCaseSensitive = false;\n        /** @hidden */\n        _this.lazyLoadQuery = [];\n        _this.locator = locator;\n        _this.groupGenerator = new GroupModelGenerator(_this.parent);\n        _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n        _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n        _this.eventListener();\n        return _this;\n    }\n    GroupLazyLoadRenderer.prototype.eventListener = function () {\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n        this.parent.on(events.setGroupCache, this.setCache, this);\n        this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n        var _this = this;\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[parseInt(page.toString(), 10)];\n        var uid = tr.getAttribute('data-uid');\n        this.refreshCaches();\n        if ((!this.scrollTopCache || this.parent.scrollModule['content'].scrollTop > this.scrollTopCache) &&\n            !this.parent.enableVirtualization) {\n            this.scrollTopCache = this.parent.scrollModule['content'].scrollTop;\n        }\n        var oriIndex = this.getRowObjectIndexByUid(uid);\n        var isRowExist = rowsObject[oriIndex + 1] ?\n            rowsObject[parseInt(oriIndex.toString(), 10)].indent < rowsObject[oriIndex + 1].indent : false;\n        if (this.parent.enableVirtualization) {\n            isRowExist = this.cacheRowsObj[\"\" + uid] ? true : false;\n        }\n        var data = rowsObject[parseInt(oriIndex.toString(), 10)];\n        var key = getGroupKeysAndFields(oriIndex, rowsObject);\n        for (var i = 0; i < key.fields.length; i++) {\n            var column = this.parent.getColumnByField(key.fields[parseInt(i.toString(), 10)]);\n            if (column.enableGroupByFormat) {\n                key.keys[parseInt(i.toString(), 10)] = this.locator.getService('valueFormatter').fromView(key.keys[parseInt(i.toString(), 10)], column.getParser(), (column.type === 'dateonly' ? 'date' : column.type));\n            }\n        }\n        var e = { captionRowElement: tr, groupInfo: data, enableCaching: true, cancel: false };\n        this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.keys = key.keys;\n            args.fields = key.fields;\n            args.rowIndex = tr.rowIndex;\n            args.makeRequest = !args.enableCaching || !isRowExist;\n            if (!args.enableCaching && isRowExist) {\n                _this.clearCache([uid]);\n            }\n            args.skip = 0;\n            args.take = _this.pageSize;\n            data.isExpand = true;\n            if (_this.rowsByUid[parseInt(page.toString(), 10)][data.uid]) {\n                _this.rowsByUid[parseInt(page.toString(), 10)][data.uid].isExpand = true;\n            }\n            _this.captionRowExpand(args);\n        });\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n        var _this = this;\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var rowIdx = tr.rowIndex;\n        var uid = tr.getAttribute('data-uid');\n        this.refreshCaches();\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var e = {\n            captionRowElement: tr, groupInfo: cache[parseInt(captionIndex.toString(), 10)], cancel: false\n        };\n        this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.isExpand = false;\n            for (var i = 0; i < _this.lazyLoadQuery.length; i++) {\n                var query = _this.lazyLoadQuery[parseInt(i.toString(), 10)];\n                var where = query[0];\n                var removeCollapse = args.groupInfo.data;\n                if (removeCollapse['key'] === where['value']) {\n                    _this.lazyLoadQuery.splice(i, 1);\n                }\n            }\n            _this.removeRows(captionIndex, rowIdx, uid);\n            if (_this.parent.enableInfiniteScrolling || _this.parent.enableVirtualization) {\n                _this.groupCache[_this.parent.pageSettings.currentPage] = extend([], _this.refRowsObj[_this.parent.pageSettings.currentPage]);\n                _this.refreshRowObjects([], captionIndex);\n            }\n        });\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n        this.blockSize = Math.ceil(this.pageSize / 2);\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n        this.clearCache();\n    };\n    GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n        uids = uids ? uids : this.getInitialCaptionIndexes();\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (uids.length) {\n            for (var i = 0; i < uids.length; i++) {\n                var capIdx = this.getRowObjectIndexByUid(uids[parseInt(i.toString(), 10)]);\n                var capRow = cache[parseInt(capIdx.toString(), 10)];\n                if (!capRow) {\n                    continue;\n                }\n                if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n                    for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n                        if (cache[parseInt(i_1.toString(), 10)].indent === capRow.indent\n                            || cache[parseInt(i_1.toString(), 10)].indent < capRow.indent) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n                            break;\n                        }\n                        if (cache[parseInt(i_1.toString(), 10)].isCaptionRow) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][cache[parseInt(i_1.toString(), 10)].uid];\n                        }\n                    }\n                }\n                if (capRow.isExpand) {\n                    var tr = this.parent.getRowElementByUID(capRow.uid);\n                    if (!tr) {\n                        return;\n                    }\n                    this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n                }\n                var child = this.getNextChilds(capIdx);\n                if (!child.length) {\n                    continue;\n                }\n                var subChild = [];\n                if (child[child.length - 1].isCaptionRow) {\n                    subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n                }\n                var start = cache.indexOf(child[0]);\n                var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n                cache.splice(start, end - (start - 1));\n                this.refreshCaches();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[parseInt(page.toString(), 10)];\n        if (this.parent.enableInfiniteScrolling) {\n            this.rowsByUid[parseInt(page.toString(), 10)] = [];\n            this.objIdxByUid[parseInt(page.toString(), 10)] = [];\n        }\n        else {\n            this.rowsByUid = {};\n            this.objIdxByUid = {};\n        }\n        for (var i = 0; i < cache.length; i++) {\n            this.maintainRows(cache[parseInt(i.toString(), 10)], i);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var uids = [];\n        for (var i = 0; i < this.initialGroupCaptions[parseInt(page.toString(), 10)].length; i++) {\n            uids.push(this.initialGroupCaptions[parseInt(page.toString(), 10)][parseInt(i.toString(), 10)].uid);\n        }\n        return uids;\n    };\n    /**\n     * @param {string} uid - specifies the uid\n     * @returns {number} returns the row object uid\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n        return this.objIdxByUid[this.parent.pageSettings.currentPage][\"\" + uid];\n    };\n    GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n        if (this.parent.groupSettings.columns.length &&\n            args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n            if (!args.collapse && parentsUntil(args.target, literals.row)) {\n                return;\n            }\n            var row = args.target.parentElement;\n            var uid = row.getAttribute('data-uid');\n            if (args.collapse) {\n                var rowObj = this.getRowByUid(uid);\n                var capRow = this.getRowByUid(rowObj.parentUid);\n                if (capRow.isCaptionRow && capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(rowObj.parentUid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n                }\n            }\n            else {\n                var capRow = this.getRowByUid(uid);\n                if (capRow.isCaptionRow && !capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(uid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n        return this.rowsByUid[this.parent.pageSettings.currentPage][\"\" + uid];\n    };\n    GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n        if (!args.cancel) {\n            if (!this.requestType.some(function (value) { return value === args.requestType; })) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n                if (this.parent.enableVirtualization) {\n                    this.parent.contentModule.currentInfo = {};\n                }\n            }\n            if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n                var keys = Object.keys(this.groupCache);\n                for (var j = 0; j < keys.length; j++) {\n                    var cache = this.groupCache[keys[parseInt(j.toString(), 10)]];\n                    for (var i = 0; i < cache.length; i++) {\n                        if (cache[parseInt(i.toString(), 10)].isCaptionRow && !this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(cache[parseInt(i.toString(), 10)], null, keys[parseInt(j.toString(), 10)]);\n                        }\n                        if (cache[parseInt(i.toString(), 10)].isDataRow) {\n                            var from = args.fromIndex + cache[parseInt(i.toString(), 10)].indent;\n                            var to = args.toIndex + cache[parseInt(i.toString(), 10)].indent;\n                            this.moveCells(cache[parseInt(i.toString(), 10)].cells, from, to);\n                        }\n                    }\n                }\n            }\n            if (args.requestType === 'delete'\n                || (args.action === 'add' && args.requestType === 'save')) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n                if (this.parent.enableVirtualization) {\n                    this.parent.contentModule.currentInfo = {};\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n        if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit'\n            && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder'\n            && args.requestType !== 'infiniteScroll') {\n            this.scrollReset();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n        this.startIndexes = {};\n        this.captionCounts = {};\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        this.initialGroupCaptions = {};\n    };\n    GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n        if (from >= arr.length) {\n            var k = from - arr.length;\n            while ((k--) + 1) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(from, 0, arr.splice(to, 1)[0]);\n    };\n    GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx, uid) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var aggUid;\n        var count = 0;\n        if (this.parent.aggregates.length) {\n            var agg = this.getAggregateByCaptionIndex(idx);\n            aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n        }\n        var indent = rows[parseInt(idx.toString(), 10)].indent;\n        this.addClass(this.getNextChilds(parseInt(idx.toString(), 10)));\n        rows[parseInt(idx.toString(), 10)].isExpand = false;\n        if (this.rowsByUid[parseInt(page.toString(), 10)][rows[parseInt(idx.toString(), 10)].uid]) {\n            this.rowsByUid[parseInt(page.toString(), 10)][rows[parseInt(idx.toString(), 10)].uid].isExpand = false;\n        }\n        var capUid;\n        for (var i = idx + 1; i < rows.length; i++) {\n            if (rows[parseInt(i.toString(), 10)].indent === indent || rows[parseInt(i.toString(), 10)].indent < indent) {\n                capUid = rows[parseInt(i.toString(), 10)].uid;\n                break;\n            }\n            if (rows[parseInt(i.toString(), 10)].isCaptionRow && rows[parseInt(i.toString(), 10)].isExpand) {\n                this.addClass(this.getNextChilds(i));\n            }\n        }\n        for (var i = trIdx + 1; i < trs.length; i++) {\n            if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === capUid) {\n                break;\n            }\n            else if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === aggUid) {\n                remove(trs[parseInt(i.toString(), 10)]);\n                break;\n            }\n            else {\n                remove(trs[parseInt(i.toString(), 10)]);\n                this.refRowsObj[parseInt(page.toString(), 10)].splice(trIdx + 1, 1);\n                count = count + 1;\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            this.cacheRowsObj[\"\" + uid] = this.groupCache[parseInt(page.toString(), 10)].slice(idx + 1, idx + 1 + count);\n            this.groupCache[parseInt(page.toString(), 10)].splice(idx + 1, count);\n            this.parent.notify(events.refreshVirtualLazyLoadCache, { rows: [], uid: rows[parseInt(idx.toString(), 10)].uid, count: count });\n            this.parent.contentModule.setVirtualHeight();\n            this.parent.islazyloadRequest = false;\n        }\n        if (this.parent.scrollModule['content'].scrollTop > this.scrollTopCache && !this.parent.enableVirtualization) {\n            this.parent.scrollModule['content'].scrollTop = this.scrollTopCache;\n        }\n        if (this.parent.getContentTable().scrollHeight < this.parent.getContent().clientHeight && this.parent.height !== 'auto') {\n            this.parent.scrollModule.setLastRowCell();\n        }\n        this.parent.notify(events.refreshExpandandCollapse, { rows: this.refRowsObj[parseInt(page.toString(), 10)] });\n    };\n    GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n        var last = rows[this.blockSize];\n        if (last) {\n            last.lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n        var group = this.groupCache[this.parent.pageSettings.currentPage];\n        var rows = rowObjects ? rowObjects : group;\n        var indent = group[parseInt(index.toString(), 10)].indent + 1;\n        var childRows = [];\n        for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n            if (rows[parseInt(i.toString(), 10)].indent < indent) {\n                break;\n            }\n            if (rows[parseInt(i.toString(), 10)].indent === indent) {\n                childRows.push(rows[parseInt(i.toString(), 10)]);\n            }\n        }\n        return childRows;\n    };\n    GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n        this.setStartIndexes();\n        var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var captionRow = this.groupCache[this.parent.pageSettings.currentPage][parseInt(captionIndex.toString(), 10)];\n        var rows = args.isRowExist ? args.isScroll ? this.scrollData\n            : this.parent.enableVirtualization ? this.cacheRowsObj[\"\" + uid] :\n                this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n        this.scrollData = [];\n        if (!args.isRowExist) {\n            this.setRowIndexes(captionIndex, captionRow);\n            this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][parseInt(captionIndex.toString(), 10)], args.count);\n            if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n                for (var i = 0; i < args.data.length; i++) {\n                    var data = this.groupGenerator.generateCaptionRow(args.data[parseInt(i.toString(), 10)], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n                    rows.push(data);\n                    if (this.parent.aggregates.length) {\n                        rows = rows.concat((this.summaryModelGen.generateRows(args.data[parseInt(i.toString(), 10)], { level: args.level + 1, parentUid: data.uid })));\n                    }\n                }\n            }\n            else {\n                this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n                rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n            }\n        }\n        var trIdx = args.isScroll ? this.rowIndex : args.index;\n        var nxtChild = this.getNextChilds(captionIndex, rows);\n        var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n        if (!args.isRowExist && !lastRow) {\n            nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n        if (!lastRow) {\n            nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n        }\n        var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n        if (!args.up) {\n            if (!args.isRowExist || (this.parent.enableVirtualization && args.isRowExist && this.cacheRowsObj[\"\" + uid])) {\n                this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            var uid_1 = args.isScroll ? this.groupCache[this.parent.pageSettings.currentPage][this.rowIndex].uid : captionRow.uid;\n            this.parent.notify(events.refreshVirtualLazyLoadCache, { rows: rows, uid: uid_1 });\n            this.parent.contentModule.setVirtualHeight();\n            this.parent.contentModule.isTop = false;\n        }\n        this.render(trIdx, rows, lastRow, aggregates);\n        if (this.isFirstChildRow && !args.up) {\n            this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n        }\n        this.isFirstChildRow = false;\n        this.rowIndex = undefined;\n        this.rowObjectIndex = undefined;\n        this.childCount = 0;\n        for (var i = 0; i < rows.length; i++) {\n            this.refRowsObj[this.parent.pageSettings.currentPage].splice(captionIndex + i + 1, 0, rows[parseInt(i.toString(), 10)]);\n        }\n        if (lastRow && tr.querySelector('.e-lastrowcell')) {\n            this.parent.groupModule.lastCaptionRowBorder();\n        }\n        this.parent.notify(events.refreshExpandandCollapse, { rows: this.refRowsObj[this.parent.pageSettings.currentPage] });\n        if (this.parent.enableVirtualMaskRow) {\n            this.parent.removeMaskRow();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n        if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n            this.captionCounts[this.parent.pageSettings.currentPage] = {};\n        }\n        if (row.isCaptionRow) {\n            this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[parseInt(page.toString(), 10)];\n        if (isScroll) {\n            return cache[this.rowObjectIndex].index + 1;\n        }\n        var count = 0;\n        var idx = 0;\n        var prevCapRow = this.getRowByUid(cache[parseInt(capIdx.toString(), 10)].parentUid);\n        if (prevCapRow) {\n            idx = this.prevCaptionCount(prevCapRow);\n        }\n        if (cache[parseInt(capIdx.toString(), 10)].indent > 0) {\n            for (var i = capIdx - 1; i >= 0; i--) {\n                if (cache[parseInt(i.toString(), 10)].indent < cache[parseInt(capIdx.toString(), 10)].indent) {\n                    break;\n                }\n                if (cache[parseInt(i.toString(), 10)].isCaptionRow && cache[parseInt(i.toString(), 10)]\n                    .indent === cache[parseInt(capIdx.toString(), 10)].indent) {\n                    count = count + cache[parseInt(i.toString(), 10)].data.count;\n                }\n            }\n        }\n        var index = count + idx\n            + this.startIndexes[parseInt(page.toString(), 10)][cache[parseInt(capIdx.toString(), 10)].parentGid];\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[parseInt(page.toString(), 10)];\n        var idx = 0;\n        for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n            if (cache[parseInt(i.toString(), 10)].indent === 0) {\n                break;\n            }\n            if (cache[parseInt(i.toString(), 10)].indent < prevCapRow.indent) {\n                break;\n            }\n            if (cache[parseInt(i.toString(), 10)].isCaptionRow && cache[parseInt(i.toString(), 10)].indent === prevCapRow.indent) {\n                var count = this.captionCounts[parseInt(page.toString(), 10)][cache[parseInt(i.toString(), 10)].uid];\n                idx = idx + (count ? count : cache[parseInt(i.toString(), 10)].data.count);\n            }\n        }\n        var capRow = this.getRowByUid(prevCapRow.parentUid);\n        if (capRow) {\n            idx = idx + this.prevCaptionCount(capRow);\n        }\n        return idx;\n    };\n    GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n            var indexes = [];\n            var idx = void 0;\n            for (var i = 0; i < cache.length; i++) {\n                if (cache[parseInt(i.toString(), 10)].isCaptionRow) {\n                    if (!indexes.length) {\n                        indexes.push(0);\n                    }\n                    else {\n                        indexes.push(cache[parseInt(idx.toString(), 10)].data.count + indexes[indexes.length - 1]);\n                    }\n                    idx = i;\n                }\n            }\n            this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n        return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n        row.data.count = count;\n    };\n    GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n        var tr = this.parent.getContent().querySelectorAll('tr')[parseInt(trIdx.toString(), 10)];\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var rowHeight = this.parent.getRowHeight();\n        if (tr && aggregates.length) {\n            for (var i = aggregates.length - 1; i >= 0; i--) {\n                tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[parseInt(i.toString(), 10)], this.parent.getColumns()));\n            }\n        }\n        if (tr && rows.length) {\n            for (var i = rows.length - 1; i >= 0; i--) {\n                if (this.confirmRowRendering(rows[parseInt(i.toString(), 10)])) {\n                    tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[parseInt(i.toString(), 10)], this.parent.getColumns()));\n                    if (this.isScrollDown) {\n                        scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n                    }\n                    if (this.isScrollUp) {\n                        scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n                    }\n                }\n            }\n        }\n        this.isScrollDown = false;\n        this.isScrollUp = false;\n    };\n    /**\n     * @param {Row<Column>} row - specifies the row\n     * @param {number} index - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        if (!this.rowsByUid[parseInt(page.toString(), 10)]) {\n            this.rowsByUid[parseInt(page.toString(), 10)] = {};\n            this.objIdxByUid[parseInt(page.toString(), 10)] = {};\n        }\n        if (row.uid) {\n            this.rowsByUid[parseInt(page.toString(), 10)][row.uid] = row;\n        }\n        this.objIdxByUid[parseInt(page.toString(), 10)][row.uid] = index;\n    };\n    GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n        var check = true;\n        if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n            var cap = this.getRowByUid(row.parentUid);\n            if (cap.isCaptionRow && !cap.isExpand) {\n                check = false;\n            }\n        }\n        return check;\n    };\n    GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[parseInt(page.toString(), 10)];\n        this.rowsByUid[parseInt(page.toString(), 10)] = {};\n        this.objIdxByUid[parseInt(page.toString(), 10)] = {};\n        var newRowsObject = [];\n        var k = 0;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (i === index) {\n                this.maintainRows(rowsObject[parseInt(i.toString(), 10)], k);\n                newRowsObject.push(rowsObject[parseInt(i.toString(), 10)]);\n                k++;\n                for (var j = 0; j < newRows.length; j++) {\n                    this.maintainRows(newRows[parseInt(j.toString(), 10)], k);\n                    newRowsObject.push(newRows[parseInt(j.toString(), 10)]);\n                    k++;\n                }\n            }\n            else {\n                this.maintainRows(rowsObject[parseInt(i.toString(), 10)], k);\n                newRowsObject.push(rowsObject[parseInt(i.toString(), 10)]);\n                k++;\n            }\n        }\n        this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n        this.updateCurrentViewData();\n    };\n    GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var parent = cache[parseInt(index.toString(), 10)];\n        var indent = parent.indent;\n        var uid = parent.uid;\n        var agg = [];\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[parseInt(i.toString(), 10)].indent === indent) {\n                break;\n            }\n            if (isNullOrUndefined(cache[parseInt(i.toString(), 10)].indent) && cache[parseInt(i.toString(), 10)].parentUid === uid) {\n                agg.push(cache[parseInt(i.toString(), 10)]);\n            }\n        }\n        return agg;\n    };\n    GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n        var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n        var parentRow = cache[parseInt(index.toString(), 10)];\n        var agg = [];\n        if (!parentRow.isCaptionRow || (parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg)) {\n            return [];\n        }\n        if (includeAgg && this.parent.aggregates.length) {\n            agg = this.getAggregateByCaptionIndex(index);\n        }\n        var indent = parentRow.indent;\n        var uid = parentRow.uid;\n        var rows = [];\n        var count = 0;\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[parseInt(i.toString(), 10)].parentUid === uid) {\n                if (isNullOrUndefined(cache[parseInt(i.toString(), 10)].indent)) {\n                    continue;\n                }\n                count++;\n                rows.push(cache[parseInt(i.toString(), 10)]);\n                if (deep && cache[parseInt(i.toString(), 10)].isCaptionRow) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n                }\n                if (block && count === this.pageSize) {\n                    break;\n                }\n            }\n            if (cache[parseInt(i.toString(), 10)].indent === indent) {\n                break;\n            }\n        }\n        return rows.concat(agg);\n    };\n    /**\n     * @param {boolean} isReorder - specifies the isreorder\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n        var rows = [];\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (isReorder) {\n            return this.getRenderedRowsObject();\n        }\n        for (var i = 0; i < cache.length; i++) {\n            if (cache[parseInt(i.toString(), 10)].indent === 0) {\n                rows.push(cache[parseInt(i.toString(), 10)]);\n                rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n            }\n        }\n        return rows;\n    };\n    /**\n     * @returns {Row<Column>[]} retruns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n        var rows = [];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        for (var i = 0; i < trs.length; i++) {\n            rows.push(this.getRowByUid(trs[parseInt(i.toString(), 10)].getAttribute('data-uid')));\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var k = index;\n        for (var i = 0; i < this.pageSize; i++) {\n            if (!rowsObject[parseInt(k.toString(), 10)] || rowsObject[parseInt(k.toString(), 10)]\n                .indent < rowsObject[parseInt(index.toString(), 10)].indent) {\n                break;\n            }\n            if (rowsObject[parseInt(k.toString(), 10)].indent === rowsObject[parseInt(index.toString(), 10)].indent) {\n                rows.push(rowsObject[parseInt(k.toString(), 10)]);\n                if (rowsObject[parseInt(k.toString(), 10)].isCaptionRow && rowsObject[parseInt(k.toString(), 10)].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n                }\n            }\n            if (rowsObject[parseInt(k.toString(), 10)].indent > rowsObject[parseInt(index.toString(), 10)].indent\n                || isNullOrUndefined(rowsObject[parseInt(k.toString(), 10)].indent)) {\n                i--;\n            }\n            k++;\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var str = false;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (str && (!rowsObject[parseInt(i.toString(), 10)] || rowsObject[parseInt(i.toString(), 10)]\n                .indent < rowsObject[parseInt(index.toString(), 10)].indent || rowsObject[parseInt(i.toString(), 10)].uid === end)) {\n                break;\n            }\n            if (!str && rowsObject[parseInt(i.toString(), 10)].uid === start) {\n                str = true;\n            }\n            if (str && rowsObject[parseInt(i.toString(), 10)].indent === rowsObject[parseInt(index.toString(), 10)].indent) {\n                rows.push(rowsObject[parseInt(i.toString(), 10)]);\n                if (rowsObject[parseInt(i.toString(), 10)].isCaptionRow && rowsObject[parseInt(i.toString(), 10)].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n                }\n            }\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n        if (this.parent.isDestroyed || this.childCount) {\n            return;\n        }\n        var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n        var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n        var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n        var tr;\n        var lazyLoadDown = false;\n        var lazyLoadUp = false;\n        var lazyLoadEnd = false;\n        if (e.scrollDown && downTrs.length) {\n            var result = this.findRowElements(downTrs);\n            tr = result.tr;\n            lazyLoadDown = result.entered;\n        }\n        if (!e.scrollDown && endTrs) {\n            for (var i = 0; i < endTrs.length; i++) {\n                var top_1 = endTrs[parseInt(i.toString(), 10)].getBoundingClientRect().top;\n                var scrollHeight = this.parent.getContent().scrollHeight;\n                if (top_1 > 0 && top_1 < scrollHeight) {\n                    tr = endTrs[parseInt(i.toString(), 10)];\n                    lazyLoadEnd = true;\n                    this.rowIndex = tr.rowIndex;\n                    break;\n                }\n            }\n        }\n        if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n            var result = this.findRowElements(upTrs);\n            tr = result.tr;\n            lazyLoadUp = result.entered;\n        }\n        if (tr && !tr.classList.contains('e-masked-row')) {\n            if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n                this.scrollDownHandler(tr);\n            }\n            if (!e.scrollDown && lazyLoadEnd && tr) {\n                this.scrollUpEndRowHandler(tr);\n            }\n            if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n                this.scrollUpHandler(tr);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[parseInt(index.toString(), 10)];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        if (currentPage === 1) {\n            return;\n        }\n        this.childCount = currentPage * this.pageSize;\n        index = this.getCurrentBlockEndIndex(childRow, index);\n        if (this.childCount < parentCapRow.data.count) {\n            tr.classList.remove('e-not-lazyload-end');\n            childRow.lazyLoadCssClass = '';\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n            var key = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: key.fields,\n                keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && this.childCount >= (this.pageSize * this.cacheBlockSize)) {\n                var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_1.indexOf(rows[parseInt(idx.toString(), 10)]) / this.pageSize));\n                var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n                this.removeBlock(uid, isRowExist, removeBlock, child_1);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[parseInt(index.toString(), 10)];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        if (child.length === 0) {\n            return;\n        }\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        this.childCount = currentPage * this.pageSize;\n        if (isNullOrUndefined(child[this.childCount - 1])) {\n            return;\n        }\n        if (this.parent.enableVirtualization) {\n            this.parent.islazyloadRequest = true;\n        }\n        index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n        var lastchild = rows[parseInt(index.toString(), 10)];\n        var lastRow = this.getRowElementByUid(lastchild.uid);\n        this.rowIndex = lastRow.rowIndex;\n        index = this.getCurrentBlockEndIndex(lastchild, index);\n        if (this.childCount === parentCapRow.data.count) {\n            this.parent.islazyloadRequest = false;\n        }\n        if (this.childCount < parentCapRow.data.count) {\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n                this.parent.islazyloadRequest = false;\n                this.childCount = 0;\n                return;\n            }\n            if (currentPage > 1 || !this.cacheMode) {\n                tr.classList.remove('e-lazyload-middle-down');\n                lastRow.classList.remove('e-not-lazyload-end');\n                lastchild.lazyLoadCssClass = '';\n            }\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n            var query = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: query.fields,\n                keys: query.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && (this.childCount - this.pageSize) >= (this.pageSize * this.cacheBlockSize)) {\n                this.isScrollDown = true;\n                var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_2.indexOf(rows[parseInt(idx.toString(), 10)]) / this.pageSize)) - 1;\n                var removeBlock = (currenBlock - (this.cacheBlockSize - 1)) + 1;\n                this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n            this.parent.islazyloadRequest = false;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        if (row.isCaptionRow) {\n            if (row.isExpand) {\n                var childCount = this.getChildRowsByParentIndex(index, true).length;\n                this.rowIndex = this.rowIndex + childCount;\n            }\n            var agg = this.getAggregateByCaptionIndex(index);\n            this.rowObjectIndex = this.rowObjectIndex + agg.length;\n            var idx = index;\n            for (var i = idx + 1; i < rows.length; i++) {\n                if (rows[parseInt(i.toString(), 10)].indent === rows[parseInt(index.toString(), 10)].indent\n                    || rows[parseInt(i.toString(), 10)].indent < rows[parseInt(index.toString(), 10)].indent) {\n                    index = idx;\n                    break;\n                }\n                else {\n                    idx++;\n                }\n            }\n        }\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var uid1 = child[(((removeBlock + 1) * this.pageSize) - 1) - this.blockSize].uid;\n        var uid2 = child[(removeBlock * this.pageSize) - this.pageSize].uid;\n        var uid3 = child[(removeBlock * this.pageSize)].uid;\n        var firstIdx = this.getRowObjectIndexByUid(uid1);\n        rows[parseInt(firstIdx.toString(), 10)].lazyLoadCssClass = 'e-lazyload-middle-up';\n        this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n        if (lastchild) {\n            this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n            this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n            this.getRowByUid(uid2).lazyLoadCssClass = '';\n        }\n        if (isRowExist) {\n            this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n        }\n        else {\n            this.uid1 = uid2;\n            this.uid2 = uid3;\n            this.uid3 = lastchild ? lastchild.uid : uid;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[parseInt(page.toString(), 10)];\n        var uid = tr.getAttribute('data-uid');\n        var row = this.getRowByUid(uid);\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var parentCapRow = this.getRowByUid(row.parentUid);\n        var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(rows[parseInt(index.toString(), 10)]);\n        var currenBlock = Math.floor((childIdx / this.pageSize));\n        var idx = this.blockSize;\n        if ((this.blockSize * 2) > this.pageSize) {\n            idx = (this.blockSize * 2) - this.pageSize;\n            idx = this.blockSize - idx;\n        }\n        var start = child[(childIdx - (idx - 1)) - this.pageSize].uid;\n        var end = child[childIdx - (idx - 1)].uid;\n        this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n        this.isFirstChildRow = currenBlock > 1;\n        if (this.isFirstChildRow) {\n            this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n        }\n        this.getRowByUid(end).lazyLoadCssClass = '';\n        this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n        var removeBlock = currenBlock + this.cacheBlockSize;\n        if (child.length !== parentCapRow.data.count && (removeBlock * this.pageSize > child.length)) {\n            this.isFirstChildRow = false;\n            this.scrollData[0].lazyLoadCssClass = '';\n            this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n            return;\n        }\n        var count = removeBlock * this.pageSize > parentCapRow.data.count\n            ? parentCapRow.data.count : removeBlock * this.pageSize;\n        var size = removeBlock * this.pageSize > parentCapRow.data.count\n            ? (this.pageSize - ((this.pageSize * removeBlock) - parentCapRow.data.count)) : this.pageSize;\n        var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n        var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[(count - 1)].uid;\n        var uid2 = child[count - size].uid;\n        var uid3 = child[(count - size) - 1].uid;\n        var lastIdx = this.objIdxByUid[parseInt(page.toString(), 10)][\"\" + uid2] - idx;\n        if (rows[parseInt(lastIdx.toString(), 10)].lazyLoadCssClass === 'e-lazyload-middle-down') {\n            var trEle = this.getRowElementByUid(rows[parseInt(lastIdx.toString(), 10)].uid);\n            if (trEle) {\n                trEle.classList.add('e-lazyload-middle-down');\n            }\n        }\n        this.getRowByUid(uid1).lazyLoadCssClass = '';\n        this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n        this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n        this.removeBottomRows(uid1, uid2, uid3);\n        this.rowIndex = tr.rowIndex - idx;\n        if (tr.classList.length > 1) {\n            tr.classList.remove('e-lazyload-middle-up');\n        }\n        else {\n            tr.removeAttribute('class');\n        }\n        if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n            this.childCount = 0;\n            this.scrollData = [];\n            return;\n        }\n        var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n        var args = {\n            rowIndex: capRowEleIndex, makeRequest: false, groupInfo: parentCapRow, fields: key.fields,\n            keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true, scrollUp: true\n        };\n        this.isScrollUp = true;\n        this.captionRowExpand(args);\n    };\n    GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n        var entered = false;\n        var tr;\n        for (var i = 0; i < rows.length; i++) {\n            var rowIdx = rows[parseInt(i.toString(), 10)].rowIndex;\n            if (this.parent.enableVirtualization) {\n                var currentInfo = this.parent.contentModule.currentInfo;\n                if (currentInfo && currentInfo.blockIndexes && currentInfo.blockIndexes[0] > 1) {\n                    rowIdx = rowIdx + (this.parent.contentModule.offsets[currentInfo.blockIndexes[0] - 1] /\n                        this.parent.getRowHeight());\n                }\n            }\n            if (isRowEnteredInGrid(rowIdx, this.parent)) {\n                entered = true;\n                this.rowIndex = rowIdx;\n                tr = rows[parseInt(i.toString(), 10)];\n                break;\n            }\n        }\n        return { entered: entered, tr: tr };\n    };\n    GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n        return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n    };\n    GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid3) {\n                var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n                if (tr) {\n                    this.rowIndex = tr.rowIndex;\n                }\n                break;\n            }\n            if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[parseInt(i.toString(), 10)]);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var trigger = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid2) {\n                trigger = true;\n            }\n            if (trigger) {\n                remove(trs[parseInt(i.toString(), 10)]);\n                if (trs[parseInt(i.toString(), 10)].getAttribute('data-uid') === uid1) {\n                    break;\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setCache = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        if (this.parent.enableVirtualization) {\n            this.parent.lazyLoadRender = this;\n        }\n        if (this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll' &&\n            e.args['prevPage'] !== e.args['currentPage']) {\n            this.groupCache[parseInt(page.toString(), 10)] = this.initialGroupCaptions[parseInt(page.toString(), 10)] = this.groupCache[e.args['prevPage']]\n                .concat(extend([], e.data));\n            var groupCacheKeys = Object.keys(this.groupCache);\n            for (var i = 0; i < groupCacheKeys.length; i++) {\n                if (e.args['currentPage'] !== parseInt(groupCacheKeys[parseInt(i.toString(), 10)], 10)) {\n                    delete this.groupCache[\"\" + groupCacheKeys[parseInt(i.toString(), 10)]];\n                    delete this.initialGroupCaptions[\"\" + groupCacheKeys[parseInt(i.toString(), 10)]];\n                }\n            }\n        }\n        else {\n            this.groupCache[parseInt(page.toString(), 10)] =\n                this.initialGroupCaptions[parseInt(page.toString(), 10)] = extend([], e.data);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n        var _this = this;\n        var captionRow = args.groupInfo;\n        var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n        var pred = generateExpandPredicates(args.fields, args.keys, this);\n        var predicateList = getPredicates(pred);\n        var lazyLoad = { level: level, skip: args.skip, take: args.take, where: predicateList };\n        args.lazyLoadQuery = lazyLoad;\n        args.requestType = 'onDemandGroupInfo';\n        if (args.makeRequest) {\n            var query = this.parent.renderModule.data.generateQuery(true);\n            if (!query.isCountRequired) {\n                query.isCountRequired = true;\n            }\n            query.lazyLoad.push({ key: 'onDemandGroupInfo', value: lazyLoad });\n            this.lazyLoadQuery.push(lazyLoad['where']);\n            if (args.isScroll && this.parent.enableVirtualMaskRow) {\n                this.parent.showMaskRow();\n            }\n            else {\n                this.parent.showSpinner();\n            }\n            this.parent.renderModule.data.getData(args, query).then(function (e) {\n                if (_this.parent.enableVirtualization) {\n                    _this.parent.islazyloadRequest = true;\n                }\n                _this.parent.hideSpinner();\n                _this.parent.removeMaskRow();\n                if (e.result.length === 0) {\n                    return;\n                }\n                if (_this.cacheMode && _this.uid1 && _this.uid2) {\n                    _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n                    _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n                }\n                _this.lazyLoadHandler({\n                    data: e.result, count: e.count, level: level, index: args.rowIndex,\n                    isRowExist: false, isScroll: args.isScroll, up: false, rowIndex: args.cachedRowIndex\n                });\n            })\n                .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e, { requestType: 'grouping' }); });\n        }\n        else {\n            this.lazyLoadHandler({\n                data: null, count: args.groupInfo.data.count, level: level, index: args.rowIndex,\n                isRowExist: true, isScroll: args.isScroll, up: args.scrollUp, rowIndex: args.cachedRowIndex\n            });\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n        this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n    };\n    GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n        var records = [];\n        this.getRows().filter(function (row) {\n            if (row.isDataRow) {\n                records[row.index] = row.data;\n            }\n        });\n        this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n        return this.groupCache;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRows = function () {\n        return this.groupCache[this.parent.pageSettings.currentPage] || [];\n    };\n    /**\n     * @returns {Element} returns the element\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRowElements = function () {\n        return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n        var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n        var row;\n        for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n            if (parseInt(tr[parseInt(i.toString(), 10)].getAttribute(literals.ariaRowIndex).toString(), 10) - 1 === index) {\n                row = tr[parseInt(i.toString(), 10)];\n                break;\n            }\n        }\n        return row;\n    };\n    /**\n     * Tucntion to set the column visibility\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var contentrows = this.getRows().filter(function (row) { return !row.isDetailRow; });\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[parseInt(i.toString(), 10)];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[parseInt(idx.toString(), 10)], { 'display': displayVal });\n            }\n            this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n    };\n    /**\n     * Function to set display.\n     *\n     * @param {Object} tr - specifies the row object\n     * @param {number} idx - specifies the index\n     * @param {string} displayVal - specifies the display value\n     * @param {Row<Column>[]} rows - specifies the array of rows\n     * @param {number} oriIdx - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n        if (!this.parent.groupSettings.columns.length) {\n            setDisplayValue(tr, idx, displayVal, rows);\n        }\n        else {\n            var keys = Object.keys(this.groupCache);\n            for (var j = 0; j < keys.length; j++) {\n                var uids = this.rowsByUid[keys[parseInt(j.toString(), 10)]];\n                var idxs = Object.keys(uids);\n                for (var i = 0; i < idxs.length; i++) {\n                    var tr_1 = this.parent.getContent()\n                        .querySelector('tr[data-uid=' + idxs[parseInt(i.toString(), 10)] + ']');\n                    var row = uids[idxs[parseInt(i.toString(), 10)]];\n                    if (row.isCaptionRow) {\n                        if (!this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(row, tr_1, keys[parseInt(j.toString(), 10)]);\n                        }\n                        else {\n                            row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1\n                                : row.cells[row.indent + 1].colSpan - 1;\n                            if (tr_1) {\n                                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n                            }\n                        }\n                    }\n                    if (row.isDataRow) {\n                        this.showAndHideCells(tr_1, idx, displayVal, false);\n                        row.cells[parseInt(oriIdx.toString(), 10)].visible = displayVal === '' ? true : false;\n                    }\n                    if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n                        row.cells[parseInt(oriIdx.toString(), 10)].visible = displayVal === '' ? true : false;\n                        row.visible = row.cells.some(function (cell) { return cell.isDataCell && cell.visible; });\n                        this.showAndHideCells(tr_1, idx, displayVal, true, row);\n                    }\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n        var capRow = row;\n        var captionData = row.data;\n        var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n        data.uid = row.uid;\n        data.isExpand = row.isExpand;\n        data.lazyLoadCssClass = row.lazyLoadCssClass;\n        this.rowsByUid[parseInt(index.toString(), 10)][row.uid] = data;\n        this.groupCache[parseInt(index.toString(), 10)][this.objIdxByUid[parseInt(index.toString(), 10)][row.uid]] = data;\n        if (tr) {\n            var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n            tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n        if (tr) {\n            var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n            setStyleAttribute(tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)], { 'display': displayVal });\n            if (tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)].classList.contains('e-hide')) {\n                removeClass([tr.querySelectorAll(cls)[parseInt(idx.toString(), 10)]], ['e-hide']);\n            }\n            if (isSummary) {\n                if (row.visible && tr.classList.contains('e-hide')) {\n                    removeClass([tr], ['e-hide']);\n                }\n                else if (!row.visible) {\n                    addClass([tr], ['e-hide']);\n                }\n            }\n        }\n    };\n    return GroupLazyLoadRenderer;\n}(ContentRender));\nexport { GroupLazyLoadRenderer };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}